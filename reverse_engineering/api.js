"use strict";var v1=Object.defineProperty;var a=(e,t)=>v1(e,"name",{value:t,configurable:!0});var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ZS=y((zZ,QS)=>{var XS=require("stream").Stream,x1=require("util");QS.exports=er;function er(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}a(er,"DelayedStream");x1.inherits(er,XS);er.create=function(e,t){var r=new this;t=t||{};for(var n in t)r[n]=t[n];r.source=e;var i=e.emit;return e.emit=function(){return r._handleEmit(arguments),i.apply(e,arguments)},e.on("error",function(){}),r.pauseStream&&e.pause(),r};Object.defineProperty(er.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});er.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};er.prototype.resume=function(){this._released||this.release(),this.source.resume()};er.prototype.pause=function(){this.source.pause()};er.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]};er.prototype.pipe=function(){var e=XS.prototype.pipe.apply(this,arguments);return this.resume(),e};er.prototype._handleEmit=function(e){if(this._released){this.emit.apply(this,e);return}e[0]==="data"&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e)};er.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}});var nb=y((HZ,rb)=>{var S1=require("util"),tb=require("stream").Stream,eb=ZS();rb.exports=Se;function Se(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}a(Se,"CombinedStream");S1.inherits(Se,tb);Se.create=function(e){var t=new this;e=e||{};for(var r in e)t[r]=e[r];return t};Se.isStreamLike=function(e){return typeof e!="function"&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"&&!Buffer.isBuffer(e)};Se.prototype.append=function(e){var t=Se.isStreamLike(e);if(t){if(!(e instanceof eb)){var r=eb.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=r}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this};Se.prototype.pipe=function(e,t){return tb.prototype.pipe.call(this,e,t),this.resume(),e};Se.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};Se.prototype._realGetNext=function(){var e=this._streams.shift();if(typeof e>"u"){this.end();return}if(typeof e!="function"){this._pipeNext(e);return}var t=e;t(function(r){var n=Se.isStreamLike(r);n&&(r.on("data",this._checkDataSize.bind(this)),this._handleErrors(r)),this._pipeNext(r)}.bind(this))};Se.prototype._pipeNext=function(e){this._currentStream=e;var t=Se.isStreamLike(e);if(t){e.on("end",this._getNext.bind(this)),e.pipe(this,{end:!1});return}var r=e;this.write(r),this._getNext()};Se.prototype._handleErrors=function(e){var t=this;e.on("error",function(r){t._emitError(r)})};Se.prototype.write=function(e){this.emit("data",e)};Se.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};Se.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};Se.prototype.end=function(){this._reset(),this.emit("end")};Se.prototype.destroy=function(){this._reset(),this.emit("close")};Se.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};Se.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}};Se.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){t.dataSize&&(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};Se.prototype._emitError=function(e){this._reset(),this.emit("error",e)}});var ib=y((KZ,b1)=>{b1.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var ob=y((GZ,sb)=>{sb.exports=ib()});var ub=y(bt=>{"use strict";var Ia=ob(),w1=require("path").extname,ab=/^\s*([^;\s]*)(?:;|\s|$)/,E1=/^text\//i;bt.charset=cb;bt.charsets={lookup:cb};bt.contentType=O1;bt.extension=T1;bt.extensions=Object.create(null);bt.lookup=C1;bt.types=Object.create(null);_1(bt.extensions,bt.types);function cb(e){if(!e||typeof e!="string")return!1;var t=ab.exec(e),r=t&&Ia[t[1].toLowerCase()];return r&&r.charset?r.charset:t&&E1.test(t[1])?"UTF-8":!1}a(cb,"charset");function O1(e){if(!e||typeof e!="string")return!1;var t=e.indexOf("/")===-1?bt.lookup(e):e;if(!t)return!1;if(t.indexOf("charset")===-1){var r=bt.charset(t);r&&(t+="; charset="+r.toLowerCase())}return t}a(O1,"contentType");function T1(e){if(!e||typeof e!="string")return!1;var t=ab.exec(e),r=t&&bt.extensions[t[1].toLowerCase()];return!r||!r.length?!1:r[0]}a(T1,"extension");function C1(e){if(!e||typeof e!="string")return!1;var t=w1("x."+e).toLowerCase().substr(1);return t&&bt.types[t]||!1}a(C1,"lookup");function _1(e,t){var r=["nginx","apache",void 0,"iana"];Object.keys(Ia).forEach(a(function(i){var s=Ia[i],o=s.extensions;if(!(!o||!o.length)){e[i]=o;for(var c=0;c<o.length;c++){var l=o[c];if(t[l]){var u=r.indexOf(Ia[t[l]].source),p=r.indexOf(s.source);if(t[l]!=="application/octet-stream"&&(u>p||u===p&&t[l].substr(0,12)==="application/"))continue}t[l]=i}}},"forEachMimeType"))}a(_1,"populateMaps")});var pb=y((XZ,lb)=>{lb.exports=A1;function A1(e){var t=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;t?t(e):setTimeout(e,0)}a(A1,"defer")});var bp=y((ZZ,db)=>{var fb=pb();db.exports=N1;function N1(e){var t=!1;return fb(function(){t=!0}),a(function(n,i){t?e(n,i):fb(a(function(){e(n,i)},"nextTick_callback"))},"async_callback")}a(N1,"async")});var wp=y((tee,hb)=>{hb.exports=R1;function R1(e){Object.keys(e.jobs).forEach(I1.bind(e)),e.jobs={}}a(R1,"abort");function I1(e){typeof this.jobs[e]=="function"&&this.jobs[e]()}a(I1,"clean")});var Ep=y((nee,yb)=>{var mb=bp(),q1=wp();yb.exports=M1;function M1(e,t,r,n){var i=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[i]=P1(t,i,e[i],function(s,o){i in r.jobs&&(delete r.jobs[i],s?q1(r):r.results[i]=o,n(s,r.results))})}a(M1,"iterate");function P1(e,t,r,n){var i;return e.length==2?i=e(r,mb(n)):i=e(r,t,mb(n)),i}a(P1,"runJob")});var Op=y((see,gb)=>{gb.exports=B1;function B1(e,t){var r=!Array.isArray(e),n={index:0,keyedList:r||t?Object.keys(e):null,jobs:{},results:r?{}:[],size:r?Object.keys(e).length:e.length};return t&&n.keyedList.sort(r?t:function(i,s){return t(e[i],e[s])}),n}a(B1,"state")});var Tp=y((aee,vb)=>{var D1=wp(),L1=bp();vb.exports=j1;function j1(e){Object.keys(this.jobs).length&&(this.index=this.size,D1(this),L1(e)(null,this.results))}a(j1,"terminator")});var Sb=y((uee,xb)=>{var U1=Ep(),k1=Op(),F1=Tp();xb.exports=W1;function W1(e,t,r){for(var n=k1(e);n.index<(n.keyedList||e).length;)U1(e,t,n,function(i,s){if(i){r(i,s);return}if(Object.keys(n.jobs).length===0){r(null,n.results);return}}),n.index++;return F1.bind(n,r)}a(W1,"parallel")});var Cp=y((pee,qa)=>{var bb=Ep(),z1=Op(),$1=Tp();qa.exports=H1;qa.exports.ascending=wb;qa.exports.descending=V1;function H1(e,t,r,n){var i=z1(e,r);return bb(e,t,i,a(function s(o,c){if(o){n(o,c);return}if(i.index++,i.index<(i.keyedList||e).length){bb(e,t,i,s);return}n(null,i.results)},"iteratorHandler")),$1.bind(i,n)}a(H1,"serialOrdered");function wb(e,t){return e<t?-1:e>t?1:0}a(wb,"ascending");function V1(e,t){return-1*wb(e,t)}a(V1,"descending")});var Ob=y((dee,Eb)=>{var K1=Cp();Eb.exports=G1;function G1(e,t,r){return K1(e,t,null,r)}a(G1,"serial")});var Cb=y((mee,Tb)=>{Tb.exports={parallel:Sb(),serial:Ob(),serialOrdered:Cp()}});var Ab=y((yee,_b)=>{_b.exports=function(e,t){return Object.keys(t).forEach(function(r){e[r]=e[r]||t[r]}),e}});var Ib=y((gee,Rb)=>{var Rp=nb(),Nb=require("util"),_p=require("path"),Y1=require("http"),J1=require("https"),X1=require("url").parse,Q1=require("fs"),Z1=require("stream").Stream,Ap=ub(),eP=Cb(),Np=Ab();Rb.exports=ie;Nb.inherits(ie,Rp);function ie(e){if(!(this instanceof ie))return new ie(e);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],Rp.call(this),e=e||{};for(var t in e)this[t]=e[t]}a(ie,"FormData");ie.LINE_BREAK=`\r
`;ie.DEFAULT_CONTENT_TYPE="application/octet-stream";ie.prototype.append=function(e,t,r){r=r||{},typeof r=="string"&&(r={filename:r});var n=Rp.prototype.append.bind(this);if(typeof t=="number"&&(t=""+t),Nb.isArray(t)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(e,t,r),s=this._multiPartFooter();n(i),n(t),n(s),this._trackLength(i,t,r)};ie.prototype._trackLength=function(e,t,r){var n=0;r.knownLength!=null?n+=+r.knownLength:Buffer.isBuffer(t)?n=t.length:typeof t=="string"&&(n=Buffer.byteLength(t)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(e)+ie.LINE_BREAK.length,!(!t||!t.path&&!(t.readable&&t.hasOwnProperty("httpVersion"))&&!(t instanceof Z1))&&(r.knownLength||this._valuesToMeasure.push(t))};ie.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?e.end!=null&&e.end!=1/0&&e.start!=null?t(null,e.end+1-(e.start?e.start:0)):Q1.stat(e.path,function(r,n){var i;if(r){t(r);return}i=n.size-(e.start?e.start:0),t(null,i)}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(r){e.pause(),t(null,+r.headers["content-length"])}),e.resume()):t("Unknown stream")};ie.prototype._multiPartHeader=function(e,t,r){if(typeof r.header=="string")return r.header;var n=this._getContentDisposition(t,r),i=this._getContentType(t,r),s="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof r.header=="object"&&Np(o,r.header);var c;for(var l in o)o.hasOwnProperty(l)&&(c=o[l],c!=null&&(Array.isArray(c)||(c=[c]),c.length&&(s+=l+": "+c.join("; ")+ie.LINE_BREAK)));return"--"+this.getBoundary()+ie.LINE_BREAK+s+ie.LINE_BREAK};ie.prototype._getContentDisposition=function(e,t){var r,n;return typeof t.filepath=="string"?r=_p.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?r=_p.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(r=_p.basename(e.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n};ie.prototype._getContentType=function(e,t){var r=t.contentType;return!r&&e.name&&(r=Ap.lookup(e.name)),!r&&e.path&&(r=Ap.lookup(e.path)),!r&&e.readable&&e.hasOwnProperty("httpVersion")&&(r=e.headers["content-type"]),!r&&(t.filepath||t.filename)&&(r=Ap.lookup(t.filepath||t.filename)),!r&&typeof e=="object"&&(r=ie.DEFAULT_CONTENT_TYPE),r};ie.prototype._multiPartFooter=function(){return function(e){var t=ie.LINE_BREAK,r=this._streams.length===0;r&&(t+=this._lastBoundary()),e(t)}.bind(this)};ie.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+ie.LINE_BREAK};ie.prototype.getHeaders=function(e){var t,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(r[t.toLowerCase()]=e[t]);return r};ie.prototype.setBoundary=function(e){this._boundary=e};ie.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};ie.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)typeof this._streams[r]!="function"&&(Buffer.isBuffer(this._streams[r])?e=Buffer.concat([e,this._streams[r]]):e=Buffer.concat([e,Buffer.from(this._streams[r])]),(typeof this._streams[r]!="string"||this._streams[r].substring(2,t.length+2)!==t)&&(e=Buffer.concat([e,Buffer.from(ie.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])};ie.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(Math.random()*10).toString(16);this._boundary=e};ie.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e};ie.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e};ie.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;if(this._streams.length&&(t+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(e.bind(this,null,t));return}eP.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){if(r){e(r);return}n.forEach(function(i){t+=i}),e(null,t)})};ie.prototype.submit=function(e,t){var r,n,i={method:"post"};return typeof e=="string"?(e=X1(e),n=Np({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(n=Np(e,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(e.headers),n.protocol=="https:"?r=J1.request(n):r=Y1.request(n),this.getLength(function(s,o){if(s&&s!=="Unknown stream"){this._error(s);return}if(o&&r.setHeader("Content-Length",o),this.pipe(r),t){var c,l=a(function(u,p){return r.removeListener("error",l),r.removeListener("response",c),t.call(this,u,p)},"callback");c=l.bind(this,null),r.on("error",l),r.on("response",c)}}.bind(this)),r};ie.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))};ie.prototype.toString=function(){return"[object FormData]"}});var Mb=y(qb=>{"use strict";var tP=require("url").parse,rP={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},nP=String.prototype.endsWith||function(e){return e.length<=this.length&&this.indexOf(e,this.length-e.length)!==-1};function iP(e){var t=typeof e=="string"?tP(e):e||{},r=t.protocol,n=t.host,i=t.port;if(typeof n!="string"||!n||typeof r!="string"||(r=r.split(":",1)[0],n=n.replace(/:\d*$/,""),i=parseInt(i)||rP[r]||0,!sP(n,i)))return"";var s=Ci("npm_config_"+r+"_proxy")||Ci(r+"_proxy")||Ci("npm_config_proxy")||Ci("all_proxy");return s&&s.indexOf("://")===-1&&(s=r+"://"+s),s}a(iP,"getProxyForUrl");function sP(e,t){var r=(Ci("npm_config_no_proxy")||Ci("no_proxy")).toLowerCase();return r?r==="*"?!1:r.split(/[,\s]/).every(function(n){if(!n)return!0;var i=n.match(/^(.+):(\d+)$/),s=i?i[1]:n,o=i?parseInt(i[2]):0;return o&&o!==t?!0:/^[.*]/.test(s)?(s.charAt(0)==="*"&&(s=s.slice(1)),!nP.call(e,s)):e!==s}):!0}a(sP,"shouldProxy");function Ci(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}a(Ci,"getEnv");qb.getProxyForUrl=iP});var Bb=y((bee,Pb)=>{var _i=1e3,Ai=_i*60,Ni=Ai*60,kn=Ni*24,oP=kn*7,aP=kn*365.25;Pb.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return cP(e);if(r==="number"&&isFinite(e))return t.long?lP(e):uP(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function cP(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*aP;case"weeks":case"week":case"w":return r*oP;case"days":case"day":case"d":return r*kn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ni;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ai;case"seconds":case"second":case"secs":case"sec":case"s":return r*_i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}a(cP,"parse");function uP(e){var t=Math.abs(e);return t>=kn?Math.round(e/kn)+"d":t>=Ni?Math.round(e/Ni)+"h":t>=Ai?Math.round(e/Ai)+"m":t>=_i?Math.round(e/_i)+"s":e+"ms"}a(uP,"fmtShort");function lP(e){var t=Math.abs(e);return t>=kn?Ma(e,t,kn,"day"):t>=Ni?Ma(e,t,Ni,"hour"):t>=Ai?Ma(e,t,Ai,"minute"):t>=_i?Ma(e,t,_i,"second"):e+" ms"}a(lP,"fmtLong");function Ma(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}a(Ma,"plural")});var Ip=y((Eee,Db)=>{function pP(e){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Bb(),r.destroy=u,Object.keys(e).forEach(p=>{r[p]=e[p]}),r.names=[],r.skips=[],r.formatters={};function t(p){let d=0;for(let f=0;f<p.length;f++)d=(d<<5)-d+p.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}a(t,"selectColor"),r.selectColor=t;function r(p){let d,f=null,h,m;function v(...x){if(!v.enabled)return;let w=v,C=Number(new Date),g=C-(d||C);w.diff=g,w.prev=d,w.curr=C,d=C,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let T=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(_,D)=>{if(_==="%%")return"%";T++;let k=r.formatters[D];if(typeof k=="function"){let A=x[T];_=k.call(w,A),x.splice(T,1),T--}return _}),r.formatArgs.call(w,x),(w.log||r.log).apply(w,x)}return a(v,"debug"),v.namespace=p,v.useColors=r.useColors(),v.color=r.selectColor(p),v.extend=n,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(h!==r.namespaces&&(h=r.namespaces,m=r.enabled(p)),m),set:x=>{f=x}}),typeof r.init=="function"&&r.init(v),v}a(r,"createDebug");function n(p,d){let f=r(this.namespace+(typeof d>"u"?":":d)+p);return f.log=this.log,f}a(n,"extend");function i(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let d,f=(typeof p=="string"?p:"").split(/[\s,]+/),h=f.length;for(d=0;d<h;d++)f[d]&&(p=f[d].replace(/\*/g,".*?"),p[0]==="-"?r.skips.push(new RegExp("^"+p.slice(1)+"$")):r.names.push(new RegExp("^"+p+"$")))}a(i,"enable");function s(){let p=[...r.names.map(c),...r.skips.map(c).map(d=>"-"+d)].join(",");return r.enable(""),p}a(s,"disable");function o(p){if(p[p.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(p))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(p))return!0;return!1}a(o,"enabled");function c(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}a(c,"toNamespace");function l(p){return p instanceof Error?p.stack||p.message:p}a(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a(u,"destroy"),r.enable(r.load()),r}a(pP,"setup");Db.exports=pP});var Lb=y((qt,Pa)=>{qt.formatArgs=dP;qt.save=hP;qt.load=mP;qt.useColors=fP;qt.storage=yP();qt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();qt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function fP(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}a(fP,"useColors");function dP(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Pa.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}a(dP,"formatArgs");qt.log=console.debug||console.log||(()=>{});function hP(e){try{e?qt.storage.setItem("debug",e):qt.storage.removeItem("debug")}catch{}}a(hP,"save");function mP(){let e;try{e=qt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}a(mP,"load");function yP(){try{return localStorage}catch{}}a(yP,"localstorage");Pa.exports=Ip()(qt);var{formatters:gP}=Pa.exports;gP.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Ub=y((Cee,jb)=>{"use strict";jb.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Wb=y((_ee,Fb)=>{"use strict";var vP=require("os"),kb=require("tty"),zt=Ub(),{env:je}=process,Xr;zt("no-color")||zt("no-colors")||zt("color=false")||zt("color=never")?Xr=0:(zt("color")||zt("colors")||zt("color=true")||zt("color=always"))&&(Xr=1);"FORCE_COLOR"in je&&(je.FORCE_COLOR==="true"?Xr=1:je.FORCE_COLOR==="false"?Xr=0:Xr=je.FORCE_COLOR.length===0?1:Math.min(parseInt(je.FORCE_COLOR,10),3));function qp(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}a(qp,"translateLevel");function Mp(e,t){if(Xr===0)return 0;if(zt("color=16m")||zt("color=full")||zt("color=truecolor"))return 3;if(zt("color=256"))return 2;if(e&&!t&&Xr===void 0)return 0;let r=Xr||0;if(je.TERM==="dumb")return r;if(process.platform==="win32"){let n=vP.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in je)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in je)||je.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in je)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(je.TEAMCITY_VERSION)?1:0;if(je.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in je){let n=parseInt((je.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(je.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(je.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(je.TERM)||"COLORTERM"in je?1:r}a(Mp,"supportsColor");function xP(e){let t=Mp(e,e&&e.isTTY);return qp(t)}a(xP,"getSupportLevel");Fb.exports={supportsColor:xP,stdout:qp(Mp(!0,kb.isatty(1))),stderr:qp(Mp(!0,kb.isatty(2)))}});var $b=y((Fe,Da)=>{var SP=require("tty"),Ba=require("util");Fe.init=_P;Fe.log=OP;Fe.formatArgs=wP;Fe.save=TP;Fe.load=CP;Fe.useColors=bP;Fe.destroy=Ba.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Fe.colors=[6,2,3,4,5,1];try{let e=Wb();e&&(e.stderr||e).level>=2&&(Fe.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Fe.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function bP(){return"colors"in Fe.inspectOpts?!!Fe.inspectOpts.colors:SP.isatty(process.stderr.fd)}a(bP,"useColors");function wP(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Da.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=EP()+t+" "+e[0]}a(wP,"formatArgs");function EP(){return Fe.inspectOpts.hideDate?"":new Date().toISOString()+" "}a(EP,"getDate");function OP(...e){return process.stderr.write(Ba.format(...e)+`
`)}a(OP,"log");function TP(e){e?process.env.DEBUG=e:delete process.env.DEBUG}a(TP,"save");function CP(){return process.env.DEBUG}a(CP,"load");function _P(e){e.inspectOpts={};let t=Object.keys(Fe.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=Fe.inspectOpts[t[r]]}a(_P,"init");Da.exports=Ip()(Fe);var{formatters:zb}=Da.exports;zb.o=function(e){return this.inspectOpts.colors=this.useColors,Ba.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};zb.O=function(e){return this.inspectOpts.colors=this.useColors,Ba.inspect(e,this.inspectOpts)}});var Hb=y((Ree,Pp)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Pp.exports=Lb():Pp.exports=$b()});var Kb=y((Iee,Vb)=>{var Hs;Vb.exports=function(){if(!Hs){try{Hs=Hb()("follow-redirects")}catch{}typeof Hs!="function"&&(Hs=a(function(){},"debug"))}Hs.apply(null,arguments)}});var Qb=y((Mee,Vp)=>{var Gs=require("url"),Vs=Gs.URL,AP=require("http"),NP=require("https"),Up=require("stream").Writable,kp=require("assert"),Gb=Kb(),Fp=!1;try{kp(new Vs)}catch(e){Fp=e.code==="ERR_INVALID_URL"}var RP=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],Wp=["abort","aborted","connect","error","socket","timeout"],zp=Object.create(null);Wp.forEach(function(e){zp[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}});var Dp=Ys("ERR_INVALID_URL","Invalid URL",TypeError),Lp=Ys("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),IP=Ys("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",Lp),qP=Ys("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),MP=Ys("ERR_STREAM_WRITE_AFTER_END","write after end"),PP=Up.prototype.destroy||Jb;function wt(e,t){Up.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(n){try{r._processResponse(n)}catch(i){r.emit("error",i instanceof Lp?i:new Lp({cause:i}))}},this._performRequest()}a(wt,"RedirectableRequest");wt.prototype=Object.create(Up.prototype);wt.prototype.abort=function(){Hp(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};wt.prototype.destroy=function(e){return Hp(this._currentRequest,e),PP.call(this,e),this};wt.prototype.write=function(e,t,r){if(this._ending)throw new MP;if(!Fn(e)&&!LP(e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(Ks(t)&&(r=t,t=null),e.length===0){r&&r();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new qP),this.abort())};wt.prototype.end=function(e,t,r){if(Ks(e)?(r=e,e=t=null):Ks(t)&&(r=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(e,t,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};wt.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};wt.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};wt.prototype.setTimeout=function(e,t){var r=this;function n(o){o.setTimeout(e),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}a(n,"destroyOnTimeout");function i(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},e),n(o)}a(i,"startTimer");function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),r.removeListener("close",s),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",i)}return a(s,"clearTimer"),t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){wt.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(wt.prototype,e,{get:function(){return this._currentRequest[e]}})});wt.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};wt.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Wp)n.on(i,zp[i]);if(this._currentUrl=/^\//.test(this._options.path)?Gs.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,c=this._requestBodyBuffers;a(function l(u){if(n===o._currentRequest)if(u)o.emit("error",u);else if(s<c.length){var p=c[s++];n.finished||n.write(p.data,p.encoding,l)}else o._ended&&n.end()},"writeNext")()}};wt.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(!r||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(Hp(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new IP;var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var s=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Bp(/^content-/i,this._options.headers));var o=Bp(/^host$/i,this._options.headers),c=$p(this._currentUrl),l=o||c.host,u=/^\w+:/.test(r)?this._currentUrl:Gs.format(Object.assign(c,{host:l})),p=BP(r,u);if(Gb("redirecting to",p.href),this._isRedirect=!0,jp(p,this._options),(p.protocol!==c.protocol&&p.protocol!=="https:"||p.host!==l&&!DP(p.host,l))&&Bp(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),Ks(i)){var d={headers:e.headers,statusCode:t},f={url:u,method:s,headers:n};i(this._options,d,f),this._sanitizeOptions(this._options)}this._performRequest()};function Yb(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(n){var i=n+":",s=r[i]=e[n],o=t[n]=Object.create(s);function c(u,p,d){return jP(u)?u=jp(u):Fn(u)?u=jp($p(u)):(d=p,p=Xb(u),u={protocol:i}),Ks(p)&&(d=p,p=null),p=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},u,p),p.nativeProtocols=r,!Fn(p.host)&&!Fn(p.hostname)&&(p.hostname="::1"),kp.equal(p.protocol,i,"protocol mismatch"),Gb("options",p),new wt(p,d)}a(c,"request");function l(u,p,d){var f=o.request(u,p,d);return f.end(),f}a(l,"get"),Object.defineProperties(o,{request:{value:c,configurable:!0,enumerable:!0,writable:!0},get:{value:l,configurable:!0,enumerable:!0,writable:!0}})}),t}a(Yb,"wrap");function Jb(){}a(Jb,"noop");function $p(e){var t;if(Fp)t=new Vs(e);else if(t=Xb(Gs.parse(e)),!Fn(t.protocol))throw new Dp({input:e});return t}a($p,"parseUrl");function BP(e,t){return Fp?new Vs(e,t):$p(Gs.resolve(t,e))}a(BP,"resolveUrl");function Xb(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new Dp({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new Dp({input:e.href||e});return e}a(Xb,"validateUrl");function jp(e,t){var r=t||{};for(var n of RP)r[n]=e[n];return r.hostname.startsWith("[")&&(r.hostname=r.hostname.slice(1,-1)),r.port!==""&&(r.port=Number(r.port)),r.path=r.search?r.pathname+r.search:r.pathname,r}a(jp,"spreadUrlObject");function Bp(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}a(Bp,"removeMatchingHeaders");function Ys(e,t,r){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return a(n,"CustomError"),n.prototype=new(r||Error),Object.defineProperties(n.prototype,{constructor:{value:n,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),n}a(Ys,"createErrorType");function Hp(e,t){for(var r of Wp)e.removeListener(r,zp[r]);e.on("error",Jb),e.destroy(t)}a(Hp,"destroyRequest");function DP(e,t){kp(Fn(e)&&Fn(t));var r=e.length-t.length-1;return r>0&&e[r]==="."&&e.endsWith(t)}a(DP,"isSubdomain");function Fn(e){return typeof e=="string"||e instanceof String}a(Fn,"isString");function Ks(e){return typeof e=="function"}a(Ks,"isFunction");function LP(e){return typeof e=="object"&&"length"in e}a(LP,"isBuffer");function jP(e){return Vs&&e instanceof Vs}a(jP,"isURL");Vp.exports=Yb({http:AP,https:NP});Vp.exports.wrap=Yb});var Vw=y((Bee,Hw)=>{"use strict";var UP=Ib(),kP=require("url"),FP=Mb(),WP=require("http"),zP=require("https"),vw=require("util"),$P=Qb(),HP=require("zlib"),xw=require("stream"),VP=require("events");function nn(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}a(nn,"_interopDefaultLegacy");var Sw=nn(UP),KP=nn(kP),GP=nn(WP),YP=nn(zP),JP=nn(vw),XP=nn($P),tn=nn(HP),Zr=nn(xw);function bw(e,t){return a(function(){return e.apply(t,arguments)},"wrap")}a(bw,"bind");var{toString:QP}=Object.prototype,{getPrototypeOf:lf}=Object,Ha=(e=>t=>{let r=QP.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),tr=a(e=>(e=e.toLowerCase(),t=>Ha(t)===e),"kindOfTest"),Va=a(e=>t=>typeof t===e,"typeOfTest"),{isArray:Mi}=Array,Xs=Va("undefined");function ZP(e){return e!==null&&!Xs(e)&&e.constructor!==null&&!Xs(e.constructor)&&$t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}a(ZP,"isBuffer");var ww=tr("ArrayBuffer");function eB(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ww(e.buffer),t}a(eB,"isArrayBufferView");var tB=Va("string"),$t=Va("function"),Ew=Va("number"),Ka=a(e=>e!==null&&typeof e=="object","isObject"),rB=a(e=>e===!0||e===!1,"isBoolean"),ja=a(e=>{if(Ha(e)!=="object")return!1;let t=lf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},"isPlainObject"),nB=tr("Date"),iB=tr("File"),sB=tr("Blob"),oB=tr("FileList"),aB=a(e=>Ka(e)&&$t(e.pipe),"isStream"),cB=a(e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$t(e.append)&&((t=Ha(e))==="formdata"||t==="object"&&$t(e.toString)&&e.toString()==="[object FormData]"))},"isFormData"),uB=tr("URLSearchParams"),[lB,pB,fB,dB]=["ReadableStream","Request","Response","Headers"].map(tr),hB=a(e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),"trim");function Zs(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Mi(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{let s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length,c;for(n=0;n<o;n++)c=s[n],t.call(null,e[c],c,e)}}a(Zs,"forEach");function Ow(e,t){t=t.toLowerCase();let r=Object.keys(e),n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}a(Ow,"findKey");var Tw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Cw=a(e=>!Xs(e)&&e!==Tw,"isContextDefined");function Xp(){let{caseless:e}=Cw(this)&&this||{},t={},r=a((n,i)=>{let s=e&&Ow(t,i)||i;ja(t[s])&&ja(n)?t[s]=Xp(t[s],n):ja(n)?t[s]=Xp({},n):Mi(n)?t[s]=n.slice():t[s]=n},"assignValue");for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Zs(arguments[n],r);return t}a(Xp,"merge");var mB=a((e,t,r,{allOwnKeys:n}={})=>(Zs(t,(i,s)=>{r&&$t(i)?e[s]=bw(i,r):e[s]=i},{allOwnKeys:n}),e),"extend"),yB=a(e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),"stripBOM"),gB=a((e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},"inherits"),vB=a((e,t,r,n)=>{let i,s,o,c={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!n||n(o,e,t))&&!c[o]&&(t[o]=e[o],c[o]=!0);e=r!==!1&&lf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},"toFlatObject"),xB=a((e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return n!==-1&&n===r},"endsWith"),SB=a(e=>{if(!e)return null;if(Mi(e))return e;let t=e.length;if(!Ew(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},"toArray"),bB=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&lf(Uint8Array)),wB=a((e,t)=>{let n=(e&&e[Symbol.iterator]).call(e),i;for(;(i=n.next())&&!i.done;){let s=i.value;t.call(e,s[0],s[1])}},"forEachEntry"),EB=a((e,t)=>{let r,n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},"matchAll"),OB=tr("HTMLFormElement"),TB=a(e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,a(function(r,n,i){return n.toUpperCase()+i},"replacer")),"toCamelCase"),Zb=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),CB=tr("RegExp"),_w=a((e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};Zs(r,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(n[s]=o||i)}),Object.defineProperties(e,n)},"reduceDescriptors"),_B=a(e=>{_w(e,(t,r)=>{if($t(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=e[r];if($t(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},"freezeMethods"),AB=a((e,t)=>{let r={},n=a(i=>{i.forEach(s=>{r[s]=!0})},"define");return Mi(e)?n(e):n(String(e).split(t)),r},"toObjectSet"),NB=a(()=>{},"noop"),RB=a((e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,"toFiniteNumber"),Kp="abcdefghijklmnopqrstuvwxyz",ew="0123456789",Aw={DIGIT:ew,ALPHA:Kp,ALPHA_DIGIT:Kp+Kp.toUpperCase()+ew},IB=a((e=16,t=Aw.ALPHA_DIGIT)=>{let r="",{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},"generateString");function qB(e){return!!(e&&$t(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}a(qB,"isSpecCompliantForm");var MB=a(e=>{let t=new Array(10),r=a((n,i)=>{if(Ka(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;let s=Mi(n)?[]:{};return Zs(n,(o,c)=>{let l=r(o,i+1);!Xs(l)&&(s[c]=l)}),t[i]=void 0,s}}return n},"visit");return r(e,0)},"toJSONObject"),PB=tr("AsyncFunction"),BB=a(e=>e&&(Ka(e)||$t(e))&&$t(e.then)&&$t(e.catch),"isThenable"),S={isArray:Mi,isArrayBuffer:ww,isBuffer:ZP,isFormData:cB,isArrayBufferView:eB,isString:tB,isNumber:Ew,isBoolean:rB,isObject:Ka,isPlainObject:ja,isReadableStream:lB,isRequest:pB,isResponse:fB,isHeaders:dB,isUndefined:Xs,isDate:nB,isFile:iB,isBlob:sB,isRegExp:CB,isFunction:$t,isStream:aB,isURLSearchParams:uB,isTypedArray:bB,isFileList:oB,forEach:Zs,merge:Xp,extend:mB,trim:hB,stripBOM:yB,inherits:gB,toFlatObject:vB,kindOf:Ha,kindOfTest:tr,endsWith:xB,toArray:SB,forEachEntry:wB,matchAll:EB,isHTMLForm:OB,hasOwnProperty:Zb,hasOwnProp:Zb,reduceDescriptors:_w,freezeMethods:_B,toObjectSet:AB,toCamelCase:TB,noop:NB,toFiniteNumber:RB,findKey:Ow,global:Tw,isContextDefined:Cw,ALPHABET:Aw,generateString:IB,isSpecCompliantForm:qB,toJSONObject:MB,isAsyncFn:PB,isThenable:BB};function M(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}a(M,"AxiosError");S.inherits(M,Error,{toJSON:a(function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}},"toJSON")});var Nw=M.prototype,Rw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Rw[e]={value:e}});Object.defineProperties(M,Rw);Object.defineProperty(Nw,"isAxiosError",{value:!0});M.from=(e,t,r,n,i,s)=>{let o=Object.create(Nw);return S.toFlatObject(e,o,a(function(l){return l!==Error.prototype},"filter"),c=>c!=="isAxiosError"),M.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};function Qp(e){return S.isPlainObject(e)||S.isArray(e)}a(Qp,"isVisitable");function Iw(e){return S.endsWith(e,"[]")?e.slice(0,-2):e}a(Iw,"removeBrackets");function tw(e,t,r){return e?e.concat(t).map(a(function(i,s){return i=Iw(i),!r&&s?"["+i+"]":i},"each")).join(r?".":""):t}a(tw,"renderKey");function DB(e){return S.isArray(e)&&!e.some(Qp)}a(DB,"isFlatArray");var LB=S.toFlatObject(S,{},null,a(function(t){return/^is[A-Z]/.test(t)},"filter"));function Ga(e,t,r){if(!S.isObject(e))throw new TypeError("target must be an object");t=t||new(Sw.default||FormData),r=S.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,a(function(v,x){return!S.isUndefined(x[v])},"defined"));let n=r.metaTokens,i=r.visitor||p,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(t);if(!S.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(S.isDate(m))return m.toISOString();if(!l&&S.isBlob(m))throw new M("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(m)||S.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}a(u,"convertValue");function p(m,v,x){let w=m;if(m&&!x&&typeof m=="object"){if(S.endsWith(v,"{}"))v=n?v:v.slice(0,-2),m=JSON.stringify(m);else if(S.isArray(m)&&DB(m)||(S.isFileList(m)||S.endsWith(v,"[]"))&&(w=S.toArray(m)))return v=Iw(v),w.forEach(a(function(g,T){!(S.isUndefined(g)||g===null)&&t.append(o===!0?tw([v],T,s):o===null?v:v+"[]",u(g))},"each")),!1}return Qp(m)?!0:(t.append(tw(x,v,s),u(m)),!1)}a(p,"defaultVisitor");let d=[],f=Object.assign(LB,{defaultVisitor:p,convertValue:u,isVisitable:Qp});function h(m,v){if(!S.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(m),S.forEach(m,a(function(w,C){(!(S.isUndefined(w)||w===null)&&i.call(t,w,S.isString(C)?C.trim():C,v,f))===!0&&h(w,v?v.concat(C):[C])},"each")),d.pop()}}if(a(h,"build"),!S.isObject(e))throw new TypeError("data must be an object");return h(e),t}a(Ga,"toFormData");function rw(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,a(function(n){return t[n]},"replacer"))}a(rw,"encode$1");function qw(e,t){this._pairs=[],e&&Ga(e,this,t)}a(qw,"AxiosURLSearchParams");var Mw=qw.prototype;Mw.append=a(function(t,r){this._pairs.push([t,r])},"append");Mw.toString=a(function(t){let r=t?function(n){return t.call(this,n,rw)}:rw;return this._pairs.map(a(function(i){return r(i[0])+"="+r(i[1])},"each"),"").join("&")},"toString");function jB(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}a(jB,"encode");function pf(e,t,r){if(!t)return e;let n=r&&r.encode||jB,i=r&&r.serialize,s;if(i?s=i(t,r):s=S.isURLSearchParams(t)?t.toString():new qw(t,r).toString(n),s){let o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}a(pf,"buildURL");var vf=class vf{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){S.forEach(this.handlers,a(function(n){n!==null&&t(n)},"forEachHandler"))}};a(vf,"InterceptorManager");var Zp=vf,nw=Zp,ff={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UB=KP.default.URLSearchParams,kB={isNode:!0,classes:{URLSearchParams:UB,FormData:Sw.default,Blob:typeof Blob<"u"&&Blob||null},protocols:["http","https","file","data"]},df=typeof window<"u"&&typeof document<"u",FB=(e=>df&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),WB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zB=df&&window.location.href||"http://localhost",$B=Object.freeze({__proto__:null,hasBrowserEnv:df,hasStandardBrowserWebWorkerEnv:WB,hasStandardBrowserEnv:FB,origin:zB}),Mt={...$B,...kB};function HB(e,t){return Ga(e,new Mt.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return Mt.isNode&&S.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}a(HB,"toURLEncodedForm");function VB(e){return S.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}a(VB,"parsePropPath");function KB(e){let t={},r=Object.keys(e),n,i=r.length,s;for(n=0;n<i;n++)s=r[n],t[s]=e[s];return t}a(KB,"arrayToObject");function Pw(e){function t(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;let c=Number.isFinite(+o),l=s>=r.length;return o=!o&&S.isArray(i)?i.length:o,l?(S.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!c):((!i[o]||!S.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],s)&&S.isArray(i[o])&&(i[o]=KB(i[o])),!c)}if(a(t,"buildPath"),S.isFormData(e)&&S.isFunction(e.entries)){let r={};return S.forEachEntry(e,(n,i)=>{t(VB(n),i,r,0)}),r}return null}a(Pw,"formDataToJSON");function GB(e,t,r){if(S.isString(e))try{return(t||JSON.parse)(e),S.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}a(GB,"stringifySafely");var hf={transitional:ff,adapter:["xhr","http","fetch"],transformRequest:[a(function(t,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=S.isObject(t);if(s&&S.isHTMLForm(t)&&(t=new FormData(t)),S.isFormData(t))return i?JSON.stringify(Pw(t)):t;if(S.isArrayBuffer(t)||S.isBuffer(t)||S.isStream(t)||S.isFile(t)||S.isBlob(t)||S.isReadableStream(t))return t;if(S.isArrayBufferView(t))return t.buffer;if(S.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return HB(t,this.formSerializer).toString();if((c=S.isFileList(t))||n.indexOf("multipart/form-data")>-1){let l=this.env&&this.env.FormData;return Ga(c?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),GB(t)):t},"transformRequest")],transformResponse:[a(function(t){let r=this.transitional||hf.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(S.isResponse(t)||S.isReadableStream(t))return t;if(t&&S.isString(t)&&(n&&!this.responseType||i)){let o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(c){if(o)throw c.name==="SyntaxError"?M.from(c,M.ERR_BAD_RESPONSE,this,null,this.response):c}}return t},"transformResponse")],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mt.classes.FormData,Blob:Mt.classes.Blob},validateStatus:a(function(t){return t>=200&&t<300},"validateStatus"),headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],e=>{hf.headers[e]={}});var mf=hf,YB=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JB=a(e=>{let t={},r,n,i;return e&&e.split(`
`).forEach(a(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&YB[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)},"parser")),t},"parseHeaders"),iw=Symbol("internals");function Js(e){return e&&String(e).trim().toLowerCase()}a(Js,"normalizeHeader");function Ua(e){return e===!1||e==null?e:S.isArray(e)?e.map(Ua):String(e)}a(Ua,"normalizeValue");function XB(e){let t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}a(XB,"parseTokens");var QB=a(e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()),"isValidHeaderName");function Gp(e,t,r,n,i){if(S.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!S.isString(t)){if(S.isString(n))return t.indexOf(n)!==-1;if(S.isRegExp(n))return n.test(t)}}a(Gp,"matchHeaderValue");function ZB(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}a(ZB,"formatHeader");function eD(e,t){let r=S.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,s,o){return this[n].call(this,t,i,s,o)},configurable:!0})})}a(eD,"buildAccessors");var xf=class xf{constructor(t){t&&this.set(t)}set(t,r,n){let i=this;function s(c,l,u){let p=Js(l);if(!p)throw new Error("header name must be a non-empty string");let d=S.findKey(i,p);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||l]=Ua(c))}a(s,"setHeader");let o=a((c,l)=>S.forEach(c,(u,p)=>s(u,p,l)),"setHeaders");if(S.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(S.isString(t)&&(t=t.trim())&&!QB(t))o(JB(t),r);else if(S.isHeaders(t))for(let[c,l]of t.entries())s(l,c,n);else t!=null&&s(r,t,n);return this}get(t,r){if(t=Js(t),t){let n=S.findKey(this,t);if(n){let i=this[n];if(!r)return i;if(r===!0)return XB(i);if(S.isFunction(r))return r.call(this,i,n);if(S.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Js(t),t){let n=S.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Gp(this,this[n],n,r)))}return!1}delete(t,r){let n=this,i=!1;function s(o){if(o=Js(o),o){let c=S.findKey(n,o);c&&(!r||Gp(n,n[c],c,r))&&(delete n[c],i=!0)}}return a(s,"deleteHeader"),S.isArray(t)?t.forEach(s):s(t),i}clear(t){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let s=r[n];(!t||Gp(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){let r=this,n={};return S.forEach(this,(i,s)=>{let o=S.findKey(n,s);if(o){r[o]=Ua(i),delete r[s];return}let c=t?ZB(s):String(s).trim();c!==s&&delete r[s],r[c]=Ua(i),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let r=Object.create(null);return S.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&S.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){let n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){let n=(this[iw]=this[iw]={accessors:{}}).accessors,i=this.prototype;function s(o){let c=Js(o);n[c]||(eD(i,o),n[c]=!0)}return a(s,"defineAccessor"),S.isArray(t)?t.forEach(s):s(t),this}};a(xf,"AxiosHeaders");var Ii=xf;Ii.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.reduceDescriptors(Ii.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});S.freezeMethods(Ii);var Et=Ii;function Yp(e,t){let r=this||mf,n=t||r,i=Et.from(n.headers),s=n.data;return S.forEach(e,a(function(c){s=c.call(r,s,i.normalize(),t?t.status:void 0)},"transform")),i.normalize(),s}a(Yp,"transformData");function Bw(e){return!!(e&&e.__CANCEL__)}a(Bw,"isCancel");function rn(e,t,r){M.call(this,e??"canceled",M.ERR_CANCELED,t,r),this.name="CanceledError"}a(rn,"CanceledError");S.inherits(rn,M,{__CANCEL__:!0});function Ri(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new M("Request failed with status code "+r.status,[M.ERR_BAD_REQUEST,M.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}a(Ri,"settle");function tD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}a(tD,"isAbsoluteURL");function rD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}a(rD,"combineURLs");function yf(e,t){return e&&!tD(t)?rD(e,t):t}a(yf,"buildFullPath");var Fa="1.7.2";function Dw(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}a(Dw,"parseProtocol");var nD=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function iD(e,t,r){let n=r&&r.Blob||Mt.classes.Blob,i=Dw(e);if(t===void 0&&n&&(t=!0),i==="data"){e=i.length?e.slice(i.length+1):e;let s=nD.exec(e);if(!s)throw new M("Invalid URL",M.ERR_INVALID_URL);let o=s[1],c=s[2],l=s[3],u=Buffer.from(decodeURIComponent(l),c?"base64":"utf8");if(t){if(!n)throw new M("Blob is not supported",M.ERR_NOT_SUPPORT);return new n([u],{type:o})}return u}throw new M("Unsupported protocol "+i,M.ERR_NOT_SUPPORT)}a(iD,"fromDataURI");function Lw(e,t){let r=0,n=1e3/t,i=null;return a(function(){let o=this===!0,c=Date.now();if(o||c-r>n)return i&&(clearTimeout(i),i=null),r=c,e.apply(null,arguments);i||(i=setTimeout(()=>(i=null,r=Date.now(),e.apply(null,arguments)),n-(c-r)))},"throttled")}a(Lw,"throttle");function jw(e,t){e=e||10;let r=new Array(e),n=new Array(e),i=0,s=0,o;return t=t!==void 0?t:1e3,a(function(l){let u=Date.now(),p=n[s];o||(o=u),r[i]=l,n[i]=u;let d=s,f=0;for(;d!==i;)f+=r[d++],d=d%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),u-o<t)return;let h=p&&u-p;return h?Math.round(f*1e3/h):void 0},"push")}a(jw,"speedometer");var La=Symbol("internals"),Sf=class Sf extends Zr.default.Transform{constructor(t){t=S.toFlatObject(t,{maxRate:0,chunkSize:64*1024,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(c,l)=>!S.isUndefined(l[c])),super({readableHighWaterMark:t.chunkSize});let r=this,n=this[La]={length:t.length,timeWindow:t.timeWindow,ticksRate:t.ticksRate,chunkSize:t.chunkSize,maxRate:t.maxRate,minChunkSize:t.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},i=jw(n.ticksRate*t.samplesCount,n.timeWindow);this.on("newListener",c=>{c==="progress"&&(n.isCaptured||(n.isCaptured=!0))});let s=0;n.updateProgress=Lw(a(function(){let l=n.length,u=n.bytesSeen,p=u-s;if(!p||r.destroyed)return;let d=i(p);s=u,process.nextTick(()=>{r.emit("progress",{loaded:u,total:l,progress:l?u/l:void 0,bytes:p,rate:d||void 0,estimated:d&&l&&u<=l?(l-u)/d:void 0,lengthComputable:l!=null})})},"throttledHandler"),n.ticksRate);let o=a(()=>{n.updateProgress.call(!0)},"onFinish");this.once("end",o),this.once("error",o)}_read(t){let r=this[La];return r.onReadCallback&&r.onReadCallback(),super._read(t)}_transform(t,r,n){let i=this,s=this[La],o=s.maxRate,c=this.readableHighWaterMark,l=s.timeWindow,u=1e3/l,p=o/u,d=s.minChunkSize!==!1?Math.max(s.minChunkSize,p*.01):0;function f(m,v){let x=Buffer.byteLength(m);s.bytesSeen+=x,s.bytes+=x,s.isCaptured&&s.updateProgress(),i.push(m)?process.nextTick(v):s.onReadCallback=()=>{s.onReadCallback=null,process.nextTick(v)}}a(f,"pushChunk");let h=a((m,v)=>{let x=Buffer.byteLength(m),w=null,C=c,g,T=0;if(o){let N=Date.now();(!s.ts||(T=N-s.ts)>=l)&&(s.ts=N,g=p-s.bytes,s.bytes=g<0?-g:0,T=0),g=p-s.bytes}if(o){if(g<=0)return setTimeout(()=>{v(null,m)},l-T);g<C&&(C=g)}C&&x>C&&x-C>d&&(w=m.subarray(C),m=m.subarray(0,C)),f(m,w?()=>{process.nextTick(v,null,w)}:v)},"transformChunk");h(t,a(function m(v,x){if(v)return n(v);x?h(x,m):n(null)},"transformNextChunk"))}setLength(t){return this[La].length=+t,this}};a(Sf,"AxiosTransformStream");var ef=Sf,sw=ef,{asyncIterator:ow}=Symbol,sD=a(async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[ow]?yield*e[ow]():yield e},"readBlob"),Uw=sD,oD=S.ALPHABET.ALPHA_DIGIT+"-_",Qs=new vw.TextEncoder,en=`\r
`,aD=Qs.encode(en),cD=2,bf=class bf{constructor(t,r){let{escapeName:n}=this.constructor,i=S.isString(r),s=`Content-Disposition: form-data; name="${n(t)}"${!i&&r.name?`; filename="${n(r.name)}"`:""}${en}`;i?r=Qs.encode(String(r).replace(/\r?\n|\r\n?/g,en)):s+=`Content-Type: ${r.type||"application/octet-stream"}${en}`,this.headers=Qs.encode(s+en),this.contentLength=i?r.byteLength:r.size,this.size=this.headers.byteLength+this.contentLength+cD,this.name=t,this.value=r}async*encode(){yield this.headers;let{value:t}=this;S.isTypedArray(t)?yield t:yield*Uw(t),yield aD}static escapeName(t){return String(t).replace(/[\r\n"]/g,r=>({"\r":"%0D","\n":"%0A",'"':"%22"})[r])}};a(bf,"FormDataPart");var tf=bf,uD=a((e,t,r)=>{let{tag:n="form-data-boundary",size:i=25,boundary:s=n+"-"+S.generateString(i,oD)}=r||{};if(!S.isFormData(e))throw TypeError("FormData instance required");if(s.length<1||s.length>70)throw Error("boundary must be 10-70 characters long");let o=Qs.encode("--"+s+en),c=Qs.encode("--"+s+"--"+en+en),l=c.byteLength,u=Array.from(e.entries()).map(([d,f])=>{let h=new tf(d,f);return l+=h.size,h});l+=o.byteLength*u.length,l=S.toFiniteNumber(l);let p={"Content-Type":`multipart/form-data; boundary=${s}`};return Number.isFinite(l)&&(p["Content-Length"]=l),t&&t(p),xw.Readable.from(async function*(){for(let d of u)yield o,yield*d.encode();yield c}())},"formDataToStream"),lD=uD,wf=class wf extends Zr.default.Transform{__transform(t,r,n){this.push(t),n()}_transform(t,r,n){if(t.length!==0&&(this._transform=this.__transform,t[0]!==120)){let i=Buffer.alloc(2);i[0]=120,i[1]=156,this.push(i,r)}this.__transform(t,r,n)}};a(wf,"ZlibHeaderTransformStream");var rf=wf,pD=rf,fD=a((e,t)=>S.isAsyncFn(e)?function(...r){let n=r.pop();e.apply(this,r).then(i=>{try{t?n(null,...t(i)):n(null,i)}catch(s){n(s)}},n)}:e,"callbackify"),dD=fD,aw={flush:tn.default.constants.Z_SYNC_FLUSH,finishFlush:tn.default.constants.Z_SYNC_FLUSH},hD={flush:tn.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:tn.default.constants.BROTLI_OPERATION_FLUSH},cw=S.isFunction(tn.default.createBrotliDecompress),{http:mD,https:yD}=XP.default,gD=/https:?/,uw=Mt.protocols.map(e=>e+":");function vD(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}a(vD,"dispatchBeforeRedirect");function kw(e,t,r){let n=t;if(!n&&n!==!1){let i=FP.getProxyForUrl(r);i&&(n=new URL(i))}if(n){if(n.username&&(n.auth=(n.username||"")+":"+(n.password||"")),n.auth){(n.auth.username||n.auth.password)&&(n.auth=(n.auth.username||"")+":"+(n.auth.password||""));let s=Buffer.from(n.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+s}e.headers.host=e.hostname+(e.port?":"+e.port:"");let i=n.hostname||n.host;e.hostname=i,e.host=i,e.port=n.port,e.path=r,n.protocol&&(e.protocol=n.protocol.includes(":")?n.protocol:`${n.protocol}:`)}e.beforeRedirects.proxy=a(function(s){kw(s,t,s.href)},"beforeRedirect")}a(kw,"setProxy");var xD=typeof process<"u"&&S.kindOf(process)==="process",SD=a(e=>new Promise((t,r)=>{let n,i,s=a((l,u)=>{i||(i=!0,n&&n(l,u))},"done"),o=a(l=>{s(l),t(l)},"_resolve"),c=a(l=>{s(l,!0),r(l)},"_reject");e(o,c,l=>n=l).catch(c)}),"wrapAsync"),bD=a(({address:e,family:t})=>{if(!S.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}},"resolveFamily"),lw=a((e,t)=>bD(S.isObject(e)?e:{address:e,family:t}),"buildAddressEntry"),wD=xD&&a(function(t){return SD(a(async function(n,i,s){let{data:o,lookup:c,family:l}=t,{responseType:u,responseEncoding:p}=t,d=t.method.toUpperCase(),f,h=!1,m;if(c){let W=dD(c,B=>S.isArray(B)?B:[B]);c=a((B,me,Je)=>{W(B,me,(_e,Wt,Or)=>{if(_e)return Je(_e);let ut=S.isArray(Wt)?Wt.map(ve=>lw(ve)):[lw(Wt,Or)];me.all?Je(_e,ut):Je(_e,ut[0].address,ut[0].family)})},"lookup")}let v=new VP.EventEmitter,x=a(()=>{t.cancelToken&&t.cancelToken.unsubscribe(w),t.signal&&t.signal.removeEventListener("abort",w),v.removeAllListeners()},"onFinished");s((W,B)=>{f=!0,B&&(h=!0,x())});function w(W){v.emit("abort",!W||W.type?new rn(null,t,m):W)}a(w,"abort"),v.once("abort",i),(t.cancelToken||t.signal)&&(t.cancelToken&&t.cancelToken.subscribe(w),t.signal&&(t.signal.aborted?w():t.signal.addEventListener("abort",w)));let C=yf(t.baseURL,t.url),g=new URL(C,"http://localhost"),T=g.protocol||uw[0];if(T==="data:"){let W;if(d!=="GET")return Ri(n,i,{status:405,statusText:"method not allowed",headers:{},config:t});try{W=iD(t.url,u==="blob",{Blob:t.env&&t.env.Blob})}catch(B){throw M.from(B,M.ERR_BAD_REQUEST,t)}return u==="text"?(W=W.toString(p),(!p||p==="utf8")&&(W=S.stripBOM(W))):u==="stream"&&(W=Zr.default.Readable.from(W)),Ri(n,i,{data:W,status:200,statusText:"OK",headers:new Et,config:t})}if(uw.indexOf(T)===-1)return i(new M("Unsupported protocol "+T,M.ERR_BAD_REQUEST,t));let N=Et.from(t.headers).normalize();N.set("User-Agent","axios/"+Fa,!1);let _=t.onDownloadProgress,D=t.onUploadProgress,k=t.maxRate,A,F;if(S.isSpecCompliantForm(o)){let W=N.getContentType(/boundary=([-_\w\d]{10,70})/i);o=lD(o,B=>{N.set(B)},{tag:`axios-${Fa}-boundary`,boundary:W&&W[1]||void 0})}else if(S.isFormData(o)&&S.isFunction(o.getHeaders)){if(N.set(o.getHeaders()),!N.hasContentLength())try{let W=await JP.default.promisify(o.getLength).call(o);Number.isFinite(W)&&W>=0&&N.setContentLength(W)}catch{}}else if(S.isBlob(o))o.size&&N.setContentType(o.type||"application/octet-stream"),N.setContentLength(o.size||0),o=Zr.default.Readable.from(Uw(o));else if(o&&!S.isStream(o)){if(!Buffer.isBuffer(o))if(S.isArrayBuffer(o))o=Buffer.from(new Uint8Array(o));else if(S.isString(o))o=Buffer.from(o,"utf-8");else return i(new M("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",M.ERR_BAD_REQUEST,t));if(N.setContentLength(o.length,!1),t.maxBodyLength>-1&&o.length>t.maxBodyLength)return i(new M("Request body larger than maxBodyLength limit",M.ERR_BAD_REQUEST,t))}let z=S.toFiniteNumber(N.getContentLength());S.isArray(k)?(A=k[0],F=k[1]):A=F=k,o&&(D||A)&&(S.isStream(o)||(o=Zr.default.Readable.from(o,{objectMode:!1})),o=Zr.default.pipeline([o,new sw({length:z,maxRate:S.toFiniteNumber(A)})],S.noop),D&&o.on("progress",W=>{D(Object.assign(W,{upload:!0}))}));let H;if(t.auth){let W=t.auth.username||"",B=t.auth.password||"";H=W+":"+B}if(!H&&g.username){let W=g.username,B=g.password;H=W+":"+B}H&&N.delete("authorization");let te;try{te=pf(g.pathname+g.search,t.params,t.paramsSerializer).replace(/^\?/,"")}catch(W){let B=new Error(W.message);return B.config=t,B.url=t.url,B.exists=!0,i(B)}N.set("Accept-Encoding","gzip, compress, deflate"+(cw?", br":""),!1);let L={path:te,method:d,headers:N.toJSON(),agents:{http:t.httpAgent,https:t.httpsAgent},auth:H,protocol:T,family:l,beforeRedirect:vD,beforeRedirects:{}};!S.isUndefined(c)&&(L.lookup=c),t.socketPath?L.socketPath=t.socketPath:(L.hostname=g.hostname,L.port=g.port,kw(L,t.proxy,T+"//"+g.hostname+(g.port?":"+g.port:"")+L.path));let Y,St=gD.test(L.protocol);if(L.agent=St?t.httpsAgent:t.httpAgent,t.transport?Y=t.transport:t.maxRedirects===0?Y=St?YP.default:GP.default:(t.maxRedirects&&(L.maxRedirects=t.maxRedirects),t.beforeRedirect&&(L.beforeRedirects.config=t.beforeRedirect),Y=St?yD:mD),t.maxBodyLength>-1?L.maxBodyLength=t.maxBodyLength:L.maxBodyLength=1/0,t.insecureHTTPParser&&(L.insecureHTTPParser=t.insecureHTTPParser),m=Y.request(L,a(function(B){if(m.destroyed)return;let me=[B],Je=+B.headers["content-length"];if(_){let ve=new sw({length:S.toFiniteNumber(Je),maxRate:S.toFiniteNumber(F)});_&&ve.on("progress",Jr=>{_(Object.assign(Jr,{download:!0}))}),me.push(ve)}let _e=B,Wt=B.req||m;if(t.decompress!==!1&&B.headers["content-encoding"])switch((d==="HEAD"||B.statusCode===204)&&delete B.headers["content-encoding"],(B.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":me.push(tn.default.createUnzip(aw)),delete B.headers["content-encoding"];break;case"deflate":me.push(new pD),me.push(tn.default.createUnzip(aw)),delete B.headers["content-encoding"];break;case"br":cw&&(me.push(tn.default.createBrotliDecompress(hD)),delete B.headers["content-encoding"])}_e=me.length>1?Zr.default.pipeline(me,S.noop):me[0];let Or=Zr.default.finished(_e,()=>{Or(),x()}),ut={status:B.statusCode,statusText:B.statusMessage,headers:new Et(B.headers),config:t,request:Wt};if(u==="stream")ut.data=_e,Ri(n,i,ut);else{let ve=[],Jr=0;_e.on("data",a(function(Le){ve.push(Le),Jr+=Le.length,t.maxContentLength>-1&&Jr>t.maxContentLength&&(h=!0,_e.destroy(),i(new M("maxContentLength size of "+t.maxContentLength+" exceeded",M.ERR_BAD_RESPONSE,t,Wt)))},"handleStreamData")),_e.on("aborted",a(function(){if(h)return;let Le=new M("maxContentLength size of "+t.maxContentLength+" exceeded",M.ERR_BAD_RESPONSE,t,Wt);_e.destroy(Le),i(Le)},"handlerStreamAborted")),_e.on("error",a(function(Le){m.destroyed||i(M.from(Le,null,t,Wt))},"handleStreamError")),_e.on("end",a(function(){try{let Le=ve.length===1?ve[0]:Buffer.concat(ve);u!=="arraybuffer"&&(Le=Le.toString(p),(!p||p==="utf8")&&(Le=S.stripBOM(Le))),ut.data=Le}catch(Le){return i(M.from(Le,null,t,ut.request,ut))}Ri(n,i,ut)},"handleStreamEnd"))}v.once("abort",ve=>{_e.destroyed||(_e.emit("error",ve),_e.destroy())})},"handleResponse")),v.once("abort",W=>{i(W),m.destroy(W)}),m.on("error",a(function(B){i(M.from(B,null,t,m))},"handleRequestError")),m.on("socket",a(function(B){B.setKeepAlive(!0,1e3*60)},"handleRequestSocket")),t.timeout){let W=parseInt(t.timeout,10);if(Number.isNaN(W)){i(new M("error trying to parse `config.timeout` to int",M.ERR_BAD_OPTION_VALUE,t,m));return}m.setTimeout(W,a(function(){if(f)return;let me=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",Je=t.transitional||ff;t.timeoutErrorMessage&&(me=t.timeoutErrorMessage),i(new M(me,Je.clarifyTimeoutError?M.ETIMEDOUT:M.ECONNABORTED,t,m)),w()},"handleRequestTimeout"))}if(S.isStream(o)){let W=!1,B=!1;o.on("end",()=>{W=!0}),o.once("error",me=>{B=!0,m.destroy(me)}),o.on("close",()=>{!W&&!B&&w(new rn("Request stream has been aborted",t,m))}),o.pipe(m)}else m.end(o)},"dispatchHttpRequest"))},"httpAdapter"),Wa=a((e,t,r=3)=>{let n=0,i=jw(50,250);return Lw(s=>{let o=s.loaded,c=s.lengthComputable?s.total:void 0,l=o-n,u=i(l),p=o<=c;n=o;let d={loaded:o,total:c,progress:c?o/c:void 0,bytes:l,rate:u||void 0,estimated:u&&c&&p?(c-o)/u:void 0,event:s,lengthComputable:c!=null};d[t?"download":"upload"]=!0,e(d)},r)},"progressEventReducer"),ED=Mt.hasStandardBrowserEnv?a(function(){let t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){let o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a(i,"resolveURL"),n=i(window.location.href),a(function(o){let c=S.isString(o)?i(o):o;return c.protocol===n.protocol&&c.host===n.host},"isURLSameOrigin")},"standardBrowserEnv")():a(function(){return a(function(){return!0},"isURLSameOrigin")},"nonStandardBrowserEnv")(),OD=Mt.hasStandardBrowserEnv?{write(e,t,r,n,i,s){let o=[e+"="+encodeURIComponent(t)];S.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),S.isString(n)&&o.push("path="+n),S.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}},pw=a(e=>e instanceof Et?{...e}:e,"headersToObject");function Wn(e,t){t=t||{};let r={};function n(u,p,d){return S.isPlainObject(u)&&S.isPlainObject(p)?S.merge.call({caseless:d},u,p):S.isPlainObject(p)?S.merge({},p):S.isArray(p)?p.slice():p}a(n,"getMergedValue");function i(u,p,d){if(S.isUndefined(p)){if(!S.isUndefined(u))return n(void 0,u,d)}else return n(u,p,d)}a(i,"mergeDeepProperties");function s(u,p){if(!S.isUndefined(p))return n(void 0,p)}a(s,"valueFromConfig2");function o(u,p){if(S.isUndefined(p)){if(!S.isUndefined(u))return n(void 0,u)}else return n(void 0,p)}a(o,"defaultToConfig2");function c(u,p,d){if(d in t)return n(u,p);if(d in e)return n(void 0,u)}a(c,"mergeDirectKeys");let l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,p)=>i(pw(u),pw(p),!0)};return S.forEach(Object.keys(Object.assign({},e,t)),a(function(p){let d=l[p]||i,f=d(e[p],t[p],p);S.isUndefined(f)&&d!==c||(r[p]=f)},"computeConfigValue")),r}a(Wn,"mergeConfig");var Fw=a(e=>{let t=Wn({},e),{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:c}=t;t.headers=o=Et.from(o),t.url=pf(yf(t.baseURL,t.url),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let l;if(S.isFormData(r)){if(Mt.hasStandardBrowserEnv||Mt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){let[u,...p]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...p].join("; "))}}if(Mt.hasStandardBrowserEnv&&(n&&S.isFunction(n)&&(n=n(t)),n||n!==!1&&ED(t.url))){let u=i&&s&&OD.read(s);u&&o.set(i,u)}return t},"resolveConfig"),TD=typeof XMLHttpRequest<"u",CD=TD&&function(e){return new Promise(a(function(r,n){let i=Fw(e),s=i.data,o=Et.from(i.headers).normalize(),{responseType:c}=i,l;function u(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}a(u,"done");let p=new XMLHttpRequest;p.open(i.method.toUpperCase(),i.url,!0),p.timeout=i.timeout;function d(){if(!p)return;let h=Et.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),v={data:!c||c==="text"||c==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:h,config:e,request:p};Ri(a(function(w){r(w),u()},"_resolve"),a(function(w){n(w),u()},"_reject"),v),p=null}a(d,"onloadend"),"onloadend"in p?p.onloadend=d:p.onreadystatechange=a(function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(d)},"handleLoad"),p.onabort=a(function(){p&&(n(new M("Request aborted",M.ECONNABORTED,i,p)),p=null)},"handleAbort"),p.onerror=a(function(){n(new M("Network Error",M.ERR_NETWORK,i,p)),p=null},"handleError"),p.ontimeout=a(function(){let m=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",v=i.transitional||ff;i.timeoutErrorMessage&&(m=i.timeoutErrorMessage),n(new M(m,v.clarifyTimeoutError?M.ETIMEDOUT:M.ECONNABORTED,i,p)),p=null},"handleTimeout"),s===void 0&&o.setContentType(null),"setRequestHeader"in p&&S.forEach(o.toJSON(),a(function(m,v){p.setRequestHeader(v,m)},"setRequestHeader")),S.isUndefined(i.withCredentials)||(p.withCredentials=!!i.withCredentials),c&&c!=="json"&&(p.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&p.addEventListener("progress",Wa(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",Wa(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=a(h=>{p&&(n(!h||h.type?new rn(null,e,p):h),p.abort(),p=null)},"onCanceled"),i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));let f=Dw(i.url);if(f&&Mt.protocols.indexOf(f)===-1){n(new M("Unsupported protocol "+f+":",M.ERR_BAD_REQUEST,e));return}p.send(s||null)},"dispatchXhrRequest"))},_D=a((e,t)=>{let r=new AbortController,n,i=a(function(l){if(!n){n=!0,o();let u=l instanceof Error?l:this.reason;r.abort(u instanceof M?u:new rn(u instanceof Error?u.message:u))}},"onabort"),s=t&&setTimeout(()=>{i(new M(`timeout ${t} of ms exceeded`,M.ETIMEDOUT))},t),o=a(()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",i):l.unsubscribe(i))}),e=null)},"unsubscribe");e.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",i));let{signal:c}=r;return c.unsubscribe=o,[c,()=>{s&&clearTimeout(s),s=null}]},"composeSignals"),AD=_D,ND=a(function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},"streamChunk"),RD=a(async function*(e,t,r){for await(let n of e)yield*ND(ArrayBuffer.isView(n)?n:await r(String(n)),t)},"readBytes"),fw=a((e,t,r,n,i)=>{let s=RD(e,t,i),o=0;return new ReadableStream({type:"bytes",async pull(c){let{done:l,value:u}=await s.next();if(l){c.close(),n();return}let p=u.byteLength;r&&r(o+=p),c.enqueue(new Uint8Array(u))},cancel(c){return n(c),s.return()}},{highWaterMark:2})},"trackStream"),dw=a((e,t)=>{let r=e!=null;return n=>setTimeout(()=>t({lengthComputable:r,total:e,loaded:n}))},"fetchProgressDecorator"),Ya=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ww=Ya&&typeof ReadableStream=="function",nf=Ya&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ID=Ww&&(()=>{let e=!1,t=new Request(Mt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),hw=64*1024,sf=Ww&&!!(()=>{try{return S.isReadableStream(new Response("").body)}catch{}})(),za={stream:sf&&(e=>e.body)};Ya&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!za[t]&&(za[t]=S.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new M(`Response type '${t}' is not supported`,M.ERR_NOT_SUPPORT,n)})})})(new Response);var qD=a(async e=>{if(e==null)return 0;if(S.isBlob(e))return e.size;if(S.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(S.isArrayBufferView(e))return e.byteLength;if(S.isURLSearchParams(e)&&(e=e+""),S.isString(e))return(await nf(e)).byteLength},"getBodyLength"),MD=a(async(e,t)=>{let r=S.toFiniteNumber(e.getContentLength());return r??qD(t)},"resolveBodyLength"),PD=Ya&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:s,timeout:o,onDownloadProgress:c,onUploadProgress:l,responseType:u,headers:p,withCredentials:d="same-origin",fetchOptions:f}=Fw(e);u=u?(u+"").toLowerCase():"text";let[h,m]=i||s||o?AD([i,s],o):[],v,x,w=a(()=>{!v&&setTimeout(()=>{h&&h.unsubscribe()}),v=!0},"onFinish"),C;try{if(l&&ID&&r!=="get"&&r!=="head"&&(C=await MD(p,n))!==0){let _=new Request(t,{method:"POST",body:n,duplex:"half"}),D;S.isFormData(n)&&(D=_.headers.get("content-type"))&&p.setContentType(D),_.body&&(n=fw(_.body,hw,dw(C,Wa(l)),null,nf))}S.isString(d)||(d=d?"cors":"omit"),x=new Request(t,{...f,signal:h,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",withCredentials:d});let g=await fetch(x),T=sf&&(u==="stream"||u==="response");if(sf&&(c||T)){let _={};["status","statusText","headers"].forEach(k=>{_[k]=g[k]});let D=S.toFiniteNumber(g.headers.get("content-length"));g=new Response(fw(g.body,hw,c&&dw(D,Wa(c,!0)),T&&w,nf),_)}u=u||"text";let N=await za[S.findKey(za,u)||"text"](g,e);return!T&&w(),m&&m(),await new Promise((_,D)=>{Ri(_,D,{data:N,headers:Et.from(g.headers),status:g.status,statusText:g.statusText,config:e,request:x})})}catch(g){throw w(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new M("Network Error",M.ERR_NETWORK,e,x),{cause:g.cause||g}):M.from(g,g&&g.code,e,x)}}),of={http:wD,xhr:CD,fetch:PD};S.forEach(of,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var mw=a(e=>`- ${e}`,"renderReason"),BD=a(e=>S.isFunction(e)||e===null||e===!1,"isResolvedHandle"),zw={getAdapter:e=>{e=S.isArray(e)?e:[e];let{length:t}=e,r,n,i={};for(let s=0;s<t;s++){r=e[s];let o;if(n=r,!BD(r)&&(n=of[(o=String(r)).toLowerCase()],n===void 0))throw new M(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){let s=Object.entries(i).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build")),o=t?s.length>1?`since :
`+s.map(mw).join(`
`):" "+mw(s[0]):"as no adapter specified";throw new M("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:of};function Jp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rn(null,e)}a(Jp,"throwIfCancellationRequested");function yw(e){return Jp(e),e.headers=Et.from(e.headers),e.data=Yp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),zw.getAdapter(e.adapter||mf.adapter)(e).then(a(function(n){return Jp(e),n.data=Yp.call(e,e.transformResponse,n),n.headers=Et.from(n.headers),n},"onAdapterResolution"),a(function(n){return Bw(n)||(Jp(e),n&&n.response&&(n.response.data=Yp.call(e,e.transformResponse,n.response),n.response.headers=Et.from(n.response.headers))),Promise.reject(n)},"onAdapterRejection"))}a(yw,"dispatchRequest");var gf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gf[e]=a(function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e},"validator")});var gw={};gf.transitional=a(function(t,r,n){function i(s,o){return"[Axios v"+Fa+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return a(i,"formatMessage"),(s,o,c)=>{if(t===!1)throw new M(i(o," has been removed"+(r?" in "+r:"")),M.ERR_DEPRECATED);return r&&!gw[o]&&(gw[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,c):!0}},"transitional");function DD(e,t,r){if(typeof e!="object")throw new M("options must be an object",M.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let s=n[i],o=t[s];if(o){let c=e[s],l=c===void 0||o(c,s,e);if(l!==!0)throw new M("option "+s+" must be "+l,M.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new M("Unknown option "+s,M.ERR_BAD_OPTION)}}a(DD,"assertOptions");var af={assertOptions:DD,validators:gf},Qr=af.validators,Ef=class Ef{constructor(t){this.defaults=t,this.interceptors={request:new nw,response:new nw}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;let s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Wn(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&af.assertOptions(n,{silentJSONParsing:Qr.transitional(Qr.boolean),forcedJSONParsing:Qr.transitional(Qr.boolean),clarifyTimeoutError:Qr.transitional(Qr.boolean)},!1),i!=null&&(S.isFunction(i)?r.paramsSerializer={serialize:i}:af.assertOptions(i,{encode:Qr.function,serialize:Qr.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&S.merge(s.common,s[r.method]);s&&S.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=Et.concat(o,s);let c=[],l=!0;this.interceptors.request.forEach(a(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,c.unshift(v.fulfilled,v.rejected))},"unshiftRequestInterceptors"));let u=[];this.interceptors.response.forEach(a(function(v){u.push(v.fulfilled,v.rejected)},"pushResponseInterceptors"));let p,d=0,f;if(!l){let m=[yw.bind(this),void 0];for(m.unshift.apply(m,c),m.push.apply(m,u),f=m.length,p=Promise.resolve(r);d<f;)p=p.then(m[d++],m[d++]);return p}f=c.length;let h=r;for(d=0;d<f;){let m=c[d++],v=c[d++];try{h=m(h)}catch(x){v.call(this,x);break}}try{p=yw.call(this,h)}catch(m){return Promise.reject(m)}for(d=0,f=u.length;d<f;)p=p.then(u[d++],u[d++]);return p}getUri(t){t=Wn(this.defaults,t);let r=yf(t.baseURL,t.url);return pf(r,t.params,t.paramsSerializer)}};a(Ef,"Axios");var qi=Ef;S.forEach(["delete","get","head","options"],a(function(t){qi.prototype[t]=function(r,n){return this.request(Wn(n||{},{method:t,url:r,data:(n||{}).data}))}},"forEachMethodNoData"));S.forEach(["post","put","patch"],a(function(t){function r(n){return a(function(s,o,c){return this.request(Wn(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))},"httpMethod")}a(r,"generateHTTPMethod"),qi.prototype[t]=r(),qi.prototype[t+"Form"]=r(!0)},"forEachMethodWithData"));var ka=qi,$a=class $a{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(a(function(s){r=s},"promiseExecutor"));let n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s,o=new Promise(c=>{n.subscribe(c),s=c}).then(i);return o.cancel=a(function(){n.unsubscribe(s)},"reject"),o},t(a(function(s,o,c){n.reason||(n.reason=new rn(s,o,c),r(n.reason))},"cancel"))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new $a(a(function(i){t=i},"executor")),cancel:t}}};a($a,"CancelToken");var cf=$a,LD=cf;function jD(e){return a(function(r){return e.apply(null,r)},"wrap")}a(jD,"spread");function UD(e){return S.isObject(e)&&e.isAxiosError===!0}a(UD,"isAxiosError");var uf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uf).forEach(([e,t])=>{uf[t]=e});var kD=uf;function $w(e){let t=new ka(e),r=bw(ka.prototype.request,t);return S.extend(r,ka.prototype,t,{allOwnKeys:!0}),S.extend(r,t,null,{allOwnKeys:!0}),r.create=a(function(i){return $w(Wn(e,i))},"create"),r}a($w,"createInstance");var qe=$w(mf);qe.Axios=ka;qe.CanceledError=rn;qe.CancelToken=LD;qe.isCancel=Bw;qe.VERSION=Fa;qe.toFormData=Ga;qe.AxiosError=M;qe.Cancel=qe.CanceledError;qe.all=a(function(t){return Promise.all(t)},"all");qe.spread=jD;qe.isAxiosError=UD;qe.mergeConfig=Wn;qe.AxiosHeaders=Et;qe.formToJSON=e=>Pw(S.isHTMLForm(e)?new FormData(e):e);qe.getAdapter=zw.getAdapter;qe.HttpStatusCode=kD;qe.default=qe;Hw.exports=qe});var Gw=y((Lee,Kw)=>{"use strict";Kw.exports=Error});var Jw=y((jee,Yw)=>{"use strict";Yw.exports=EvalError});var Qw=y((Uee,Xw)=>{"use strict";Xw.exports=RangeError});var e0=y((kee,Zw)=>{"use strict";Zw.exports=ReferenceError});var Of=y((Fee,t0)=>{"use strict";t0.exports=SyntaxError});var Pi=y((Wee,r0)=>{"use strict";r0.exports=TypeError});var i0=y((zee,n0)=>{"use strict";n0.exports=URIError});var o0=y(($ee,s0)=>{"use strict";s0.exports=a(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},"hasSymbols")});var u0=y((Vee,c0)=>{"use strict";var a0=typeof Symbol<"u"&&Symbol,FD=o0();c0.exports=a(function(){return typeof a0!="function"||typeof Symbol!="function"||typeof a0("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:FD()},"hasNativeSymbols")});var p0=y((Gee,l0)=>{"use strict";var Tf={__proto__:null,foo:{}},WD=Object;l0.exports=a(function(){return{__proto__:Tf}.foo===Tf.foo&&!(Tf instanceof WD)},"hasProto")});var h0=y((Jee,d0)=>{"use strict";var zD="Function.prototype.bind called on incompatible ",$D=Object.prototype.toString,HD=Math.max,VD="[object Function]",f0=a(function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var s=0;s<r.length;s+=1)n[s+t.length]=r[s];return n},"concatty"),KD=a(function(t,r){for(var n=[],i=r||0,s=0;i<t.length;i+=1,s+=1)n[s]=t[i];return n},"slicy"),GD=a(function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},"joiny");d0.exports=a(function(t){var r=this;if(typeof r!="function"||$D.apply(r)!==VD)throw new TypeError(zD+r);for(var n=KD(arguments,1),i,s=a(function(){if(this instanceof i){var p=r.apply(this,f0(n,arguments));return Object(p)===p?p:this}return r.apply(t,f0(n,arguments))},"binder"),o=HD(0,r.length-n.length),c=[],l=0;l<o;l++)c[l]="$"+l;if(i=Function("binder","return function ("+GD(c,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=a(function(){},"Empty");u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},"bind")});var Ja=y((Qee,m0)=>{"use strict";var YD=h0();m0.exports=Function.prototype.bind||YD});var g0=y((Zee,y0)=>{"use strict";var JD=Function.prototype.call,XD=Object.prototype.hasOwnProperty,QD=Ja();y0.exports=QD.call(JD,XD)});var Hn=y((ete,w0)=>{"use strict";var re,ZD=Gw(),eL=Jw(),tL=Qw(),rL=e0(),ji=Of(),Li=Pi(),nL=i0(),b0=Function,Cf=a(function(e){try{return b0('"use strict"; return ('+e+").constructor;")()}catch{}},"getEvalledConstructor"),zn=Object.getOwnPropertyDescriptor;if(zn)try{zn({},"")}catch{zn=null}var _f=a(function(){throw new Li},"throwTypeError"),iL=zn?function(){try{return arguments.callee,_f}catch{try{return zn(arguments,"callee").get}catch{return _f}}}():_f,Bi=u0()(),sL=p0()(),Ue=Object.getPrototypeOf||(sL?function(e){return e.__proto__}:null),Di={},oL=typeof Uint8Array>"u"||!Ue?re:Ue(Uint8Array),$n={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?re:ArrayBuffer,"%ArrayIteratorPrototype%":Bi&&Ue?Ue([][Symbol.iterator]()):re,"%AsyncFromSyncIteratorPrototype%":re,"%AsyncFunction%":Di,"%AsyncGenerator%":Di,"%AsyncGeneratorFunction%":Di,"%AsyncIteratorPrototype%":Di,"%Atomics%":typeof Atomics>"u"?re:Atomics,"%BigInt%":typeof BigInt>"u"?re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":ZD,"%eval%":eval,"%EvalError%":eL,"%Float32Array%":typeof Float32Array>"u"?re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?re:FinalizationRegistry,"%Function%":b0,"%GeneratorFunction%":Di,"%Int8Array%":typeof Int8Array>"u"?re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bi&&Ue?Ue(Ue([][Symbol.iterator]())):re,"%JSON%":typeof JSON=="object"?JSON:re,"%Map%":typeof Map>"u"?re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Bi||!Ue?re:Ue(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?re:Promise,"%Proxy%":typeof Proxy>"u"?re:Proxy,"%RangeError%":tL,"%ReferenceError%":rL,"%Reflect%":typeof Reflect>"u"?re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Bi||!Ue?re:Ue(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bi&&Ue?Ue(""[Symbol.iterator]()):re,"%Symbol%":Bi?Symbol:re,"%SyntaxError%":ji,"%ThrowTypeError%":iL,"%TypedArray%":oL,"%TypeError%":Li,"%Uint8Array%":typeof Uint8Array>"u"?re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?re:Uint32Array,"%URIError%":nL,"%WeakMap%":typeof WeakMap>"u"?re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?re:WeakSet};if(Ue)try{null.error}catch(e){v0=Ue(Ue(e)),$n["%Error.prototype%"]=v0}var v0,aL=a(function e(t){var r;if(t==="%AsyncFunction%")r=Cf("async function () {}");else if(t==="%GeneratorFunction%")r=Cf("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Cf("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ue&&(r=Ue(i.prototype))}return $n[t]=r,r},"doEval"),x0={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},eo=Ja(),Xa=g0(),cL=eo.call(Function.call,Array.prototype.concat),uL=eo.call(Function.apply,Array.prototype.splice),S0=eo.call(Function.call,String.prototype.replace),Qa=eo.call(Function.call,String.prototype.slice),lL=eo.call(Function.call,RegExp.prototype.exec),pL=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fL=/\\(\\)?/g,dL=a(function(t){var r=Qa(t,0,1),n=Qa(t,-1);if(r==="%"&&n!=="%")throw new ji("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ji("invalid intrinsic syntax, expected opening `%`");var i=[];return S0(t,pL,function(s,o,c,l){i[i.length]=c?S0(l,fL,"$1"):o||s}),i},"stringToPath"),hL=a(function(t,r){var n=t,i;if(Xa(x0,n)&&(i=x0[n],n="%"+i[0]+"%"),Xa($n,n)){var s=$n[n];if(s===Di&&(s=aL(n)),typeof s>"u"&&!r)throw new Li("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new ji("intrinsic "+t+" does not exist!")},"getBaseIntrinsic");w0.exports=a(function(t,r){if(typeof t!="string"||t.length===0)throw new Li("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Li('"allowMissing" argument must be a boolean');if(lL(/^%?[^%]*%?$/,t)===null)throw new ji("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=dL(t),i=n.length>0?n[0]:"",s=hL("%"+i+"%",r),o=s.name,c=s.value,l=!1,u=s.alias;u&&(i=u[0],uL(n,cL([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=Qa(f,0,1),m=Qa(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new ji("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),i+="."+f,o="%"+i+"%",Xa($n,o))c=$n[o];else if(c!=null){if(!(f in c)){if(!r)throw new Li("base intrinsic for "+t+" exists, but the property is not available.");return}if(zn&&p+1>=n.length){var v=zn(c,f);d=!!v,d&&"get"in v&&!("originalValue"in v.get)?c=v.get:c=c[f]}else d=Xa(c,f),c=c[f];d&&!l&&($n[o]=c)}}return c},"GetIntrinsic")});var ec=y((rte,E0)=>{"use strict";var mL=Hn(),Za=mL("%Object.defineProperty%",!0)||!1;if(Za)try{Za({},"a",{value:1})}catch{Za=!1}E0.exports=Za});var Af=y((nte,O0)=>{"use strict";var yL=Hn(),tc=yL("%Object.getOwnPropertyDescriptor%",!0);if(tc)try{tc([],"length")}catch{tc=null}O0.exports=tc});var A0=y((ite,_0)=>{"use strict";var T0=ec(),gL=Of(),Ui=Pi(),C0=Af();_0.exports=a(function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Ui("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Ui("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ui("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ui("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ui("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ui("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,l=!!C0&&C0(t,r);if(T0)T0(t,r,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:s===null&&l?l.writable:!s});else if(c||!i&&!s&&!o)t[r]=n;else throw new gL("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},"defineDataProperty")});var I0=y((ote,R0)=>{"use strict";var Nf=ec(),N0=a(function(){return!!Nf},"hasPropertyDescriptors");N0.hasArrayLengthDefineBug=a(function(){if(!Nf)return null;try{return Nf([],"length",{value:1}).length!==1}catch{return!0}},"hasArrayLengthDefineBug");R0.exports=N0});var D0=y((cte,B0)=>{"use strict";var vL=Hn(),q0=A0(),xL=I0()(),M0=Af(),P0=Pi(),SL=vL("%Math.floor%");B0.exports=a(function(t,r){if(typeof t!="function")throw new P0("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||SL(r)!==r)throw new P0("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in t&&M0){var o=M0(t,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(xL?q0(t,"length",r,!0,!0):q0(t,"length",r)),t},"setFunctionLength")});var W0=y((lte,rc)=>{"use strict";var Rf=Ja(),nc=Hn(),bL=D0(),wL=Pi(),U0=nc("%Function.prototype.apply%"),k0=nc("%Function.prototype.call%"),F0=nc("%Reflect.apply%",!0)||Rf.call(k0,U0),L0=ec(),EL=nc("%Math.max%");rc.exports=a(function(t){if(typeof t!="function")throw new wL("a function is required");var r=F0(Rf,k0,arguments);return bL(r,1+EL(0,t.length-(arguments.length-1)),!0)},"callBind");var j0=a(function(){return F0(Rf,U0,arguments)},"applyBind");L0?L0(rc.exports,"apply",{value:j0}):rc.exports.apply=j0});var V0=y((fte,H0)=>{"use strict";var z0=Hn(),$0=W0(),OL=$0(z0("String.prototype.indexOf"));H0.exports=a(function(t,r){var n=z0(t,!!r);return typeof n=="function"&&OL(t,".prototype.")>-1?$0(n):n},"callBoundIntrinsic")});var G0=y((hte,K0)=>{K0.exports=require("util").inspect});var hE=y((mte,dE)=>{var kf=typeof Map=="function"&&Map.prototype,If=Object.getOwnPropertyDescriptor&&kf?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,sc=kf&&If&&typeof If.get=="function"?If.get:null,Y0=kf&&Map.prototype.forEach,Ff=typeof Set=="function"&&Set.prototype,qf=Object.getOwnPropertyDescriptor&&Ff?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,oc=Ff&&qf&&typeof qf.get=="function"?qf.get:null,J0=Ff&&Set.prototype.forEach,TL=typeof WeakMap=="function"&&WeakMap.prototype,ro=TL?WeakMap.prototype.has:null,CL=typeof WeakSet=="function"&&WeakSet.prototype,no=CL?WeakSet.prototype.has:null,_L=typeof WeakRef=="function"&&WeakRef.prototype,X0=_L?WeakRef.prototype.deref:null,AL=Boolean.prototype.valueOf,NL=Object.prototype.toString,RL=Function.prototype.toString,IL=String.prototype.match,Wf=String.prototype.slice,on=String.prototype.replace,qL=String.prototype.toUpperCase,Q0=String.prototype.toLowerCase,aE=RegExp.prototype.test,Z0=Array.prototype.concat,ur=Array.prototype.join,ML=Array.prototype.slice,eE=Math.floor,Bf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Mf=Object.getOwnPropertySymbols,Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ki=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Xe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ki||!0)?Symbol.toStringTag:null,cE=Object.prototype.propertyIsEnumerable,tE=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function rE(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||aE.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-eE(-e):eE(e);if(n!==e){var i=String(n),s=Wf.call(t,i.length+1);return on.call(i,r,"$&_")+"."+on.call(on.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return on.call(t,r,"$&_")}a(rE,"addNumericSeparator");var Lf=G0(),nE=Lf.custom,iE=lE(nE)?nE:null;dE.exports=a(function e(t,r,n,i){var s=r||{};if(sn(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(sn(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=sn(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(sn(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(sn(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return fE(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return c?rE(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return c?rE(t,u):u}var p=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof t=="object")return jf(t)?"[Array]":"[Object]";var d=XL(s,n);if(typeof i>"u")i=[];else if(pE(i,t)>=0)return"[Circular]";function f(te,L,Y){if(L&&(i=ML.call(i),i.push(L)),Y){var St={depth:s.depth};return sn(s,"quoteStyle")&&(St.quoteStyle=s.quoteStyle),e(te,St,n+1,i)}return e(te,s,n+1,i)}if(a(f,"inspect"),typeof t=="function"&&!sE(t)){var h=WL(t),m=ic(t,f);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(m.length>0?" { "+ur.call(m,", ")+" }":"")}if(lE(t)){var v=ki?on.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Df.call(t);return typeof t=="object"&&!ki?to(v):v}if(GL(t)){for(var x="<"+Q0.call(String(t.nodeName)),w=t.attributes||[],C=0;C<w.length;C++)x+=" "+w[C].name+"="+uE(PL(w[C].value),"double",s);return x+=">",t.childNodes&&t.childNodes.length&&(x+="..."),x+="</"+Q0.call(String(t.nodeName))+">",x}if(jf(t)){if(t.length===0)return"[]";var g=ic(t,f);return d&&!JL(g)?"["+Uf(g,d)+"]":"[ "+ur.call(g,", ")+" ]"}if(DL(t)){var T=ic(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!cE.call(t,"cause")?"{ ["+String(t)+"] "+ur.call(Z0.call("[cause]: "+f(t.cause),T),", ")+" }":T.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+ur.call(T,", ")+" }"}if(typeof t=="object"&&o){if(iE&&typeof t[iE]=="function"&&Lf)return Lf(t,{depth:p-n});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(zL(t)){var N=[];return Y0&&Y0.call(t,function(te,L){N.push(f(L,t,!0)+" => "+f(te,t))}),oE("Map",sc.call(t),N,d)}if(VL(t)){var _=[];return J0&&J0.call(t,function(te){_.push(f(te,t))}),oE("Set",oc.call(t),_,d)}if($L(t))return Pf("WeakMap");if(KL(t))return Pf("WeakSet");if(HL(t))return Pf("WeakRef");if(jL(t))return to(f(Number(t)));if(kL(t))return to(f(Bf.call(t)));if(UL(t))return to(AL.call(t));if(LL(t))return to(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===global)return"{ [object globalThis] }";if(!BL(t)&&!sE(t)){var D=ic(t,f),k=tE?tE(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",F=!k&&Xe&&Object(t)===t&&Xe in t?Wf.call(an(t),8,-1):A?"Object":"",z=k||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",H=z+(F||A?"["+ur.call(Z0.call([],F||[],A||[]),": ")+"] ":"");return D.length===0?H+"{}":d?H+"{"+Uf(D,d)+"}":H+"{ "+ur.call(D,", ")+" }"}return String(t)},"inspect_");function uE(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}a(uE,"wrapQuotes");function PL(e){return on.call(String(e),/"/g,"&quot;")}a(PL,"quote");function jf(e){return an(e)==="[object Array]"&&(!Xe||!(typeof e=="object"&&Xe in e))}a(jf,"isArray");function BL(e){return an(e)==="[object Date]"&&(!Xe||!(typeof e=="object"&&Xe in e))}a(BL,"isDate");function sE(e){return an(e)==="[object RegExp]"&&(!Xe||!(typeof e=="object"&&Xe in e))}a(sE,"isRegExp");function DL(e){return an(e)==="[object Error]"&&(!Xe||!(typeof e=="object"&&Xe in e))}a(DL,"isError");function LL(e){return an(e)==="[object String]"&&(!Xe||!(typeof e=="object"&&Xe in e))}a(LL,"isString");function jL(e){return an(e)==="[object Number]"&&(!Xe||!(typeof e=="object"&&Xe in e))}a(jL,"isNumber");function UL(e){return an(e)==="[object Boolean]"&&(!Xe||!(typeof e=="object"&&Xe in e))}a(UL,"isBoolean");function lE(e){if(ki)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Df)return!1;try{return Df.call(e),!0}catch{}return!1}a(lE,"isSymbol");function kL(e){if(!e||typeof e!="object"||!Bf)return!1;try{return Bf.call(e),!0}catch{}return!1}a(kL,"isBigInt");var FL=Object.prototype.hasOwnProperty||function(e){return e in this};function sn(e,t){return FL.call(e,t)}a(sn,"has");function an(e){return NL.call(e)}a(an,"toStr");function WL(e){if(e.name)return e.name;var t=IL.call(RL.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}a(WL,"nameOf");function pE(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}a(pE,"indexOf");function zL(e){if(!sc||!e||typeof e!="object")return!1;try{sc.call(e);try{oc.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}a(zL,"isMap");function $L(e){if(!ro||!e||typeof e!="object")return!1;try{ro.call(e,ro);try{no.call(e,no)}catch{return!0}return e instanceof WeakMap}catch{}return!1}a($L,"isWeakMap");function HL(e){if(!X0||!e||typeof e!="object")return!1;try{return X0.call(e),!0}catch{}return!1}a(HL,"isWeakRef");function VL(e){if(!oc||!e||typeof e!="object")return!1;try{oc.call(e);try{sc.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}a(VL,"isSet");function KL(e){if(!no||!e||typeof e!="object")return!1;try{no.call(e,no);try{ro.call(e,ro)}catch{return!0}return e instanceof WeakSet}catch{}return!1}a(KL,"isWeakSet");function GL(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}a(GL,"isElement");function fE(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return fE(Wf.call(e,0,t.maxStringLength),t)+n}var i=on.call(on.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,YL);return uE(i,"single",t)}a(fE,"inspectString");function YL(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+qL.call(t.toString(16))}a(YL,"lowbyte");function to(e){return"Object("+e+")"}a(to,"markBoxed");function Pf(e){return e+" { ? }"}a(Pf,"weakCollectionOf");function oE(e,t,r,n){var i=n?Uf(r,n):ur.call(r,", ");return e+" ("+t+") {"+i+"}"}a(oE,"collectionOf");function JL(e){for(var t=0;t<e.length;t++)if(pE(e[t],`
`)>=0)return!1;return!0}a(JL,"singleLineValues");function XL(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=ur.call(Array(e.indent+1)," ");else return null;return{base:r,prev:ur.call(Array(t+1),r)}}a(XL,"getIndent");function Uf(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+ur.call(e,","+r)+`
`+t.prev}a(Uf,"indentedJoin");function ic(e,t){var r=jf(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=sn(e,i)?t(e[i],e):""}var s=typeof Mf=="function"?Mf(e):[],o;if(ki){o={};for(var c=0;c<s.length;c++)o["$"+s[c]]=s[c]}for(var l in e)sn(e,l)&&(r&&String(Number(l))===l&&l<e.length||ki&&o["$"+l]instanceof Symbol||(aE.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if(typeof Mf=="function")for(var u=0;u<s.length;u++)cE.call(e,s[u])&&n.push("["+t(s[u])+"]: "+t(e[s[u]],e));return n}a(ic,"arrObjKeys")});var gE=y((gte,yE)=>{"use strict";var mE=Hn(),Fi=V0(),QL=hE(),ZL=Pi(),ac=mE("%WeakMap%",!0),cc=mE("%Map%",!0),ej=Fi("WeakMap.prototype.get",!0),tj=Fi("WeakMap.prototype.set",!0),rj=Fi("WeakMap.prototype.has",!0),nj=Fi("Map.prototype.get",!0),ij=Fi("Map.prototype.set",!0),sj=Fi("Map.prototype.has",!0),zf=a(function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},"listGetNode"),oj=a(function(e,t){var r=zf(e,t);return r&&r.value},"listGet"),aj=a(function(e,t,r){var n=zf(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},"listSet"),cj=a(function(e,t){return!!zf(e,t)},"listHas");yE.exports=a(function(){var t,r,n,i={assert:function(s){if(!i.has(s))throw new ZL("Side channel does not contain "+QL(s))},get:function(s){if(ac&&s&&(typeof s=="object"||typeof s=="function")){if(t)return ej(t,s)}else if(cc){if(r)return nj(r,s)}else if(n)return oj(n,s)},has:function(s){if(ac&&s&&(typeof s=="object"||typeof s=="function")){if(t)return rj(t,s)}else if(cc){if(r)return sj(r,s)}else if(n)return cj(n,s);return!1},set:function(s,o){ac&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new ac),tj(t,s,o)):cc?(r||(r=new cc),ij(r,s,o)):(n||(n={key:{},next:null}),aj(n,s,o))}};return i},"getSideChannel")});var uc=y((xte,vE)=>{"use strict";var uj=String.prototype.replace,lj=/%20/g,$f={RFC1738:"RFC1738",RFC3986:"RFC3986"};vE.exports={default:$f.RFC3986,formatters:{RFC1738:function(e){return uj.call(e,lj,"+")},RFC3986:function(e){return String(e)}},RFC1738:$f.RFC1738,RFC3986:$f.RFC3986}});var Kf=y((Ste,SE)=>{"use strict";var pj=uc(),Hf=Object.prototype.hasOwnProperty,Vn=Array.isArray,lr=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),fj=a(function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(Vn(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},"compactQueue"),xE=a(function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},"arrayToObject"),dj=a(function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(Vn(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Hf.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return Vn(t)&&!Vn(r)&&(i=xE(t,n)),Vn(t)&&Vn(r)?(r.forEach(function(s,o){if(Hf.call(t,o)){var c=t[o];c&&typeof c=="object"&&s&&typeof s=="object"?t[o]=e(c,s,n):t.push(s)}else t[o]=s}),t):Object.keys(r).reduce(function(s,o){var c=r[o];return Hf.call(s,o)?s[o]=e(s[o],c,n):s[o]=c,s},i)},"merge"),hj=a(function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},"assignSingleSource"),mj=a(function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},"decode"),Vf=1024,yj=a(function(t,r,n,i,s){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var c="",l=0;l<o.length;l+=Vf){for(var u=o.length>=Vf?o.slice(l,l+Vf):o,p=[],d=0;d<u.length;++d){var f=u.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===pj.RFC1738&&(f===40||f===41)){p[p.length]=u.charAt(d);continue}if(f<128){p[p.length]=lr[f];continue}if(f<2048){p[p.length]=lr[192|f>>6]+lr[128|f&63];continue}if(f<55296||f>=57344){p[p.length]=lr[224|f>>12]+lr[128|f>>6&63]+lr[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|u.charCodeAt(d)&1023),p[p.length]=lr[240|f>>18]+lr[128|f>>12&63]+lr[128|f>>6&63]+lr[128|f&63]}c+=p.join("")}return c},"encode"),gj=a(function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],c=Object.keys(o),l=0;l<c.length;++l){var u=c[l],p=o[u];typeof p=="object"&&p!==null&&n.indexOf(p)===-1&&(r.push({obj:o,prop:u}),n.push(p))}return fj(r),t},"compact"),vj=a(function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},"isRegExp"),xj=a(function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},"isBuffer"),Sj=a(function(t,r){return[].concat(t,r)},"combine"),bj=a(function(t,r){if(Vn(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)},"maybeMap");SE.exports={arrayToObject:xE,assign:hj,combine:Sj,compact:gj,decode:mj,encode:yj,isBuffer:xj,isRegExp:vj,maybeMap:bj,merge:dj}});var CE=y((wte,TE)=>{"use strict";var wE=gE(),lc=Kf(),io=uc(),wj=Object.prototype.hasOwnProperty,EE={brackets:a(function(t){return t+"[]"},"brackets"),comma:"comma",indices:a(function(t,r){return t+"["+r+"]"},"indices"),repeat:a(function(t){return t},"repeat")},pr=Array.isArray,Ej=Array.prototype.push,OE=a(function(e,t){Ej.apply(e,pr(t)?t:[t])},"pushToArray"),Oj=Date.prototype.toISOString,bE=io.default,De={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:lc.encode,encodeValuesOnly:!1,format:bE,formatter:io.formatters[bE],indices:!1,serializeDate:a(function(t){return Oj.call(t)},"serializeDate"),skipNulls:!1,strictNullHandling:!1},Tj=a(function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},"isNonNullishPrimitive"),Gf={},Cj=a(function e(t,r,n,i,s,o,c,l,u,p,d,f,h,m,v,x,w,C){for(var g=t,T=C,N=0,_=!1;(T=T.get(Gf))!==void 0&&!_;){var D=T.get(t);if(N+=1,typeof D<"u"){if(D===N)throw new RangeError("Cyclic object value");_=!0}typeof T.get(Gf)>"u"&&(N=0)}if(typeof p=="function"?g=p(r,g):g instanceof Date?g=h(g):n==="comma"&&pr(g)&&(g=lc.maybeMap(g,function(Je){return Je instanceof Date?h(Je):Je})),g===null){if(o)return u&&!x?u(r,De.encoder,w,"key",m):r;g=""}if(Tj(g)||lc.isBuffer(g)){if(u){var k=x?r:u(r,De.encoder,w,"key",m);return[v(k)+"="+v(u(g,De.encoder,w,"value",m))]}return[v(r)+"="+v(String(g))]}var A=[];if(typeof g>"u")return A;var F;if(n==="comma"&&pr(g))x&&u&&(g=lc.maybeMap(g,u)),F=[{value:g.length>0?g.join(",")||null:void 0}];else if(pr(p))F=p;else{var z=Object.keys(g);F=d?z.sort(d):z}var H=l?r.replace(/\./g,"%2E"):r,te=i&&pr(g)&&g.length===1?H+"[]":H;if(s&&pr(g)&&g.length===0)return te+"[]";for(var L=0;L<F.length;++L){var Y=F[L],St=typeof Y=="object"&&typeof Y.value<"u"?Y.value:g[Y];if(!(c&&St===null)){var W=f&&l?Y.replace(/\./g,"%2E"):Y,B=pr(g)?typeof n=="function"?n(te,W):te:te+(f?"."+W:"["+W+"]");C.set(t,N);var me=wE();me.set(Gf,C),OE(A,e(St,B,n,i,s,o,c,l,n==="comma"&&x&&pr(g)?null:u,p,d,f,h,m,v,x,w,me))}}return A},"stringify"),_j=a(function(t){if(!t)return De;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||De.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=io.default;if(typeof t.format<"u"){if(!wj.call(io.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=io.formatters[n],s=De.filter;(typeof t.filter=="function"||pr(t.filter))&&(s=t.filter);var o;if(t.arrayFormat in EE?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=De.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:De.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:De.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:De.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:De.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?De.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:De.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:De.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:De.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:De.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:De.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:De.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:De.strictNullHandling}},"normalizeStringifyOptions");TE.exports=function(e,t){var r=e,n=_j(t),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):pr(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var c=EE[n.arrayFormat],l=c==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var u=wE(),p=0;p<i.length;++p){var d=i[p];n.skipNulls&&r[d]===null||OE(o,Cj(r[d],d,c,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var f=o.join(n.delimiter),h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}});var NE=y((Ote,AE)=>{"use strict";var Wi=Kf(),Yf=Object.prototype.hasOwnProperty,Aj=Array.isArray,Ae={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Wi.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Nj=a(function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},"interpretNumericEntities"),_E=a(function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},"parseArrayValue"),Rj="utf8=%26%2310003%3B",Ij="utf8=%E2%9C%93",qj=a(function(t,r){var n={__proto__:null},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),c=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===Ij?u="utf-8":o[l]===Rj&&(u="iso-8859-1"),c=l,l=o.length);for(l=0;l<o.length;++l)if(l!==c){var p=o[l],d=p.indexOf("]="),f=d===-1?p.indexOf("="):d+1,h,m;f===-1?(h=r.decoder(p,Ae.decoder,u,"key"),m=r.strictNullHandling?null:""):(h=r.decoder(p.slice(0,f),Ae.decoder,u,"key"),m=Wi.maybeMap(_E(p.slice(f+1),r),function(x){return r.decoder(x,Ae.decoder,u,"value")})),m&&r.interpretNumericEntities&&u==="iso-8859-1"&&(m=Nj(m)),p.indexOf("[]=")>-1&&(m=Aj(m)?[m]:m);var v=Yf.call(n,h);v&&r.duplicates==="combine"?n[h]=Wi.combine(n[h],m):(!v||r.duplicates==="last")&&(n[h]=m)}return n},"parseQueryStringValues"),Mj=a(function(e,t,r,n){for(var i=n?t:_E(t,r),s=e.length-1;s>=0;--s){var o,c=e[s];if(c==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=r.plainObjects?Object.create(null):{};var l=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,u=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,p=parseInt(u,10);!r.parseArrays&&u===""?o={0:i}:!isNaN(p)&&c!==u&&String(p)===u&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(o=[],o[p]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},"parseObject"),Pj=a(function(t,r,n,i){if(t){var s=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,p=[];if(u){if(!n.plainObjects&&Yf.call(Object.prototype,u)&&!n.allowPrototypes)return;p.push(u)}for(var d=0;n.depth>0&&(l=c.exec(s))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&Yf.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(l[1])}return l&&p.push("["+s.slice(l.index)+"]"),Mj(p,r,n,i)}},"parseQueryStringKeys"),Bj=a(function(t){if(!t)return Ae;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?Ae.charset:t.charset,n=typeof t.duplicates>"u"?Ae.duplicates:t.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Ae.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ae.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ae.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ae.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ae.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ae.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ae.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Ae.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Ae.decoder,delimiter:typeof t.delimiter=="string"||Wi.isRegExp(t.delimiter)?t.delimiter:Ae.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ae.depth,duplicates:n,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ae.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ae.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ae.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ae.strictNullHandling}},"normalizeParseOptions");AE.exports=function(e,t){var r=Bj(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?qj(e,r):e,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var c=s[o],l=Pj(c,n[c],r,typeof e=="string");i=Wi.merge(i,l,r)}return r.allowSparse===!0?i:Wi.compact(i)}});var IE=y((Cte,RE)=>{"use strict";var Dj=CE(),Lj=NE(),jj=uc();RE.exports={formats:jj,parse:Lj,stringify:Dj}});var ME=y((_te,qE)=>{"use strict";var Uj=require("crypto"),Jf=Vw(),kj=IE(),Qf=class Qf{constructor(t,r,n,i){this.host=i?`${r}:8081`:r,this.masterKey=n,this.dbName=t,i&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0")}getUDFS(t){let r="udfs";return this.callApi(this.getResource(t,r)).then(({UserDefinedFunctions:n})=>({type:r,data:n}))}getTriggers(t){let r="triggers";return this.callApi(this.getResource(t,r)).then(({Triggers:n})=>({type:r,data:n}))}getStoredProcs(t){let r="sprocs";return this.callApi(this.getResource(t,r)).then(({StoredProcedures:n})=>({type:r,data:n}))}getCollection(t){let r="colls";return this.callApi(this.getResource(t,r)).then(n=>({type:r,data:n}))}getCollectionWithExtra(t,r){let n=[this.getCollection,this.getUDFS,this.getTriggers,this.getStoredProcs];return Promise.all(n.map(i=>i.call(this,t).catch(s=>{typeof r=="function"&&r(s)}))).then(i=>i.filter(Boolean).reduce((s,{type:o,data:c})=>(s[o]=c,s),{}))}callApi({url:t,resourceType:r="",resourceId:n=""},i="get"){let s=new Date().toUTCString();return Jf({method:i,url:t,headers:{"x-ms-version":"2017-02-22","x-ms-date":s,"Content-Type":"application/json",authorization:this.getAuthToken(i,r,n,s)}}).then(({data:o})=>o)}getAuthToken(t="",r="",n="",i){let s="master",o="1.0",c=Buffer.from(this.masterKey,"base64"),l=`${t}
${r}
${n}
${i.toLowerCase()}

`,u=Buffer.from(l,"utf8"),p=Uj.createHmac("sha256",c).update(u).digest("base64");return encodeURIComponent(`type=${s}&ver=${o}&sig=${p}`)}getRequestURL(t,r=""){return`https://${this.host}/${t}/${r}`}getResource(t,r){let n=`dbs/${this.dbName}/colls/${t}`,i=this.getRequestURL(n,r);return(r==="dbs"||r==="colls")&&(i=this.getRequestURL(n)),{url:i,resourceId:n,resourceType:r}}async getAdditionalAccountInfo(t){let{clientId:r,appSecret:n,tenantId:i,subscriptionId:s,resourceGroupName:o,host:c}=t,l=/(https:\/\/)?(.+)\.documents.+/i,u=l.test(c)?l.exec(c)[2]:"",p=`https://login.microsoftonline.com/${i}/oauth2/token`,{data:d}=await Jf({method:"post",url:p,data:kj.stringify({grant_type:"client_credentials",client_id:r,client_secret:n,resource:"https://management.azure.com/"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),f=`https://management.azure.com/subscriptions/${s}/resourceGroups/${o}/providers/Microsoft.DocumentDB/databaseAccounts/${u}?api-version=2015-04-08`,{data:h}=await Jf({method:"get",url:f,headers:{Authorization:`${d.token_type} ${d.access_token}`}});return Array.isArray(h.value)&&(h=h.value[0]),{tenant:i,resGrp:o,subscription:s,preferredLocation:h.location,enableMultipleWriteLocations:h.properties.enableMultipleWriteLocations,enableAutomaticFailover:h.properties.enableAutomaticFailover,isVirtualNetworkFilterEnabled:h.properties.isVirtualNetworkFilterEnabled,virtualNetworkRules:h.properties.virtualNetworkRules.map(({id:m,ignoreMissingVNetServiceEndpoint:v})=>({virtualNetworkId:m,ignoreMissingVNetServiceEndpoint:v})),ipRangeFilter:h.properties.ipRangeFilter,tags:Object.entries(h.tags).map(([m,v])=>({tagName:m,tagValue:v})),locations:h.properties.locations.map(({id:m,locationName:v,failoverPriority:x,isZoneRedundant:w})=>({locationId:m,locationName:v,failoverPriority:x,isZoneRedundant:w}))}}};a(Qf,"CosmosClient");var Xf=Qf;qE.exports=Xf});var pc=y((Nte,so)=>{"use strict";typeof global.Map<"u"?(so.exports=global.Map,so.exports.Map=global.Map):(Pt=a(function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(e[t]!=null){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}},"Map"),Pt.prototype.clear=function(){this._keys=[],this._values={}},Pt.prototype.delete=function(e){var t=this._values[e];return t==null?!1:(delete this._values[e],this._keys.splice(t.i,1),!0)},Pt.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:r!==void 0?[r,e._values[r].v]:void 0,done:r===void 0}}}},Pt.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},Pt.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},Pt.prototype.has=function(e){return this._values[e]!=null},Pt.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:r!==void 0?r:void 0,done:r===void 0}}}},Pt.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},Pt.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:r!==void 0?e._values[r].v:void 0,done:r===void 0}}}},Object.defineProperty(Pt.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),so.exports=Pt,so.exports.Map=Pt);var Pt});var Kn=y((Ite,Zf)=>{function E(e,t){if(!(this instanceof E))return new E(e,t);this._bsontype="Long",this.low_=e|0,this.high_=t|0}a(E,"Long");E.prototype.toInt=function(){return this.low_};E.prototype.toNumber=function(){return this.high_*E.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};E.prototype.toJSON=function(){return this.toString()};E.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative())if(this.equals(E.MIN_VALUE)){var r=E.fromNumber(t),n=this.div(r),i=n.multiply(r).subtract(this);return n.toString(t)+i.toInt().toString(t)}else return"-"+this.negate().toString(t);var s=E.fromNumber(Math.pow(t,6));i=this;for(var o="";!i.isZero();){var c=i.div(s),l=i.subtract(c.multiply(s)).toInt(),u=l.toString(t);if(i=c,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}};E.prototype.getHighBits=function(){return this.high_};E.prototype.getLowBits=function(){return this.low_};E.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:E.TWO_PWR_32_DBL_+this.low_};E.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(E.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=this.high_!==0?this.high_:this.low_,t=31;t>0&&!(e&1<<t);t--);return this.high_!==0?t+33:t+1};E.prototype.isZero=function(){return this.high_===0&&this.low_===0};E.prototype.isNegative=function(){return this.high_<0};E.prototype.isOdd=function(){return(this.low_&1)===1};E.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_};E.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_};E.prototype.lessThan=function(e){return this.compare(e)<0};E.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0};E.prototype.greaterThan=function(e){return this.compare(e)>0};E.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0};E.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1};E.prototype.negate=function(){return this.equals(E.MIN_VALUE)?E.MIN_VALUE:this.not().add(E.ONE)};E.prototype.add=function(e){var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,s=e.high_>>>16,o=e.high_&65535,c=e.low_>>>16,l=e.low_&65535,u=0,p=0,d=0,f=0;return f+=i+l,d+=f>>>16,f&=65535,d+=n+c,p+=d>>>16,d&=65535,p+=r+o,u+=p>>>16,p&=65535,u+=t+s,u&=65535,E.fromBits(d<<16|f,u<<16|p)};E.prototype.subtract=function(e){return this.add(e.negate())};E.prototype.multiply=function(e){if(this.isZero())return E.ZERO;if(e.isZero())return E.ZERO;if(this.equals(E.MIN_VALUE))return e.isOdd()?E.MIN_VALUE:E.ZERO;if(e.equals(E.MIN_VALUE))return this.isOdd()?E.MIN_VALUE:E.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(E.TWO_PWR_24_)&&e.lessThan(E.TWO_PWR_24_))return E.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,s=e.high_>>>16,o=e.high_&65535,c=e.low_>>>16,l=e.low_&65535,u=0,p=0,d=0,f=0;return f+=i*l,d+=f>>>16,f&=65535,d+=n*l,p+=d>>>16,d&=65535,d+=i*c,p+=d>>>16,d&=65535,p+=r*l,u+=p>>>16,p&=65535,p+=n*c,u+=p>>>16,p&=65535,p+=i*o,u+=p>>>16,p&=65535,u+=t*l+r*c+n*o+i*s,u&=65535,E.fromBits(d<<16|f,u<<16|p)};E.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return E.ZERO;if(this.equals(E.MIN_VALUE)){if(e.equals(E.ONE)||e.equals(E.NEG_ONE))return E.MIN_VALUE;if(e.equals(E.MIN_VALUE))return E.ONE;var t=this.shiftRight(1),r=t.div(e).shiftLeft(1);if(r.equals(E.ZERO))return e.isNegative()?E.ONE:E.NEG_ONE;var n=this.subtract(e.multiply(r)),i=r.add(n.div(e));return i}else if(e.equals(E.MIN_VALUE))return E.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var s=E.ZERO;for(n=this;n.greaterThanOrEqual(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),c=o<=48?1:Math.pow(2,o-48),l=E.fromNumber(r),u=l.multiply(e);u.isNegative()||u.greaterThan(n);)r-=c,l=E.fromNumber(r),u=l.multiply(e);l.isZero()&&(l=E.ONE),s=s.add(l),n=n.subtract(u)}return s};E.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))};E.prototype.not=function(){return E.fromBits(~this.low_,~this.high_)};E.prototype.and=function(e){return E.fromBits(this.low_&e.low_,this.high_&e.high_)};E.prototype.or=function(e){return E.fromBits(this.low_|e.low_,this.high_|e.high_)};E.prototype.xor=function(e){return E.fromBits(this.low_^e.low_,this.high_^e.high_)};E.prototype.shiftLeft=function(e){if(e&=63,e===0)return this;var t=this.low_;if(e<32){var r=this.high_;return E.fromBits(t<<e,r<<e|t>>>32-e)}else return E.fromBits(0,t<<e-32)};E.prototype.shiftRight=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return E.fromBits(r>>>e|t<<32-e,t>>e)}else return E.fromBits(t>>e-32,t>=0?0:-1)};E.prototype.shiftRightUnsigned=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return E.fromBits(r>>>e|t<<32-e,t>>>e)}else return e===32?E.fromBits(t,0):E.fromBits(t>>>e-32,0)};E.fromInt=function(e){if(-128<=e&&e<128){var t=E.INT_CACHE_[e];if(t)return t}var r=new E(e|0,e<0?-1:0);return-128<=e&&e<128&&(E.INT_CACHE_[e]=r),r};E.fromNumber=function(e){return isNaN(e)||!isFinite(e)?E.ZERO:e<=-E.TWO_PWR_63_DBL_?E.MIN_VALUE:e+1>=E.TWO_PWR_63_DBL_?E.MAX_VALUE:e<0?E.fromNumber(-e).negate():new E(e%E.TWO_PWR_32_DBL_|0,e/E.TWO_PWR_32_DBL_|0)};E.fromBits=function(e,t){return new E(e,t)};E.fromString=function(e,t){if(e.length===0)throw Error("number format error: empty string");var r=t||10;if(r<2||36<r)throw Error("radix out of range: "+r);if(e.charAt(0)==="-")return E.fromString(e.substring(1),r).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var n=E.fromNumber(Math.pow(r,8)),i=E.ZERO,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),r);if(o<8){var l=E.fromNumber(Math.pow(r,o));i=i.multiply(l).add(E.fromNumber(c))}else i=i.multiply(n),i=i.add(E.fromNumber(c))}return i};E.INT_CACHE_={};E.TWO_PWR_16_DBL_=65536;E.TWO_PWR_24_DBL_=1<<24;E.TWO_PWR_32_DBL_=E.TWO_PWR_16_DBL_*E.TWO_PWR_16_DBL_;E.TWO_PWR_31_DBL_=E.TWO_PWR_32_DBL_/2;E.TWO_PWR_48_DBL_=E.TWO_PWR_32_DBL_*E.TWO_PWR_16_DBL_;E.TWO_PWR_64_DBL_=E.TWO_PWR_32_DBL_*E.TWO_PWR_32_DBL_;E.TWO_PWR_63_DBL_=E.TWO_PWR_64_DBL_/2;E.ZERO=E.fromInt(0);E.ONE=E.fromInt(1);E.NEG_ONE=E.fromInt(-1);E.MAX_VALUE=E.fromBits(-1,2147483647);E.MIN_VALUE=E.fromBits(0,-2147483648);E.TWO_PWR_24_=E.fromInt(1<<24);Zf.exports=E;Zf.exports.Long=E});var oo=y((Mte,ed)=>{function zi(e){if(!(this instanceof zi))return new zi(e);this._bsontype="Double",this.value=e}a(zi,"Double");zi.prototype.valueOf=function(){return this.value};zi.prototype.toJSON=function(){return this.value};ed.exports=zi;ed.exports.Double=zi});var ao=y((Bte,td)=>{function O(e,t){if(!(this instanceof O))return new O(e,t);this._bsontype="Timestamp",this.low_=e|0,this.high_=t|0}a(O,"Timestamp");O.prototype.toInt=function(){return this.low_};O.prototype.toNumber=function(){return this.high_*O.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};O.prototype.toJSON=function(){return this.toString()};O.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative())if(this.equals(O.MIN_VALUE)){var r=O.fromNumber(t),n=this.div(r),i=n.multiply(r).subtract(this);return n.toString(t)+i.toInt().toString(t)}else return"-"+this.negate().toString(t);var s=O.fromNumber(Math.pow(t,6));i=this;for(var o="";!i.isZero();){var c=i.div(s),l=i.subtract(c.multiply(s)).toInt(),u=l.toString(t);if(i=c,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}};O.prototype.getHighBits=function(){return this.high_};O.prototype.getLowBits=function(){return this.low_};O.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:O.TWO_PWR_32_DBL_+this.low_};O.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(O.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=this.high_!==0?this.high_:this.low_,t=31;t>0&&!(e&1<<t);t--);return this.high_!==0?t+33:t+1};O.prototype.isZero=function(){return this.high_===0&&this.low_===0};O.prototype.isNegative=function(){return this.high_<0};O.prototype.isOdd=function(){return(this.low_&1)===1};O.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_};O.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_};O.prototype.lessThan=function(e){return this.compare(e)<0};O.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0};O.prototype.greaterThan=function(e){return this.compare(e)>0};O.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0};O.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1};O.prototype.negate=function(){return this.equals(O.MIN_VALUE)?O.MIN_VALUE:this.not().add(O.ONE)};O.prototype.add=function(e){var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,s=e.high_>>>16,o=e.high_&65535,c=e.low_>>>16,l=e.low_&65535,u=0,p=0,d=0,f=0;return f+=i+l,d+=f>>>16,f&=65535,d+=n+c,p+=d>>>16,d&=65535,p+=r+o,u+=p>>>16,p&=65535,u+=t+s,u&=65535,O.fromBits(d<<16|f,u<<16|p)};O.prototype.subtract=function(e){return this.add(e.negate())};O.prototype.multiply=function(e){if(this.isZero())return O.ZERO;if(e.isZero())return O.ZERO;if(this.equals(O.MIN_VALUE))return e.isOdd()?O.MIN_VALUE:O.ZERO;if(e.equals(O.MIN_VALUE))return this.isOdd()?O.MIN_VALUE:O.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(O.TWO_PWR_24_)&&e.lessThan(O.TWO_PWR_24_))return O.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,s=e.high_>>>16,o=e.high_&65535,c=e.low_>>>16,l=e.low_&65535,u=0,p=0,d=0,f=0;return f+=i*l,d+=f>>>16,f&=65535,d+=n*l,p+=d>>>16,d&=65535,d+=i*c,p+=d>>>16,d&=65535,p+=r*l,u+=p>>>16,p&=65535,p+=n*c,u+=p>>>16,p&=65535,p+=i*o,u+=p>>>16,p&=65535,u+=t*l+r*c+n*o+i*s,u&=65535,O.fromBits(d<<16|f,u<<16|p)};O.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return O.ZERO;if(this.equals(O.MIN_VALUE)){if(e.equals(O.ONE)||e.equals(O.NEG_ONE))return O.MIN_VALUE;if(e.equals(O.MIN_VALUE))return O.ONE;var t=this.shiftRight(1),r=t.div(e).shiftLeft(1);if(r.equals(O.ZERO))return e.isNegative()?O.ONE:O.NEG_ONE;var n=this.subtract(e.multiply(r)),i=r.add(n.div(e));return i}else if(e.equals(O.MIN_VALUE))return O.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var s=O.ZERO;for(n=this;n.greaterThanOrEqual(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),c=o<=48?1:Math.pow(2,o-48),l=O.fromNumber(r),u=l.multiply(e);u.isNegative()||u.greaterThan(n);)r-=c,l=O.fromNumber(r),u=l.multiply(e);l.isZero()&&(l=O.ONE),s=s.add(l),n=n.subtract(u)}return s};O.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))};O.prototype.not=function(){return O.fromBits(~this.low_,~this.high_)};O.prototype.and=function(e){return O.fromBits(this.low_&e.low_,this.high_&e.high_)};O.prototype.or=function(e){return O.fromBits(this.low_|e.low_,this.high_|e.high_)};O.prototype.xor=function(e){return O.fromBits(this.low_^e.low_,this.high_^e.high_)};O.prototype.shiftLeft=function(e){if(e&=63,e===0)return this;var t=this.low_;if(e<32){var r=this.high_;return O.fromBits(t<<e,r<<e|t>>>32-e)}else return O.fromBits(0,t<<e-32)};O.prototype.shiftRight=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return O.fromBits(r>>>e|t<<32-e,t>>e)}else return O.fromBits(t>>e-32,t>=0?0:-1)};O.prototype.shiftRightUnsigned=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return O.fromBits(r>>>e|t<<32-e,t>>>e)}else return e===32?O.fromBits(t,0):O.fromBits(t>>>e-32,0)};O.fromInt=function(e){if(-128<=e&&e<128){var t=O.INT_CACHE_[e];if(t)return t}var r=new O(e|0,e<0?-1:0);return-128<=e&&e<128&&(O.INT_CACHE_[e]=r),r};O.fromNumber=function(e){return isNaN(e)||!isFinite(e)?O.ZERO:e<=-O.TWO_PWR_63_DBL_?O.MIN_VALUE:e+1>=O.TWO_PWR_63_DBL_?O.MAX_VALUE:e<0?O.fromNumber(-e).negate():new O(e%O.TWO_PWR_32_DBL_|0,e/O.TWO_PWR_32_DBL_|0)};O.fromBits=function(e,t){return new O(e,t)};O.fromString=function(e,t){if(e.length===0)throw Error("number format error: empty string");var r=t||10;if(r<2||36<r)throw Error("radix out of range: "+r);if(e.charAt(0)==="-")return O.fromString(e.substring(1),r).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var n=O.fromNumber(Math.pow(r,8)),i=O.ZERO,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),r);if(o<8){var l=O.fromNumber(Math.pow(r,o));i=i.multiply(l).add(O.fromNumber(c))}else i=i.multiply(n),i=i.add(O.fromNumber(c))}return i};O.INT_CACHE_={};O.TWO_PWR_16_DBL_=65536;O.TWO_PWR_24_DBL_=1<<24;O.TWO_PWR_32_DBL_=O.TWO_PWR_16_DBL_*O.TWO_PWR_16_DBL_;O.TWO_PWR_31_DBL_=O.TWO_PWR_32_DBL_/2;O.TWO_PWR_48_DBL_=O.TWO_PWR_32_DBL_*O.TWO_PWR_16_DBL_;O.TWO_PWR_64_DBL_=O.TWO_PWR_32_DBL_*O.TWO_PWR_32_DBL_;O.TWO_PWR_63_DBL_=O.TWO_PWR_64_DBL_/2;O.ZERO=O.fromInt(0);O.ONE=O.fromInt(1);O.NEG_ONE=O.fromInt(-1);O.MAX_VALUE=O.fromBits(-1,2147483647);O.MIN_VALUE=O.fromBits(0,-2147483648);O.TWO_PWR_24_=O.fromInt(1<<24);td.exports=O;td.exports.Timestamp=O});var cn=y((Lte,BE)=>{"use strict";function Fj(e){return e.toString().replace(/function *\(/,"function (")}a(Fj,"normalizedFunctionString");function PE(e,t){return new Buffer(e,t)}a(PE,"newBuffer");function Wj(){return Buffer.alloc.apply(Buffer,arguments)}a(Wj,"allocBuffer");function zj(){return Buffer.from.apply(Buffer,arguments)}a(zj,"toBuffer");BE.exports={normalizedFunctionString:Fj,allocBuffer:typeof Buffer.alloc=="function"?Wj:PE,toBuffer:typeof Buffer.from=="function"?zj:PE}});var lo=y((Ute,hc)=>{var LE="inspect",dc=cn(),rd=parseInt(Math.random()*16777215,10),DE=new RegExp("^[0-9a-fA-F]{24}$");try{Buffer&&Buffer.from&&(fc=!0,LE=require("util").inspect.custom||"inspect")}catch{fc=!1}var fc,ne=a(function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this._bsontype="ObjectID",t==null||typeof t=="number"){this.id=this.generate(t),e.cacheHexString&&(this.__id=this.toString("hex"));return}var r=e.isValid(t);if(!r&&t!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r&&typeof t=="string"&&t.length===24&&fc)return new e(dc.toBuffer(t,"hex"));if(r&&typeof t=="string"&&t.length===24)return e.createFromHexString(t);if(t!=null&&t.length===12)this.id=t;else{if(t!=null&&typeof t.toHexString=="function")return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}e.cacheHexString&&(this.__id=this.toString("hex"))},"ObjectID"),jE=[];for(Ot=0;Ot<256;Ot++)jE[Ot]=(Ot<=15?"0":"")+Ot.toString(16);var Ot;ne.prototype.toHexString=function(){if(ne.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof uo)return e=$j(this.id),ne.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=jE[this.id.charCodeAt(t)];return ne.cacheHexString&&(this.__id=e),e};ne.prototype.get_inc=function(){return ne.index=(ne.index+1)%16777215};ne.prototype.getInc=function(){return this.get_inc()};ne.prototype.generate=function(e){typeof e!="number"&&(e=~~(Date.now()/1e3));var t=(typeof process>"u"||process.pid===1?Math.floor(Math.random()*1e5):process.pid)%65535,r=this.get_inc(),n=dc.allocBuffer(12);return n[3]=e&255,n[2]=e>>8&255,n[1]=e>>16&255,n[0]=e>>24&255,n[6]=rd&255,n[5]=rd>>8&255,n[4]=rd>>16&255,n[8]=t&255,n[7]=t>>8&255,n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n};ne.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString(typeof e=="string"?e:"hex"):this.toHexString()};ne.prototype[LE]=ne.prototype.toString;ne.prototype.toJSON=function(){return this.toHexString()};ne.prototype.equals=a(function(t){return t instanceof ne?this.toString()===t.toString():typeof t=="string"&&ne.isValid(t)&&t.length===12&&this.id instanceof uo?t===this.id.toString("binary"):typeof t=="string"&&ne.isValid(t)&&t.length===24?t.toLowerCase()===this.toHexString():typeof t=="string"&&ne.isValid(t)&&t.length===12?t===this.id:t!=null&&(t instanceof ne||t.toHexString)?t.toHexString()===this.toHexString():!1},"equals");ne.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(Math.floor(t)*1e3),e};ne.index=~~(Math.random()*16777215);ne.createPk=a(function(){return new ne},"createPk");ne.createFromTime=a(function(t){var r=dc.toBuffer([0,0,0,0,0,0,0,0,0,0,0,0]);return r[3]=t&255,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,new ne(r)},"createFromTime");var co=[];Ot=0;for(;Ot<10;)co[48+Ot]=Ot++;for(;Ot<16;)co[55+Ot]=co[87+Ot]=Ot++;var uo=Buffer,$j=a(function(e){return e.toString("hex")},"convertToHex");ne.createFromHexString=a(function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(fc)return new ne(dc.toBuffer(t,"hex"));for(var r=new uo(12),n=0,i=0;i<24;)r[n++]=co[t.charCodeAt(i++)]<<4|co[t.charCodeAt(i++)];return new ne(r)},"createFromHexString");ne.isValid=a(function(t){return t==null?!1:typeof t=="number"?!0:typeof t=="string"?t.length===12||t.length===24&&DE.test(t):t instanceof ne||t instanceof uo?!0:typeof t.toHexString=="function"&&(t.id instanceof uo||typeof t.id=="string")?t.id.length===12||t.id.length===24&&DE.test(t.id):!1},"isValid");Object.defineProperty(ne.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=e&255,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}});hc.exports=ne;hc.exports.ObjectID=ne;hc.exports.ObjectId=ne});var po=y((Fte,nd)=>{function mc(e,t){if(!(this instanceof mc))return new mc;this._bsontype="BSONRegExp",this.pattern=e||"",this.options=t||"";for(var r=0;r<this.options.length;r++)if(!(this.options[r]==="i"||this.options[r]==="m"||this.options[r]==="x"||this.options[r]==="l"||this.options[r]==="s"||this.options[r]==="u"))throw new Error("the regular expression options ["+this.options[r]+"] is not supported")}a(mc,"BSONRegExp");nd.exports=mc;nd.exports.BSONRegExp=mc});var fo=y((zte,id)=>{var Hj=Buffer&&require("util").inspect.custom||"inspect";function un(e){if(!(this instanceof un))return new un(e);this._bsontype="Symbol",this.value=e}a(un,"Symbol");un.prototype.valueOf=function(){return this.value};un.prototype.toString=function(){return this.value};un.prototype[Hj]=function(){return this.value};un.prototype.toJSON=function(){return this.value};id.exports=un;id.exports.Symbol=un});var yc=y((Hte,sd)=>{var $i=a(function(e){if(!(this instanceof $i))return new $i(e);this._bsontype="Int32",this.value=e},"Int32");$i.prototype.valueOf=function(){return this.value};$i.prototype.toJSON=function(){return this.value};sd.exports=$i;sd.exports.Int32=$i});var ho=y((Kte,ad)=>{var od=a(function e(t,r){if(!(this instanceof e))return new e(t,r);this._bsontype="Code",this.code=t,this.scope=r},"Code");od.prototype.toJSON=function(){return{scope:this.scope,code:this.code}};ad.exports=od;ad.exports.Code=od});var yo=y((Yte,ud)=>{"use strict";var J=Kn(),Vj=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Kj=/^(\+|-)?(Infinity|inf)$/i,Gj=/^(\+|-)?NaN$/i,mo=6111,gc=-6176,cd=6176,Yj=34,vc=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),xc=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Sc=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Jj=/^([-+])?(\d+)?$/,Tr=cn(),UE=a(function(e){return!isNaN(parseInt(e,10))},"isDigit"),Xj=a(function(e){var t=J.fromNumber(1e9),r=J.fromNumber(0),n=0;if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:r};for(n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new J(e.parts[n],0)),e.parts[n]=r.div(t).low_,r=r.modulo(t);return{quotient:e,rem:r}},"divideu128"),Qj=a(function(e,t){if(!e&&!t)return{high:J.fromNumber(0),low:J.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new J(e.getLowBits(),0),i=t.shiftRightUnsigned(32),s=new J(t.getLowBits(),0),o=r.multiply(i),c=r.multiply(s),l=n.multiply(i),u=n.multiply(s);return o=o.add(c.shiftRightUnsigned(32)),c=new J(c.getLowBits(),0).add(l).add(u.shiftRightUnsigned(32)),o=o.add(c.shiftRightUnsigned(32)),u=c.shiftLeft(32).add(new J(u.getLowBits(),0)),{high:o,low:u}},"multiply64x2"),Zj=a(function(e,t){var r=e.high_>>>0,n=t.high_>>>0;if(r<n)return!0;if(r===n){var i=e.low_>>>0,s=t.low_>>>0;if(i<s)return!0}return!1},"lessThan"),Tt=a(function(e){this._bsontype="Decimal128",this.bytes=e},"Decimal128");Tt.fromString=function(e){var t=!1,r=!1,n=!1,i=0,s=0,o=0,c=0,l=0,u=[0],p=0,d=0,f=0,h=0,m=0,v=0,x=[0,0],w=[0,0],C=0,g=0;if(e=e.trim(),e.length>=7e3)throw new Error(""+e+" not a valid Decimal128 string");var T=e.match(Vj),N=e.match(Kj),_=e.match(Gj);if(!T&&!N&&!_||e.length===0)throw new Error(""+e+" not a valid Decimal128 string");if(T&&T[4]&&T[2]===void 0)throw new Error(""+e+" not a valid Decimal128 string");if((e[g]==="+"||e[g]==="-")&&(t=e[g++]==="-"),!UE(e[g])&&e[g]!=="."){if(e[g]==="i"||e[g]==="I")return new Tt(Tr.toBuffer(t?xc:Sc));if(e[g]==="N")return new Tt(Tr.toBuffer(vc))}for(;UE(e[g])||e[g]===".";){if(e[g]==="."){if(r)return new Tt(Tr.toBuffer(vc));r=!0,g=g+1;continue}p<34&&(e[g]!=="0"||n)&&(n||(l=s),n=!0,u[d++]=parseInt(e[g],10),p=p+1),n&&(o=o+1),r&&(c=c+1),s=s+1,g=g+1}if(r&&!s)throw new Error(""+e+" not a valid Decimal128 string");if(e[g]==="e"||e[g]==="E"){var D=e.substr(++g).match(Jj);if(!D||!D[2])return new Tt(Tr.toBuffer(vc));m=parseInt(D[0],10),g=g+D[0].length}if(e[g])return new Tt(Tr.toBuffer(vc));if(f=0,!p)f=0,h=0,u[0]=0,o=1,p=1,i=0;else if(h=p-1,i=o,m!==0&&i!==1)for(;e[l+i-1]==="0";)i=i-1;for(m<=c&&c-m>16384?m=gc:m=m-c;m>mo;){if(h=h+1,h-f>Yj){var k=u.join("");if(k.match(/^0+$/)){m=mo;break}else return new Tt(Tr.toBuffer(t?xc:Sc))}m=m-1}for(;m<gc||p<o;){if(h===0){m=gc,i=0;break}if(p<o?o=o-1:h=h-1,m<mo)m=m+1;else if(k=u.join(""),k.match(/^0+$/)){m=mo;break}else return new Tt(Tr.toBuffer(t?xc:Sc))}if(h-f+1<i&&e[i]!=="0"){var A=s;r&&m===gc&&(l=l+1,A=A+1);var F=parseInt(e[l+h+1],10),z=0;if(F>=5&&(z=1,F===5)){for(z=u[h]%2===1,v=l+h+2;v<A;v++)if(parseInt(e[v],10)){z=1;break}}if(z){for(var H=h;H>=0&&++u[H]>9;H--)if(u[H]=0,H===0)if(m<mo)m=m+1,u[H]=1;else return new Tt(Tr.toBuffer(t?xc:Sc))}}if(x=J.fromNumber(0),w=J.fromNumber(0),i===0)x=J.fromNumber(0),w=J.fromNumber(0);else if(h-f<17)for(H=f,w=J.fromNumber(u[H++]),x=new J(0,0);H<=h;H++)w=w.multiply(J.fromNumber(10)),w=w.add(J.fromNumber(u[H]));else{for(H=f,x=J.fromNumber(u[H++]);H<=h-17;H++)x=x.multiply(J.fromNumber(10)),x=x.add(J.fromNumber(u[H]));for(w=J.fromNumber(u[H++]);H<=h;H++)w=w.multiply(J.fromNumber(10)),w=w.add(J.fromNumber(u[H]))}var te=Qj(x,J.fromString("100000000000000000"));te.low=te.low.add(w),Zj(te.low,w)&&(te.high=te.high.add(J.fromNumber(1))),C=m+cd;var L={low:J.fromNumber(0),high:J.fromNumber(0)};te.high.shiftRightUnsigned(49).and(J.fromNumber(1)).equals(J.fromNumber)?(L.high=L.high.or(J.fromNumber(3).shiftLeft(61)),L.high=L.high.or(J.fromNumber(C).and(J.fromNumber(16383).shiftLeft(47))),L.high=L.high.or(te.high.and(J.fromNumber(0x7fffffffffff)))):(L.high=L.high.or(J.fromNumber(C&16383).shiftLeft(49)),L.high=L.high.or(te.high.and(J.fromNumber(562949953421311)))),L.low=te.low,t&&(L.high=L.high.or(J.fromString("9223372036854775808")));var Y=Tr.allocBuffer(16);return g=0,Y[g++]=L.low.low_&255,Y[g++]=L.low.low_>>8&255,Y[g++]=L.low.low_>>16&255,Y[g++]=L.low.low_>>24&255,Y[g++]=L.low.high_&255,Y[g++]=L.low.high_>>8&255,Y[g++]=L.low.high_>>16&255,Y[g++]=L.low.high_>>24&255,Y[g++]=L.high.low_&255,Y[g++]=L.high.low_>>8&255,Y[g++]=L.high.low_>>16&255,Y[g++]=L.high.low_>>24&255,Y[g++]=L.high.high_&255,Y[g++]=L.high.high_>>8&255,Y[g++]=L.high.high_>>16&255,Y[g++]=L.high.high_>>24&255,new Tt(Y)};var e2=31,kE=16383,t2=30,r2=31;cd=6176;Tt.prototype.toString=function(){for(var e,t,r,n,i,s,o=0,c=new Array(36),l=0;l<c.length;l++)c[l]=0;var u=0,p,d,f=!1,h,m={parts:new Array(4)},v,x,w=[];u=0;var C=this.bytes;n=C[u++]|C[u++]<<8|C[u++]<<16|C[u++]<<24,r=C[u++]|C[u++]<<8|C[u++]<<16|C[u++]<<24,t=C[u++]|C[u++]<<8|C[u++]<<16|C[u++]<<24,e=C[u++]|C[u++]<<8|C[u++]<<16|C[u++]<<24,u=0;var g={low:new J(n,r),high:new J(t,e)};if(g.high.lessThan(J.ZERO)&&w.push("-"),i=e>>26&e2,i>>3===3){if(i===t2)return w.join("")+"Infinity";if(i===r2)return"NaN";s=e>>15&kE,h=8+(e>>14&1)}else h=e>>14&7,s=e>>17&kE;if(p=s-cd,m.parts[0]=(e&16383)+((h&15)<<14),m.parts[1]=t,m.parts[2]=r,m.parts[3]=n,m.parts[0]===0&&m.parts[1]===0&&m.parts[2]===0&&m.parts[3]===0)f=!0;else for(x=3;x>=0;x--){var T=0,N=Xj(m);if(m=N.quotient,T=N.rem.low_,!!T)for(v=8;v>=0;v--)c[x*9+v]=T%10,T=Math.floor(T/10)}if(f)o=1,c[u]=0;else for(o=36,l=0;!c[u];)l++,o=o-1,u=u+1;if(d=o-1+p,d>=34||d<=-7||p>0){for(w.push(c[u++]),o=o-1,o&&w.push("."),l=0;l<o;l++)w.push(c[u++]);w.push("E"),d>0?w.push("+"+d):w.push(d)}else if(p>=0)for(l=0;l<o;l++)w.push(c[u++]);else{var _=o+p;if(_>0)for(l=0;l<_;l++)w.push(c[u++]);else w.push("0");for(w.push(".");_++<0;)w.push("0");for(l=0;l<o-Math.max(_-1,0);l++)w.push(c[u++])}return w.join("")};Tt.prototype.toJSON=function(){return{$numberDecimal:this.toString()}};ud.exports=Tt;ud.exports.Decimal128=Tt});var go=y((Xte,ld)=>{function bc(){if(!(this instanceof bc))return new bc;this._bsontype="MinKey"}a(bc,"MinKey");ld.exports=bc;ld.exports.MinKey=bc});var vo=y((Zte,pd)=>{function wc(){if(!(this instanceof wc))return new wc;this._bsontype="MaxKey"}a(wc,"MaxKey");pd.exports=wc;pd.exports.MaxKey=wc});var So=y((tre,fd)=>{function xo(e,t,r){if(!(this instanceof xo))return new xo(e,t,r);this._bsontype="DBRef",this.namespace=e,this.oid=t,this.db=r}a(xo,"DBRef");xo.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:this.db==null?"":this.db}};fd.exports=xo;fd.exports.DBRef=xo});var Hi=y((nre,dd)=>{typeof global<"u"&&(We=require("buffer").Buffer);var We,Ec=cn();function de(e,t){if(!(this instanceof de))return new de(e,t);if(e!=null&&typeof e!="string"&&!We.isBuffer(e)&&!(e instanceof Uint8Array)&&!Array.isArray(e))throw new Error("only String, Buffer, Uint8Array or Array accepted");if(this._bsontype="Binary",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=t??n2,this.position=0),e!=null&&!(e instanceof Number)){if(typeof e=="string")if(typeof We<"u")this.buffer=Ec.toBuffer(e);else if(typeof Uint8Array<"u"||Object.prototype.toString.call(e)==="[object Array]")this.buffer=i2(e);else throw new Error("only String, Buffer, Uint8Array or Array accepted");else this.buffer=e;this.position=e.length}else typeof We<"u"?this.buffer=Ec.allocBuffer(de.BUFFER_SIZE):typeof Uint8Array<"u"?this.buffer=new Uint8Array(new ArrayBuffer(de.BUFFER_SIZE)):this.buffer=new Array(de.BUFFER_SIZE),this.position=0}a(de,"Binary");de.prototype.put=a(function(t){if(t.length!=null&&typeof t!="number"&&t.length!==1)throw new Error("only accepts single character String, Uint8Array or Array");if(typeof t!="number"&&t<0||t>255)throw new Error("only accepts number in a valid unsigned byte range 0-255");var r=null;if(typeof t=="string"?r=t.charCodeAt(0):t.length!=null?r=t[0]:r=t,this.buffer.length>this.position)this.buffer[this.position++]=r;else if(typeof We<"u"&&We.isBuffer(this.buffer)){var n=Ec.allocBuffer(de.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}else{n=null,Object.prototype.toString.call(this.buffer)==="[object Uint8Array]"?n=new Uint8Array(new ArrayBuffer(de.BUFFER_SIZE+this.buffer.length)):n=new Array(de.BUFFER_SIZE+this.buffer.length);for(var i=0;i<this.buffer.length;i++)n[i]=this.buffer[i];this.buffer=n,this.buffer[this.position++]=r}},"put");de.prototype.write=a(function(t,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+t.length){var n=null;if(typeof We<"u"&&We.isBuffer(this.buffer))n=Ec.allocBuffer(this.buffer.length+t.length),this.buffer.copy(n,0,0,this.buffer.length);else if(Object.prototype.toString.call(this.buffer)==="[object Uint8Array]"){n=new Uint8Array(new ArrayBuffer(this.buffer.length+t.length));for(var i=0;i<this.position;i++)n[i]=this.buffer[i]}this.buffer=n}if(typeof We<"u"&&We.isBuffer(t)&&We.isBuffer(this.buffer))t.copy(this.buffer,r,0,t.length),this.position=r+t.length>this.position?r+t.length:this.position;else if(typeof We<"u"&&typeof t=="string"&&We.isBuffer(this.buffer))this.buffer.write(t,r,"binary"),this.position=r+t.length>this.position?r+t.length:this.position;else if(Object.prototype.toString.call(t)==="[object Uint8Array]"||Object.prototype.toString.call(t)==="[object Array]"&&typeof t!="string"){for(i=0;i<t.length;i++)this.buffer[r++]=t[i];this.position=r>this.position?r:this.position}else if(typeof t=="string"){for(i=0;i<t.length;i++)this.buffer[r++]=t.charCodeAt(i);this.position=r>this.position?r:this.position}},"write");de.prototype.read=a(function(t,r){if(r=r&&r>0?r:this.position,this.buffer.slice)return this.buffer.slice(t,t+r);for(var n=typeof Uint8Array<"u"?new Uint8Array(new ArrayBuffer(r)):new Array(r),i=0;i<r;i++)n[i]=this.buffer[t++];return n},"read");de.prototype.value=a(function(t){if(t=t??!1,t&&typeof We<"u"&&We.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(typeof We<"u"&&We.isBuffer(this.buffer))return t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(t){if(this.buffer.slice!=null)return this.buffer.slice(0,this.position);for(var r=Object.prototype.toString.call(this.buffer)==="[object Uint8Array]"?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)r[n]=this.buffer[n];return r}else return s2(this.buffer,0,this.position)},"value");de.prototype.length=a(function(){return this.position},"length");de.prototype.toJSON=function(){return this.buffer!=null?this.buffer.toString("base64"):""};de.prototype.toString=function(e){return this.buffer!=null?this.buffer.slice(0,this.position).toString(e):""};var n2=0,i2=a(function(e){for(var t=typeof Uint8Array<"u"?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},"writeStringToArray"),s2=a(function(e,t,r){for(var n="",i=t;i<r;i++)n=n+String.fromCharCode(e[i]);return n},"convertArraytoUtf8BinaryString");de.BUFFER_SIZE=256;de.SUBTYPE_DEFAULT=0;de.SUBTYPE_FUNCTION=1;de.SUBTYPE_BYTE_ARRAY=2;de.SUBTYPE_UUID_OLD=3;de.SUBTYPE_UUID=4;de.SUBTYPE_MD5=5;de.SUBTYPE_USER_DEFINED=128;dd.exports=de;dd.exports.Binary=de});var FE=y((exports,module)=>{"use strict";var Long=Kn().Long,Double=oo().Double,Timestamp=ao().Timestamp,ObjectID=lo().ObjectID,Symbol=fo().Symbol,Code=ho().Code,MinKey=go().MinKey,MaxKey=vo().MaxKey,Decimal128=yo(),Int32=yc(),DBRef=So().DBRef,BSONRegExp=po().BSONRegExp,Binary=Hi().Binary,utils=cn(),deserialize=a(function(e,t,r){t=t??{};var n=t&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5||e.length<i||i+n>e.length)throw new Error("corrupt bson message");if(e[n+i-1]!==0)throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,n,t,r)},"deserialize"),deserializeObject=a(function(e,t,r,n){var i=r.evalFunctions==null?!1:r.evalFunctions,s=r.cacheFunctions==null?!1:r.cacheFunctions,o=r.cacheFunctionsCrc32==null?!1:r.cacheFunctionsCrc32;if(!o)var c=null;var l=r.fieldsAsRaw==null?null:r.fieldsAsRaw,u=r.raw==null?!1:r.raw,p=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,d=r.promoteBuffers==null?!1:r.promoteBuffers,f=r.promoteLongs==null?!0:r.promoteLongs,h=r.promoteValues==null?!0:r.promoteValues,m=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var v=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(v<5||v>e.length)throw new Error("corrupt bson message");for(var x=n?[]:{},w=0,C=!1;!C;){var g=e[t++];if(g===0)break;for(var T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new Error("Bad BSON Document: illegal CString");var N=n?w++:e.toString("utf8",t,T);if(t=T+1,g===BSON.BSON_DATA_STRING){var _=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(_<=0||_>e.length-t||e[t+_-1]!==0)throw new Error("bad string length in bson");x[N]=e.toString("utf8",t,t+_-1),t=t+_}else if(g===BSON.BSON_DATA_OID){var D=utils.allocBuffer(12);e.copy(D,0,t,t+12),x[N]=new ObjectID(D),t=t+12}else if(g===BSON.BSON_DATA_INT&&h===!1)x[N]=new Int32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(g===BSON.BSON_DATA_INT)x[N]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(g===BSON.BSON_DATA_NUMBER&&h===!1)x[N]=new Double(e.readDoubleLE(t)),t=t+8;else if(g===BSON.BSON_DATA_NUMBER)x[N]=e.readDoubleLE(t),t=t+8;else if(g===BSON.BSON_DATA_DATE){var k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,A=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;x[N]=new Date(new Long(k,A).toNumber())}else if(g===BSON.BSON_DATA_BOOLEAN){if(e[t]!==0&&e[t]!==1)throw new Error("illegal boolean type value");x[N]=e[t++]===1}else if(g===BSON.BSON_DATA_OBJECT){var F=t,z=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(z<=0||z>e.length-t)throw new Error("bad embedded document length in bson");u?x[N]=e.slice(t,t+z):x[N]=deserializeObject(e,F,r,!1),t=t+z}else if(g===BSON.BSON_DATA_ARRAY){F=t,z=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;var H=r,te=t+z;if(l&&l[N]){H={};for(var L in r)H[L]=r[L];H.raw=!0}if(x[N]=deserializeObject(e,F,H,!0),t=t+z,e[t-1]!==0)throw new Error("invalid array terminator byte");if(t!==te)throw new Error("corrupted array bson")}else if(g===BSON.BSON_DATA_UNDEFINED)x[N]=void 0;else if(g===BSON.BSON_DATA_NULL)x[N]=null;else if(g===BSON.BSON_DATA_LONG){k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,A=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var Y=new Long(k,A);f&&h===!0?x[N]=Y.lessThanOrEqual(JS_INT_MAX_LONG)&&Y.greaterThanOrEqual(JS_INT_MIN_LONG)?Y.toNumber():Y:x[N]=Y}else if(g===BSON.BSON_DATA_DECIMAL128){var St=utils.allocBuffer(16);e.copy(St,0,t,t+16),t=t+16;var W=new Decimal128(St);x[N]=W.toObject?W.toObject():W}else if(g===BSON.BSON_DATA_BINARY){var B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,me=B,Je=e[t++];if(B<0)throw new Error("Negative binary type element size found");if(B>e.length)throw new Error("Binary type size larger than document size");if(e.slice!=null){if(Je===Binary.SUBTYPE_BYTE_ARRAY){if(B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,B<0)throw new Error("Negative binary type element size found for subtype 0x02");if(B>me-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(B<me-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}d&&h?x[N]=e.slice(t,t+B):x[N]=new Binary(e.slice(t,t+B),Je)}else{var _e=typeof Uint8Array<"u"?new Uint8Array(new ArrayBuffer(B)):new Array(B);if(Je===Binary.SUBTYPE_BYTE_ARRAY){if(B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,B<0)throw new Error("Negative binary type element size found for subtype 0x02");if(B>me-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(B<me-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(T=0;T<B;T++)_e[T]=e[t+T];d&&h?x[N]=_e:x[N]=new Binary(_e,Je)}t=t+B}else if(g===BSON.BSON_DATA_REGEXP&&p===!1){for(T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new Error("Bad BSON Document: illegal CString");var Wt=e.toString("utf8",t,T);for(t=T+1,T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new Error("Bad BSON Document: illegal CString");var Or=e.toString("utf8",t,T);t=T+1;var ut=new Array(Or.length);for(T=0;T<Or.length;T++)switch(Or[T]){case"m":ut[T]="m";break;case"s":ut[T]="g";break;case"i":ut[T]="i";break}x[N]=new RegExp(Wt,ut.join(""))}else if(g===BSON.BSON_DATA_REGEXP&&p===!0){for(T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new Error("Bad BSON Document: illegal CString");for(Wt=e.toString("utf8",t,T),t=T+1,T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new Error("Bad BSON Document: illegal CString");Or=e.toString("utf8",t,T),t=T+1,x[N]=new BSONRegExp(Wt,Or)}else if(g===BSON.BSON_DATA_SYMBOL){if(_=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,_<=0||_>e.length-t||e[t+_-1]!==0)throw new Error("bad string length in bson");x[N]=new Symbol(e.toString("utf8",t,t+_-1)),t=t+_}else if(g===BSON.BSON_DATA_TIMESTAMP)k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,A=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,x[N]=new Timestamp(k,A);else if(g===BSON.BSON_DATA_MIN_KEY)x[N]=new MinKey;else if(g===BSON.BSON_DATA_MAX_KEY)x[N]=new MaxKey;else if(g===BSON.BSON_DATA_CODE){if(_=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,_<=0||_>e.length-t||e[t+_-1]!==0)throw new Error("bad string length in bson");var ve=e.toString("utf8",t,t+_-1);if(i)if(s){var Jr=o?c(ve):ve;x[N]=isolateEvalWithHash(functionCache,Jr,ve,x)}else x[N]=isolateEval(ve);else x[N]=new Code(ve);t=t+_}else if(g===BSON.BSON_DATA_CODE_W_SCOPE){var Un=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Un<13)throw new Error("code_w_scope total size shorter minimum expected length");if(_=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,_<=0||_>e.length-t||e[t+_-1]!==0)throw new Error("bad string length in bson");ve=e.toString("utf8",t,t+_-1),t=t+_,F=t,z=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;var Le=deserializeObject(e,F,r,!1);if(t=t+z,Un<8+z+_)throw new Error("code_w_scope total size is to short, truncating scope");if(Un>8+z+_)throw new Error("code_w_scope total size is to long, clips outer document");i?(s?(Jr=o?c(ve):ve,x[N]=isolateEvalWithHash(functionCache,Jr,ve,x)):x[N]=isolateEval(ve),x[N].scope=Le):x[N]=new Code(ve,Le)}else if(g===BSON.BSON_DATA_DBPOINTER){if(_=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,_<=0||_>e.length-t||e[t+_-1]!==0)throw new Error("bad string length in bson");var m1=e.toString("utf8",t,t+_-1);t=t+_;var YS=utils.allocBuffer(12);e.copy(YS,0,t,t+12),D=new ObjectID(YS),t=t+12;var JS=m1.split("."),y1=JS.shift(),g1=JS.join(".");x[N]=new DBRef(g1,D,y1)}else throw new Error("Detected unknown BSON type "+g.toString(16)+' for fieldname "'+N+'", are you using the latest BSON parser')}if(v!==t-m)throw n?new Error("corrupt array bson"):new Error("corrupt object bson");return x.$id!=null&&(x=new DBRef(x.$ref,x.$id,x.$db)),x},"deserializeObject"),isolateEvalWithHash=a(function(functionCache,hash,functionString,object){var value=null;return functionCache[hash]==null&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)},"isolateEvalWithHash"),isolateEval=a(function(functionString){var value=null;return eval("value = "+functionString),value},"isolateEval"),BSON={},functionCache=BSON.functionCache={};BSON.BSON_DATA_NUMBER=1;BSON.BSON_DATA_STRING=2;BSON.BSON_DATA_OBJECT=3;BSON.BSON_DATA_ARRAY=4;BSON.BSON_DATA_BINARY=5;BSON.BSON_DATA_UNDEFINED=6;BSON.BSON_DATA_OID=7;BSON.BSON_DATA_BOOLEAN=8;BSON.BSON_DATA_DATE=9;BSON.BSON_DATA_NULL=10;BSON.BSON_DATA_REGEXP=11;BSON.BSON_DATA_DBPOINTER=12;BSON.BSON_DATA_CODE=13;BSON.BSON_DATA_SYMBOL=14;BSON.BSON_DATA_CODE_W_SCOPE=15;BSON.BSON_DATA_INT=16;BSON.BSON_DATA_TIMESTAMP=17;BSON.BSON_DATA_LONG=18;BSON.BSON_DATA_DECIMAL128=19;BSON.BSON_DATA_MIN_KEY=255;BSON.BSON_DATA_MAX_KEY=127;BSON.BSON_BINARY_SUBTYPE_DEFAULT=0;BSON.BSON_BINARY_SUBTYPE_FUNCTION=1;BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;BSON.BSON_BINARY_SUBTYPE_UUID=3;BSON.BSON_BINARY_SUBTYPE_MD5=4;BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128;BSON.BSON_INT32_MAX=2147483647;BSON.BSON_INT32_MIN=-2147483648;BSON.BSON_INT64_MAX=Math.pow(2,63)-1;BSON.BSON_INT64_MIN=-Math.pow(2,63);BSON.JS_INT_MAX=9007199254740992;BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long.fromNumber(9007199254740992),JS_INT_MIN_LONG=Long.fromNumber(-9007199254740992);module.exports=deserialize});var WE=y(hd=>{var o2=a(function(e,t,r,n,i){var s,o,c=r==="big",l=i*8-n-1,u=(1<<l)-1,p=u>>1,d=-7,f=c?0:i-1,h=c?1:-1,m=e[t+f];for(f+=h,s=m&(1<<-d)-1,m>>=-d,d+=l;d>0;s=s*256+e[t+f],f+=h,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=n;d>0;o=o*256+e[t+f],f+=h,d-=8);if(s===0)s=1-p;else{if(s===u)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-p}return(m?-1:1)*o*Math.pow(2,s-n)},"readIEEE754"),a2=a(function(e,t,r,n,i,s){var o,c,l,u=n==="big",p=s*8-i-1,d=(1<<p)-1,f=d>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=u?s-1:0,v=u?-1:1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?t+=h/l:t+=h*Math.pow(2,1-f),t*l>=2&&(o++,l/=2),o+f>=d?(c=0,o=d):o+f>=1?(c=(t*l-1)*Math.pow(2,i),o=o+f):(c=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+m]=c&255,m+=v,c/=256,i-=8);for(o=o<<i|c,p+=i;p>0;e[r+m]=o&255,m+=v,o/=256,p-=8);e[r+m-v]|=x*128},"writeIEEE754");hd.readIEEE754=o2;hd.writeIEEE754=a2});var KE=y((cre,VE)=>{"use strict";var Dd=WE().writeIEEE754,HE=Kn().Long,c2=pc(),zE=Hi().Binary,u2=cn().normalizedFunctionString,Oc=/\x00/,$E=["$db","$ref","$id","$clusterTime"],md=a(function(t){return typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"},"isDate"),yd=a(function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},"isRegExp"),gd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_STRING;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+s+1,e[n-1]=0;var o=e.write(r,n+4,"utf8");return e[n+3]=o+1>>24&255,e[n+2]=o+1>>16&255,e[n+1]=o+1>>8&255,e[n]=o+1&255,n=n+4+o,e[n++]=0,n},"serializeString"),vd=a(function(e,t,r,n,i){if(Math.floor(r)===r&&r>=P.JS_INT_MIN&&r<=P.JS_INT_MAX)if(r>=P.BSON_INT32_MIN&&r<=P.BSON_INT32_MAX){e[n++]=P.BSON_DATA_INT;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+s,e[n++]=0,e[n++]=r&255,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255}else if(r>=P.JS_INT_MIN&&r<=P.JS_INT_MAX)e[n++]=P.BSON_DATA_NUMBER,s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+s,e[n++]=0,Dd(e,r,n,"little",52,8),n=n+8;else{e[n++]=P.BSON_DATA_LONG,s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+s,e[n++]=0;var o=HE.fromNumber(r),c=o.getLowBits(),l=o.getHighBits();e[n++]=c&255,e[n++]=c>>8&255,e[n++]=c>>16&255,e[n++]=c>>24&255,e[n++]=l&255,e[n++]=l>>8&255,e[n++]=l>>16&255,e[n++]=l>>24&255}else e[n++]=P.BSON_DATA_NUMBER,s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+s,e[n++]=0,Dd(e,r,n,"little",52,8),n=n+8;return n},"serializeNumber"),bo=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_NULL;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+s,e[n++]=0,n},"serializeNull"),xd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_BOOLEAN;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+s,e[n++]=0,e[n++]=r?1:0,n},"serializeBoolean"),Sd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_DATE;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+s,e[n++]=0;var o=HE.fromNumber(r.getTime()),c=o.getLowBits(),l=o.getHighBits();return e[n++]=c&255,e[n++]=c>>8&255,e[n++]=c>>16&255,e[n++]=c>>24&255,e[n++]=l&255,e[n++]=l>>8&255,e[n++]=l>>16&255,e[n++]=l>>24&255,n},"serializeDate"),bd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_REGEXP;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");if(n=n+s,e[n++]=0,r.source&&r.source.match(Oc)!=null)throw Error("value "+r.source+" must not contain null bytes");return n=n+e.write(r.source,n,"utf8"),e[n++]=0,r.global&&(e[n++]=115),r.ignoreCase&&(e[n++]=105),r.multiline&&(e[n++]=109),e[n++]=0,n},"serializeRegExp"),wd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_REGEXP;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");if(n=n+s,e[n++]=0,r.pattern.match(Oc)!=null)throw Error("pattern "+r.pattern+" must not contain null bytes");return n=n+e.write(r.pattern,n,"utf8"),e[n++]=0,n=n+e.write(r.options.split("").sort().join(""),n,"utf8"),e[n++]=0,n},"serializeBSONRegExp"),Ed=a(function(e,t,r,n,i){r===null?e[n++]=P.BSON_DATA_NULL:r._bsontype==="MinKey"?e[n++]=P.BSON_DATA_MIN_KEY:e[n++]=P.BSON_DATA_MAX_KEY;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+s,e[n++]=0,n},"serializeMinMax"),Od=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_OID;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");if(n=n+s,e[n++]=0,typeof r.id=="string")e.write(r.id,n,"binary");else if(r.id&&r.id.copy)r.id.copy(e,n,0,12);else throw new Error("object ["+JSON.stringify(r)+"] is not a valid ObjectId");return n+12},"serializeObjectId"),Td=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_BINARY;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+s,e[n++]=0;var o=r.length;return e[n++]=o&255,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=P.BSON_BINARY_SUBTYPE_DEFAULT,r.copy(e,n,0,o),n=n+o,n},"serializeBuffer"),Cd=a(function(e,t,r,n,i,s,o,c,l,u){for(var p=0;p<u.length;p++)if(u[p]===r)throw new Error("cyclic dependency detected");u.push(r),e[n++]=Array.isArray(r)?P.BSON_DATA_ARRAY:P.BSON_DATA_OBJECT;var d=l?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+d,e[n++]=0;var f=wo(e,r,i,n,s+1,o,c,u);return u.pop(),f},"serializeObject"),_d=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_DECIMAL128;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+s,e[n++]=0,r.bytes.copy(e,n,0,16),n+16},"serializeDecimal128"),Ad=a(function(e,t,r,n,i){e[n++]=r._bsontype==="Long"?P.BSON_DATA_LONG:P.BSON_DATA_TIMESTAMP;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+s,e[n++]=0;var o=r.getLowBits(),c=r.getHighBits();return e[n++]=o&255,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=c&255,e[n++]=c>>8&255,e[n++]=c>>16&255,e[n++]=c>>24&255,n},"serializeLong"),Nd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_INT;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+s,e[n++]=0,e[n++]=r&255,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n},"serializeInt32"),Rd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_NUMBER;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+s,e[n++]=0,Dd(e,r,n,"little",52,8),n=n+8,n},"serializeDouble"),Id=a(function(e,t,r,n,i,s,o){e[n++]=P.BSON_DATA_CODE;var c=o?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+c,e[n++]=0;var l=u2(r),u=e.write(l,n+4,"utf8")+1;return e[n]=u&255,e[n+1]=u>>8&255,e[n+2]=u>>16&255,e[n+3]=u>>24&255,n=n+4+u-1,e[n++]=0,n},"serializeFunction"),qd=a(function(e,t,r,n,i,s,o,c,l){if(r.scope&&typeof r.scope=="object"){e[n++]=P.BSON_DATA_CODE_W_SCOPE;var u=l?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+u,e[n++]=0;var p=n,d=typeof r.code=="string"?r.code:r.code.toString();n=n+4;var f=e.write(d,n+4,"utf8")+1;e[n]=f&255,e[n+1]=f>>8&255,e[n+2]=f>>16&255,e[n+3]=f>>24&255,e[n+4+f-1]=0,n=n+f+4;var h=wo(e,r.scope,i,n,s+1,o,c);n=h-1;var m=h-p;e[p++]=m&255,e[p++]=m>>8&255,e[p++]=m>>16&255,e[p++]=m>>24&255,e[n++]=0}else{e[n++]=P.BSON_DATA_CODE,u=l?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+u,e[n++]=0,d=r.code.toString();var v=e.write(d,n+4,"utf8")+1;e[n]=v&255,e[n+1]=v>>8&255,e[n+2]=v>>16&255,e[n+3]=v>>24&255,n=n+4+v-1,e[n++]=0}return n},"serializeCode"),Md=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_BINARY;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+s,e[n++]=0;var o=r.value(!0),c=r.position;return r.sub_type===zE.SUBTYPE_BYTE_ARRAY&&(c=c+4),e[n++]=c&255,e[n++]=c>>8&255,e[n++]=c>>16&255,e[n++]=c>>24&255,e[n++]=r.sub_type,r.sub_type===zE.SUBTYPE_BYTE_ARRAY&&(c=c-4,e[n++]=c&255,e[n++]=c>>8&255,e[n++]=c>>16&255,e[n++]=c>>24&255),o.copy(e,n,0,r.position),n=n+r.position,n},"serializeBinary"),Pd=a(function(e,t,r,n,i){e[n++]=P.BSON_DATA_SYMBOL;var s=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+s,e[n++]=0;var o=e.write(r.value,n+4,"utf8")+1;return e[n]=o&255,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n},"serializeSymbol"),Bd=a(function(e,t,r,n,i,s,o){e[n++]=P.BSON_DATA_OBJECT;var c=o?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+c,e[n++]=0;var l=n,u;r.db!=null?u=wo(e,{$ref:r.namespace,$id:r.oid,$db:r.db},!1,n,i+1,s):u=wo(e,{$ref:r.namespace,$id:r.oid},!1,n,i+1,s);var p=u-l;return e[l++]=p&255,e[l++]=p>>8&255,e[l++]=p>>16&255,e[l++]=p>>24&255,u},"serializeDBRef"),wo=a(function(t,r,n,i,s,o,c,l){i=i||0,l=l||[],l.push(r);var u=i+4;if(Array.isArray(r))for(var p=0;p<r.length;p++){var d=""+p,f=r[p];if(f&&f.toBSON){if(typeof f.toBSON!="function")throw new Error("toBSON is not a function");f=f.toBSON()}var h=typeof f;if(h==="string")u=gd(t,d,f,u,!0);else if(h==="number")u=vd(t,d,f,u,!0);else if(h==="boolean")u=xd(t,d,f,u,!0);else if(f instanceof Date||md(f))u=Sd(t,d,f,u,!0);else if(f===void 0)u=bo(t,d,f,u,!0);else if(f===null)u=bo(t,d,f,u,!0);else if(f._bsontype==="ObjectID"||f._bsontype==="ObjectId")u=Od(t,d,f,u,!0);else if(Buffer.isBuffer(f))u=Td(t,d,f,u,!0);else if(f instanceof RegExp||yd(f))u=bd(t,d,f,u,!0);else if(h==="object"&&f._bsontype==null)u=Cd(t,d,f,u,n,s,o,c,!0,l);else if(h==="object"&&f._bsontype==="Decimal128")u=_d(t,d,f,u,!0);else if(f._bsontype==="Long"||f._bsontype==="Timestamp")u=Ad(t,d,f,u,!0);else if(f._bsontype==="Double")u=Rd(t,d,f,u,!0);else if(typeof f=="function"&&o)u=Id(t,d,f,u,n,s,o,!0);else if(f._bsontype==="Code")u=qd(t,d,f,u,n,s,o,c,!0);else if(f._bsontype==="Binary")u=Md(t,d,f,u,!0);else if(f._bsontype==="Symbol")u=Pd(t,d,f,u,!0);else if(f._bsontype==="DBRef")u=Bd(t,d,f,u,s,o,!0);else if(f._bsontype==="BSONRegExp")u=wd(t,d,f,u,!0);else if(f._bsontype==="Int32")u=Nd(t,d,f,u,!0);else if(f._bsontype==="MinKey"||f._bsontype==="MaxKey")u=Ed(t,d,f,u,!0);else if(typeof f._bsontype<"u")throw new TypeError("Unrecognized or invalid _bsontype: "+f._bsontype)}else if(r instanceof c2)for(var m=r.entries(),v=!1;!v;){var x=m.next();if(v=x.done,!v){if(d=x.value[0],f=x.value[1],h=typeof f,typeof d=="string"&&$E.indexOf(d)===-1){if(d.match(Oc)!=null)throw Error("key "+d+" must not contain null bytes");if(n){if(d[0]==="$")throw Error("key "+d+" must not start with '$'");if(~d.indexOf("."))throw Error("key "+d+" must not contain '.'")}}if(h==="string")u=gd(t,d,f,u);else if(h==="number")u=vd(t,d,f,u);else if(h==="boolean")u=xd(t,d,f,u);else if(f instanceof Date||md(f))u=Sd(t,d,f,u);else if(f===null||f===void 0&&c===!1)u=bo(t,d,f,u);else if(f._bsontype==="ObjectID"||f._bsontype==="ObjectId")u=Od(t,d,f,u);else if(Buffer.isBuffer(f))u=Td(t,d,f,u);else if(f instanceof RegExp||yd(f))u=bd(t,d,f,u);else if(h==="object"&&f._bsontype==null)u=Cd(t,d,f,u,n,s,o,c,!1,l);else if(h==="object"&&f._bsontype==="Decimal128")u=_d(t,d,f,u);else if(f._bsontype==="Long"||f._bsontype==="Timestamp")u=Ad(t,d,f,u);else if(f._bsontype==="Double")u=Rd(t,d,f,u);else if(f._bsontype==="Code")u=qd(t,d,f,u,n,s,o,c);else if(typeof f=="function"&&o)u=Id(t,d,f,u,n,s,o);else if(f._bsontype==="Binary")u=Md(t,d,f,u);else if(f._bsontype==="Symbol")u=Pd(t,d,f,u);else if(f._bsontype==="DBRef")u=Bd(t,d,f,u,s,o);else if(f._bsontype==="BSONRegExp")u=wd(t,d,f,u);else if(f._bsontype==="Int32")u=Nd(t,d,f,u);else if(f._bsontype==="MinKey"||f._bsontype==="MaxKey")u=Ed(t,d,f,u);else if(typeof f._bsontype<"u")throw new TypeError("Unrecognized or invalid _bsontype: "+f._bsontype)}}else{if(r.toBSON){if(typeof r.toBSON!="function")throw new Error("toBSON is not a function");if(r=r.toBSON(),r!=null&&typeof r!="object")throw new Error("toBSON function did not return an object")}for(d in r){if(f=r[d],f&&f.toBSON){if(typeof f.toBSON!="function")throw new Error("toBSON is not a function");f=f.toBSON()}if(h=typeof f,typeof d=="string"&&$E.indexOf(d)===-1){if(d.match(Oc)!=null)throw Error("key "+d+" must not contain null bytes");if(n){if(d[0]==="$")throw Error("key "+d+" must not start with '$'");if(~d.indexOf("."))throw Error("key "+d+" must not contain '.'")}}if(h==="string")u=gd(t,d,f,u);else if(h==="number")u=vd(t,d,f,u);else if(h==="boolean")u=xd(t,d,f,u);else if(f instanceof Date||md(f))u=Sd(t,d,f,u);else if(f===void 0)c===!1&&(u=bo(t,d,f,u));else if(f===null)u=bo(t,d,f,u);else if(f._bsontype==="ObjectID"||f._bsontype==="ObjectId")u=Od(t,d,f,u);else if(Buffer.isBuffer(f))u=Td(t,d,f,u);else if(f instanceof RegExp||yd(f))u=bd(t,d,f,u);else if(h==="object"&&f._bsontype==null)u=Cd(t,d,f,u,n,s,o,c,!1,l);else if(h==="object"&&f._bsontype==="Decimal128")u=_d(t,d,f,u);else if(f._bsontype==="Long"||f._bsontype==="Timestamp")u=Ad(t,d,f,u);else if(f._bsontype==="Double")u=Rd(t,d,f,u);else if(f._bsontype==="Code")u=qd(t,d,f,u,n,s,o,c);else if(typeof f=="function"&&o)u=Id(t,d,f,u,n,s,o);else if(f._bsontype==="Binary")u=Md(t,d,f,u);else if(f._bsontype==="Symbol")u=Pd(t,d,f,u);else if(f._bsontype==="DBRef")u=Bd(t,d,f,u,s,o);else if(f._bsontype==="BSONRegExp")u=wd(t,d,f,u);else if(f._bsontype==="Int32")u=Nd(t,d,f,u);else if(f._bsontype==="MinKey"||f._bsontype==="MaxKey")u=Ed(t,d,f,u);else if(typeof f._bsontype<"u")throw new TypeError("Unrecognized or invalid _bsontype: "+f._bsontype)}}l.pop(),t[u++]=0;var w=u-i;return t[i++]=w&255,t[i++]=w>>8&255,t[i++]=w>>16&255,t[i++]=w>>24&255,u},"serializeInto"),P={};P.BSON_DATA_NUMBER=1;P.BSON_DATA_STRING=2;P.BSON_DATA_OBJECT=3;P.BSON_DATA_ARRAY=4;P.BSON_DATA_BINARY=5;P.BSON_DATA_UNDEFINED=6;P.BSON_DATA_OID=7;P.BSON_DATA_BOOLEAN=8;P.BSON_DATA_DATE=9;P.BSON_DATA_NULL=10;P.BSON_DATA_REGEXP=11;P.BSON_DATA_CODE=13;P.BSON_DATA_SYMBOL=14;P.BSON_DATA_CODE_W_SCOPE=15;P.BSON_DATA_INT=16;P.BSON_DATA_TIMESTAMP=17;P.BSON_DATA_LONG=18;P.BSON_DATA_DECIMAL128=19;P.BSON_DATA_MIN_KEY=255;P.BSON_DATA_MAX_KEY=127;P.BSON_BINARY_SUBTYPE_DEFAULT=0;P.BSON_BINARY_SUBTYPE_FUNCTION=1;P.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;P.BSON_BINARY_SUBTYPE_UUID=3;P.BSON_BINARY_SUBTYPE_MD5=4;P.BSON_BINARY_SUBTYPE_USER_DEFINED=128;P.BSON_INT32_MAX=2147483647;P.BSON_INT32_MIN=-2147483648;P.BSON_INT64_MAX=Math.pow(2,63)-1;P.BSON_INT64_MIN=-Math.pow(2,63);P.JS_INT_MAX=9007199254740992;P.JS_INT_MIN=-9007199254740992;VE.exports=wo});var QE=y((lre,XE)=>{"use strict";var l2=Kn().Long,p2=oo().Double,f2=ao().Timestamp,d2=lo().ObjectID,h2=fo().Symbol,m2=po().BSONRegExp,y2=ho().Code,g2=yo(),v2=go().MinKey,x2=vo().MaxKey,S2=So().DBRef,GE=Hi().Binary,YE=cn().normalizedFunctionString,b2=a(function(t){return typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"},"isDate"),Eo=a(function(t,r,n){var i=5;if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=JE(s.toString(),t[s],r,!0,n);else{t.toBSON&&(t=t.toBSON());for(var o in t)i+=JE(o,t[o],r,!1,n)}return i},"calculateObjectSize");function JE(e,t,r,n,i){switch(t&&t.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+Buffer.byteLength(e,"utf8")+1+4+Buffer.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=ln.JS_INT_MIN&&t<=ln.JS_INT_MAX&&t>=ln.BSON_INT32_MIN&&t<=ln.BSON_INT32_MAX?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+5:(e!=null?Buffer.byteLength(e,"utf8")+1:0)+9;case"undefined":return n||!i?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+2;case"object":if(t==null||t instanceof v2||t instanceof x2||t._bsontype==="MinKey"||t._bsontype==="MaxKey")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1;if(t instanceof d2||t._bsontype==="ObjectID"||t._bsontype==="ObjectId")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||b2(t))return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+9;if(typeof Buffer<"u"&&Buffer.isBuffer(t))return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+6+t.length;if(t instanceof l2||t instanceof p2||t instanceof f2||t._bsontype==="Long"||t._bsontype==="Double"||t._bsontype==="Timestamp")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+9;if(t instanceof g2||t._bsontype==="Decimal128")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+17;if(t instanceof y2||t._bsontype==="Code")return t.scope!=null&&Object.keys(t.scope).length>0?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Buffer.byteLength(t.code.toString(),"utf8")+1+Eo(t.scope,r,i):(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+Buffer.byteLength(t.code.toString(),"utf8")+1;if(t instanceof GE||t._bsontype==="Binary")return t.sub_type===GE.SUBTYPE_BYTE_ARRAY?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(e!=null?Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if(t instanceof h2||t._bsontype==="Symbol")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+Buffer.byteLength(t.value,"utf8")+4+1+1;if(t instanceof S2||t._bsontype==="DBRef"){var s={$ref:t.namespace,$id:t.oid};return t.db!=null&&(s.$db=t.db),(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+Eo(s,r,i)}else return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof m2||t._bsontype==="BSONRegExp"?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+Buffer.byteLength(t.pattern,"utf8")+1+Buffer.byteLength(t.options,"utf8")+1:(e!=null?Buffer.byteLength(e,"utf8")+1:0)+Eo(t,r,i)+1;case"function":if(t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"||String.call(t)==="[object RegExp]")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&t.scope!=null&&Object.keys(t.scope).length>0)return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Buffer.byteLength(YE(t),"utf8")+1+Eo(t.scope,r,i);if(r)return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+Buffer.byteLength(YE(t),"utf8")+1}return 0}a(JE,"calculateElement");var ln={};ln.BSON_INT32_MAX=2147483647;ln.BSON_INT32_MIN=-2147483648;ln.JS_INT_MAX=9007199254740992;ln.JS_INT_MIN=-9007199254740992;XE.exports=Eo});var tO=y((fre,ze)=>{"use strict";var w2=pc(),E2=Kn(),O2=oo(),T2=ao(),C2=lo(),_2=po(),A2=fo(),N2=yc(),R2=ho(),I2=yo(),q2=go(),M2=vo(),P2=So(),B2=Hi(),D2=FE(),ZE=KE(),L2=QE(),Ld=cn(),eO=1024*1024*17,Tc=Ld.allocBuffer(eO),ee=a(function(){},"BSON");ee.prototype.serialize=a(function(t,r){r=r||{};var n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,s=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.minInternalBufferSize=="number"?r.minInternalBufferSize:eO;Tc.length<o&&(Tc=Ld.allocBuffer(o));var c=ZE(Tc,t,n,0,0,i,s,[]),l=Ld.allocBuffer(c);return Tc.copy(l,0,0,l.length),l},"serialize");ee.prototype.serializeWithBufferAndIndex=function(e,t,r){r=r||{};var n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,s=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,c=ZE(t,e,n,o||0,0,i,s);return c-1};ee.prototype.deserialize=function(e,t){return D2(e,t)};ee.prototype.calculateObjectSize=function(e,t){t=t||{};var r=typeof t.serializeFunctions=="boolean"?t.serializeFunctions:!1,n=typeof t.ignoreUndefined=="boolean"?t.ignoreUndefined:!0;return L2(e,r,n)};ee.prototype.deserializeStream=function(e,t,r,n,i,s){s=s??{};for(var o=t,c=0;c<r;c++){var l=e[o]|e[o+1]<<8|e[o+2]<<16|e[o+3]<<24;s.index=o,n[i+c]=this.deserialize(e,s),o=o+l}return o};ee.BSON_INT32_MAX=2147483647;ee.BSON_INT32_MIN=-2147483648;ee.BSON_INT64_MAX=Math.pow(2,63)-1;ee.BSON_INT64_MIN=-Math.pow(2,63);ee.JS_INT_MAX=9007199254740992;ee.JS_INT_MIN=-9007199254740992;ee.BSON_DATA_NUMBER=1;ee.BSON_DATA_STRING=2;ee.BSON_DATA_OBJECT=3;ee.BSON_DATA_ARRAY=4;ee.BSON_DATA_BINARY=5;ee.BSON_DATA_OID=7;ee.BSON_DATA_BOOLEAN=8;ee.BSON_DATA_DATE=9;ee.BSON_DATA_NULL=10;ee.BSON_DATA_REGEXP=11;ee.BSON_DATA_CODE=13;ee.BSON_DATA_SYMBOL=14;ee.BSON_DATA_CODE_W_SCOPE=15;ee.BSON_DATA_INT=16;ee.BSON_DATA_TIMESTAMP=17;ee.BSON_DATA_LONG=18;ee.BSON_DATA_MIN_KEY=255;ee.BSON_DATA_MAX_KEY=127;ee.BSON_BINARY_SUBTYPE_DEFAULT=0;ee.BSON_BINARY_SUBTYPE_FUNCTION=1;ee.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;ee.BSON_BINARY_SUBTYPE_UUID=3;ee.BSON_BINARY_SUBTYPE_MD5=4;ee.BSON_BINARY_SUBTYPE_USER_DEFINED=128;ze.exports=ee;ze.exports.Code=R2;ze.exports.Map=w2;ze.exports.Symbol=A2;ze.exports.BSON=ee;ze.exports.DBRef=P2;ze.exports.Binary=B2;ze.exports.ObjectID=C2;ze.exports.Long=E2;ze.exports.Timestamp=T2;ze.exports.Double=O2;ze.exports.Int32=N2;ze.exports.MinKey=q2;ze.exports.MaxKey=M2;ze.exports.BSONRegExp=_2;ze.exports.Decimal128=I2});var Cc=y((hre,nO)=>{var be=tO(),j2=Hi(),U2=ho(),k2=So(),F2=yo(),W2=oo(),z2=yc(),$2=Kn(),H2=pc(),V2=vo(),K2=go(),rO=lo(),G2=po(),Y2=fo(),J2=ao();be.BSON_INT32_MAX=2147483647;be.BSON_INT32_MIN=-2147483648;be.BSON_INT64_MAX=Math.pow(2,63)-1;be.BSON_INT64_MIN=-Math.pow(2,63);be.JS_INT_MAX=9007199254740992;be.JS_INT_MIN=-9007199254740992;be.Binary=j2;be.Code=U2;be.DBRef=k2;be.Decimal128=F2;be.Double=W2;be.Int32=z2;be.Long=$2;be.Map=H2;be.MaxKey=V2;be.MinKey=K2;be.ObjectId=rO;be.ObjectID=rO;be.BSONRegExp=G2;be.Symbol=Y2;be.Timestamp=J2;nO.exports=be});var iO=y((exports,module)=>{"use strict";var Module=require("module"),xrequire=eval("require"),createRequireFromPath=Module.createRequire||Module.createRequireFromPath||((e,t)=>{let r=new Module(e);r.filename=e,r.paths=Module._nodeModulePaths(t);function n(o){return xrequire(i(o))}a(n,"_require");function i(o,c){return Module._resolveFilename(o,r,!1,c)}a(i,"resolve"),n.resolve=i;function s(o){return Module._resolveLookupPaths(o,r,!0)}return a(s,"paths"),i.paths=s,n.main=process.mainModule,n.extensions=Module._extensions,n.cache=Module._cache,n});module.exports=createRequireFromPath});var oO=y((yre,sO)=>{"use strict";var jd=require("path"),X2=require("fs"),Q2=iO(),Z2=new Map;function Vi(e,t){let r=a((n,i)=>{let s=Vi.cache&&Vi.cache.get(n);if(!s){let o;try{o=X2.statSync(n)}catch(c){throw new Error(`require-at: stat '${n}' failed: ${c.message}`)}if(!o||!o.isDirectory()){if(i)throw new Error(`require-at: not a directory: '${e}'`);return r(jd.dirname(n),!0)}s=Q2(jd.join(n,"._require-at_"),n),Vi.cache&&Vi.cache.set(n,s)}return t?s(t):s},"makeIt");return r(jd.resolve(e),!1)}a(Vi,"requireAt");Vi.cache=Z2;sO.exports=Vi});var aO=y((exports,module)=>{"use strict";var __assign=exports&&exports.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__assign.apply(this,arguments)},__importDefault=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.optionalRequireCwd=exports.optionalRequire=exports.makeOptionalRequire=exports.tryResolve=exports.tryRequire=exports.setDefaultLog=void 0;var assert_1=__importDefault(require("assert")),require_at_1=__importDefault(oO()),xrequire=eval("require"),pnpDependencyNameRegExp=/^(?![a-zA-Z]:[\\/]|\\\\|\.{0,2}(?:\/|$))((?:node:)?(?:@[^/]+\/)?[^/]+)\/*(.*|)$/;function getPnpDependencyName(e){var t=e.match(pnpDependencyNameRegExp);return t?t[1]:null}a(getPnpDependencyName,"getPnpDependencyName");function findModuleNotFound(e,t){var r=e.message.split(`
`)[0];if(!r)return!1;if(r.includes("'"+t+"'"))return!0;var n=getPnpDependencyName(t);return n?r.includes(" "+n+" ")||r.includes(" "+n+". ")||r.includes(" "+n+", "):!1}a(findModuleNotFound,"findModuleNotFound");function defaultLog(e,t){console.log("Just FYI: "+e+'; Path "'+t+'"')}a(defaultLog,"defaultLog");var __defaultLog=defaultLog;function setDefaultLog(e){__defaultLog=e}a(setDefaultLog,"setDefaultLog");exports.setDefaultLog=setDefaultLog;function _getOptions(e,t,r){if(t===void 0&&(t=xrequire),typeof e=="object"){var n=__assign({require:t,log:r},e);return(0,assert_1.default)(!(n.hasOwnProperty("notFound")&&n.hasOwnProperty("default")),"optionalRequire: options set with both `notFound` and `default`"),n}else return{require:t,log:r,message:e}}a(_getOptions,"_getOptions");function _optionalRequire(e,t){try{return t.resolve?t.require.resolve(e):t.require(e)}catch(i){if(i.code!=="MODULE_NOT_FOUND"||!findModuleNotFound(i,e)){if(typeof t.fail=="function")return t.fail(i);throw i}if(t.message){var r=t.message===!0?"":t.message+" - ",n=t.resolve?"resolved":"found";t.log(r+"optional module not "+n,e)}return typeof t.notFound=="function"?t.notFound(i):t.default}}a(_optionalRequire,"_optionalRequire");function tryRequire(e,t,r){var n=_getOptions(r,e,__defaultLog);return n.resolve=!1,_optionalRequire(t,n)}a(tryRequire,"tryRequire");exports.tryRequire=tryRequire;function tryResolve(e,t,r){var n=_getOptions(r,e,__defaultLog);return n.resolve=!0,_optionalRequire(t,n)}a(tryResolve,"tryResolve");exports.tryResolve=tryResolve;function makeOptionalRequire(e,t){var r=a(function(n,i){var s=_getOptions(i,e,r.log);return _optionalRequire(n,s)},"x");return r.resolve=function(n,i){var s=_getOptions(i,e,r.log);return s.resolve=!0,_optionalRequire(n,s)},r.log=t||__defaultLog,r}a(makeOptionalRequire,"makeOptionalRequire");exports.makeOptionalRequire=makeOptionalRequire;exports.optionalRequire=makeOptionalRequire(xrequire);exports.optionalRequireCwd=makeOptionalRequire((0,require_at_1.default)(process.cwd()))});var _c=y((xre,nr)=>{"use strict";var rr=aO();nr.exports=function(){return rr.makeOptionalRequire.apply(rr,arguments)};nr.exports.tryRequire=rr.tryRequire;nr.exports.tryResolve=rr.tryResolve;nr.exports.try=rr.tryRequire;nr.exports.resolve=rr.tryResolve;nr.exports.makeOptionalRequire=rr.makeOptionalRequire;nr.exports.optionalRequire=rr.optionalRequire;nr.exports.optionalRequireCwd=rr.optionalRequireCwd;nr.exports.optionalRequireTop=rr.optionalRequireTop;var cO;Object.defineProperty(nr.exports,"log",{set(e){cO=e,rr.setDefaultLog(e)},get(){return cO}})});var uO=y((Sre,eU)=>{eU.exports={name:"mongodb",version:"3.7.4",description:"The official MongoDB driver for Node.js",main:"index.js",files:["index.js","lib"],repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},peerDependenciesMeta:{kerberos:{optional:!0},"mongodb-client-encryption":{optional:!0},"mongodb-extjson":{optional:!0},snappy:{optional:!0},"bson-ext":{optional:!0},aws4:{optional:!0}},dependencies:{bl:"^2.2.1",bson:"^1.1.4",denque:"^1.4.1","optional-require":"^1.1.8","safe-buffer":"^5.1.2"},devDependencies:{"@types/chai":"^4.2.16","@types/mocha":"^8.2.2","@types/node":"^14.14.37","array-includes":"^3.1.3",chai:"^4.1.1","chai-subset":"^1.6.0",chalk:"^2.4.2",co:"4.6.0",eslint:"^7.10.0","eslint-config-prettier":"^6.11.0","eslint-plugin-es":"^3.0.1","eslint-plugin-prettier":"^3.1.3",jsdoc:"^3.5.5","lodash.camelcase":"^4.3.0",mocha:"5.2.0","mocha-sinon":"^2.1.0","mongodb-extjson":"^2.1.1","mongodb-mock-server":"^1.0.1",nyc:"^15.1.0","object.entries":"^1.1.3",prettier:"^1.19.1",semver:"^5.5.0",sinon:"^4.3.0","sinon-chai":"^3.2.0",snappy:"^6.3.4","spec-xunit-file":"0.0.1-3","standard-version":"^9.2.0",tslib:"^2.2.0",typescript:"^4.2.4","util.promisify":"^1.0.1","worker-farm":"^1.5.0",wtfnode:"^0.8.0",yargs:"^14.2.0"},license:"Apache-2.0",engines:{node:">=4"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:unified":"tsc -p test/functional/unified-spec-runner/tsconfig.unified.json","check:atlas":"mocha --opts '{}' ./test/manual/atlas_connectivity.test.js","check:bench":"node test/benchmarks/driverBench/","check:coverage":"nyc npm run check:test","check:kerberos":"mocha --opts '{}' -t 60000 test/manual/kerberos.test.js","check:ldap":"mocha --opts '{}' test/manual/ldap.test.js","check:lint":"eslint -v && eslint lib test","check:test":"mocha --recursive test/functional test/unit","check:tls":"mocha --opts '{}' test/manual/tls_support.test.js",format:"npm run check:lint -- --fix",release:"standard-version -i HISTORY.md",test:"npm run check:lint && mocha --recursive test/functional test/unit"},homepage:"https://github.com/mongodb/node-mongodb-native",optionalDependencies:{saslprep:"^1.0.0"}}});var U=y((bre,fO)=>{"use strict";var Ud=require("os"),tU=require("crypto"),lO=_c()(require),rU=a(()=>{let e=tU.randomBytes(16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},"uuidV4");function nU(e,t,r){r.forEach(n=>e.on(n,i=>t.emit(n,i)))}a(nU,"relayEvents");function iU(){let e;try{e=lO("kerberos")}catch(t){throw t.code==="MODULE_NOT_FOUND"?new Error("The `kerberos` module was not found. Please install it and try again."):t}return e}a(iU,"retrieveKerberos");var Ki=a(function(){throw new Error("The `mongodb-extjson` module was not found. Please install it and try again.")},"noEJSONError");function sU(){let e=lO("mongodb-extjson");return e||(e={parse:Ki,deserialize:Ki,serialize:Ki,stringify:Ki,setBSONModule:Ki,BSON:Ki}),e}a(sU,"retrieveEJSON");function pO(e){if(e){if(e.ismaster)return e.ismaster.maxWireVersion;if(typeof e.lastIsMaster=="function"){let t=e.lastIsMaster();if(t)return t.maxWireVersion}if(e.description)return e.description.maxWireVersion}return 0}a(pO,"maxWireVersion");function oU(e,t){return t&&t.collation&&pO(e)<5}a(oU,"collationNotSupported");function aU(e){return e&&typeof e.then=="function"}a(aU,"isPromiseLike");function cU(e,t,r){e=e||[];let n=0,i=0;for(n=0;n<e.length;++n)i++,t(e[n],s);if(i===0){r();return}function s(o){if(i--,o){r(o);return}n===e.length&&i<=0&&r()}a(s,"eachCallback")}a(cU,"eachAsync");function uU(e,t,r){e=e||[];let n=0,i=e.length;if(i===0){r();return}function s(o){if(n++,i--,o){r(o);return}if(n===e.length&&i<=0){r();return}t(e[n],s)}a(s,"eachCallback"),t(e[n],s)}a(uU,"eachAsyncSeries");function lU(e){return e.description!=null}a(lU,"isUnifiedTopology");function pU(e,t){return!Array.isArray(e)||!Array.isArray(t)?!1:e.length===t.length&&e.every((r,n)=>r===t[n])}a(pU,"arrayStrictEqual");function fU(e,t){let r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(i=>t[i]===e[i])}a(fU,"tagsStrictEqual");function dU(e,t){return e===t?!0:!(e==null&&t!=null||e!=null&&t==null||e.constructor.name!==t.constructor.name||e.message!==t.message)}a(dU,"errorStrictEqual");function hU(e){return a(function(r,n){let i=e[r.s.state];if(i&&i.indexOf(n)<0)throw new TypeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${i}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n},"stateTransition")}a(hU,"makeStateMachine");function mU(e){e=e||{};let t={driver:{name:"nodejs",version:uO().version},os:{type:Ud.type(),name:process.platform,architecture:process.arch,version:Ud.release()},platform:`'Node.js ${process.version}, ${Ud.endianness} (${e.useUnifiedTopology?"unified":"legacy"})`};if(e.driverInfo&&(e.driverInfo.name&&(t.driver.name=`${t.driver.name}|${e.driverInfo.name}`),e.driverInfo.version&&(t.version=`${t.driver.version}|${e.driverInfo.version}`),e.driverInfo.platform&&(t.platform=`${t.platform}|${e.driverInfo.platform}`)),e.appname){let r=Buffer.from(e.appname);t.application={name:r.length>128?r.slice(0,128).toString("utf8"):e.appname}}return t}a(mU,"makeClientMetadata");var yU=a(()=>{},"noop");fO.exports={uuidV4:rU,relayEvents:nU,collationNotSupported:oU,retrieveEJSON:sU,retrieveKerberos:iU,maxWireVersion:pO,isPromiseLike:aU,eachAsync:cU,eachAsyncSeries:uU,isUnifiedTopology:lU,arrayStrictEqual:pU,tagsStrictEqual:fU,errorStrictEqual:dU,makeStateMachine:hU,makeClientMetadata:mU,noop:yU}});var Gn=y((Ere,dO)=>{"use strict";var gU=Object.freeze({HostUnreachable:6,HostNotFound:7,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotMaster:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotMasterNoSlaveOk:13435,NotMasterOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernFailed:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,DuplicateKey:11e3,CannotCreateIndex:67,IndexOptionsConflict:85,IndexKeySpecsConflict:86,InvalidIndexSpecificationOption:197});dO.exports=Object.freeze({MONGODB_ERROR_CODES:gU})});var q=y((Ore,yO)=>{"use strict";var se=Gn().MONGODB_ERROR_CODES,Cr=Symbol("errorLabels"),Ic=class Ic extends Error{constructor(t){if(t instanceof Error)super(t.message),this.stack=t.stack;else{if(typeof t=="string")super(t);else{super(t.message||t.errmsg||t.$err||"n/a"),t.errorLabels&&(this[Cr]=new Set(t.errorLabels));for(var r in t)r==="errorLabels"||r==="errmsg"||(this[r]=t[r])}Error.captureStackTrace(this,this.constructor)}this.name="MongoError"}get errmsg(){return this.message}static create(t){return new Ic(t)}hasErrorLabel(t){return this[Cr]==null?!1:this[Cr].has(t)}addErrorLabel(t){this[Cr]==null&&(this[Cr]=new Set),this[Cr].add(t)}get errorLabels(){return this[Cr]?Array.from(this[Cr]):[]}};a(Ic,"MongoError");var Yn=Ic,hO=Symbol("beforeHandshake");function vU(e){return e[hO]===!0}a(vU,"isNetworkErrorBeforeHandshake");var zd=class zd extends Yn{constructor(t,r){super(t),this.name="MongoNetworkError",r&&typeof r.beforeHandshake=="boolean"&&(this[hO]=r.beforeHandshake)}};a(zd,"MongoNetworkError");var Oo=zd,$d=class $d extends Oo{constructor(t,r){super(t,r),this.name="MongoNetworkTimeoutError"}};a($d,"MongoNetworkTimeoutError");var Fd=$d,Hd=class Hd extends Yn{constructor(t){super(t),this.name="MongoParseError"}};a(Hd,"MongoParseError");var Ac=Hd,Vd=class Vd extends Yn{constructor(t,r){r&&r.error?super(r.error.message||r.error):super(t),this.name="MongoTimeoutError",r&&(this.reason=r)}};a(Vd,"MongoTimeoutError");var Nc=Vd,Kd=class Kd extends Nc{constructor(t,r){super(t,r),this.name="MongoServerSelectionError"}};a(Kd,"MongoServerSelectionError");var Wd=Kd;function xU(e){let t=Object.assign({},e);return t.ok===0&&(t.ok=1,delete t.errmsg,delete t.code,delete t.codeName),t}a(xU,"makeWriteConcernResultObject");var Gd=class Gd extends Yn{constructor(t,r){super(t),this.name="MongoWriteConcernError",r&&Array.isArray(r.errorLabels)&&(this[Cr]=new Set(r.errorLabels)),r!=null&&(this.result=xU(r))}};a(Gd,"MongoWriteConcernError");var Rc=Gd,SU=new Set([se.HostUnreachable,se.HostNotFound,se.NetworkTimeout,se.ShutdownInProgress,se.PrimarySteppedDown,se.SocketException,se.NotMaster,se.InterruptedAtShutdown,se.InterruptedDueToReplStateChange,se.NotMasterNoSlaveOk,se.NotMasterOrSecondary]),kd=new Set([se.InterruptedAtShutdown,se.InterruptedDueToReplStateChange,se.NotMaster,se.NotMasterNoSlaveOk,se.NotMasterOrSecondary,se.PrimarySteppedDown,se.ShutdownInProgress,se.HostNotFound,se.HostUnreachable,se.NetworkTimeout,se.SocketException,se.ExceededTimeLimit]);function bU(e){return e.hasErrorLabel("RetryableWriteError")}a(bU,"isRetryableEndTransactionError");function wU(e){return e instanceof Rc?kd.has(e.code)||kd.has(e.result.code):kd.has(e.code)}a(wU,"isRetryableWriteError");function EU(e){return SU.has(e.code)||e instanceof Oo||e.message.match(/not master/)||e.message.match(/node is recovering/)}a(EU,"isRetryableError");var OU=new Set([se.ShutdownInProgress,se.PrimarySteppedDown,se.InterruptedAtShutdown,se.InterruptedDueToReplStateChange,se.NotMasterOrSecondary]),TU=new Set([se.NotMaster,se.NotMasterNoSlaveOk,se.LegacyNotPrimary]),CU=new Set([se.InterruptedAtShutdown,se.ShutdownInProgress]);function mO(e){return typeof e.code=="number"?OU.has(e.code):/not master or secondary/.test(e.message)||/node is recovering/.test(e.message)}a(mO,"isRecoveringError");function _U(e){return typeof e.code=="number"?TU.has(e.code):mO(e)?!1:/not master/.test(e.message)}a(_U,"isNotMasterError");function AU(e){return e.code&&CU.has(e.code)}a(AU,"isNodeShuttingDownError");function NU(e){return e instanceof Ac||e==null?!0:mO(e)||_U(e)}a(NU,"isSDAMUnrecoverableError");yO.exports={MongoError:Yn,MongoNetworkError:Oo,MongoNetworkTimeoutError:Fd,MongoParseError:Ac,MongoTimeoutError:Nc,MongoServerSelectionError:Wd,MongoWriteConcernError:Rc,isRetryableError:EU,isSDAMUnrecoverableError:NU,isNodeShuttingDownError:AU,isRetryableWriteError:wU,isNetworkErrorBeforeHandshake:vU,isRetryableEndTransactionError:bU}});var _r=y((Cre,gO)=>{"use strict";var RU=new Set(["w","wtimeout","j","journal","fsync"]),Yd,Gi=class Gi{constructor(t,r,n,i){t!=null&&(this.w=t),r!=null&&(this.wtimeout=r),n!=null&&(this.j=n),i!=null&&(this.fsync=i)}static fromOptions(t){if(!(t==null||t.writeConcern==null&&t.w==null&&t.wtimeout==null&&t.j==null&&t.journal==null&&t.fsync==null))return t.writeConcern?typeof t.writeConcern=="string"?new Gi(t.writeConcern):Object.keys(t.writeConcern).some(r=>RU.has(r))?new Gi(t.writeConcern.w,t.writeConcern.wtimeout,t.writeConcern.j||t.writeConcern.journal,t.writeConcern.fsync):void 0:(Yd||(Yd=b()),Yd.emitWarningOnce("Top-level use of w, wtimeout, j, and fsync is deprecated. Use writeConcern instead."),new Gi(t.w,t.wtimeout,t.j||t.journal,t.fsync))}};a(Gi,"WriteConcern");var Jd=Gi;gO.exports=Jd});var Xd=y(vO=>{"use strict";function IU(){let e=this;return{next:function(){return Promise.resolve().then(()=>e.next()).then(t=>t?{value:t,done:!1}:e.close().then(()=>({value:t,done:!0})))}}}a(IU,"asyncIterator");vO.asyncIterator=IU});var b=y((Mc,TO)=>{"use strict";var pn=q().MongoError,qU=_r(),MU=a(function(e){var t={};for(var r in e)t[r]=e[r];return t},"shallowClone"),PU=a(function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:function(){return r}})},"getSingleProperty"),BU=Mc.formatSortValue=function(e){var t=(""+e).toLowerCase();switch(t){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new Error("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]")}},DU=Mc.formattedOrderClause=function(e){var t=new Map;if(e==null)return null;if(Array.isArray(e)){if(e.length===0)return null;for(var r=0;r<e.length;r++)e[r].constructor===String?t.set(`${e[r]}`,1):t.set(`${e[r][0]}`,BU(e[r][1]))}else if(e!=null&&typeof e=="object")if(e instanceof Map)t=e;else{var n=Object.keys(e);for(var i of n)t.set(i,e[i])}else if(typeof e=="string")t.set(`${e}`,1);else throw new Error("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]");return t},LU=a(function(t){if(typeof t!="string")throw new pn("collection name must be a String");if(!t||t.indexOf("..")!==-1)throw new pn("collection names cannot be empty");if(t.indexOf("$")!==-1&&t.match(/((^\$cmd)|(oplog\.\$main))/)==null)throw new pn("collection names must not contain '$'");if(t.match(/^\.|\.$/)!=null)throw new pn("collection names must not start or end with '.'");if(t.indexOf("\0")!==-1)throw new pn("collection names cannot contain a null character")},"checkCollectionName"),jU=a(function(e,t,r,n){try{if(e==null)return;if(e)return n?e(t,r,n):e(t,r)}catch(i){return process.nextTick(function(){throw i}),!1}return!0},"handleCallback"),UU=a(function(e){if(e instanceof Error)return e;for(var t=e.err||e.errmsg||e.errMessage||e,r=pn.create({message:t,driver:!0}),n=typeof e=="object"?Object.keys(e):[],i=0;i<n.length;i++)try{r[n[i]]=e[n[i]]}catch{}return r},"toError"),kU=a(function(t){var r=null;if(typeof t=="string")r=t;else if(Array.isArray(t))r={},t.forEach(function(i){r[i]=1});else if(t!=null&&typeof t=="object"){r={};for(var n in t)r[n]=t[n]}return r},"normalizeHintField"),FU=a(function(e){var t={},r=[],n;return typeof e=="string"?(r.push(e+"_1"),t[e]=1):Array.isArray(e)?e.forEach(function(i){typeof i=="string"?(r.push(i+"_1"),t[i]=1):Array.isArray(i)?(r.push(i[0]+"_"+(i[1]||1)),t[i[0]]=i[1]||1):qc(i)&&(n=Object.keys(i),n.forEach(function(s){r.push(s+"_"+i[s]),t[s]=i[s]}))}):qc(e)&&(n=Object.keys(e),n.forEach(function(i){r.push(i+"_"+e[i]),t[i]=e[i]})),{name:r.join("_"),keys:n,fieldHash:t}},"parseIndexOptions"),qc=Mc.isObject=function(e){return Object.prototype.toString.call(e)==="[object Object]"},WU=a(function(e,t){var r={};return e.forEach(function(n){r[n]=t[n]}),r},"debugOptions"),zU=a(function(e,t,r){for(var n in t)r.indexOf(n)===-1&&(e[n]=t[n]);return e},"decorateCommand"),$U=a(function(e,t){for(var r in t)e[r]=t[r];return e},"mergeOptions"),HU=a(function(e,t){var r={sslCA:"ca",sslCRL:"crl",sslValidate:"rejectUnauthorized",sslKey:"key",sslCert:"cert",sslPass:"passphrase",socketTimeoutMS:"socketTimeout",connectTimeoutMS:"connectionTimeout",replicaSet:"setName",rs_name:"setName",secondaryAcceptableLatencyMS:"acceptableLatency",connectWithNoPrimary:"secondaryOnlyConnectionAllowed",acceptableLatencyMS:"localThresholdMS"};for(var n in t)r[n]?e[r[n]]=t[n]:e[n]=t[n];return e},"translateOptions"),VU=a(function(e,t){var r={};for(var n in e)t.indexOf(n)!==-1&&(r[n]=e[n]);return r},"filterOptions"),xO=["w","j","wtimeout","fsync","writeConcern"];function KU(e,t){let r=!1;for(let n of xO)if(n in e){r=!0;break}if(!r)for(let n of xO)t[n]&&("writeConcern"in e||(e.writeConcern={}),e.writeConcern[n]=t[n]);return e}a(KU,"conditionallyMergeWriteConcern");var GU=a((e,t,r,n)=>{if(e==null)throw new TypeError("This method requires a valid topology instance");if(!Array.isArray(r))throw new TypeError("This method requires an array of arguments to apply");n=n||{};let i=e.s.promiseLibrary,s=r[r.length-1],o,c,l;if(!n.skipSessions&&e.hasSessionSupport()){if(c=r[r.length-2],c==null||c.session==null){l=Symbol(),o=e.startSession({owner:l});let p=r.length-2;r[p]=Object.assign({},r[p],{session:o})}else if(c.session&&c.session.hasEnded)throw new pn("Use of expired sessions is not permitted")}let u=a((p,d)=>a(function(h,m){if(o&&o.owner===l&&!n.returnsCursor)o.endSession(()=>{if(delete c.session,h)return d(h);p(m)});else{if(h)return d(h);p(m)}},"executeCallback"),"makeExecuteCallback");if(typeof s=="function"){s=r.pop();let p=u(d=>s(null,d),d=>s(d,null));r.push(p);try{return t.apply(null,r)}catch(d){throw p(d),d}}if(r[r.length-1]!=null)throw new TypeError("final argument to `executeLegacyOperation` must be a callback");return new i(function(p,d){let f=u(p,d);r[r.length-1]=f;try{return t.apply(null,r)}catch(h){f(h)}})},"executeLegacyOperation");function YU(e,t){return t&&t.s.options.retryWrites&&(e.retryWrites=!0),e}a(YU,"applyRetryableWrites");function JU(e,t,r){r=r||{};let n=t.db,i=t.collection;if(r.session&&r.session.inTransaction())return e.writeConcern&&delete e.writeConcern,e;let s=qU.fromOptions(r);return s?Object.assign(e,{writeConcern:s}):i&&i.writeConcern?Object.assign(e,{writeConcern:Object.assign({},i.writeConcern)}):n&&n.writeConcern?Object.assign(e,{writeConcern:Object.assign({},n.writeConcern)}):e}a(JU,"applyWriteConcern");function XU(e){return e&&typeof e.then=="function"}a(XU,"isPromiseLike");function QU(e,t,r){let n=t.s&&t.s.topology||t.topology;if(!n)throw new TypeError('parameter "target" is missing a topology');let i=n.capabilities();if(r.collation&&typeof r.collation=="object")if(i&&i.commandsTakeCollation)e.collation=r.collation;else throw new pn("Current topology does not support collation")}a(QU,"decorateWithCollation");function ZU(e,t,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},e.readConcern||{});t.s.readConcern&&Object.assign(n,t.s.readConcern),Object.keys(n).length>0&&Object.assign(e,{readConcern:n})}a(ZU,"decorateWithReadConcern");function ek(e,t){return e.explain?e:{explain:e,verbosity:t.verbosity}}a(ek,"decorateWithExplain");var bO=+process.version.split(".")[0].substring(1),tk=a(e=>bO<=6?process.emitWarning(e,"DeprecationWarning",Yi):process.emitWarning(e,{type:"DeprecationWarning",code:Yi}),"emitProcessWarning"),rk=a(e=>console.error(e),"emitConsoleWarning"),wO=process.emitWarning?tk:rk;function nk(e,t){return`${e} option [${t}] is deprecated and will be removed in a later version.`}a(nk,"defaultMsgHandler");function ik(e,t){if(process.noDeprecation===!0)return t;let r=e.msgHandler?e.msgHandler:nk,n=new Set;function i(){let s=arguments[e.optionsIndex];return!qc(s)||Object.keys(s).length===0?t.apply(this,arguments):(e.deprecatedOptions.forEach(o=>{if(Object.prototype.hasOwnProperty.call(s,o)&&!n.has(o)){n.add(o);let c=r(e.name,o);if(wO(c),this&&this.getLogger){let l=this.getLogger();l&&l.warn(c)}}}),t.apply(this,arguments))}return a(i,"deprecated"),Object.setPrototypeOf(i,t),t.prototype&&(i.prototype=t.prototype),i}a(ik,"deprecateOptions");var Qd={};try{Xd(),Qd.ASYNC_ITERATOR=!0}catch{Qd.ASYNC_ITERATOR=!1}var To=class To{constructor(t,r){this.db=t,this.collection=r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(t){return new To(this.db,t)}static fromString(t){if(!t)throw new Error(`Cannot parse namespace from "${t}"`);let r=t.indexOf(".");return new To(t.substring(0,r),t.substring(r+1))}};a(To,"MongoDBNamespace");var Zd=To;function*sk(e){let t=e||0;for(;;){let r=t;t+=1,yield r}}a(sk,"makeCounter");function ok(e,t,r){let n=e&&e.s&&e.s.promiseLibrary||Promise,i;return typeof t!="function"&&(i=new n((s,o)=>{t=a((c,l)=>{if(c)return o(c);s(l)},"callback")})),r(function(s,o){if(s!=null){try{t(s)}catch(c){return process.nextTick(()=>{throw c})}return}t(s,o)}),i}a(ok,"maybePromise");function th(){let e=process.hrtime();return Math.floor(e[0]*1e3+e[1]/1e6)}a(th,"now");function ak(e){if(typeof e!="number")throw TypeError("numeric value required to calculate duration");let t=th()-e;return t<0?0:t}a(ak,"calculateDurationInMs");function ck(e,t){let r,n,i,s=!1;t=t||{};let o=t.interval||1e3,c=t.minInterval||500,l=typeof t.immediate=="boolean"?t.immediate:!1,u=typeof t.clock=="function"?t.clock:th;function p(){let m=u(),v=m-i,x=m-n,w=o-x;i=m,!(v<c)&&(w>c&&f(c),w<0&&h())}a(p,"wake");function d(){s=!0,r&&(clearTimeout(r),r=null),n=0,i=0}a(d,"stop");function f(m){s||(clearTimeout(r),r=setTimeout(h,m||o))}a(f,"reschedule");function h(){i=0,n=u(),e(m=>{if(m)throw m;f(o)})}return a(h,"executeAndReschedule"),l?h():(n=u(),f()),{wake:p,stop:d}}a(ck,"makeInterruptableAsyncInterval");function EO(e){return Array.isArray(e)?e.reduce((t,r)=>t||EO(r),null):Object.keys(typeof e.toBSON!="function"?e:e.toBSON()).map(t=>t[0]).indexOf("$")>=0}a(EO,"hasAtomicOperators");var Yi="MONGODB DRIVER";function OO(e){return process.emitWarning?bO<=6?process.emitWarning(e,void 0,Yi):process.emitWarning(e,{code:Yi}):console.error(`[${Yi}] Warning:`,e)}a(OO,"emitWarning");var SO=new Set;function uk(e){if(!SO.has(e))return SO.add(e),OO(e)}a(uk,"emitWarningOnce");function lk(e,t){e=Array.isArray(e)?new Set(e):e,t=Array.isArray(t)?new Set(t):t;for(let r of t)if(!e.has(r))return!1;return!0}a(lk,"isSuperset");function pk(e,t){let r=Object.prototype.toString,n=Object.prototype.hasOwnProperty,i=a(o=>r.call(o)==="[object Object]","isObject");if(!i(e))return!1;let s=e.constructor;if(s&&s.prototype&&(!i(s.prototype)||!n.call(s.prototype,"isPrototypeOf")))return!1;if(t){let o=Object.keys(e);return lk(o,t)}return!0}a(pk,"isRecord");function eh(e){if(e==null)return e;if(Array.isArray(e))return e.map(r=>eh(r));if(pk(e)){let r={};for(let n in e)r[n]=eh(e[n]);return r}let t=e.constructor;if(t)switch(t.name.toLowerCase()){case"date":return new t(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return Buffer.from(e)}return e}a(eh,"deepCopy");function fk(e){let t=e.version.split(".").map(r=>Number.parseInt(r,10));return{major:t[0],minor:t[1],patch:t[2]}}a(fk,"parsePackageVersion");TO.exports={filterOptions:VU,mergeOptions:$U,translateOptions:HU,shallowClone:MU,getSingleProperty:PU,checkCollectionName:LU,toError:UU,formattedOrderClause:DU,parseIndexOptions:FU,normalizeHintField:kU,handleCallback:jU,decorateCommand:zU,isObject:qc,debugOptions:WU,MAX_JS_INT:Number.MAX_SAFE_INTEGER+1,conditionallyMergeWriteConcern:KU,executeLegacyOperation:GU,applyRetryableWrites:YU,applyWriteConcern:JU,isPromiseLike:XU,decorateWithCollation:QU,decorateWithReadConcern:ZU,decorateWithExplain:ek,deprecateOptions:ik,SUPPORTS:Qd,MongoDBNamespace:Zd,emitDeprecationWarning:wO,makeCounter:sk,maybePromise:ok,now:th,calculateDurationInMs:ak,makeInterruptableAsyncInterval:ck,hasAtomicOperators:EO,MONGODB_WARNING_CODE:Yi,emitWarning:OO,emitWarningOnce:uk,deepCopy:eh,parsePackageVersion:fk}});var ke=y((Ire,AO)=>{"use strict";var CO=b().parsePackageVersion,dk=q().MongoError,Bc=_c()(require);function hk(e,t){let r={};return e.forEach(function(n){r[n]=t[n]}),r}a(hk,"debugOptions");function mk(){let e=Cc();e.native=!1;let t=Bc("bson-ext"),r=CO(Bc("bson-ext/package.json")||{version:"0.0.0"});if(t){if(r.major>=4)throw new dk("bson-ext version 4 and above does not work with the 3.x version of the mongodb driver");return t.native=!0,t}return e}a(mk,"retrieveBSON");function Pc(){throw new Error("Attempted to use Snappy compression, but Snappy is not installed. Install or disable Snappy compression and try again.")}a(Pc,"noSnappyWarning");var _O=Symbol("kPkgVersion");function yk(){let e=Bc("snappy");if(!e)return{compress:Pc,uncompress:Pc,compressSync:Pc,uncompressSync:Pc};let t=Bc("snappy/package.json")||{version:"0.0.0"},r=CO(t);if(e[_O]=r,r.major>=7){let n=e.compress,i=e.uncompress;e.compress=(s,o)=>{n(s).then(c=>o(void 0,c)).catch(c=>o(c))},e.uncompress=(s,o)=>{i(s).then(c=>o(void 0,c)).catch(c=>o(c))}}return e}a(yk,"retrieveSnappy");AO.exports={PKG_VERSION:_O,debugOptions:hk,retrieveBSON:mk,retrieveSnappy:yk}});var $e=y((Mre,NO)=>{"use strict";var gk=b().emitWarningOnce,G=a(function(e,t,r){if(!G.isValid(e))throw new TypeError(`Invalid read preference mode ${e}`);if(t&&!Array.isArray(t)){gk("ReadPreference tags must be an array, this will change in the next major version");let n=typeof t.maxStalenessSeconds<"u",i=typeof t.hedge<"u";n||i?(r=t,t=void 0):t=[t]}if(this.mode=e,this.tags=t,this.hedge=r&&r.hedge,r=r||{},r.maxStalenessSeconds!=null){if(r.maxStalenessSeconds<=0)throw new TypeError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=r.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===G.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new TypeError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new TypeError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new TypeError("Primary read preference cannot be combined with hedge")}},"ReadPreference");Object.defineProperty(G.prototype,"preference",{enumerable:!0,get:function(){return this.mode}});G.PRIMARY="primary";G.PRIMARY_PREFERRED="primaryPreferred";G.SECONDARY="secondary";G.SECONDARY_PREFERRED="secondaryPreferred";G.NEAREST="nearest";var vk=[G.PRIMARY,G.PRIMARY_PREFERRED,G.SECONDARY,G.SECONDARY_PREFERRED,G.NEAREST,null];G.fromOptions=function(e){if(!e)return null;let t=e.readPreference;if(!t)return null;let r=e.readPreferenceTags,n=e.maxStalenessSeconds;if(typeof t=="string")return new G(t,r);if(!(t instanceof G)&&typeof t=="object"){let i=t.mode||t.preference;if(i&&typeof i=="string")return new G(i,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds||n,hedge:t.hedge})}return t};G.resolve=function(e,t){t=t||{};let r=t.session,n=e&&e.readPreference,i;return t.readPreference?i=G.fromOptions(t):r&&r.inTransaction()&&r.transaction.options.readPreference?i=r.transaction.options.readPreference:n!=null?i=n:i=G.primary,typeof i=="string"?new G(i):i};G.translate=function(e){if(e.readPreference==null)return e;let t=e.readPreference;if(typeof t=="string")e.readPreference=new G(t);else if(t&&!(t instanceof G)&&typeof t=="object"){let r=t.mode||t.preference;r&&typeof r=="string"&&(e.readPreference=new G(r,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds}))}else if(!(t instanceof G))throw new TypeError("Invalid read preference: "+t);return e};G.isValid=function(e){return vk.indexOf(e)!==-1};G.prototype.isValid=function(e){return G.isValid(typeof e=="string"?e:this.mode)};var xk=["primaryPreferred","secondary","secondaryPreferred","nearest"];G.prototype.slaveOk=function(){return xk.indexOf(this.mode)!==-1};G.prototype.equals=function(e){return e.mode===this.mode};G.prototype.toJSON=function(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e};G.primary=new G("primary");G.primaryPreferred=new G("primaryPreferred");G.secondary=new G("secondary");G.secondaryPreferred=new G("secondaryPreferred");G.nearest=new G("nearest");NO.exports=G});var Qe=y((Bre,IO)=>{"use strict";var Sk="closing",bk="closed",wk="connecting",Ek="connected",RO={Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown"},Ok={Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown"};function Tk(e){let t=e.s.description||e.s.serverDescription;return t.topologyType===RO.Single?t.servers[0].type:t.type}a(Tk,"serverType");var Ck={useUnifiedTopology:!0,localThresholdMS:15,serverSelectionTimeoutMS:3e4,heartbeatFrequencyMS:1e4,minHeartbeatFrequencyMS:500};function _k(e){e.forEach(clearTimeout),e.clear()}a(_k,"drainTimerQueue");function Ak(e,t){return clearTimeout(e),t.delete(e)}a(Ak,"clearAndRemoveTimerFrom");IO.exports={STATE_CLOSING:Sk,STATE_CLOSED:bk,STATE_CONNECTING:wk,STATE_CONNECTED:Ek,TOPOLOGY_DEFAULTS:Ck,TopologyType:RO,ServerType:Ok,serverType:Tk,drainTimerQueue:_k,clearAndRemoveTimerFrom:Ak}});var Jn=y((Lre,PO)=>{"use strict";var Nk=U().arrayStrictEqual,Rk=U().tagsStrictEqual,Ik=U().errorStrictEqual,He=Qe().ServerType,qk=b().now,Mk=new Set([He.RSPrimary,He.Standalone,He.Mongos]),Pk=new Set([He.RSPrimary,He.RSSecondary,He.Mongos,He.Standalone]),Bk=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","compression","me","hosts","passives","arbiters","tags","setName","setVersion","electionId","primary","logicalSessionTimeoutMinutes","saslSupportedMechs","__nodejs_mock_server__","$clusterTime"],nh=class nh{constructor(t,r,n){n=n||{},r=Object.assign({minWireVersion:0,maxWireVersion:0,hosts:[],passives:[],arbiters:[],tags:[]},r),r.isWritablePrimary!=null&&(r.ismaster=r.isWritablePrimary),this.address=t,this.error=n.error,this.roundTripTime=n.roundTripTime||-1,this.lastUpdateTime=qk(),this.lastWriteDate=r.lastWrite?r.lastWrite.lastWriteDate:null,this.opTime=r.lastWrite?r.lastWrite.opTime:null,this.type=qO(r),this.topologyVersion=n.topologyVersion||r.topologyVersion,Bk.forEach(i=>{typeof r[i]<"u"&&(this[i]=r[i])}),this.me&&(this.me=this.me.toLowerCase()),this.hosts=this.hosts.map(i=>i.toLowerCase()),this.passives=this.passives.map(i=>i.toLowerCase()),this.arbiters=this.arbiters.map(i=>i.toLowerCase())}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===He.RSSecondary||this.isWritable}get isDataBearing(){return Pk.has(this.type)}get isWritable(){return Mk.has(this.type)}get host(){let t=`:${this.port}`.length;return this.address.slice(0,-t)}get port(){let t=this.address.split(":").pop();return t&&Number.parseInt(t,10)}equals(t){let r=this.topologyVersion===t.topologyVersion||MO(this.topologyVersion,t.topologyVersion)===0;return t!=null&&Ik(this.error,t.error)&&this.type===t.type&&this.minWireVersion===t.minWireVersion&&this.me===t.me&&Nk(this.hosts,t.hosts)&&Rk(this.tags,t.tags)&&this.setName===t.setName&&this.setVersion===t.setVersion&&(this.electionId?t.electionId&&this.electionId.equals(t.electionId):this.electionId===t.electionId)&&this.primary===t.primary&&this.logicalSessionTimeoutMinutes===t.logicalSessionTimeoutMinutes&&r}};a(nh,"ServerDescription");var rh=nh;function qO(e){return!e||!e.ok?He.Unknown:e.isreplicaset?He.RSGhost:e.msg&&e.msg==="isdbgrid"?He.Mongos:e.setName?e.hidden?He.RSOther:e.ismaster?He.RSPrimary:e.secondary?He.RSSecondary:e.arbiterOnly?He.RSArbiter:He.RSOther:He.Standalone}a(qO,"parseServerType");function MO(e,t){return e==null||t==null?-1:e.processId.equals(t.processId)?e.counter===t.counter?0:e.counter<t.counter?-1:1:-1}a(MO,"compareTopologyVersion");PO.exports={ServerDescription:rh,parseServerType:qO,compareTopologyVersion:MO}});var ih=y((Ure,BO)=>{"use strict";var Dk="2.6",Lk="5.0";BO.exports={MIN_SUPPORTED_SERVER_VERSION:Dk,MAX_SUPPORTED_SERVER_VERSION:Lk,MIN_SUPPORTED_WIRE_VERSION:2,MAX_SUPPORTED_WIRE_VERSION:13}});var oh=y((kre,UO)=>{"use strict";var ye=Qe().ServerType,Xi=Jn().ServerDescription,Dc=ih(),lt=Qe().TopologyType,jk=Dc.MIN_SUPPORTED_SERVER_VERSION,Uk=Dc.MAX_SUPPORTED_SERVER_VERSION,DO=Dc.MIN_SUPPORTED_WIRE_VERSION,LO=Dc.MAX_SUPPORTED_WIRE_VERSION,Ji=class Ji{constructor(t,r,n,i,s,o,c){c=c||{},this.type=t||lt.Unknown,this.setName=n||null,this.maxSetVersion=i||null,this.maxElectionId=s||null,this.servers=r||new Map,this.stale=!1,this.compatible=!0,this.compatibilityError=null,this.logicalSessionTimeoutMinutes=null,this.heartbeatFrequencyMS=c.heartbeatFrequencyMS||0,this.localThresholdMS=c.localThresholdMS||0,this.commonWireVersion=o||null,Object.defineProperty(this,"options",{value:c,enumberable:!1});for(let l of this.servers.values())if(l.type!==ye.Unknown&&(l.minWireVersion>LO&&(this.compatible=!1,this.compatibilityError=`Server at ${l.address} requires wire version ${l.minWireVersion}, but this version of the driver only supports up to ${LO} (MongoDB ${Uk})`),l.maxWireVersion<DO)){this.compatible=!1,this.compatibilityError=`Server at ${l.address} reports wire version ${l.maxWireVersion}, but this version of the driver requires at least ${DO} (MongoDB ${jk}).`;break}this.logicalSessionTimeoutMinutes=null;for(let l of this.servers){let u=l[1];if(u.isReadable){if(u.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=u.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,u.logicalSessionTimeoutMinutes)}}}updateFromSrvPollingEvent(t){let r=t.addresses(),n=new Map(this.servers);for(let i of this.servers)r.has(i[0])?r.delete(i[0]):n.delete(i[0]);if(n.size===this.servers.size&&r.size===0)return this;for(let i of r)n.set(i,new Xi(i));return new Ji(this.type,n,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,this.options,null)}update(t){let r=t.address,n=this.type,i=this.setName,s=this.maxSetVersion,o=this.maxElectionId,c=this.commonWireVersion;t.setName&&i&&t.setName!==i&&(t=new Xi(r,null));let l=t.type,u=new Map(this.servers);if(t.maxWireVersion!==0&&(c==null?c=t.maxWireVersion:c=Math.min(c,t.maxWireVersion)),u.set(r,t),n===lt.Single)return new Ji(lt.Single,u,i,s,o,c,this.options);if(n===lt.Unknown&&(l===ye.Standalone&&this.servers.size!==1?u.delete(r):n=kk(l)),n===lt.Sharded&&[ye.Mongos,ye.Unknown].indexOf(l)===-1&&u.delete(r),n===lt.ReplicaSetNoPrimary){if([ye.Standalone,ye.Mongos].indexOf(l)>=0&&u.delete(r),l===ye.RSPrimary){let p=jO(u,i,t,s,o);n=p[0],i=p[1],s=p[2],o=p[3]}else if([ye.RSSecondary,ye.RSArbiter,ye.RSOther].indexOf(l)>=0){let p=zk(u,i,t);n=p[0],i=p[1]}}if(n===lt.ReplicaSetWithPrimary)if([ye.Standalone,ye.Mongos].indexOf(l)>=0)u.delete(r),n=Qi(u);else if(l===ye.RSPrimary){let p=jO(u,i,t,s,o);n=p[0],i=p[1],s=p[2],o=p[3]}else[ye.RSSecondary,ye.RSArbiter,ye.RSOther].indexOf(l)>=0?n=Wk(u,i,t):n=Qi(u);return new Ji(n,u,i,s,o,c,this.options)}get error(){let t=Array.from(this.servers.values()).filter(r=>r.error);if(t.length>0)return t[0].error}get hasKnownServers(){return Array.from(this.servers.values()).some(t=>t.type!==ye.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(t=>t.isDataBearing)}hasServer(t){return this.servers.has(t)}};a(Ji,"TopologyDescription");var sh=Ji;function kk(e){return e===ye.Standalone?lt.Single:e===ye.Mongos?lt.Sharded:e===ye.RSPrimary?lt.ReplicaSetWithPrimary:e===ye.RSGhost||e===ye.Unknown?lt.Unknown:lt.ReplicaSetNoPrimary}a(kk,"topologyTypeForServerType");function Fk(e,t){if(e==null)return-1;if(t==null)return 1;if(e.id instanceof Buffer&&t.id instanceof Buffer){let i=e.id,s=t.id;return i.compare(s)}let r=e.toString(),n=t.toString();return r.localeCompare(n)}a(Fk,"compareObjectId");function jO(e,t,r,n,i){if(t=t||r.setName,t!==r.setName)return e.delete(r.address),[Qi(e),t,n,i];let s=r.electionId?r.electionId:null;if(r.setVersion&&s){if(n&&i&&(n>r.setVersion||Fk(i,s)>0))return e.set(r.address,new Xi(r.address)),[Qi(e),t,n,i];i=r.electionId}r.setVersion!=null&&(n==null||r.setVersion>n)&&(n=r.setVersion);for(let l of e.keys()){let u=e.get(l);if(u.type===ye.RSPrimary&&u.address!==r.address){e.set(l,new Xi(u.address));break}}r.allHosts.forEach(l=>{e.has(l)||e.set(l,new Xi(l))});let o=Array.from(e.keys()),c=r.allHosts;return o.filter(l=>c.indexOf(l)===-1).forEach(l=>{e.delete(l)}),[Qi(e),t,n,i]}a(jO,"updateRsFromPrimary");function Wk(e,t,r){if(t==null)throw new TypeError("setName is required");return(t!==r.setName||r.me&&r.address!==r.me)&&e.delete(r.address),Qi(e)}a(Wk,"updateRsWithPrimaryFromMember");function zk(e,t,r){let n=lt.ReplicaSetNoPrimary;return t=t||r.setName,t!==r.setName?(e.delete(r.address),[n,t]):(r.allHosts.forEach(i=>{e.has(i)||e.set(i,new Xi(i))}),r.me&&r.address!==r.me&&e.delete(r.address),[n,t])}a(zk,"updateRsNoPrimaryFromMember");function Qi(e){for(let t of e.keys())if(e.get(t).type===ye.RSPrimary)return lt.ReplicaSetWithPrimary;return lt.ReplicaSetNoPrimary}a(Qi,"checkHasPrimary");UO.exports={TopologyDescription:sh}});var ue=y((Wre,FO)=>{"use strict";var ah=$e(),$k=q().MongoError,kO=Qe().ServerType,Hk=oh().TopologyDescription,Vk=16,Kk=9,Gk={OP_REPLY:1,OP_UPDATE:2001,OP_INSERT:2002,OP_QUERY:2004,OP_GETMORE:2005,OP_DELETE:2006,OP_KILL_CURSORS:2007,OP_COMPRESSED:2012,OP_MSG:2013},Yk=a(function(e,t){var r=e.readPreference||new ah("primary");if(t.readPreference&&(r=t.readPreference),typeof r=="string"&&(r=new ah(r)),!(r instanceof ah))throw new $k("read preference must be a ReadPreference instance");return r},"getReadPreference"),Jk=a(function(e){return{length:e.readInt32LE(0),requestId:e.readInt32LE(4),responseTo:e.readInt32LE(8),opCode:e.readInt32LE(12)}},"parseHeader");function Xk(e,t){return Object.assign(e,{raw:typeof t.raw=="boolean"?t.raw:!1,promoteLongs:typeof t.promoteLongs=="boolean"?t.promoteLongs:!0,promoteValues:typeof t.promoteValues=="boolean"?t.promoteValues:!0,promoteBuffers:typeof t.promoteBuffers=="boolean"?t.promoteBuffers:!1,bsonRegExp:typeof t.bsonRegExp=="boolean"?t.bsonRegExp:!1,monitoring:typeof t.monitoring=="boolean"?t.monitoring:!1,fullResult:typeof t.fullResult=="boolean"?t.fullResult:!1}),typeof t.socketTimeout=="number"&&(e.socketTimeout=t.socketTimeout),t.session&&(e.session=t.session),typeof t.documentsReturnedIn=="string"&&(e.documentsReturnedIn=t.documentsReturnedIn),e}a(Xk,"applyCommonQueryOptions");function Qk(e){return e.type==="mongos"||e.description&&e.description.type===kO.Mongos?!0:e.description&&e.description instanceof Hk?Array.from(e.description.servers.values()).some(r=>r.type===kO.Mongos):!1}a(Qk,"isSharded");function Zk(e){return e.split(".")[0]}a(Zk,"databaseNamespace");function eF(e){return e.split(".").slice(1).join(".")}a(eF,"collectionNamespace");FO.exports={getReadPreference:Yk,MESSAGE_HEADER_SIZE:Vk,COMPRESSION_DETAILS_SIZE:Kk,opcodes:Gk,parseHeader:Jk,applyCommonQueryOptions:Xk,isSharded:Qk,databaseNamespace:Zk,collectionNamespace:eF}});var Ar=y(($re,$O)=>{"use strict";var WO=ke().retrieveSnappy(),zO=require("zlib"),Lc={snappy:1,zlib:2},tF=new Set(["ismaster","saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);function rF(e,t,r){switch(e.options.agreedCompressor){case"snappy":WO.compress(t,r);break;case"zlib":var n={};e.options.zlibCompressionLevel&&(n.level=e.options.zlibCompressionLevel),zO.deflate(t,n,r);break;default:throw new Error('Attempt to compress message using unknown compressor "'+e.options.agreedCompressor+'".')}}a(rF,"compress");function nF(e,t,r){if(e<0||e>Lc.length)throw new Error("Server sent message compressed using an unsupported compressor. (Received compressor ID "+e+")");switch(e){case Lc.snappy:WO.uncompress(t,r);break;case Lc.zlib:zO.inflate(t,r);break;default:r(null,t)}}a(nF,"decompress");$O.exports={compressorIDs:Lc,uncompressibleCommands:tF,compress:rF,decompress:nF}});var pt=y((ch,VO)=>{var jc=require("buffer"),Nr=jc.Buffer;function HO(e,t){for(var r in e)t[r]=e[r]}a(HO,"copyProps");Nr.from&&Nr.alloc&&Nr.allocUnsafe&&Nr.allocUnsafeSlow?VO.exports=jc:(HO(jc,ch),ch.Buffer=Zi);function Zi(e,t,r){return Nr(e,t,r)}a(Zi,"SafeBuffer");HO(Nr,Zi);Zi.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Nr(e,t,r)};Zi.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Nr(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Zi.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Nr(e)};Zi.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return jc.SlowBuffer(e)}});var Bt=y((Kre,YO)=>{"use strict";var iF=ke().retrieveBSON,sF=iF(),oF=sF.Long,Co=pt().Buffer,_o=0,Ht=ue().opcodes,aF=2,cF=4,uF=8,lF=16,pF=32,fF=64,dF=128,hF=1,mF=2,yF=4,gF=8,es=a(function(e,t,r,n){var i=this;if(t==null)throw new Error("ns must be specified for query");if(r==null)throw new Error("query must be specified for query");if(t.indexOf("\0")!==-1)throw new Error("namespace cannot contain a null character");this.bson=e,this.ns=t,this.query=r,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||null,this.requestId=es.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!0,this.batchSize=i.numberToReturn,this.tailable=!1,this.slaveOk=typeof n.slaveOk=="boolean"?n.slaveOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1},"Query");es.prototype.incRequestId=function(){this.requestId=_o++};es.nextRequestId=function(){return _o+1};es.prototype.toBin=function(){var e=this,t=[],r=null,n=0;this.tailable&&(n|=aF),this.slaveOk&&(n|=cF),this.oplogReplay&&(n|=uF),this.noCursorTimeout&&(n|=lF),this.awaitData&&(n|=pF),this.exhaust&&(n|=fF),this.partial&&(n|=dF),e.batchSize!==e.numberToReturn&&(e.numberToReturn=e.batchSize);var i=Co.alloc(4*4+4+Co.byteLength(e.ns)+1+4+4);t.push(i);var s=e.bson.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});t.push(s),e.returnFieldSelector&&Object.keys(e.returnFieldSelector).length>0&&(r=e.bson.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),t.push(r));var o=i.length+s.length+(r?r.length:0),c=4;return i[3]=o>>24&255,i[2]=o>>16&255,i[1]=o>>8&255,i[0]=o&255,i[c+3]=this.requestId>>24&255,i[c+2]=this.requestId>>16&255,i[c+1]=this.requestId>>8&255,i[c]=this.requestId&255,c=c+4,i[c+3]=0,i[c+2]=0,i[c+1]=0,i[c]=0,c=c+4,i[c+3]=Ht.OP_QUERY>>24&255,i[c+2]=Ht.OP_QUERY>>16&255,i[c+1]=Ht.OP_QUERY>>8&255,i[c]=Ht.OP_QUERY&255,c=c+4,i[c+3]=n>>24&255,i[c+2]=n>>16&255,i[c+1]=n>>8&255,i[c]=n&255,c=c+4,c=c+i.write(this.ns,c,"utf8")+1,i[c-1]=0,i[c+3]=this.numberToSkip>>24&255,i[c+2]=this.numberToSkip>>16&255,i[c+1]=this.numberToSkip>>8&255,i[c]=this.numberToSkip&255,c=c+4,i[c+3]=this.numberToReturn>>24&255,i[c+2]=this.numberToReturn>>16&255,i[c+1]=this.numberToReturn>>8&255,i[c]=this.numberToReturn&255,c=c+4,t};es.getRequestId=function(){return++_o};var KO=a(function(e,t,r,n){n=n||{},this.numberToReturn=n.numberToReturn||0,this.requestId=_o++,this.bson=e,this.ns=t,this.cursorId=r},"GetMore");KO.prototype.toBin=function(){var e=4+Co.byteLength(this.ns)+1+4+8+16,t=0,r=Co.alloc(e);return r[t+3]=e>>24&255,r[t+2]=e>>16&255,r[t+1]=e>>8&255,r[t]=e&255,t=t+4,r[t+3]=this.requestId>>24&255,r[t+2]=this.requestId>>16&255,r[t+1]=this.requestId>>8&255,r[t]=this.requestId&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,r[t+3]=Ht.OP_GETMORE>>24&255,r[t+2]=Ht.OP_GETMORE>>16&255,r[t+1]=Ht.OP_GETMORE>>8&255,r[t]=Ht.OP_GETMORE&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,t=t+r.write(this.ns,t,"utf8")+1,r[t-1]=0,r[t+3]=this.numberToReturn>>24&255,r[t+2]=this.numberToReturn>>16&255,r[t+1]=this.numberToReturn>>8&255,r[t]=this.numberToReturn&255,t=t+4,r[t+3]=this.cursorId.getLowBits()>>24&255,r[t+2]=this.cursorId.getLowBits()>>16&255,r[t+1]=this.cursorId.getLowBits()>>8&255,r[t]=this.cursorId.getLowBits()&255,t=t+4,r[t+3]=this.cursorId.getHighBits()>>24&255,r[t+2]=this.cursorId.getHighBits()>>16&255,r[t+1]=this.cursorId.getHighBits()>>8&255,r[t]=this.cursorId.getHighBits()&255,t=t+4,r};var GO=a(function(e,t,r){this.ns=t,this.requestId=_o++,this.cursorIds=r},"KillCursor");GO.prototype.toBin=function(){var e=24+this.cursorIds.length*8,t=0,r=Co.alloc(e);r[t+3]=e>>24&255,r[t+2]=e>>16&255,r[t+1]=e>>8&255,r[t]=e&255,t=t+4,r[t+3]=this.requestId>>24&255,r[t+2]=this.requestId>>16&255,r[t+1]=this.requestId>>8&255,r[t]=this.requestId&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,r[t+3]=Ht.OP_KILL_CURSORS>>24&255,r[t+2]=Ht.OP_KILL_CURSORS>>16&255,r[t+1]=Ht.OP_KILL_CURSORS>>8&255,r[t]=Ht.OP_KILL_CURSORS&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,r[t+3]=this.cursorIds.length>>24&255,r[t+2]=this.cursorIds.length>>16&255,r[t+1]=this.cursorIds.length>>8&255,r[t]=this.cursorIds.length&255,t=t+4;for(var n=0;n<this.cursorIds.length;n++)r[t+3]=this.cursorIds[n].getLowBits()>>24&255,r[t+2]=this.cursorIds[n].getLowBits()>>16&255,r[t+1]=this.cursorIds[n].getLowBits()>>8&255,r[t]=this.cursorIds[n].getLowBits()&255,t=t+4,r[t+3]=this.cursorIds[n].getHighBits()>>24&255,r[t+2]=this.cursorIds[n].getHighBits()>>16&255,r[t+1]=this.cursorIds[n].getHighBits()>>8&255,r[t]=this.cursorIds[n].getHighBits()&255,t=t+4;return r};var uh=a(function(e,t,r,n,i){i=i||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.parsed=!1,this.raw=t,this.data=n,this.bson=e,this.opts=i,this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.cursorId=new oF(n.readInt32LE(4),n.readInt32LE(8)),this.startingFrom=n.readInt32LE(12),this.numberReturned=n.readInt32LE(16),this.documents=new Array(this.numberReturned),this.cursorNotFound=(this.responseFlags&hF)!==0,this.queryFailure=(this.responseFlags&mF)!==0,this.shardConfigStale=(this.responseFlags&yF)!==0,this.awaitCapable=(this.responseFlags&gF)!==0,this.promoteLongs=typeof i.promoteLongs=="boolean"?i.promoteLongs:!0,this.promoteValues=typeof i.promoteValues=="boolean"?i.promoteValues:!0,this.promoteBuffers=typeof i.promoteBuffers=="boolean"?i.promoteBuffers:!1,this.bsonRegExp=typeof i.bsonRegExp=="boolean"?i.bsonRegExp:!1},"Response");uh.prototype.isParsed=function(){return this.parsed};uh.prototype.parse=function(e){if(!this.parsed){e=e||{};var t=e.raw||!1,r=e.documentsReturnedIn||null,n=typeof e.promoteLongs=="boolean"?e.promoteLongs:this.opts.promoteLongs,i=typeof e.promoteValues=="boolean"?e.promoteValues:this.opts.promoteValues,s=typeof e.promoteBuffers=="boolean"?e.promoteBuffers:this.opts.promoteBuffers,o=typeof e.bsonRegExp=="boolean"?e.bsonRegExp:this.opts.bsonRegExp,c,l;l={promoteLongs:n,promoteValues:i,promoteBuffers:s,bsonRegExp:o},this.index=20;for(var u=0;u<this.numberReturned;u++)c=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,t?this.documents[u]=this.data.slice(this.index,this.index+c):this.documents[u]=this.bson.deserialize(this.data.slice(this.index,this.index+c),l),this.index=this.index+c;if(this.documents.length===1&&r!=null&&t){let p={};p[r]=!0,l.fieldsAsRaw=p;let d=this.bson.deserialize(this.documents[0],l);this.documents=[d]}this.parsed=!0}};YO.exports={Query:es,GetMore:KO,Response:uh,KillCursor:GO}});var Xn=y((Yre,eT)=>{"use strict";var JO=pt().Buffer,vF=ue().opcodes,xF=ue().databaseNamespace,SF=$e(),bF=q().MongoError,lh=0,XO=1,QO=2,ZO=65536,kc=class kc{constructor(t,r,n,i){if(n==null)throw new Error("query must be specified for query");this.bson=t,this.ns=r,this.command=n,this.command.$db=xF(r),i.readPreference&&i.readPreference.mode!==SF.PRIMARY&&(this.command.$readPreference=i.readPreference.toJSON()),this.options=i||{},this.requestId=i.requestId?i.requestId:kc.getRequestId(),this.serializeFunctions=typeof i.serializeFunctions=="boolean"?i.serializeFunctions:!1,this.ignoreUndefined=typeof i.ignoreUndefined=="boolean"?i.ignoreUndefined:!1,this.checkKeys=typeof i.checkKeys=="boolean"?i.checkKeys:!1,this.maxBsonSize=i.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=i.moreToCome||!1,this.exhaustAllowed=typeof i.exhaustAllowed=="boolean"?i.exhaustAllowed:!1}toBin(){let t=[],r=0;this.checksumPresent&&(r|=XO),this.moreToCome&&(r|=QO),this.exhaustAllowed&&(r|=ZO);let n=JO.alloc(4*4+4);t.push(n);let i=n.length,s=this.command;return i+=this.makeDocumentSegment(t,s),n.writeInt32LE(i,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(vF.OP_MSG,12),n.writeUInt32LE(r,16),t}makeDocumentSegment(t,r){let n=JO.alloc(1);n[0]=0;let i=this.serializeBson(r);return t.push(n),t.push(i),n.length+i.length}serializeBson(t){return this.bson.serialize(t,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}};a(kc,"Msg");var Uc=kc;Uc.getRequestId=function(){return lh=lh+1&2147483647,lh};var fh=class fh{constructor(t,r,n,i,s){s=s||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.parsed=!1,this.raw=r,this.data=i,this.bson=t,this.opts=s,this.length=n.length,this.requestId=n.requestId,this.responseTo=n.responseTo,this.opCode=n.opCode,this.fromCompressed=n.fromCompressed,this.responseFlags=i.readInt32LE(0),this.checksumPresent=(this.responseFlags&XO)!==0,this.moreToCome=(this.responseFlags&QO)!==0,this.exhaustAllowed=(this.responseFlags&ZO)!==0,this.promoteLongs=typeof s.promoteLongs=="boolean"?s.promoteLongs:!0,this.promoteValues=typeof s.promoteValues=="boolean"?s.promoteValues:!0,this.promoteBuffers=typeof s.promoteBuffers=="boolean"?s.promoteBuffers:!1,this.bsonRegExp=typeof s.bsonRegExp=="boolean"?s.bsonRegExp:!1,this.documents=[]}isParsed(){return this.parsed}parse(t){if(this.parsed)return;t=t||{},this.index=4;let r=t.raw||!1,n=t.documentsReturnedIn||null,i=typeof t.promoteLongs=="boolean"?t.promoteLongs:this.opts.promoteLongs,s=typeof t.promoteValues=="boolean"?t.promoteValues:this.opts.promoteValues,o=typeof t.promoteBuffers=="boolean"?t.promoteBuffers:this.opts.promoteBuffers,c=typeof t.bsonRegExp=="boolean"?t.bsonRegExp:this.opts.bsonRegExp,l={promoteLongs:i,promoteValues:s,promoteBuffers:o,bsonRegExp:c};for(;this.index<this.data.length;){let u=this.data.readUInt8(this.index++);if(u===1)throw new bF("OP_MSG Payload Type 1 detected unsupported protocol");if(u===0){let p=this.data.readUInt32LE(this.index),d=this.data.slice(this.index,this.index+p);this.documents.push(r?d:this.bson.deserialize(d,l)),this.index+=p}}if(this.documents.length===1&&n!=null&&r){let u={};u[n]=!0,l.fieldsAsRaw=u;let p=this.bson.deserialize(this.documents[0],l);this.documents=[p]}this.parsed=!0}};a(fh,"BinMsg");var ph=fh;eT.exports={Msg:Uc,BinMsg:ph}});var Vt=y((Xre,tT)=>{"use strict";var Ao=require("util").format,wF=q().MongoError,No={},Ze={},Dt=null,fn=process.pid,Rr=null,et=a(function(e,t){if(!(this instanceof et))return new et(e,t);t=t||{},this.className=e,t.logger?Rr=t.logger:Rr==null&&(Rr=console.log),t.loggerLevel&&(Dt=t.loggerLevel||"error"),Ze[this.className]==null&&(No[this.className]=!0)},"Logger");et.prototype.debug=function(e,t){if(this.isDebug()&&(Object.keys(Ze).length>0&&Ze[this.className]||Object.keys(Ze).length===0&&No[this.className])){var r=new Date().getTime(),n=Ao("[%s-%s:%s] %s %s","DEBUG",this.className,fn,r,e),i={type:"debug",message:e,className:this.className,pid:fn,date:r};t&&(i.meta=t),Rr(n,i)}};et.prototype.warn=function(e,t){if(this.isWarn()&&(Object.keys(Ze).length>0&&Ze[this.className]||Object.keys(Ze).length===0&&No[this.className])){var r=new Date().getTime(),n=Ao("[%s-%s:%s] %s %s","WARN",this.className,fn,r,e),i={type:"warn",message:e,className:this.className,pid:fn,date:r};t&&(i.meta=t),Rr(n,i)}},et.prototype.info=function(e,t){if(this.isInfo()&&(Object.keys(Ze).length>0&&Ze[this.className]||Object.keys(Ze).length===0&&No[this.className])){var r=new Date().getTime(),n=Ao("[%s-%s:%s] %s %s","INFO",this.className,fn,r,e),i={type:"info",message:e,className:this.className,pid:fn,date:r};t&&(i.meta=t),Rr(n,i)}},et.prototype.error=function(e,t){if(this.isError()&&(Object.keys(Ze).length>0&&Ze[this.className]||Object.keys(Ze).length===0&&No[this.className])){var r=new Date().getTime(),n=Ao("[%s-%s:%s] %s %s","ERROR",this.className,fn,r,e),i={type:"error",message:e,className:this.className,pid:fn,date:r};t&&(i.meta=t),Rr(n,i)}},et.prototype.isInfo=function(){return Dt==="info"||Dt==="debug"},et.prototype.isError=function(){return Dt==="error"||Dt==="info"||Dt==="debug"},et.prototype.isWarn=function(){return Dt==="error"||Dt==="warn"||Dt==="info"||Dt==="debug"},et.prototype.isDebug=function(){return Dt==="debug"};et.reset=function(){Dt="error",Ze={}};et.currentLogger=function(){return Rr};et.setCurrentLogger=function(e){if(typeof e!="function")throw new wF("current logger must be a function");Rr=e};et.filter=function(e,t){e==="class"&&Array.isArray(t)&&(Ze={},t.forEach(function(r){Ze[r]=!0}))};et.setLevel=function(e){if(e!=="info"&&e!=="error"&&e!=="debug"&&e!=="warn")throw new Error(Ao("%s is an illegal logging level",e));Dt=e};tT.exports=et});var Fc=y((Zre,rT)=>{"use strict";var dh=a(function(e,t,r){this.result=e,this.connection=t,this.message=r},"CommandResult");dh.prototype.toJSON=function(){let e=Object.assign({},this,this.result);return delete e.message,e};dh.prototype.toString=function(){return JSON.stringify(this.toJSON())};rT.exports=dh});var xh=y((tne,cT)=>{"use strict";var EF=require("events").EventEmitter,OF=require("crypto"),TF=ke().debugOptions,CF=ue().parseHeader,_F=Ar().decompress,nT=Bt().Response,iT=Xn().BinMsg,aT=q().MongoNetworkError,AF=q().MongoNetworkTimeoutError,yh=q().MongoError,NF=Vt(),RF=ue().opcodes.OP_COMPRESSED,sT=ue().opcodes.OP_MSG,oT=ue().MESSAGE_HEADER_SIZE,fr=pt().Buffer,IF=Bt().Query,qF=Fc(),MF=0,PF=1024*1024*16*4,BF=["host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","socketTimeout","ssl","ca","crl","cert","rejectUnauthorized","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","checkServerIdentity"],ts,Qn=!1,Wc={},vh=class vh extends EF{constructor(t,r){if(super(),r=r||{},!r.bson)throw new TypeError("must pass in valid bson parser");this.id=MF++,this.options=r,this.logger=NF("Connection",r),this.bson=r.bson,this.tag=r.tag,this.maxBsonMessageSize=r.maxBsonMessageSize||PF,this.helloOk=void 0,this.port=r.port||27017,this.host=r.host||"localhost",this.socketTimeout=typeof r.socketTimeout=="number"?r.socketTimeout:0,this.keepAlive=typeof r.keepAlive=="boolean"?r.keepAlive:!0,this.keepAliveInitialDelay=typeof r.keepAliveInitialDelay=="number"?r.keepAliveInitialDelay:12e4,this.connectionTimeout=typeof r.connectionTimeout=="number"?r.connectionTimeout:3e4,this.keepAliveInitialDelay>this.socketTimeout&&(this.keepAliveInitialDelay=Math.round(this.socketTimeout/2)),this.logger.isDebug()&&this.logger.debug(`creating connection ${this.id} with options [${JSON.stringify(TF(BF,r))}]`),this.responseOptions={promoteLongs:typeof r.promoteLongs=="boolean"?r.promoteLongs:!0,promoteValues:typeof r.promoteValues=="boolean"?r.promoteValues:!0,promoteBuffers:typeof r.promoteBuffers=="boolean"?r.promoteBuffers:!1,bsonRegExp:typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1},this.flushing=!1,this.queue=[],this.writeStream=null,this.destroyed=!1,this.timedOut=!1;let n=OF.createHash("sha1");n.update(this.address),this.hashedName=n.digest("hex"),this.workItems=[],this.socket=t,this.socket.once("error",LF(this)),this.socket.once("timeout",jF(this)),this.socket.once("close",UF(this)),this.socket.on("data",kF(this)),Qn&&DF(this.id,this)}setSocketTimeout(t){this.socket&&this.socket.setTimeout(t)}resetSocketTimeout(){this.socket&&this.socket.setTimeout(this.socketTimeout)}static enableConnectionAccounting(t){t&&(ts=t),Qn=!0,Wc={}}static disableConnectionAccounting(){Qn=!1,ts=void 0}static connections(){return Wc}get address(){return`${this.host}:${this.port}`}unref(){if(this.socket==null){this.once("connect",()=>this.socket.unref());return}this.socket.unref()}flush(t){for(;this.workItems.length>0;){let r=this.workItems.shift();r.cb&&r.cb(t)}}destroy(t,r){if(typeof t=="function"&&(r=t,t={}),t=Object.assign({force:!1},t),Qn&&zc(this.id),this.socket==null){this.destroyed=!0;return}if(t.force||this.timedOut){this.socket.destroy(),this.destroyed=!0,typeof r=="function"&&r(null,null);return}this.socket.end(n=>{this.destroyed=!0,typeof r=="function"&&r(n,null)})}write(t){if(this.logger.isDebug())if(!Array.isArray(t))this.logger.debug(`writing buffer [ ${t.length} ] to ${this.address}`);else for(let r=0;r<t.length;r++)this.logger.debug(`writing buffer [ ${t[r].length} ] to ${this.address}`);if(this.socket.destroyed===!1){if(!Array.isArray(t))return this.socket.write(t,"binary"),!0;for(let r=0;r<t.length;r++)this.socket.write(t[r],"binary");return!0}return!1}toString(){return""+this.id}toJSON(){return{id:this.id,host:this.host,port:this.port}}isConnected(){return this.destroyed?!1:!this.socket.destroyed&&this.socket.writable}command(t,r,n,i){typeof n=="function"&&(i=n,n={});let s=this,o=typeof n.socketTimeout=="number"?n.socketTimeout:0,c=s.options.bson,l=new IF(c,t,r,{numberToSkip:0,numberToReturn:1}),u=a(()=>{},"noop");function p(h,m){i(h,m),i=u}a(p,"_callback");function d(h){s.resetSocketTimeout(),hh.forEach(m=>s.removeListener(m,d)),s.removeListener("message",f),h==null&&(h=new yh(`runCommand failed for connection to '${s.address}'`)),s.on("error",u),p(h)}a(d,"errorHandler");function f(h){if(h.responseTo!==l.requestId)return;s.resetSocketTimeout(),hh.forEach(v=>s.removeListener(v,d)),s.removeListener("message",f),h.parse({promoteValues:!0});let m=h.documents[0];if(m.ok===0||m.$err||m.errmsg||m.code){p(new yh(m));return}p(void 0,new qF(m,this,h))}a(f,"messageHandler"),s.setSocketTimeout(o),hh.forEach(h=>s.once(h,d)),s.on("message",f),s.write(l.toBin())}};a(vh,"Connection");var gh=vh,hh=["error","close","timeout","parseError"];function zc(e){delete Wc[e],ts&&ts.deleteConnection(e)}a(zc,"deleteConnection");function DF(e,t){Wc[e]=t,ts&&ts.addConnection(e,t)}a(DF,"addConnection");function LF(e){return function(t){Qn&&zc(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} for [${e.address}] errored out with [${JSON.stringify(t)}]`),e.emit("error",new aT(t),e)}}a(LF,"errorHandler");function jF(e){return function(){Qn&&zc(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} for [${e.address}] timed out`),e.timedOut=!0,e.emit("timeout",new AF(`connection ${e.id} to ${e.address} timed out`,{beforeHandshake:e.ismaster==null}),e)}}a(jF,"timeoutHandler");function UF(e){return function(t){Qn&&zc(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} with for [${e.address}] closed`),t||e.emit("close",new aT(`connection ${e.id} to ${e.address} closed`),e)}}a(UF,"closeHandler");function mh(e,t){let r=CF(t);if(r.opCode!==RF){let s=r.opCode===sT?iT:nT;e.emit("message",new s(e.bson,t,r,t.slice(oT),e.responseOptions),e);return}r.fromCompressed=!0;let n=oT;r.opCode=t.readInt32LE(n),n+=4,r.length=t.readInt32LE(n),n+=4;let i=t[n];n++,_F(i,t.slice(n),(s,o)=>{if(s){e.emit("error",s);return}if(o.length!==r.length){e.emit("error",new yh("Decompressing a compressed message from the server failed. The message is corrupt."));return}let c=r.opCode===sT?iT:nT;e.emit("message",new c(e.bson,t,r,o,e.responseOptions),e)})}a(mh,"processMessage");function kF(e){return function(t){for(;t.length>0;)if(e.bytesRead>0&&e.sizeOfMessage>0){let r=e.sizeOfMessage-e.bytesRead;if(r>t.length)t.copy(e.buffer,e.bytesRead),e.bytesRead=e.bytesRead+t.length,t=fr.alloc(0);else{t.copy(e.buffer,e.bytesRead,0,r),t=t.slice(r);let n=e.buffer;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,mh(e,n)}}else if(e.stubBuffer!=null&&e.stubBuffer.length>0)if(e.stubBuffer.length+t.length>4){let r=fr.alloc(e.stubBuffer.length+t.length);e.stubBuffer.copy(r,0),t.copy(r,e.stubBuffer.length),t=r,e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null}else{let r=fr.alloc(e.stubBuffer.length+t.length);e.stubBuffer.copy(r,0),t.copy(r,e.stubBuffer.length),t=fr.alloc(0)}else if(t.length>4){let r=t[0]|t[1]<<8|t[2]<<16|t[3]<<24;if(r<0||r>e.maxBsonMessageSize){let n={err:"socketHandler",trace:"",bin:e.buffer,parseState:{sizeOfMessage:r,bytesRead:e.bytesRead,stubBuffer:e.stubBuffer}};e.emit("parseError",n,e);return}if(r>4&&r<e.maxBsonMessageSize&&r>t.length)e.buffer=fr.alloc(r),t.copy(e.buffer,0),e.bytesRead=t.length,e.sizeOfMessage=r,e.stubBuffer=null,t=fr.alloc(0);else if(r>4&&r<e.maxBsonMessageSize&&r===t.length){let n=t;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=fr.alloc(0),mh(e,n)}else if(r<=4||r>e.maxBsonMessageSize){let n={err:"socketHandler",trace:null,bin:t,parseState:{sizeOfMessage:r,bytesRead:0,buffer:null,stubBuffer:null}};e.emit("parseError",n,e),e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=fr.alloc(0)}else{let n=t.slice(0,r);e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=t.slice(r),mh(e,n)}}else e.stubBuffer=fr.alloc(t.length),t.copy(e.stubBuffer,0),t=fr.alloc(0)}}a(kF,"dataHandler");cT.exports=gh});var Zn=y((nne,pT)=>{"use strict";var FF=Xn().Msg,WF=Bt().KillCursor,zF=Bt().GetMore,rs=b().deepCopy,$F=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]),HF=new Set(["hello","ismaster","isMaster"]),uT={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},lT={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldsSelector:"projection"},VF=["tailable","oplogReplay","noCursorTimeout","awaitData","partial","exhaust"],Sh=a(e=>e.ns.split(".")[1],"collectionName"),KF=a((e,t)=>$F.has(e)||HF.has(e)&&!!t.speculativeAuthenticate,"shouldRedactCommand"),GF=a(e=>{let t;if(e instanceof zF)t={getMore:rs(e.cursorId),collection:Sh(e),batchSize:e.numberToReturn};else if(e instanceof WF)t={killCursors:Sh(e),cursors:rs(e.cursorIds)};else if(e instanceof FF)t=rs(e.command);else if(e.query&&e.query.$query){let n;e.ns==="admin.$cmd"?n=Object.assign({},e.query.$query):(n={find:Sh(e)},Object.keys(uT).forEach(i=>{typeof e.query[i]<"u"&&(n[uT[i]]=rs(e.query[i]))})),Object.keys(lT).forEach(i=>{typeof e[i]<"u"&&(n[lT[i]]=rs(e[i]))}),VF.forEach(i=>{e[i]&&(n[i]=e[i])}),typeof e.pre32Limit<"u"&&(n.limit=e.pre32Limit),e.query.$explain?t={explain:n}:t=n}else t=rs(e.query||e);let r=Object.keys(t)[0];return{cmd:t,name:r,shouldRedact:KF(r,t)}},"extractCommand");pT.exports={extractCommand:GF}});var Nh=y((sne,hT)=>{"use strict";var YF=Bt().KillCursor,JF=Bt().GetMore,dT=b().calculateDurationInMs,Oh=Zn().extractCommand,fT=a(e=>e.ns,"namespace"),XF=a(e=>e.ns.split(".")[0],"databaseName"),QF=a(e=>e.options?`${e.options.host}:${e.options.port}`:e.address,"generateConnectionId"),ZF=a(e=>e.s&&e.queue,"isLegacyPool"),eW=a((e,t)=>e instanceof JF?{ok:1,cursor:{id:t.message.cursorId,ns:fT(e),nextBatch:t.message.documents}}:e instanceof YF?{ok:1,cursorsUnknown:e.cursorIds}:e.query&&typeof e.query.$query<"u"?{ok:1,cursor:{id:t.message.cursorId,ns:fT(e),firstBatch:t.message.documents}}:t&&t.result?t.result:t,"extractReply"),Th=a(e=>{if(ZF(e))return{connectionId:QF(e)};let t=e;return{address:t.address,connectionId:t.id}},"extractConnectionDetails"),Ch=class Ch{constructor(t,r){let n=Oh(r),i=n.name,s=Th(t);Object.assign(this,s,{requestId:r.requestId,databaseName:XF(r),commandName:i,command:n.shouldRedact?{}:n.cmd})}};a(Ch,"CommandStartedEvent");var bh=Ch,_h=class _h{constructor(t,r,n,i){let s=Oh(r),o=s.name,c=Th(t);Object.assign(this,c,{requestId:r.requestId,commandName:o,duration:dT(i),reply:s.shouldRedact?{}:eW(r,n)})}};a(_h,"CommandSucceededEvent");var wh=_h,Ah=class Ah{constructor(t,r,n,i){let s=Oh(r),o=s.name,c=Th(t);Object.assign(this,c,{requestId:r.requestId,commandName:o,duration:dT(i),failure:s.shouldRedact?{}:n})}};a(Ah,"CommandFailedEvent");var Eh=Ah;hT.exports={CommandStartedEvent:bh,CommandSucceededEvent:wh,CommandFailedEvent:Eh}});var dn=y((ane,mT)=>{"use strict";var qh=class qh{constructor(t,r,n){this.connection=t,this.credentials=r,this.options=n}};a(qh,"AuthContext");var Rh=qh,Mh=class Mh{constructor(t){this.bson=t}prepare(t,r,n){n(void 0,t)}auth(t,r){r(new TypeError("`auth` method must be overridden by subclass"))}};a(Mh,"AuthProvider");var Ih=Mh;mT.exports={AuthContext:Rh,AuthProvider:Ih}});var Dh=y((une,gT)=>{"use strict";var yT=require("crypto"),tW=dn().AuthProvider,Bh=class Bh extends tW{auth(t,r){let n=t.connection,i=t.credentials,s=i.username,o=i.password,c=i.source;n.command(`${c}.$cmd`,{getnonce:1},(l,u)=>{let p=null,d=null;if(l==null){p=u.result.nonce;let m=yT.createHash("md5");m.update(s+":mongo:"+o,"utf8");let v=m.digest("hex");m=yT.createHash("md5"),m.update(p+s+v,"utf8"),d=m.digest("hex")}let f={authenticate:1,user:s,nonce:p,key:d};n.command(`${c}.$cmd`,f,r)})}};a(Bh,"MongoCR");var Ph=Bh;gT.exports=Ph});var Uh=y((pne,xT)=>{"use strict";var rW=dn().AuthProvider,jh=class jh extends rW{prepare(t,r,n){let i=r.credentials;Object.assign(t,{speculativeAuthenticate:vT(i)}),n(void 0,t)}auth(t,r){let n=t.connection,i=t.credentials;if(t.response.speculativeAuthenticate)return r();n.command("$external.$cmd",vT(i),r)}};a(jh,"X509");var Lh=jh;function vT(e){let t={authenticate:1,mechanism:"MONGODB-X509"};return e.username&&Object.assign(t,{user:e.username}),t}a(vT,"x509AuthenticateCommand");xT.exports=Lh});var Wh=y((dne,ST)=>{"use strict";var nW=ke().retrieveBSON,iW=dn().AuthProvider,sW=nW(),oW=sW.Binary,Fh=class Fh extends iW{auth(t,r){let n=t.connection,i=t.credentials,s=i.username,o=i.password,l={saslStart:1,mechanism:"PLAIN",payload:new oW(`\0${s}\0${o}`),autoAuthorize:1};n.command("$external.$cmd",l,r)}};a(Fh,"Plain");var kh=Fh;ST.exports=kh});var Vh=y((mne,wT)=>{"use strict";var aW=require("dns"),cW=dn().AuthProvider,uW=U().retrieveKerberos,$c=q().MongoError,zh,Hh=class Hh extends cW{auth(t,r){let n=t.connection,i=t.credentials;if(i==null)return r(new $c("credentials required"));let s=i.username;function o(c,l){return n.command("$external.$cmd",c,l)}a(o,"externalCommand"),lW(t,(c,l)=>{if(c)return r(c);if(l==null)return r(new $c("gssapi client missing"));l.step("",(u,p)=>{if(u)return r(u);o(pW(p),(d,f)=>{if(d)return r(d);let h=f.result;bT(l,10,h.payload,(m,v)=>{if(m)return r(m);o(fW(v,h.conversationId),(x,w)=>{if(x)return r(x);let C=w.result;dW(l,s,C.payload,(g,T)=>{if(g)return r(g);o({saslContinue:1,conversationId:C.conversationId,payload:T},(N,_)=>{if(N)return r(N);r(void 0,_)})})})})})})})}};a(Hh,"GSSAPI");var $h=Hh;wT.exports=$h;function lW(e,t){let r=e.options.host,n=e.options.port,i=e.credentials;if(!r||!n||!i)return t(new $c(`Connection must specify: ${r?"host":""}, ${n?"port":""}, ${i?"host":"credentials"}.`));if(zh==null)try{zh=uW()}catch(u){return t(u)}let s=i.username,o=i.password,c=i.mechanismProperties,l=c.gssapiservicename||c.gssapiServiceName||"mongodb";hW(r,c,(u,p)=>{if(u)return t(u);let d={};o!=null&&Object.assign(d,{user:s,password:o}),zh.initializeClient(`${l}${process.platform==="win32"?"/":"@"}${p}`,d,(f,h)=>{if(f)return t(new $c(f));t(null,h)})})}a(lW,"makeKerberosClient");function pW(e){return{saslStart:1,mechanism:"GSSAPI",payload:e,autoAuthorize:1}}a(pW,"saslStart");function fW(e,t){return{saslContinue:1,conversationId:t,payload:e}}a(fW,"saslContinue");function bT(e,t,r,n){e.step(r,(i,s)=>{if(i&&t===0)return n(i);if(i)return bT(e,t-1,r,n);n(void 0,s||"")})}a(bT,"negotiate");function dW(e,t,r,n){e.unwrap(r,(i,s)=>{if(i)return n(i);e.wrap(s||"",{user:t},(o,c)=>{if(o)return n(o);n(void 0,c)})})}a(dW,"finalize");function hW(e,t,r){if(!(typeof t.gssapiCanonicalizeHostName=="boolean"?t.gssapiCanonicalizeHostName:!1))return r(void 0,e);aW.resolveCname(e,(i,s)=>{if(i)return r(i);if(Array.isArray(s)&&s.length>0)return r(void 0,s[0]);r(void 0,e)})}a(hW,"performGssapiCanonicalizeHostName")});var TT=y((gne,OT)=>{OT.exports=Ir;function Ir(e,t){if(!(this instanceof Ir))return new Ir(e,t);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=e||1024,this.deduplicate=t?t.deduplicate:null,this.zeros=this.deduplicate?Hc(this.deduplicate.length):null}a(Ir,"Pager");Ir.prototype.updated=function(e){for(;this.deduplicate&&e.buffer[e.deduplicate]===this.deduplicate[e.deduplicate];)if(e.deduplicate++,e.deduplicate===this.deduplicate.length){e.deduplicate=0,e.buffer.equals&&e.buffer.equals(this.deduplicate)&&(e.buffer=this.deduplicate);break}e.updated||!this.updates||(e.updated=!0,this.updates.push(e))};Ir.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var e=this.updates.pop();return e.updated=!1,e};Ir.prototype._array=function(e,t){if(e>=this.maxPages){if(t)return;mW(this,e)}vW(e,this.path);for(var r=this.pages,n=this.level;n>0;n--){var i=this.path[n],s=r[i];if(!s){if(t)return;s=r[i]=new Array(32768)}r=s}return r};Ir.prototype.get=function(e,t){var r=this._array(e,t),n=this.path[0],i=r&&r[n];return!i&&!t&&(i=r[n]=new ET(e,Hc(this.pageSize)),e>=this.length&&(this.length=e+1)),i&&i.buffer===this.deduplicate&&this.deduplicate&&!t&&(i.buffer=gW(i.buffer),i.deduplicate=0),i};Ir.prototype.set=function(e,t){var r=this._array(e,!1),n=this.path[0];if(e>=this.length&&(this.length=e+1),!t||this.zeros&&t.equals&&t.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&t.equals&&t.equals(this.deduplicate)&&(t=this.deduplicate);var i=r[n],s=yW(t,this.pageSize);i?i.buffer=s:r[n]=new ET(e,s)};Ir.prototype.toBuffer=function(){for(var e=new Array(this.length),t=Hc(this.pageSize),r=0;r<e.length;)for(var n=this._array(r,!0),i=0;i<32768&&r<e.length;i++)e[r++]=n&&n[i]?n[i].buffer:t;return Buffer.concat(e)};function mW(e,t){for(;e.maxPages<t;){var r=e.pages;e.pages=new Array(32768),e.pages[0]=r,e.level++,e.maxPages*=32768}}a(mW,"grow");function yW(e,t){if(e.length===t)return e;if(e.length>t)return e.slice(0,t);var r=Hc(t);return e.copy(r),r}a(yW,"truncate");function Hc(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}a(Hc,"alloc");function gW(e){var t=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length);return e.copy(t),t}a(gW,"copy");function ET(e,t){this.offset=e*t.length,this.buffer=t,this.updated=!1,this.deduplicate=0}a(ET,"Page");function vW(e,t){e=(e-(t[0]=e&32767))/32768,e=(e-(t[1]=e&32767))/32768,t[3]=(e-(t[2]=e&32767))/32768&32767}a(vW,"factor")});var _T=y((xne,CT)=>{var xW=TT();CT.exports=hn;function hn(e){if(!(this instanceof hn))return new hn(e);if(e||(e={}),Buffer.isBuffer(e)&&(e={buffer:e}),this.pageOffset=e.pageOffset||0,this.pageSize=e.pageSize||1024,this.pages=e.pages||xW(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!bW(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!e.trackUpdates,this._pageMask=this.pageSize-1,e.buffer){for(var t=0;t<e.buffer.length;t+=this.pageSize)this.pages.set(t/this.pageSize,e.buffer.slice(t,t+this.pageSize));this.byteLength=e.buffer.length,this.length=8*this.byteLength}}a(hn,"Bitfield");hn.prototype.get=function(e){var t=e&7,r=(e-t)/8;return!!(this.getByte(r)&128>>t)};hn.prototype.getByte=function(e){var t=e&this._pageMask,r=(e-t)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[t+this.pageOffset]:0};hn.prototype.set=function(e,t){var r=e&7,n=(e-r)/8,i=this.getByte(n);return this.setByte(n,t?i|128>>r:i&(255^128>>r))};hn.prototype.toBuffer=function(){for(var e=SW(this.pages.length*this.pageSize),t=0;t<this.pages.length;t++){var r=this.pages.get(t,!0),n=t*this.pageSize;r&&r.buffer.copy(e,n,this.pageOffset,this.pageOffset+this.pageSize)}return e};hn.prototype.setByte=function(e,t){var r=e&this._pageMask,n=(e-r)/this.pageSize,i=this.pages.get(n,!1);return r+=this.pageOffset,i.buffer[r]===t?!1:(i.buffer[r]=t,e>=this.byteLength&&(this.byteLength=e+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(i),!0)};function SW(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}a(SW,"alloc");function bW(e){return!(e&e-1)}a(bW,"powerOfTwo")});var RT=y((bne,NT)=>{"use strict";var wW=require("fs"),EW=require("path"),OW=_T(),AT=wW.readFileSync(EW.resolve(__dirname,"../code-points.mem")),Ro=0;function ns(){let e=AT.readUInt32BE(Ro);Ro+=4;let t=AT.slice(Ro,Ro+e);return Ro+=e,OW({buffer:t})}a(ns,"read");var TW=ns(),CW=ns(),_W=ns(),AW=ns(),NW=ns(),RW=ns();NT.exports={unassigned_code_points:TW,commonly_mapped_to_nothing:CW,non_ASCII_space_characters:_W,prohibited_characters:AW,bidirectional_r_al:NW,bidirectional_l:RW}});var PT=y((Ene,MT)=>{"use strict";var{unassigned_code_points:IW,commonly_mapped_to_nothing:qW,non_ASCII_space_characters:MW,prohibited_characters:PW,bidirectional_r_al:Kh,bidirectional_l:BW}=RT();MT.exports=kW;var DW=MW,LW=qW,IT=a(e=>e.codePointAt(0),"getCodePoint"),jW=a(e=>e[0],"first"),UW=a(e=>e[e.length-1],"last");function qT(e){let t=[],r=e.length;for(let n=0;n<r;n+=1){let i=e.charCodeAt(n);if(i>=55296&&i<=56319&&r>n+1){let s=e.charCodeAt(n+1);if(s>=56320&&s<=57343){t.push((i-55296)*1024+s-56320+65536),n+=1;continue}}t.push(i)}return t}a(qT,"toCodePoints");function kW(e,t={}){if(typeof e!="string")throw new TypeError("Expected string.");if(e.length===0)return"";let r=qT(e).map(p=>DW.get(p)?32:p).filter(p=>!LW.get(p)),n=String.fromCodePoint.apply(null,r).normalize("NFKC"),i=qT(n);if(i.some(p=>PW.get(p)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(t.allowUnassigned!==!0&&i.some(d=>IW.get(d)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let o=i.some(p=>Kh.get(p)),c=i.some(p=>BW.get(p));if(o&&c)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let l=Kh.get(IT(jW(n))),u=Kh.get(IT(UW(n)));if(o&&!(l&&u))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return n}a(kW,"saslprep")});var Io=y((Tne,FT)=>{"use strict";var ti=require("crypto"),Ve=pt().Buffer,FW=ke().retrieveBSON,ei=q().MongoError,WW=dn().AuthProvider,zW=b().emitWarning,$W=FW(),Gh=$W.Binary,Gc;try{Gc=PT()}catch{}var Qh=class Qh extends WW{constructor(t,r){super(t),this.cryptoMethod=r||"sha1"}prepare(t,r,n){let i=this.cryptoMethod;i==="sha256"&&typeof Gc!="function"&&zW("Warning: no saslprep library specified. Passwords will not be sanitized"),ti.randomBytes(24,(s,o)=>{if(s)return n(s);Object.assign(r,{nonce:o});let c=r.credentials,l=Object.assign({},t,{speculativeAuthenticate:Object.assign(jT(i,c,o),{db:c.source})});n(void 0,l)})}auth(t,r){let n=t.response;if(n&&n.speculativeAuthenticate){UT(this.cryptoMethod,n.speculativeAuthenticate,t,r);return}HW(this.cryptoMethod,t,r)}};a(Qh,"ScramSHA");var Yc=Qh;function DT(e){return e.replace("=","=3D").replace(",","=2C")}a(DT,"cleanUsername");function LT(e,t){return Ve.concat([Ve.from("n=","utf8"),Ve.from(e,"utf8"),Ve.from(",r=","utf8"),Ve.from(t.toString("base64"),"utf8")])}a(LT,"clientFirstMessageBare");function jT(e,t,r){let n=DT(t.username);return{saslStart:1,mechanism:e==="sha1"?"SCRAM-SHA-1":"SCRAM-SHA-256",payload:new Gh(Ve.concat([Ve.from("n,,","utf8"),LT(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}a(jT,"makeFirstMessage");function HW(e,t,r){let n=t.connection,i=t.credentials,s=t.nonce,o=i.source,c=jT(e,i,s);n.command(`${o}.$cmd`,c,(l,u)=>{let p=kT(l,u);if(p)return r(p);UT(e,u.result,t,r)})}a(HW,"executeScram");function UT(e,t,r,n){let i=r.connection,s=r.credentials,o=r.nonce,c=s.source,l=DT(s.username),u=s.password,p;if(e==="sha256")p=typeof Gc=="function"?Gc(u):u;else try{p=VW(l,u)}catch(z){return n(z)}let d=Ve.isBuffer(t.payload)?new Gh(t.payload):t.payload,f=BT(d.value()),h=parseInt(f.i,10);if(h&&h<4096){n(new ei(`Server returned an invalid iteration count ${h}`),!1);return}let m=f.s,v=f.r;if(v.startsWith("nonce")){n(new ei(`Server returned an invalid nonce: ${v}`),!1);return}let x=`c=biws,r=${v}`,w=XW(p,Ve.from(m,"base64"),h,e),C=Vc(e,w,"Client Key"),g=Vc(e,w,"Server Key"),T=GW(e,C),N=[LT(l,o),d.value().toString("base64"),x].join(","),_=Vc(e,T,N),D=`p=${KW(C,_)}`,k=[x,D].join(","),A=Vc(e,g,N),F={saslContinue:1,conversationId:t.conversationId,payload:new Gh(Ve.from(k))};i.command(`${c}.$cmd`,F,(z,H)=>{let te=kT(z,H);if(te)return n(te);let L=H.result,Y=BT(L.payload.value());if(!QW(Ve.from(Y.v,"base64"),A)){n(new ei("Server returned an invalid signature"));return}if(!L||L.done!==!1)return n(te,L);let St={saslContinue:1,conversationId:L.conversationId,payload:Ve.alloc(0)};i.command(`${c}.$cmd`,St,n)})}a(UT,"continueScramConversation");function BT(e){let t={},r=e.split(",");for(let n=0;n<r.length;n++){let i=r[n].split("=");t[i[0]]=i[1]}return t}a(BT,"parsePayload");function VW(e,t){if(typeof e!="string")throw new ei("username must be a string");if(typeof t!="string")throw new ei("password must be a string");if(t.length===0)throw new ei("password cannot be empty");let r=ti.createHash("md5");return r.update(`${e}:mongo:${t}`,"utf8"),r.digest("hex")}a(VW,"passwordDigest");function KW(e,t){Ve.isBuffer(e)||(e=Ve.from(e)),Ve.isBuffer(t)||(t=Ve.from(t));let r=Math.max(e.length,t.length),n=[];for(let i=0;i<r;i+=1)n.push(e[i]^t[i]);return Ve.from(n).toString("base64")}a(KW,"xor");function GW(e,t){return ti.createHash(e).update(t).digest()}a(GW,"H");function Vc(e,t,r){return ti.createHmac(e,t).update(r).digest()}a(Vc,"HMAC");var Kc={},Yh=0;function YW(){Kc={},Yh=0}a(YW,"_hiCachePurge");var JW={sha256:32,sha1:20};function XW(e,t,r,n){let i=[e,t.toString("base64"),r].join("_");if(Kc[i]!==void 0)return Kc[i];let s=ti.pbkdf2Sync(e,t,r,JW[n],n);return Yh>=200&&YW(),Kc[i]=s,Yh+=1,s}a(XW,"HI");function QW(e,t){if(e.length!==t.length)return!1;if(typeof ti.timingSafeEqual=="function")return ti.timingSafeEqual(e,t);let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}a(QW,"compareDigest");function kT(e,t){if(e)return e;let r=t.result;if(r.$err||r.errmsg)return new ei(r)}a(kT,"resolveError");var Zh=class Zh extends Yc{constructor(t){super(t,"sha1")}};a(Zh,"ScramSHA1");var Jh=Zh,em=class em extends Yc{constructor(t){super(t,"sha256")}};a(em,"ScramSHA256");var Xh=em;FT.exports={ScramSHA1:Jh,ScramSHA256:Xh}});var rm=y((_ne,WT)=>{"use strict";function ZW(e){if(e){if(Array.isArray(e.saslSupportedMechs))return e.saslSupportedMechs.indexOf("SCRAM-SHA-256")>=0?"scram-sha-256":"scram-sha-1";if(e.maxWireVersion>=3)return"scram-sha-1"}return"mongocr"}a(ZW,"getDefaultAuthMechanism");var Jc=class Jc{constructor(t){t=t||{},this.username=t.username,this.password=t.password,this.source=t.source||t.db,this.mechanism=t.mechanism||"default",this.mechanismProperties=t.mechanismProperties||{},/MONGODB-AWS/i.test(this.mechanism)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties.AWS_SESSION_TOKEN=process.env.AWS_SESSION_TOKEN)),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(t){return this.mechanism===t.mechanism&&this.username===t.username&&this.password===t.password&&this.source===t.source}resolveAuthMechanism(t){return/DEFAULT/i.test(this.mechanism)?new Jc({username:this.username,password:this.password,source:this.source,mechanism:ZW(t),mechanismProperties:this.mechanismProperties}):this}};a(Jc,"MongoCredentials");var tm=Jc;WT.exports={MongoCredentials:tm}});var HT=y((Nne,$T)=>{"use strict";var ez=dn().AuthProvider,tz=rm().MongoCredentials,ri=q().MongoError,rz=require("crypto"),nz=require("http"),iz=U().maxWireVersion,sz=require("url"),im;try{im=require("aws4")}catch{}var oz=110,az="http://169.254.170.2",nm="http://169.254.169.254",zT="/latest/meta-data/iam/security-credentials",om=class om extends ez{auth(t,r){let n=t.connection,i=t.credentials;if(iz(n)<9){r(new ri("MONGODB-AWS authentication requires MongoDB version 4.4 or later"));return}if(im==null){r(new ri("MONGODB-AWS authentication requires the `aws4` module, please install it as a dependency of your project"));return}if(i.username==null){cz(i,(d,f)=>{if(d)return r(d);t.credentials=f,this.auth(t,r)});return}let s=i.source,o=this.bson,c=i.username,l=i.password,u=i.mechanismProperties.AWS_SESSION_TOKEN,p=c&&l&&u?{accessKeyId:c,secretAccessKey:l,sessionToken:u}:c&&l?{accessKeyId:c,secretAccessKey:l}:void 0;rz.randomBytes(32,(d,f)=>{if(d){r(d);return}let h={saslStart:1,mechanism:"MONGODB-AWS",payload:o.serialize({r:f,p:oz})};n.command(`${s}.$cmd`,h,(m,v)=>{if(m)return r(m);let x=v.result,w=o.deserialize(x.payload.buffer),C=w.h,g=w.s.buffer;if(g.length!==64){r(new ri(`Invalid server nonce length ${g.length}, expected 64`));return}if(g.compare(f,0,f.length,0,f.length)!==0){r(new ri("Server nonce does not begin with client nonce"));return}if(C.length<1||C.length>255||C.indexOf("..")!==-1){r(new ri(`Server returned an invalid host: "${C}"`));return}let T="Action=GetCallerIdentity&Version=2011-06-15",N=im.sign({method:"POST",host:C,region:uz(w.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":T.length,"X-MongoDB-Server-Nonce":g.toString("base64"),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:T},p),_=N.headers.Authorization,D=N.headers["X-Amz-Date"],k={a:_,d:D};u&&(k.t=u);let A={saslContinue:1,conversationId:1,payload:o.serialize(k)};n.command(`${s}.$cmd`,A,F=>{if(F)return r(F);r()})})})}};a(om,"MongoDBAWS");var sm=om;function cz(e,t){function r(n){if(n.AccessKeyId==null||n.SecretAccessKey==null||n.Token==null){t(new ri("Could not obtain temporary MONGODB-AWS credentials"));return}t(void 0,new tz({username:n.AccessKeyId,password:n.SecretAccessKey,source:e.source,mechanism:"MONGODB-AWS",mechanismProperties:{AWS_SESSION_TOKEN:n.Token}}))}if(a(r,"done"),process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI){Xc(`${az}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`,void 0,(n,i)=>{if(n)return t(n);r(i)});return}Xc(`${nm}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}},(n,i)=>{if(n)return t(n);Xc(`${nm}/${zT}`,{json:!1,headers:{"X-aws-ec2-metadata-token":i}},(s,o)=>{if(s)return t(s);Xc(`${nm}/${zT}/${o}`,{headers:{"X-aws-ec2-metadata-token":i}},(c,l)=>{if(c)return t(c);r(l)})})})}a(cz,"makeTempCredentials");function uz(e){let t=e.split(".");return t.length===1||t[1]==="amazonaws"?"us-east-1":t[1]}a(uz,"deriveRegion");function Xc(e,t,r){t=Object.assign({method:"GET",timeout:1e4,json:!0},sz.parse(e),t);let n=nz.request(t,i=>{i.setEncoding("utf8");let s="";i.on("data",o=>s+=o),i.on("end",()=>{if(t.json===!1){r(void 0,s);return}try{let o=JSON.parse(s);r(void 0,o)}catch{r(new ri(`Invalid JSON response: "${s}"`))}})});n.on("error",i=>r(i)),n.end()}a(Xc,"request");$T.exports=sm});var am=y((Ine,VT)=>{"use strict";var lz=Dh(),pz=Uh(),fz=Wh(),dz=Vh(),hz=Io().ScramSHA1,mz=Io().ScramSHA256,yz=HT();function gz(e){return{"mongodb-aws":new yz(e),mongocr:new lz(e),x509:new pz(e),plain:new fz(e),gssapi:new dz(e),"scram-sha-1":new hz(e),"scram-sha-256":new mz(e)}}a(gz,"defaultAuthProviders");VT.exports={defaultAuthProviders:gz}});var eu=y((Mne,QT)=>{"use strict";var YT=require("net"),vz=require("tls"),JT=xh(),qo=q().MongoError,Qc=q().MongoNetworkError,xz=q().MongoNetworkTimeoutError,Sz=am().defaultAuthProviders,bz=dn().AuthContext,Zc=ih(),wz=U().makeClientMetadata,KT=Zc.MAX_SUPPORTED_WIRE_VERSION,Ez=Zc.MAX_SUPPORTED_SERVER_VERSION,GT=Zc.MIN_SUPPORTED_WIRE_VERSION,Oz=Zc.MIN_SUPPORTED_SERVER_VERSION,is;function Tz(e,t,r){typeof t=="function"&&(r=t,t=void 0);let n=e&&e.connectionType?e.connectionType:JT;is==null&&(is=Sz(e.bson));let i=e.family!==void 0?e.family:0;qz(i,e,t,(s,o)=>{if(s){r(s,o);return}Az(new n(o,e),e,r)})}a(Tz,"connect");function Cz(e){return!(e instanceof JT)}a(Cz,"isModernConnectionType");function _z(e,t){let r=e&&typeof e.maxWireVersion=="number"&&e.maxWireVersion>=GT,n=e&&typeof e.minWireVersion=="number"&&e.minWireVersion<=KT;if(r){if(n)return null;let s=`Server at ${t.host}:${t.port} reports minimum wire version ${e.minWireVersion}, but this version of the Node.js Driver requires at most ${KT} (MongoDB ${Ez})`;return new qo(s)}let i=`Server at ${t.host}:${t.port} reports maximum wire version ${e.maxWireVersion||0}, but this version of the Node.js Driver requires at least ${GT} (MongoDB ${Oz})`;return new qo(i)}a(_z,"checkSupportedServer");function Az(e,t,r){let n=a(function(o,c){o&&e&&e.destroy(),r(o,c)},"callback"),i=t.credentials;if(i&&!i.mechanism.match(/DEFAULT/i)&&!is[i.mechanism]){n(new qo(`authMechanism '${i.mechanism}' not supported`));return}let s=new bz(e,i,t);Nz(s,(o,c)=>{if(o)return n(o);let l=Object.assign({},t);(t.connectTimeoutMS||t.connectionTimeout)&&(l.socketTimeout=t.connectTimeoutMS||t.connectionTimeout),c.helloOk=!!t.useUnifiedTopology;let u=new Date().getTime();e.command("admin.$cmd",c,l,(p,d)=>{if(p){n(p);return}let f=d.result;if(f.ok===0){n(new qo(f));return}"isWritablePrimary"in f&&(f.ismaster=f.isWritablePrimary),t.useUnifiedTopology&&f.helloOk&&(e.helloOk=!0);let h=_z(f,t);if(h){n(h);return}if(!Cz(e)&&f.compression){let m=c.compression.filter(v=>f.compression.indexOf(v)!==-1);m.length&&(e.agreedCompressor=m[0]),t.compression&&t.compression.zlibCompressionLevel&&(e.zlibCompressionLevel=t.compression.zlibCompressionLevel)}if(e.ismaster=f,e.lastIsMasterMS=new Date().getTime()-u,!f.arbiterOnly&&i){Object.assign(s,{response:f});let m=i.resolveAuthMechanism(f);is[m.mechanism].auth(s,x=>{if(x)return n(x);n(void 0,e)});return}n(void 0,e)})})}a(Az,"performInitialHandshake");function Nz(e,t){let r=e.options,n=e.connection.serverApi,i=r.compression&&r.compression.compressors?r.compression.compressors:[],s={[n?"hello":"ismaster"]:!0,client:r.metadata||wz(r),compression:i},o=e.credentials;if(o){if(o.mechanism.match(/DEFAULT/i)&&o.username){Object.assign(s,{saslSupportedMechs:`${o.source}.${o.username}`}),is["scram-sha-256"].prepare(s,e,t);return}let c=is[o.mechanism];if(c==null)return t(new qo(`No AuthProvider for ${o.mechanism} defined.`));c.prepare(s,e,t);return}t(void 0,s)}a(Nz,"prepareHandshakeDocument");var Rz=["pfx","key","passphrase","cert","ca","ciphers","NPNProtocols","ALPNProtocols","servername","ecdhCurve","secureProtocol","secureContext","session","minDHSize","crl","rejectUnauthorized"];function XT(e,t){let r=typeof t.host=="string"?t.host:"localhost";return r.indexOf("/")!==-1?{path:r}:{family:e,host:r,port:typeof t.port=="number"?t.port:27017,rejectUnauthorized:!1}}a(XT,"parseConnectOptions");function Iz(e,t){let r=XT(e,t);for(let n in t)t[n]!=null&&Rz.indexOf(n)!==-1&&(r[n]=t[n]);return t.checkServerIdentity===!1?r.checkServerIdentity=function(){}:typeof t.checkServerIdentity=="function"&&(r.checkServerIdentity=t.checkServerIdentity),r.servername==null&&!YT.isIP(r.host)&&(r.servername=r.host),r}a(Iz,"parseSslOptions");var cm=new Set(["error","close","timeout","parseError"]);function qz(e,t,r,n){let i=typeof t.ssl=="boolean"?t.ssl:!1,s=typeof t.keepAlive=="boolean"?t.keepAlive:!0,o=typeof t.keepAliveInitialDelay=="number"?t.keepAliveInitialDelay:12e4,c=typeof t.noDelay=="boolean"?t.noDelay:!0,l=typeof t.connectionTimeout=="number"?t.connectionTimeout:typeof t.connectTimeoutMS=="number"?t.connectTimeoutMS:3e4,u=typeof t.socketTimeoutMS=="number"?t.socketTimeoutMS:typeof t.socketTimeout=="number"?t.socketTimeout:0,p=typeof t.rejectUnauthorized=="boolean"?t.rejectUnauthorized:!0;o>u&&(o=Math.round(u/2));let d,f=a(function(w,C){w&&d&&d.destroy(),n(w,C)},"callback");try{i?(d=vz.connect(Iz(e,t)),typeof d.disableRenegotiation=="function"&&d.disableRenegotiation()):d=YT.createConnection(XT(e,t))}catch(w){return f(w)}d.setKeepAlive(s,o),d.setTimeout(l),d.setNoDelay(c);let h=i?"secureConnect":"connect",m;function v(w){return C=>{cm.forEach(g=>d.removeAllListeners(g)),m&&r.removeListener("cancel",m),d.removeListener(h,x),f(Mz(w,C))}}a(v,"errorHandler");function x(){if(cm.forEach(w=>d.removeAllListeners(w)),m&&r.removeListener("cancel",m),d.authorizationError&&p)return f(d.authorizationError);d.setTimeout(u),f(null,d)}a(x,"connectHandler"),cm.forEach(w=>d.once(w,v(w))),r&&(m=v("cancel"),r.once("cancel",m)),d.once(h,x)}a(qz,"makeConnection");function Mz(e,t){switch(e){case"error":return new Qc(t);case"timeout":return new xz("connection timed out");case"close":return new Qc("connection closed");case"cancel":return new Qc("connection establishment was cancelled");default:return new Qc("unknown network error")}}a(Mz,"connectionFailureError");QT.exports=Tz});var ni=y((Bne,ZT)=>{"use strict";var ss=class ss{constructor(t){t!=null&&(this.level=t)}static fromOptions(t){if(t!=null){if(t.readConcern)return t.readConcern instanceof ss?t.readConcern:new ss(t.readConcern.level);if(t.level)return new ss(t.level)}}static get MAJORITY(){return"majority"}static get AVAILABLE(){return"available"}static get LINEARIZABLE(){return"linearizable"}static get SNAPSHOT(){return"snapshot"}};a(ss,"ReadConcern");var um=ss;ZT.exports=um});var os=y((Lne,rC)=>{"use strict";var eC=q().MongoError,Pz=$e(),Bz=ni(),Dz=_r(),mn,tC;(()=>{let e="NO_TRANSACTION",t="STARTING_TRANSACTION",r="TRANSACTION_IN_PROGRESS",n="TRANSACTION_COMMITTED",i="TRANSACTION_COMMITTED_EMPTY",s="TRANSACTION_ABORTED";mn={NO_TRANSACTION:e,STARTING_TRANSACTION:t,TRANSACTION_IN_PROGRESS:r,TRANSACTION_COMMITTED:n,TRANSACTION_COMMITTED_EMPTY:i,TRANSACTION_ABORTED:s},tC={[e]:[e,t],[t]:[r,n,i,s],[r]:[r,n,s],[n]:[n,i,t,e],[s]:[t,e],[i]:[i,e]}})();var pm=class pm{constructor(t){t=t||{},this.state=mn.NO_TRANSACTION,this.options={};let r=Dz.fromOptions(t);if(r){if(r.w<=0)throw new eC("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}t.readConcern&&(this.options.readConcern=Bz.fromOptions(t)),t.readPreference&&(this.options.readPreference=Pz.fromOptions(t)),t.maxCommitTimeMS&&(this.options.maxTimeMS=t.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isActive(){return[mn.STARTING_TRANSACTION,mn.TRANSACTION_IN_PROGRESS].indexOf(this.state)!==-1}transition(t){let r=tC[this.state];if(r&&r.indexOf(t)!==-1){this.state=t,(this.state===mn.NO_TRANSACTION||this.state===mn.STARTING_TRANSACTION||this.state===mn.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new eC(`Attempted illegal state transition from [${this.state}] to [${t}]`)}pinServer(t){this.isActive&&(this._pinnedServer=t)}unpinServer(){this._pinnedServer=void 0}};a(pm,"Transaction");var lm=pm;function Lz(e){return!!(e.commitTransaction||e.abortTransaction)}a(Lz,"isTransactionCommand");rC.exports={TxnState:mn,Transaction:lm,isTransactionCommand:Lz}});var we=y((Une,uC)=>{"use strict";var jz=Gn().MONGODB_ERROR_CODES,Uz=$e(),tu=Qe().TopologyType,iC=q().MongoError,kz=q().isRetryableWriteError,Fz=U().maxWireVersion,Wz=q().MongoNetworkError,zz=jz.IllegalOperation;function fm(e,t,r){e.listeners(t).length>0&&e.emit(t,r)}a(fm,"emitSDAMEvent");function $z(e){return!e.compression||!e.compression.compressors?[]:(e.compression.compressors.forEach(function(t){if(t!=="snappy"&&t!=="zlib")throw new Error("compressors must be at least one of snappy or zlib")}),e.compression.compressors)}a($z,"createCompressionInfo");function Hz(e){return JSON.parse(JSON.stringify(e))}a(Hz,"clone");var Vz=a(function(e){return e.s.serverDescription||(e.s.serverDescription={address:e.name,arbiters:[],hosts:[],passives:[],type:"Unknown"}),e.s.serverDescription},"getPreviousDescription"),sC=a(function(e,t){e.listeners("serverDescriptionChanged").length>0&&(e.emit("serverDescriptionChanged",{topologyId:e.s.topologyId!==-1?e.s.topologyId:e.id,address:e.name,previousDescription:Vz(e),newDescription:t}),e.s.serverDescription=t)},"emitServerDescriptionChanged"),Kz=a(function(e){return e.s.topologyDescription||(e.s.topologyDescription={topologyType:"Unknown",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:"Unknown"}]}),e.s.topologyDescription},"getPreviousTopologyDescription"),Gz=a(function(e,t){e.listeners("topologyDescriptionChanged").length>0&&(e.emit("topologyDescriptionChanged",{topologyId:e.s.topologyId!==-1?e.s.topologyId:e.id,address:e.name,previousDescription:Kz(e),newDescription:t}),e.s.serverDescription=t)},"emitTopologyDescriptionChanged"),Yz=a(function(e,t,r){var n=ru(e,t),i=ru(e,r);return i!==n},"changedIsMaster"),ru=a(function(e,t){return t||(t=e.ismaster),t?t.ismaster&&t.msg==="isdbgrid"?"Mongos":t.ismaster&&!t.hosts?"Standalone":t.ismaster?"RSPrimary":t.secondary?"RSSecondary":t.arbiterOnly?"RSArbiter":"Unknown":"Unknown"},"getTopologyType"),oC=a(function(e){return function(t){if(e.s.state!=="destroyed"){var r=new Date().getTime();fm(e,"serverHeartbeatStarted",{connectionId:e.name}),e.command("admin.$cmd",{ismaster:!0},{monitoring:!0},function(n,i){if(n)fm(e,"serverHeartbeatFailed",{durationMS:s,failure:n,connectionId:e.name});else{e.emit("ismaster",i,e);var s=new Date().getTime()-r;fm(e,"serverHeartbeatSucceeded",{durationMS:s,reply:i.result,connectionId:e.name}),Yz(e,e.s.ismaster,i.result)&&sC(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:e.s.inTopology?ru(e):"Standalone"}),e.s.ismaster=i.result,e.s.isMasterLatencyMS=s}if(typeof t=="function")return t(n,i);e.s.inquireServerStateTimeout=setTimeout(oC(e),e.s.haInterval)})}}},"inquireServerState"),Jz=a(function(e){var t={};for(var r in e)t[r]=e[r];return t},"cloneOptions");function Xz(e,t){var r=!1;this.start=function(){return this.isRunning()||(r=setInterval(e,t)),this},this.stop=function(){return clearInterval(r),r=!1,this},this.isRunning=function(){return r!==!1}}a(Xz,"Interval");function Qz(e,t){var r=!1,n=a(()=>{r&&(clearTimeout(r),r=!1,e())},"func");this.start=function(){return this.isRunning()||(r=setTimeout(n,t)),this},this.stop=function(){return clearTimeout(r),r=!1,this},this.isRunning=function(){return r!==!1}}a(Qz,"Timeout");function Zz(e,t){var r={servers:[]};e||(e={servers:[]});for(var n=0;n<e.servers.length;n++){for(var i=!1,s=0;s<t.servers.length;s++)if(t.servers[s].address.toLowerCase()===e.servers[n].address.toLowerCase()){i=!0;break}i||r.servers.push({address:e.servers[n].address,from:e.servers[n].type,to:"Unknown"})}for(s=0;s<t.servers.length;s++){for(i=!1,n=0;n<e.servers.length;n++)if(e.servers[n].address.toLowerCase()===t.servers[s].address.toLowerCase()){i=!0;break}i||r.servers.push({address:t.servers[s].address,from:"Unknown",to:t.servers[s].type})}for(n=0;n<e.servers.length;n++){var o=e.servers[n];for(s=0;s<t.servers.length;s++){var c=t.servers[s];o.address.toLowerCase()===c.address.toLowerCase()&&o.type!==c.type&&r.servers.push({address:o.address,from:o.type,to:c.type})}}return r}a(Zz,"diff");function e3(e,t){(e.clusterTime==null||t.clusterTime.greaterThan(e.clusterTime.clusterTime))&&(e.clusterTime=t)}a(e3,"resolveClusterTime");var t3={endSessions:function(e,t){Array.isArray(e)||(e=[e]),this.command("admin.$cmd",{endSessions:e},{readPreference:Uz.primaryPreferred},()=>{typeof t=="function"&&t()})}};function aC(e){return e.description?e.description.type:e.type==="mongos"?tu.Sharded:e.type==="replset"?tu.ReplicaSetWithPrimary:tu.Single}a(aC,"topologyType");var r3=6,cC=a(function(e){return!(e.lastIsMaster().maxWireVersion<r3||!e.logicalSessionTimeoutMinutes||aC(e)===tu.Single)},"isRetryableWritesSupported"),nC="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";function n3(e){return e.code!==zz||!e.errmsg.includes("Transaction numbers")?e:new iC({message:nC,errmsg:nC,originalError:e})}a(n3,"getMMAPError");function i3(e,t){return e instanceof iC?(cC(t)&&(e instanceof Wz||Fz(t)<9&&kz(e))&&e.addErrorLabel("RetryableWriteError"),e.hasErrorLabel("RetryableWriteError")):!1}a(i3,"legacyIsRetryableWriteError");uC.exports={SessionMixins:t3,resolveClusterTime:e3,inquireServerState:oC,getTopologyType:ru,emitServerDescriptionChanged:sC,emitTopologyDescriptionChanged:Gz,cloneOptions:Jz,createCompressionInfo:$z,clone:Hz,diff:Zz,Interval:Xz,Timeout:Qz,isRetryableWritesSupported:cC,getMMAPError:n3,topologyType:aC,legacyIsRetryableWriteError:i3}});var yn=y((Fne,bC)=>{"use strict";var s3=ke().retrieveBSON,o3=require("events"),hC=s3(),lC=hC.Binary,a3=U().uuidV4,ir=q().MongoError,c3=q().isRetryableError,u3=q().isRetryableEndTransactionError,l3=q().MongoNetworkError,p3=q().MongoWriteConcernError,pC=os().Transaction,Ee=os().TxnState,f3=U().isPromiseLike,d3=$e(),dm=b().maybePromise,h3=os().isTransactionCommand,m3=we().resolveClusterTime,y3=ue().isSharded,g3=U().maxWireVersion,mm=b().now,mC=b().calculateDurationInMs,v3=8;function yC(e,t){if(e.serverSession==null){let r=new ir("Cannot use a session that has ended");if(typeof t=="function")return t(r,null),!1;throw r}return!0}a(yC,"assertAlive");var Mo=Symbol("serverSession"),su=class su extends o3{constructor(t,r,n,i){if(super(),t==null)throw new Error("ClientSession requires a topology");if(r==null||!(r instanceof iu))throw new Error("ClientSession requires a ServerSessionPool");n=n||{},i=i||{},this.topology=t,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=i,this[Mo]=void 0,this.supports={causalConsistency:typeof n.causalConsistency<"u"?n.causalConsistency:!0},this.clusterTime=n.initialClusterTime,this.operationTime=null,this.explicit=!!n.explicit,this.owner=n.owner,this.defaultTransactionOptions=Object.assign({},n.defaultTransactionOptions),this.transaction=new pC}get id(){return this.serverSession.id}get serverSession(){return this[Mo]==null&&(this[Mo]=this.sessionPool.acquire()),this[Mo]}endSession(t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=this;return dm(this,r,i=>{if(n.hasEnded)return i();function s(){n.sessionPool.release(n.serverSession),n[Mo]=void 0,n.hasEnded=!0,n.emit("ended",n),i()}if(a(s,"completeEndSession"),n.serverSession&&n.inTransaction()){n.abortTransaction(o=>{if(o)return i(o);s()});return}s()})}advanceOperationTime(t){if(this.operationTime==null){this.operationTime=t;return}t.greaterThan(this.operationTime)&&(this.operationTime=t)}equals(t){return t instanceof su?this.id.id.buffer.equals(t.id.id.buffer):!1}incrementTransactionNumber(){this.serverSession.txnNumber++}inTransaction(){return this.transaction.isActive}startTransaction(t){if(yC(this),this.inTransaction())throw new ir("Transaction already in progress");let r=g3(this.topology);if(y3(this.topology)&&r!=null&&r<v3)throw new ir("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.incrementTransactionNumber(),this.transaction=new pC(Object.assign({},this.clientOptions,t||this.defaultTransactionOptions)),this.transaction.transition(Ee.STARTING_TRANSACTION)}commitTransaction(t){return dm(this,t,r=>dC(this,"commitTransaction",r))}abortTransaction(t){return dm(this,t,r=>dC(this,"abortTransaction",r))}toBSON(){throw new Error("ClientSession cannot be serialized to BSON.")}withTransaction(t,r){let n=mm();return ym(this,n,t,r)}};a(su,"ClientSession");var hm=su,gC=12e4,x3=100,S3=79,fC=50,b3=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function vC(e,t){return mC(e)<t}a(vC,"hasNotTimedOut");function w3(e){return ou(e)||!b3.has(e.codeName)&&e.code!==x3&&e.code!==S3}a(w3,"isUnknownTransactionCommitResult");function ou(e){return e==null?!1:e.code===fC||e.writeConcernError&&e.writeConcernError.code===fC}a(ou,"isMaxTimeMSExpiredError");function xC(e,t,r,n){return e.commitTransaction().catch(i=>{if(i instanceof ir&&vC(t,gC)&&!ou(i)){if(i.hasErrorLabel("UnknownTransactionCommitResult"))return xC(e,t,r,n);if(i.hasErrorLabel("TransientTransactionError"))return ym(e,t,r,n)}throw i})}a(xC,"attemptTransactionCommit");var E3=new Set([Ee.NO_TRANSACTION,Ee.TRANSACTION_COMMITTED,Ee.TRANSACTION_ABORTED]);function O3(e){return E3.has(e.transaction.state)}a(O3,"userExplicitlyEndedTransaction");function ym(e,t,r,n){e.startTransaction(n);let i;try{i=r(e)}catch(s){i=Promise.reject(s)}if(!f3(i))throw e.abortTransaction(),new TypeError("Function provided to `withTransaction` must return a Promise");return i.then(()=>{if(!O3(e))return xC(e,t,r,n)}).catch(s=>{function o(c){if(c instanceof ir&&c.hasErrorLabel("TransientTransactionError")&&vC(t,gC))return ym(e,t,r,n);throw ou(c)&&c.addErrorLabel("UnknownTransactionCommitResult"),c}return a(o,"maybeRetryOrThrow"),e.transaction.isActive?e.abortTransaction().then(()=>o(s)):o(s)})}a(ym,"attemptTransaction");function dC(e,t,r){if(!yC(e,r))return;let n=e.transaction.state;if(n===Ee.NO_TRANSACTION){r(new ir("No transaction started"));return}if(t==="commitTransaction"){if(n===Ee.STARTING_TRANSACTION||n===Ee.TRANSACTION_COMMITTED_EMPTY){e.transaction.transition(Ee.TRANSACTION_COMMITTED_EMPTY),r(null,null);return}if(n===Ee.TRANSACTION_ABORTED){r(new ir("Cannot call commitTransaction after calling abortTransaction"));return}}else{if(n===Ee.STARTING_TRANSACTION){e.transaction.transition(Ee.TRANSACTION_ABORTED),r(null,null);return}if(n===Ee.TRANSACTION_ABORTED){r(new ir("Cannot call abortTransaction twice"));return}if(n===Ee.TRANSACTION_COMMITTED||n===Ee.TRANSACTION_COMMITTED_EMPTY){r(new ir("Cannot call abortTransaction after calling commitTransaction"));return}}let i={[t]:1},s;e.transaction.options.writeConcern?s=Object.assign({},e.transaction.options.writeConcern):e.clientOptions&&e.clientOptions.w&&(s={w:e.clientOptions.w}),n===Ee.TRANSACTION_COMMITTED&&(s=Object.assign({wtimeout:1e4},s,{w:"majority"})),s&&Object.assign(i,{writeConcern:s}),t==="commitTransaction"&&e.transaction.options.maxTimeMS&&Object.assign(i,{maxTimeMS:e.transaction.options.maxTimeMS});function o(l,u){t==="commitTransaction"?(e.transaction.transition(Ee.TRANSACTION_COMMITTED),l&&(l instanceof l3||l instanceof p3||c3(l)||ou(l)?w3(l)&&(l.addErrorLabel("UnknownTransactionCommitResult"),e.transaction.unpinServer()):l.hasErrorLabel("TransientTransactionError")&&e.transaction.unpinServer())):e.transaction.transition(Ee.TRANSACTION_ABORTED),r(l,u)}a(o,"commandHandler");function c(l){return t==="commitTransaction"?l:null}a(c,"transactionError"),e.transaction.recoveryToken&&T3(e)&&(i.recoveryToken=e.transaction.recoveryToken),e.topology.command("admin.$cmd",i,{session:e},(l,u)=>{if(l&&u3(l))return i.commitTransaction&&(e.transaction.unpinServer(),i.writeConcern=Object.assign({wtimeout:1e4},i.writeConcern,{w:"majority"})),e.topology.command("admin.$cmd",i,{session:e},(p,d)=>o(c(p),d));o(c(l),u)})}a(dC,"endTransaction");function T3(e){return!!e.topology.s.options.useRecoveryToken}a(T3,"supportsRecoveryToken");var gm=class gm{constructor(){this.id={id:new lC(a3(),lC.SUBTYPE_UUID)},this.lastUse=mm(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(t){return Math.round(mC(this.lastUse)%864e5%36e5/6e4)>t-1}};a(gm,"ServerSession");var nu=gm,vm=class vm{constructor(t){if(t==null)throw new Error("ServerSessionPool requires a topology");this.topology=t,this.sessions=[]}endAllPooledSessions(t){if(this.sessions.length){this.topology.endSessions(this.sessions.map(r=>r.id),()=>{this.sessions=[],typeof t=="function"&&t()});return}typeof t=="function"&&t()}acquire(){let t=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length;){let r=this.sessions.shift();if(!r.hasTimedOut(t))return r}return new nu}release(t){let r=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length&&this.sessions[this.sessions.length-1].hasTimedOut(r);)this.sessions.pop();if(!t.hasTimedOut(r)){if(t.isDirty)return;this.sessions.unshift(t)}}};a(vm,"ServerSessionPool");var iu=vm;function SC(e,t){return!!(e.aggregate||e.count||e.distinct||e.find||e.parallelCollectionScan||e.geoNear||e.geoSearch||e.mapReduce&&t&&t.out&&(t.out.inline===1||t.out==="inline"))}a(SC,"commandSupportsReadConcern");function C3(e,t,r){if(e.hasEnded)return new ir("Cannot use a session that has ended");if(r&&r.writeConcern&&r.writeConcern.w===0)return;let n=e.serverSession;n.lastUse=mm(),t.lsid=n.id;let i=e.inTransaction()||h3(t),s=r.willRetryWrite,o=SC(t,r);if(n.txnNumber&&(s||i)&&(t.txnNumber=hC.Long.fromNumber(n.txnNumber)),!i){e.transaction.state!==Ee.NO_TRANSACTION&&e.transaction.transition(Ee.NO_TRANSACTION),e.supports.causalConsistency&&e.operationTime&&o&&(t.readConcern=t.readConcern||{},Object.assign(t.readConcern,{afterClusterTime:e.operationTime}));return}if(r.readPreference&&!r.readPreference.equals(d3.primary))return new ir(`Read preference in a transaction must be primary, not: ${r.readPreference.mode}`);if(t.autocommit=!1,e.transaction.state===Ee.STARTING_TRANSACTION){e.transaction.transition(Ee.TRANSACTION_IN_PROGRESS),t.startTransaction=!0;let c=e.transaction.options.readConcern||e.clientOptions.readConcern;c&&(t.readConcern=c),e.supports.causalConsistency&&e.operationTime&&(t.readConcern=t.readConcern||{},Object.assign(t.readConcern,{afterClusterTime:e.operationTime}))}}a(C3,"applySession");function _3(e,t){t.$clusterTime&&m3(e,t.$clusterTime),t.operationTime&&e&&e.supports.causalConsistency&&e.advanceOperationTime(t.operationTime),t.recoveryToken&&e&&e.inTransaction()&&(e.transaction._recoveryToken=t.recoveryToken)}a(_3,"updateSessionFromResponse");bC.exports={ClientSession:hm,ServerSession:nu,ServerSessionPool:iu,TxnState:Ee,applySession:C3,updateSessionFromResponse:_3,commandSupportsReadConcern:SC}});var qC=y((zne,IC)=>{"use strict";var A3=require("util").inherits,bm=require("events").EventEmitter,Kt=q().MongoError,N3=q().MongoTimeoutError,R3=q().MongoWriteConcernError,I3=Vt(),q3=require("util").format,M3=Xn().Msg,P3=Fc(),xm=ue().MESSAGE_HEADER_SIZE,wC=ue().COMPRESSION_DETAILS_SIZE,B3=ue().opcodes,D3=Ar().compress,L3=Ar().compressorIDs,j3=Ar().uncompressibleCommands,au=Nh(),Sm=pt().Buffer,U3=eu(),k3=yn().updateSessionFromResponse,TC=U().eachAsync,F3=U().makeStateMachine,W3=b().now,vn="disconnected",as="connecting",Po="connected",gn="draining",Lt="destroying",ft="destroyed",cs=F3({[vn]:[as,gn,vn],[as]:[as,Po,gn,vn],[Po]:[Po,vn,gn],[gn]:[gn,Lt,ft],[Lt]:[Lt,ft],[ft]:[ft]}),CC=new Set(["error","close","timeout","parseError","connect","message"]),z3=0,Ne=a(function(e,t){if(bm.call(this),this.topology=e,this.s={state:vn,cancellationToken:new bm},this.s.cancellationToken.setMaxListeners(1/0),this.options=Object.assign({host:"localhost",port:27017,size:5,minSize:0,connectionTimeout:3e4,socketTimeout:0,keepAlive:!0,keepAliveInitialDelay:12e4,noDelay:!0,ssl:!1,checkServerIdentity:!0,ca:null,crl:null,cert:null,key:null,passphrase:null,rejectUnauthorized:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1,reconnect:!0,reconnectInterval:1e3,reconnectTries:30,domainsEnabled:!1,legacyCompatMode:!0},t),this.id=z3++,this.retriesLeft=this.options.reconnectTries,this.reconnectId=null,this.reconnectError=null,!t.bson||t.bson&&(typeof t.bson.serialize!="function"||typeof t.bson.deserialize!="function"))throw new Error("must pass in valid bson parser");this.logger=I3("Pool",t),this.availableConnections=[],this.inUseConnections=[],this.connectingConnections=0,this.executing=!1,this.queue=[],this.numberOfConsecutiveTimeouts=0,this.connectionIndex=0;let r=this;this._messageHandler=$3(this),this._connectionCloseHandler=function(n){cu(r,"close",n,this)},this._connectionErrorHandler=function(n){cu(r,"error",n,this)},this._connectionTimeoutHandler=function(n){cu(r,"timeout",n,this)},this._connectionParseErrorHandler=function(n){cu(r,"parseError",n,this)}},"Pool");A3(Ne,bm);Object.defineProperty(Ne.prototype,"size",{enumerable:!0,get:function(){return this.options.size}});Object.defineProperty(Ne.prototype,"minSize",{enumerable:!0,get:function(){return this.options.minSize}});Object.defineProperty(Ne.prototype,"connectionTimeout",{enumerable:!0,get:function(){return this.options.connectionTimeout}});Object.defineProperty(Ne.prototype,"socketTimeout",{enumerable:!0,get:function(){return this.options.socketTimeout}});Object.defineProperty(Ne.prototype,"state",{enumerable:!0,get:function(){return this.s.state}});function _C(e){e.inUseConnections=[],e.availableConnections=[],e.connectingConnections=0,e.executing=!1,e.numberOfConsecutiveTimeouts=0,e.connectionIndex=0,e.retriesLeft=e.options.reconnectTries,e.reconnectId=null}a(_C,"resetPoolState");function cu(e,t,r,n){if(n){if(n._connectionFailHandled)return;n._connectionFailHandled=!0,n.destroy(),wm(e,n),n.flush(r)}if(t==="timeout"&&(e.numberOfConsecutiveTimeouts=e.numberOfConsecutiveTimeouts+1,e.numberOfConsecutiveTimeouts>e.options.reconnectTries))return e.numberOfConsecutiveTimeouts=0,e.destroy(!0),e.emit("close",e);e.socketCount()===0&&(e.state!==ft&&e.state!==Lt&&e.state!==gn&&e.options.reconnect&&cs(e,vn),t=t==="error"?"close":t,e.emit(t,r)),!e.reconnectId&&e.options.reconnect&&(e.reconnectError=r,e.reconnectId=setTimeout(AC(e),e.options.reconnectInterval)),RC(e)<e.minSize&&xn(e)}a(cu,"connectionFailureHandler");function AC(e,t){return function(){if(e.emit("attemptReconnect",e),e.state===ft||e.state===Lt){typeof t=="function"&&t(new Kt("Cannot create connection when pool is destroyed"));return}if(e.retriesLeft=e.retriesLeft-1,e.retriesLeft<=0){e.destroy();let r=new N3(`failed to reconnect after ${e.options.reconnectTries} attempts with interval ${e.options.reconnectInterval} ms`,e.reconnectError);e.emit("reconnectFailed",r),typeof t=="function"&&t(r);return}e.reconnectId=null,xn(e,(r,n)=>{r==null&&(e.reconnectId=null,e.retriesLeft=e.options.reconnectTries,e.emit("reconnect",e)),typeof t=="function"&&t(r,n)})}}a(AC,"attemptReconnect");function NC(e,t,r){var n=t.indexOf(e);n!==-1&&(t.splice(n,1),r.push(e))}a(NC,"moveConnectionBetween");function $3(e){return function(t,r){for(var n=null,i=0;i<r.workItems.length;i++)r.workItems[i].requestId===t.responseTo&&(n=r.workItems[i],r.workItems.splice(i,1));n&&n.monitoring&&NC(r,e.inUseConnections,e.availableConnections),e.numberOfConsecutiveTimeouts=0,n&&n.socketTimeout&&r.resetSocketTimeout(),e.logger.isDebug()&&e.logger.debug(q3("message [ %s ] received from %s:%s",t.raw.length,e.options.host,e.options.port));function s(o,c,l,u){if(!o.options.domainsEnabled)return process.nextTick(function(){return c(l,u)});c(l,u)}if(a(s,"handleOperationCallback"),e.executing||process.nextTick(function(){us(e)()}),n&&!n.immediateRelease){try{t.parse(n)}catch(o){return s(e,n.cb,new Kt(o))}if(t.documents[0]){let o=t.documents[0],c=n.session;c&&k3(c,o),e.topology&&o.$clusterTime&&(e.topology.clusterTime=o.$clusterTime)}if(n.command&&t.documents[0]){let o=t.documents[0];if(o.writeConcernError){let c=new R3(o.writeConcernError,o);return s(e,n.cb,c)}if(o.ok===0||o.$err||o.errmsg||o.code)return s(e,n.cb,new Kt(o))}t.hashedName=r.hashedName,s(e,n.cb,null,new P3(n.fullResult?t:t.documents[0],r,t))}}}a($3,"messageHandler");Ne.prototype.socketCount=function(){return this.availableConnections.length+this.inUseConnections.length};function RC(e){return e.availableConnections.length+e.inUseConnections.length+e.connectingConnections}a(RC,"totalConnectionCount");Ne.prototype.allConnections=function(){return this.availableConnections.concat(this.inUseConnections)};Ne.prototype.get=function(){return this.allConnections()[0]};Ne.prototype.isConnected=function(){if(this.state===ft||this.state===Lt)return!1;for(var e=this.availableConnections.concat(this.inUseConnections),t=0;t<e.length;t++)if(e[t].isConnected())return!0;return!1};Ne.prototype.isDestroyed=function(){return this.state===ft||this.state===Lt};Ne.prototype.isDisconnected=function(){return this.state===vn};Ne.prototype.connect=function(e){if(this.state!==vn)throw new Kt("connection in unlawful state "+this.state);cs(this,as),xn(this,(t,r)=>{if(t){if(typeof e=="function"){this.destroy(),e(t);return}this.state===as&&this.emit("error",t),this.destroy();return}if(cs(this,Po),this.minSize)for(let n=0;n<this.minSize;n++)xn(this);typeof e=="function"?e(null,r):this.emit("connect",this,r)})};Ne.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};Ne.prototype.logout=function(e,t){typeof t=="function"&&t(null,null)};Ne.prototype.unref=function(){var e=this.availableConnections.concat(this.inUseConnections);e.forEach(function(t){t.unref()})};function EC(e,t,r,n){cs(e,Lt),e.s.cancellationToken.emit("cancel"),TC(t,(i,s)=>{for(let o of CC)i.removeAllListeners(o);i.on("error",()=>{}),i.destroy(r,s)},i=>{if(i){typeof n=="function"&&n(i,null);return}_C(e),e.queue=[],cs(e,ft),typeof n=="function"&&n(null,null)})}a(EC,"destroy");Ne.prototype.destroy=function(e,t){var r=this;if(typeof e=="function"&&(t=e,e=!1),this.state===ft||r.state===Lt){typeof t=="function"&&t(null,null);return}if(cs(this,gn),e){for(var n=r.availableConnections.concat(r.inUseConnections);r.queue.length>0;){var i=r.queue.shift();typeof i.cb=="function"&&i.cb(new Kt("Pool was force destroyed"))}return EC(r,n,{force:!0},t)}this.reconnectId&&clearTimeout(this.reconnectId);function s(){if(r.state===ft||r.state===Lt){typeof t=="function"&&t();return}if(uu(r.queue),r.queue.length===0){for(var o=r.availableConnections.concat(r.inUseConnections),c=0;c<o.length;c++)if(o[c].workItems.length>0)return setTimeout(s,1);EC(r,o,{force:!1},t)}else us(r)(),setTimeout(s,1)}a(s,"checkStatus"),s()};Ne.prototype.reset=function(e){if(this.s.state!==Po){typeof e=="function"&&e(new Kt("pool is not connected, reset aborted"));return}this.s.cancellationToken.emit("cancel");let t=this.availableConnections.concat(this.inUseConnections);TC(t,(r,n)=>{for(let i of CC)r.removeAllListeners(i);r.destroy({force:!0},n)},r=>{if(r&&typeof e=="function"){e(r,null);return}_C(this),xn(this,()=>{typeof e=="function"&&e(null,null)})})};function H3(e,t,r){let n=t.toBin();if(!!!e.options.agreedCompressor||!V3(t))return r(null,n);let s=Sm.concat(n),o=s.slice(xm),c=s.readInt32LE(12);D3(e,o,function(l,u){if(l)return r(l,null);let p=Sm.alloc(xm);p.writeInt32LE(xm+wC+u.length,0),p.writeInt32LE(t.requestId,4),p.writeInt32LE(0,8),p.writeInt32LE(B3.OP_COMPRESSED,12);let d=Sm.alloc(wC);return d.writeInt32LE(c,0),d.writeInt32LE(o.length,4),d.writeUInt8(L3[e.options.agreedCompressor],8),r(null,[p,d,u])})}a(H3,"serializeCommand");Ne.prototype.write=function(e,t,r){var n=this;if(typeof t=="function"&&(r=t),t=t||{},typeof r!="function"&&!t.noResponse)throw new Kt("write method must provide a callback");if(this.state===ft||this.state===Lt){r(new Kt("pool destroyed"));return}if(this.state===gn){r(new Kt("pool is draining, new operations prohibited"));return}if(this.options.domainsEnabled&&process.domain&&typeof r=="function"){var i=r;r=process.domain.bind(function(){for(var o=new Array(arguments.length),c=0;c<arguments.length;c++)o[c]=arguments[c];process.nextTick(function(){i.apply(null,o)})})}var s={cb:r,raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1,fullResult:!1};s.promoteLongs=typeof t.promoteLongs=="boolean"?t.promoteLongs:!0,s.promoteValues=typeof t.promoteValues=="boolean"?t.promoteValues:!0,s.promoteBuffers=typeof t.promoteBuffers=="boolean"?t.promoteBuffers:!1,s.bsonRegExp=typeof t.bsonRegExp=="boolean"?t.bsonRegExp:!1,s.raw=typeof t.raw=="boolean"?t.raw:!1,s.immediateRelease=typeof t.immediateRelease=="boolean"?t.immediateRelease:!1,s.documentsReturnedIn=t.documentsReturnedIn,s.command=typeof t.command=="boolean"?t.command:!1,s.fullResult=typeof t.fullResult=="boolean"?t.fullResult:!1,s.noResponse=typeof t.noResponse=="boolean"?t.noResponse:!1,s.session=t.session||null,s.socketTimeout=t.socketTimeout,s.monitoring=t.monitoring,s.requestId=e.requestId,n.options.monitorCommands&&(this.emit("commandStarted",new au.CommandStartedEvent(this,e)),s.started=W3(),s.cb=(o,c)=>{o?n.emit("commandFailed",new au.CommandFailedEvent(this,e,o,s.started)):c&&c.result&&(c.result.ok===0||c.result.$err)?n.emit("commandFailed",new au.CommandFailedEvent(this,e,c.result,s.started)):n.emit("commandSucceeded",new au.CommandSucceededEvent(this,e,c,s.started)),typeof r=="function"&&r(o,c)}),H3(n,e,(o,c)=>{if(o)throw o;s.buffer=c,t.monitoring?n.queue.unshift(s):n.queue.push(s),n.executing||process.nextTick(function(){us(n)()})})};function V3(e){let t=e instanceof M3?e.command:e.query,r=Object.keys(t)[0];return!j3.has(r)}a(V3,"canCompress");function OC(e,t){for(var r=0;r<t.length;r++)if(t[r]===e)return t.splice(r,1),!0}a(OC,"remove");function wm(e,t){OC(t,e.availableConnections)||OC(t,e.inUseConnections)}a(wm,"removeConnection");function xn(e,t){if(e.state===ft||e.state===Lt){typeof t=="function"&&t(new Kt("Cannot create connection when pool is destroyed"));return}e.connectingConnections++,U3(e.options,e.s.cancellationToken,(r,n)=>{if(e.connectingConnections--,r){if(e.logger.isDebug()&&e.logger.debug(`connection attempt failed with error [${JSON.stringify(r)}]`),!e.reconnectId&&e.options.reconnect){if(e.state===as&&e.options.legacyCompatMode){t(r);return}e.reconnectError=r,e.reconnectId=setTimeout(AC(e,t),e.options.reconnectInterval);return}typeof t=="function"&&t(r);return}if(e.state===ft||e.state===Lt){typeof t=="function"&&t(new Kt("Pool was destroyed after connection creation")),n.destroy();return}n.on("error",e._connectionErrorHandler),n.on("close",e._connectionCloseHandler),n.on("timeout",e._connectionTimeoutHandler),n.on("parseError",e._connectionParseErrorHandler),n.on("message",e._messageHandler),e.availableConnections.push(n),typeof t=="function"&&t(null,n),us(e)()})}a(xn,"createConnection");function uu(e){for(var t=0;t<e.length;t++)if(e[t].monitoring){var r=e[t];e.splice(t,1),r.cb(new Kt({message:"no connection available for monitoring",driver:!0}))}}a(uu,"flushMonitoringOperations");function us(e){return function(){if(e.state!==ft&&!e.executing){if(e.executing=!0,e.connectingConnections>0){e.executing=!1;return}for(;;){let o=RC(e);if(e.availableConnections.length===0){uu(e.queue),o<e.options.size&&e.queue.length>0&&xn(e);break}if(e.queue.length===0)break;var t=null;let c=e.availableConnections.filter(l=>l.workItems.length===0);if(c.length===0?t=e.availableConnections[e.connectionIndex++%e.availableConnections.length]:t=c[e.connectionIndex++%c.length],!t.isConnected()){wm(e,t),uu(e.queue);break}var r=e.queue.shift();if(r.monitoring){var n=!1;for(let l=0;l<e.availableConnections.length;l++)if(e.availableConnections[l].isConnected()&&e.availableConnections[l].workItems.length===0){n=!0,t=e.availableConnections[l];break}if(!n){e.queue.unshift(r),o<e.options.size&&e.queue.length>0&&xn(e),setTimeout(()=>us(e)(),10);break}}if(o<e.options.size&&t.workItems.length>0){e.queue.unshift(r),xn(e);break}var i=r.buffer;r.monitoring&&NC(t,e.availableConnections,e.inUseConnections),r.noResponse||t.workItems.push(r),!r.immediateRelease&&typeof r.socketTimeout=="number"&&t.setSocketTimeout(r.socketTimeout);var s=!0;if(Array.isArray(i))for(let l=0;l<i.length;l++)s=t.write(i[l]);else s=t.write(i);if(r.noResponse&&typeof r.cb=="function"&&r.cb(null,null),s===!1){e.queue.unshift(r),wm(e,t),uu(e.queue);break}}e.executing=!1}}}a(us,"_execute");Ne._execute=us;IC.exports=Ne});var ls=y((Hne,BC)=>{"use strict";var K3=Bt().Query,G3=Xn().Msg,Em=q().MongoError,Y3=ue().getReadPreference,J3=ue().isSharded,X3=ue().databaseNamespace,Q3=os().isTransactionCommand,Z3=yn().applySession,e8=q().MongoNetworkError,MC=U().maxWireVersion;function t8(e){return MC(e)&&e.autoEncrypter}a(t8,"isClientEncryptionEnabled");function r8(e,t,r,n,i){if(typeof n=="function"&&(i=n,n={}),n=n||{},r==null)return i(new Em(`command ${JSON.stringify(r)} does not return a cursor`));if(!t8(e)){PC(e,t,r,n,i);return}let s=MC(e);if(typeof s!="number"||s<8){i(new Em("Auto-encryption requires a minimum MongoDB version of 4.2"));return}s8(e,t,r,n,i)}a(r8,"command");function PC(e,t,r,n,i){let s=e.s.bson,o=e.s.pool,c=Y3(r,n),l=i8(e),u=n.session,p=e.clusterTime,d=p,f=Object.assign({},r),h=n.serverApi;if(h&&(f.apiVersion=h.version||h,h.strict!=null&&(f.apiStrict=h.strict),h.deprecationErrors!=null&&(f.apiDeprecationErrors=h.deprecationErrors)),n8(e)&&u){let g=u.clusterTime;p&&p.clusterTime&&g&&g.clusterTime&&g.clusterTime.greaterThan(p.clusterTime)&&(d=g),!u.transaction.isActive&&u.transaction.isPinned&&!f.startTransaction&&!f.commitTransaction&&u.transaction.unpinServer();let T=Z3(u,f,n);if(T)return i(T)}d&&(f.$clusterTime=d),J3(e)&&!l&&c&&c.mode!=="primary"&&(f={$query:f,$readPreference:c.toJSON()});let m=Object.assign({command:!0,numberToSkip:0,numberToReturn:-1,checkKeys:!1},n);m.slaveOk=c.slaveOk();let v=`${X3(t)}.$cmd`,x=l?new G3(s,v,f,m):new K3(s,v,f,m),C=u&&(u.inTransaction()||Q3(f))?function(g){return g&&g instanceof e8&&!g.hasErrorLabel("TransientTransactionError")&&g.addErrorLabel("TransientTransactionError"),!r.commitTransaction&&g&&g instanceof Em&&g.hasErrorLabel("TransientTransactionError")&&u.transaction.unpinServer(),i.apply(null,arguments)}:i;try{o.write(x,m,C)}catch(g){C(g)}}a(PC,"_command");function n8(e){return e==null?!1:e.description?e.description.maxWireVersion>=6:e.ismaster==null?!1:e.ismaster.maxWireVersion>=6}a(n8,"hasSessionSupport");function i8(e){let t=e.ismaster?e.ismaster:e.description;return t==null?!1:t.maxWireVersion>=6&&t.__nodejs_mock_server__==null}a(i8,"supportsOpMsg");function s8(e,t,r,n,i){let s=e.autoEncrypter;function o(c,l){if(c||l==null){i(c,l);return}s.decrypt(l.result,n,(u,p)=>{if(u){i(u,null);return}l.result=p,l.message.documents=[p],i(null,l)})}a(o,"commandResponseHandler"),s.encrypt(t,r,n,(c,l)=>{if(c){i(c,null);return}PC(e,t,l,n,o)})}a(s8,"_cryptCommand");BC.exports=r8});var Bo=y((Kne,DC)=>{"use strict";var o8=q().MongoError,lu=class lu{constructor(t){typeof t=="boolean"?this.verbosity=t?"allPlansExecution":"queryPlanner":this.verbosity=t}static fromOptions(t){if(t==null||t.explain===void 0)return;let r=t.explain;if(typeof r=="boolean"||typeof r=="string")return new lu(t.explain);throw new o8("explain must be a string or a boolean")}};a(lu,"Explain");var Om=lu;DC.exports={Explain:Om}});var jC=y((Yne,LC)=>{"use strict";var a8=q().MongoError,c8=ue().collectionNamespace,u8=ls(),l8=b().decorateWithExplain,p8=Bo().Explain;function f8(e,t,r,n,i,s,o){if(i.length===0)throw new a8(`${t} must contain at least one document`);typeof s=="function"&&(o=s,s={}),s=s||{};let c=typeof s.ordered=="boolean"?s.ordered:!0,l=s.writeConcern,u={};if(u[t]=c8(n),u[r]=i,u.ordered=c,l&&Object.keys(l).length>0&&(u.writeConcern=l),s.collation)for(let f=0;f<u[r].length;f++)u[r][f].collation||(u[r][f].collation=s.collation);s.bypassDocumentValidation===!0&&(u.bypassDocumentValidation=s.bypassDocumentValidation);let p=p8.fromOptions(s);p&&(u=l8(u,p));let d=Object.assign({checkKeys:t==="insert",numberToReturn:1},s);u8(e,n,u,d,o)}a(f8,"writeCommand");LC.exports=f8});var kC=y((Xne,UC)=>{"use strict";var d8=Bt().KillCursor,h8=q().MongoError,m8=q().MongoNetworkError,y8=ue().collectionNamespace,g8=U().maxWireVersion,v8=U().emitWarning,x8=ls();function S8(e,t,r,n,i){typeof n=="function"&&(i=n,n={}),i=typeof i=="function"?i:()=>{};let s=r.cursorId;if(g8(e)<4){let l=e.s.bson,u=e.s.pool,p=new d8(l,t,[s]),d={immediateRelease:!0,noResponse:!0};if(typeof r.session=="object"&&(d.session=r.session),u&&u.isConnected())try{u.write(p,d,i)}catch(f){typeof i=="function"?i(f,null):v8(f)}return}let o={killCursors:y8(t),cursors:[s]},c=n||{};typeof r.session=="object"&&(c.session=r.session),x8(e,t,o,c,(l,u)=>{if(l)return i(l);let p=u.message;if(p.cursorNotFound)return i(new m8("cursor killed or timed out"),null);if(!Array.isArray(p.documents)||p.documents.length===0)return i(new h8(`invalid killCursors result returned for cursor id ${s}`));i(null,p.documents[0])})}a(S8,"killCursors");UC.exports=S8});var WC=y((Zne,FC)=>{"use strict";var b8=Bt().GetMore,w8=ke().retrieveBSON,E8=q().MongoError,O8=q().MongoNetworkError,T8=w8(),pu=T8.Long,C8=ue().collectionNamespace,_8=U().maxWireVersion,A8=ue().applyCommonQueryOptions,N8=ls();function R8(e,t,r,n,i,s){i=i||{};let o=_8(e);function c(d,f){if(d)return s(d);let h=f.message;if(h.cursorNotFound)return s(new O8("cursor killed or timed out"),null);if(o<4){let v=typeof h.cursorId=="number"?pu.fromNumber(h.cursorId):h.cursorId;r.documents=h.documents,r.cursorId=v,s(null,null,h.connection);return}if(h.documents[0].ok===0)return s(new E8(h.documents[0]));let m=typeof h.documents[0].cursor.id=="number"?pu.fromNumber(h.documents[0].cursor.id):h.documents[0].cursor.id;r.documents=h.documents[0].cursor.nextBatch,r.cursorId=m,s(null,h.documents[0],h.connection)}if(a(c,"queryCallback"),o<4){let d=e.s.bson,f=new b8(d,t,r.cursorId,{numberToReturn:n}),h=A8({},r);e.s.pool.write(f,h,c);return}let u={getMore:r.cursorId instanceof pu?r.cursorId:pu.fromNumber(r.cursorId),collection:C8(t),batchSize:Math.abs(n)};r.cmd.tailable&&typeof r.cmd.maxAwaitTimeMS=="number"&&(u.maxTimeMS=r.cmd.maxAwaitTimeMS);let p=Object.assign({returnFieldSelector:null,documentsReturnedIn:"nextBatch"},i);r.session&&(p.session=r.session),N8(e,t,u,p,c)}a(R8,"getMore");FC.exports=R8});var VC=y((tie,HC)=>{"use strict";var I8=Bt().Query,zC=q().MongoError,$C=ue().getReadPreference,q8=ue().collectionNamespace,M8=ue().isSharded,P8=U().maxWireVersion,B8=ue().applyCommonQueryOptions,D8=ls(),L8=b().decorateWithExplain,j8=Bo().Explain;function U8(e,t,r,n,i,s){if(i=i||{},n.cursorId!=null)return s();if(r==null)return s(new zC(`command ${JSON.stringify(r)} does not return a cursor`));if(P8(e)<4){let u=F8(e,t,r,n,i),p=B8({},n);typeof u.documentsReturnedIn=="string"&&(p.documentsReturnedIn=u.documentsReturnedIn),e.s.pool.write(u,p,s);return}let o=$C(r,i),c=k8(e,t,r,n,i);try{let u=j8.fromOptions(i);u&&(c=L8(c,u))}catch(u){return s(u)}r.virtual=!1;let l=Object.assign({documentsReturnedIn:"firstBatch",numberToReturn:1,slaveOk:o.slaveOk()},i);r.readPreference&&(l.readPreference=o),n.session&&(l.session=n.session),D8(e,t,c,l,s)}a(U8,"query");function k8(e,t,r,n){n.batchSize=r.batchSize||n.batchSize;let i={find:q8(t)};r.query&&(r.query.$query?i.filter=r.query.$query:i.filter=r.query);let s=r.sort;if(Array.isArray(s)){let o={};if(s.length>0&&!Array.isArray(s[0])){let c=s[1];c==="asc"?c=1:c==="desc"&&(c=-1),o[s[0]]=c}else for(let c=0;c<s.length;c++){let l=s[c][1];l==="asc"?l=1:l==="desc"&&(l=-1),o[s[c][0]]=l}s=o}return typeof r.allowDiskUse=="boolean"&&(i.allowDiskUse=r.allowDiskUse),r.sort&&(i.sort=s),r.fields&&(i.projection=r.fields),r.hint&&(i.hint=r.hint),r.skip&&(i.skip=r.skip),r.limit&&(i.limit=r.limit),r.limit<0&&(i.limit=Math.abs(r.limit),i.singleBatch=!0),typeof r.batchSize=="number"&&(r.batchSize<0&&(r.limit!==0&&Math.abs(r.batchSize)<Math.abs(r.limit)&&(i.limit=Math.abs(r.batchSize)),i.singleBatch=!0),i.batchSize=Math.abs(r.batchSize)),r.comment&&(i.comment=r.comment),r.maxScan&&(i.maxScan=r.maxScan),r.maxTimeMS&&(i.maxTimeMS=r.maxTimeMS),r.min&&(i.min=r.min),r.max&&(i.max=r.max),typeof r.returnKey=="boolean"&&(i.returnKey=r.returnKey),typeof r.showDiskLoc=="boolean"&&(i.showRecordId=r.showDiskLoc),r.snapshot&&(i.snapshot=r.snapshot),r.tailable&&(i.tailable=r.tailable),r.oplogReplay&&(i.oplogReplay=r.oplogReplay),r.noCursorTimeout&&(i.noCursorTimeout=r.noCursorTimeout),r.awaitData&&(i.awaitData=r.awaitData),r.awaitdata&&(i.awaitData=r.awaitdata),r.partial&&(i.partial=r.partial),r.collation&&(i.collation=r.collation),r.readConcern&&(i.readConcern=r.readConcern),i}a(k8,"prepareFindCommand");function F8(e,t,r,n,i){i=i||{};let s=e.s.bson,o=$C(r,i);n.batchSize=r.batchSize||n.batchSize;let c=0;n.limit<0||n.limit!==0&&n.limit<n.batchSize||n.limit>0&&n.batchSize===0?c=n.limit:c=n.batchSize;let l=n.skip||0,u={};if(M8(e)&&o&&(u.$readPreference=o.toJSON()),r.sort&&(u.$orderby=r.sort),r.hint&&(u.$hint=r.hint),r.snapshot&&(u.$snapshot=r.snapshot),typeof r.returnKey<"u"&&(u.$returnKey=r.returnKey),r.maxScan&&(u.$maxScan=r.maxScan),r.min&&(u.$min=r.min),r.max&&(u.$max=r.max),typeof r.showDiskLoc<"u"&&(u.$showDiskLoc=r.showDiskLoc),r.comment&&(u.$comment=r.comment),r.maxTimeMS&&(u.$maxTimeMS=r.maxTimeMS),i.explain!==void 0&&(c=-Math.abs(r.limit||0),u.$explain=!0),u.$query=r.query,r.readConcern&&r.readConcern.level!=="local")throw new zC(`server find command does not support a readConcern level of ${r.readConcern.level}`);r.readConcern&&(r=Object.assign({},r),delete r.readConcern);let p=typeof i.serializeFunctions=="boolean"?i.serializeFunctions:!1,d=typeof i.ignoreUndefined=="boolean"?i.ignoreUndefined:!1,f=new I8(s,t,u,{numberToSkip:l,numberToReturn:c,pre32Limit:typeof r.limit<"u"?r.limit:void 0,checkKeys:!1,returnFieldSelector:r.fields,serializeFunctions:p,ignoreUndefined:d});return typeof r.tailable=="boolean"&&(f.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(f.oplogReplay=r.oplogReplay),typeof r.noCursorTimeout=="boolean"&&(f.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(f.awaitData=r.awaitData),typeof r.partial=="boolean"&&(f.partial=r.partial),f.slaveOk=o.slaveOk(),f}a(F8,"prepareLegacyFindQuery");HC.exports=U8});var Cm=y((nie,KC)=>{"use strict";var Tm=jC();KC.exports={insert:a(function(t,r,n,i,s){Tm(t,"insert","documents",r,n,i,s)},"insert"),update:a(function(t,r,n,i,s){Tm(t,"update","updates",r,n,i,s)},"update"),remove:a(function(t,r,n,i,s){Tm(t,"delete","deletes",r,n,i,s)},"remove"),killCursors:kC(),getMore:WC(),query:VC(),command:ls()}});var R=y((sie,YC)=>{"use strict";var W8=Bo().Explain,z8=q().MongoError,GC={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXECUTE_WITH_SELECTION:Symbol("EXECUTE_WITH_SELECTION"),NO_INHERIT_OPTIONS:Symbol("NO_INHERIT_OPTIONS"),EXPLAINABLE:Symbol("EXPLAINABLE")},Am=class Am{constructor(t){if(this.options=Object.assign({},t),this.hasAspect(GC.EXPLAINABLE))this.explain=W8.fromOptions(t);else if(this.options.explain!==void 0)throw new z8("explain is not supported on this command")}hasAspect(t){return this.constructor.aspects==null?!1:this.constructor.aspects.has(t)}set session(t){Object.assign(this.options,{session:t})}get session(){return this.options.session}clearSession(){delete this.options.session}get canRetryRead(){return!0}execute(){throw new TypeError("`execute` must be implemented for OperationBase subclasses")}};a(Am,"OperationBase");var _m=Am;function $8(e,t){return!Array.isArray(t)&&!(t instanceof Set)&&(t=[t]),t=new Set(t),Object.defineProperty(e,"aspects",{value:t,writable:!1}),t}a($8,"defineAspects");YC.exports={Aspect:GC,defineAspects:$8,OperationBase:_m}});var ps=y((aie,ZC)=>{"use strict";var H8=b().maybePromise,Nm=q().MongoError,XC=R().Aspect,V8=R().OperationBase,Rm=$e(),K8=q().isRetryableError,G8=U().maxWireVersion,Y8=U().isUnifiedTopology;function QC(e,t,r){if(e==null)throw new TypeError("This method requires a valid topology instance");if(!(t instanceof V8))throw new TypeError("This method requires a valid operation instance");return H8(e,r,n=>{if(Y8(e)&&e.shouldCheckForSessionSupport())return X8(e,t,n);let i,s;if(e.hasSessionSupport()){if(t.session==null)s=Symbol(),i=e.startSession({owner:s}),t.session=i;else if(t.session.hasEnded)return n(new Nm("Use of expired sessions is not permitted"))}else if(t.session)return n(new Nm("Current topology does not support sessions"));function o(c,l){i&&i.owner===s&&(i.endSession(),t.session===i&&t.clearSession()),n(c,l)}a(o,"executeCallback");try{t.hasAspect(XC.EXECUTE_WITH_SELECTION)?J8(e,t,o):t.execute(o)}catch(c){i&&i.owner===s&&(i.endSession(),t.session===i&&t.clearSession()),n(c)}})}a(QC,"executeOperation");function JC(e){return G8(e)>=6}a(JC,"supportsRetryableReads");function J8(e,t,r){let n=t.readPreference||Rm.primary,i=t.session&&t.session.inTransaction();if(i&&!n.equals(Rm.primary)){r(new Nm(`Read preference in a transaction must be primary, not: ${n.mode}`));return}let s={readPreference:n,session:t.session};function o(c,l){if(c==null)return r(null,l);if(!K8(c))return r(c);e.selectServer(s,(u,p)=>{if(u||!JC(p)){r(u,null);return}t.execute(p,r)})}a(o,"callbackWithRetry"),e.selectServer(s,(c,l)=>{if(c){r(c,null);return}let u=e.s.options.retryReads!==!1&&t.session&&!i&&JC(l)&&t.canRetryRead;if(t.hasAspect(XC.RETRYABLE)&&u){t.execute(l,o);return}t.execute(l,r)})}a(J8,"executeWithServerSelection");function X8(e,t,r){e.selectServer(Rm.primaryPreferred,n=>{if(n)return r(n);QC(e,t,r)})}a(X8,"selectServerForSessionSupport");ZC.exports=QC});var Gt=y((uie,n_)=>{"use strict";var Q8=Vt(),Z8=ke().retrieveBSON,qr=q().MongoError,e_=q().MongoNetworkError,e$=U().collationNotSupported,t$=$e(),r$=U().isUnifiedTopology,n$=ps(),i$=require("stream").Readable,s$=b().SUPPORTS,o$=b().MongoDBNamespace,a$=b().mergeOptions,c$=R().OperationBase,u$=Z8(),dr=u$.Long,t_={INIT:0,OPEN:1,CLOSED:2,GET_MORE:3};function ii(e,t,r){try{e(t,r)}catch(n){process.nextTick(function(){throw n})}}a(ii,"handleCallback");var Im=class Im extends i${constructor(t,r,n,i){super({objectMode:!0}),i=i||{},r instanceof c$&&(this.operation=r,r=this.operation.ns.toString(),i=this.operation.options,n=this.operation.cmd?this.operation.cmd:{}),this.pool=null,this.server=null,this.disconnectHandler=i.disconnectHandler,this.bson=t.s.bson,this.ns=r,this.namespace=o$.fromString(r),this.cmd=n,this.options=i,this.topology=t,this.cursorState={cursorId:null,cmd:n,documents:i.documents||[],cursorIndex:0,dead:!1,killed:!1,init:!1,notified:!1,limit:i.limit||n.limit||0,skip:i.skip||n.skip||0,batchSize:i.batchSize||n.batchSize||1e3,currentLimit:0,transforms:i.transforms,raw:i.raw||n&&n.raw},typeof i.session=="object"&&(this.cursorState.session=i.session);let s=t.s.options;typeof s.promoteLongs=="boolean"?this.cursorState.promoteLongs=s.promoteLongs:typeof i.promoteLongs=="boolean"&&(this.cursorState.promoteLongs=i.promoteLongs),typeof s.promoteValues=="boolean"?this.cursorState.promoteValues=s.promoteValues:typeof i.promoteValues=="boolean"&&(this.cursorState.promoteValues=i.promoteValues),typeof s.promoteBuffers=="boolean"?this.cursorState.promoteBuffers=s.promoteBuffers:typeof i.promoteBuffers=="boolean"&&(this.cursorState.promoteBuffers=i.promoteBuffers),typeof s.bsonRegExp=="boolean"?this.cursorState.bsonRegExp=s.bsonRegExp:typeof i.bsonRegExp=="boolean"&&(this.cursorState.bsonRegExp=i.bsonRegExp),s.reconnect&&(this.cursorState.reconnect=s.reconnect),this.logger=Q8("Cursor",s),typeof n=="number"?(this.cursorState.cursorId=dr.fromNumber(n),this.cursorState.lastCursorId=this.cursorState.cursorId):n instanceof dr&&(this.cursorState.cursorId=n,this.cursorState.lastCursorId=n),this.operation&&(this.operation.cursorState=this.cursorState)}setCursorBatchSize(t){this.cursorState.batchSize=t}cursorBatchSize(){return this.cursorState.batchSize}setCursorLimit(t){this.cursorState.limit=t}cursorLimit(){return this.cursorState.limit}setCursorSkip(t){this.cursorState.skip=t}cursorSkip(){return this.cursorState.skip}_next(t){fu(this,t)}clone(){let t=a$({},this.options);return delete t.session,this.topology.cursor(this.ns,this.cmd,t)}isDead(){return this.cursorState.dead===!0}isKilled(){return this.cursorState.killed===!0}isNotified(){return this.cursorState.notified===!0}bufferedCount(){return this.cursorState.documents.length-this.cursorState.cursorIndex}readBufferedDocuments(t){let r=this.cursorState.documents.length-this.cursorState.cursorIndex,n=t<r?t:r,i=this.cursorState.documents.slice(this.cursorState.cursorIndex,this.cursorState.cursorIndex+n);if(this.cursorState.transforms&&typeof this.cursorState.transforms.doc=="function")for(let s=0;s<i.length;s++)i[s]=this.cursorState.transforms.doc(i[s]);return this.cursorState.limit>0&&this.cursorState.currentLimit+i.length>this.cursorState.limit&&(i=i.slice(0,this.cursorState.limit-this.cursorState.currentLimit),this.kill()),this.cursorState.currentLimit=this.cursorState.currentLimit+i.length,this.cursorState.cursorIndex=this.cursorState.cursorIndex+i.length,i}kill(t){if(this.cursorState.dead=!0,this.cursorState.killed=!0,this.cursorState.documents=[],this.cursorState.cursorId==null||this.cursorState.cursorId.isZero()||this.cursorState.init===!1){t&&t(null,null);return}this.server.killCursors(this.ns,this.cursorState,t)}rewind(){this.cursorState.init&&(this.cursorState.dead||this.kill(),this.cursorState.currentLimit=0,this.cursorState.init=!1,this.cursorState.dead=!1,this.cursorState.killed=!1,this.cursorState.notified=!1,this.cursorState.documents=[],this.cursorState.cursorId=null,this.cursorState.cursorIndex=0)}_read(){if(this.s&&this.s.state===t_.CLOSED||this.isDead())return this.push(null);this._next((t,r)=>{if(t)return this.listeners("error")&&this.listeners("error").length>0&&this.emit("error",t),this.isDead()||this.close(),this.emit("end"),this.emit("finish");if(this.cursorState.streamOptions&&typeof this.cursorState.streamOptions.transform=="function"&&r!=null)return this.push(this.cursorState.streamOptions.transform(r));this.push(r),r===null&&this.isDead()&&this.once("end",()=>{this.close(),this.emit("finish")})})}_endSession(t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=this.cursorState.session;return n&&(t.force||n.owner===this)?(this.cursorState.session=void 0,this.operation&&this.operation.clearSession(),n.endSession(r),!0):(r&&r(),!1)}_getMore(t){this.logger.isDebug()&&this.logger.debug(`schedule getMore call for query [${JSON.stringify(this.query)}]`);let r=this.cursorState.batchSize;this.cursorState.limit>0&&this.cursorState.currentLimit+r>this.cursorState.limit&&(r=this.cursorState.limit-this.cursorState.currentLimit);let n=this.cursorState;this.server.getMore(this.ns,n,r,this.options,(i,s,o)=>{(i||n.cursorId&&n.cursorId.isZero())&&this._endSession(),t(i,s,o)})}_initializeCursor(t){let r=this;if(r$(r.topology)&&r.topology.shouldCheckForSessionSupport()){r.topology.selectServer(t$.primaryPreferred,o=>{if(o){t(o);return}this._initializeCursor(t)});return}function n(o,c){let l=r.cursorState;if((o||l.cursorId&&l.cursorId.isZero())&&r._endSession(),l.documents.length===0&&l.cursorId&&l.cursorId.isZero()&&!r.cmd.tailable&&!r.cmd.awaitData)return hu(r,t);t(o,c)}a(n,"done");let i=a((o,c)=>{if(o)return n(o);let l=c.message;if(Array.isArray(l.documents)&&l.documents.length===1){let p=l.documents[0];if(l.queryFailure)return n(new qr(p),null);if(!r.cmd.find||r.cmd.find&&r.cmd.virtual===!1){if(p.$err||p.errmsg)return n(new qr(p),null);if(p.cursor!=null&&typeof p.cursor!="string"){let d=p.cursor.id;return p.cursor.ns&&(r.ns=p.cursor.ns),r.cursorState.cursorId=typeof d=="number"?dr.fromNumber(d):d,r.cursorState.lastCursorId=r.cursorState.cursorId,r.cursorState.operationTime=p.operationTime,Array.isArray(p.cursor.firstBatch)&&(r.cursorState.documents=p.cursor.firstBatch),n(null,l)}}}let u=l.cursorId||0;r.cursorState.cursorId=u instanceof dr?u:dr.fromNumber(u),r.cursorState.documents=l.documents,r.cursorState.lastCursorId=l.cursorId,r.cursorState.transforms&&typeof r.cursorState.transforms.query=="function"&&(r.cursorState.documents=r.cursorState.transforms.query(l)),n(null,l)},"queryCallback");if(r.operation){r.logger.isDebug()&&r.logger.debug(`issue initial query [${JSON.stringify(r.cmd)}] with flags [${JSON.stringify(r.query)}]`),n$(r.topology,r.operation,(o,c)=>{if(o){n(o);return}if(r.server=r.operation.server,r.cursorState.init=!0,r.cursorState.cursorId!=null)return n();i(o,c)});return}let s={};return r.cursorState.session&&(s.session=r.cursorState.session),r.operation?s.readPreference=r.operation.readPreference:r.options.readPreference&&(s.readPreference=r.options.readPreference),r.topology.selectServer(s,(o,c)=>{if(o){let u=r.disconnectHandler;return u!=null?u.addObjectAndMethod("cursor",r,"next",[t],t):t(o)}if(r.server=c,r.cursorState.init=!0,e$(r.server,r.cmd))return t(new qr(`server ${r.server.name} does not support collation`));if(r.cursorState.cursorId!=null)return n();if(r.logger.isDebug()&&r.logger.debug(`issue initial query [${JSON.stringify(r.cmd)}] with flags [${JSON.stringify(r.query)}]`),r.cmd.find!=null){c.query(r.ns,r.cmd,r.cursorState,r.options,i);return}let l=Object.assign({session:r.cursorState.session},r.options);c.command(r.ns,r.cmd,l,i)})}};a(Im,"CoreCursor");var du=Im;s$.ASYNC_ITERATOR&&(du.prototype[Symbol.asyncIterator]=Xd().asyncIterator);function l$(e,t){if(e.pool&&e.pool.isDestroyed()){e.cursorState.killed=!0;let r=new e_(`connection to host ${e.pool.host}:${e.pool.port} was destroyed`);return r_(e,()=>t(r)),!0}return!1}a(l$,"isConnectionDead");function p$(e,t){return e.cursorState.dead&&!e.cursorState.killed?(e.cursorState.killed=!0,hu(e,t),!0):!1}a(p$,"isCursorDeadButNotkilled");function f$(e,t){return e.cursorState.dead&&e.cursorState.killed?(ii(t,new qr("cursor is dead")),!0):!1}a(f$,"isCursorDeadAndKilled");function d$(e,t){return e.cursorState.killed?(hu(e,t),!0):!1}a(d$,"isCursorKilled");function Do(e,t){e.cursorState.dead=!0,hu(e,t)}a(Do,"setCursorDeadAndNotified");function hu(e,t){r_(e,()=>ii(t,null,null))}a(hu,"setCursorNotified");function r_(e,t){if(e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,e.cursorState.session){e._endSession(t);return}return t()}a(r_,"_setCursorNotifiedImpl");function fu(e,t){if(e.cursorState.notified)return t(new Error("cursor is exhausted"));if(!d$(e,t)&&!p$(e,t)&&!f$(e,t)){if(!e.cursorState.init){if(!e.topology.isConnected(e.options)){if(e.topology._type==="server"&&!e.topology.s.options.reconnect)return t(new qr("no connection available"));if(e.disconnectHandler!=null){if(e.topology.isDestroyed())return t(new qr("Topology was destroyed"));e.disconnectHandler.addObjectAndMethod("cursor",e,"next",[t],t);return}}e._initializeCursor((r,n)=>{if(r||n===null){t(r,n);return}fu(e,t)});return}if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)e.kill(()=>Do(e,t));else if(e.cursorState.cursorIndex===e.cursorState.documents.length&&!dr.ZERO.equals(e.cursorState.cursorId)){if(e.cursorState.documents=[],e.cursorState.cursorIndex=0,e.topology.isDestroyed())return t(new e_("connection destroyed, not possible to instantiate cursor"));if(l$(e,t))return;e._getMore(function(r,n,i){if(r)return ii(t,r);if(e.connection=i,e.cursorState.documents.length===0&&e.cmd.tailable&&dr.ZERO.equals(e.cursorState.cursorId))return ii(t,new qr({message:"No more documents in tailed cursor",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData}));if(e.cursorState.documents.length===0&&e.cmd.tailable&&!dr.ZERO.equals(e.cursorState.cursorId))return fu(e,t);if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)return Do(e,t);fu(e,t)})}else{if(e.cursorState.documents.length===e.cursorState.cursorIndex&&e.cmd.tailable&&dr.ZERO.equals(e.cursorState.cursorId))return ii(t,new qr({message:"No more documents in tailed cursor",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData}));if(e.cursorState.documents.length===e.cursorState.cursorIndex&&dr.ZERO.equals(e.cursorState.cursorId))Do(e,t);else{if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit){e.kill(()=>Do(e,t));return}e.cursorState.currentLimit+=1;let r=e.cursorState.documents[e.cursorState.cursorIndex++];if(!r||r.$err){e.kill(()=>Do(e,function(){ii(t,new qr(r?r.$err:void 0))}));return}e.cursorState.transforms&&typeof e.cursorState.transforms.doc=="function"&&(r=e.cursorState.transforms.doc(r)),ii(t,null,r)}}}}a(fu,"nextFunction");n_.exports={CursorState:t_,CoreCursor:du}});var vu=y((pie,o_)=>{"use strict";var h$=require("util").inherits,oi=require("util").format,i_=require("events").EventEmitter,m$=$e(),y$=Vt(),g$=ke().debugOptions,v$=ke().retrieveBSON,x$=qC(),bn=q().MongoError,S$=q().MongoNetworkError,ai=Cm(),b$=Gt().CoreCursor,Sn=we(),w$=we().createCompressionInfo,E$=we().resolveClusterTime,O$=we().SessionMixins,T$=Zn().extractCommand,C$=U().relayEvents,qm=U().collationNotSupported,_$=U().makeClientMetadata,A$=["reconnect","reconnectTries","reconnectInterval","emitError","cursorFactory","host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","checkServerIdentity","socketTimeout","ssl","ca","crl","cert","key","rejectUnauthorized","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","servername"],N$=0,Lo=!1,jo={},tt=v$();function mu(e){return e.s.parent==null?e.id:e.s.parent.id}a(mu,"topologyId");var ae=a(function(e){e=e||{},i_.call(this),this.id=N$++,this.s={options:Object.assign({metadata:_$(e)},e),logger:y$("Server",e),Cursor:e.cursorFactory||b$,bson:e.bson||new tt([tt.Binary,tt.Code,tt.DBRef,tt.Decimal128,tt.Double,tt.Int32,tt.Long,tt.Map,tt.MaxKey,tt.MinKey,tt.ObjectId,tt.BSONRegExp,tt.Symbol,tt.Timestamp]),pool:null,disconnectHandler:e.disconnectHandler,monitoring:typeof e.monitoring=="boolean"?e.monitoring:!0,inTopology:!!e.parent,monitoringInterval:typeof e.monitoringInterval=="number"?e.monitoringInterval:5e3,compression:{compressors:w$(e)},parent:e.parent},this.s.parent||(this.s.clusterTime=null),this.ismaster=null,this.lastIsMasterMS=-1,this.monitoringProcessId=null,this.initialConnect=!0,this._type="server",this.lastUpdateTime=0,this.lastWriteDate=0,this.staleness=0},"Server");h$(ae,i_);Object.assign(ae.prototype,O$);Object.defineProperty(ae.prototype,"type",{enumerable:!0,get:function(){return this._type}});Object.defineProperty(ae.prototype,"parserType",{enumerable:!0,get:function(){return tt.native?"c++":"js"}});Object.defineProperty(ae.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}});Object.defineProperty(ae.prototype,"clientMetadata",{enumerable:!0,get:function(){return this.s.options.metadata}});Object.defineProperty(ae.prototype,"clusterTime",{enumerable:!0,set:function(e){let t=this.s.parent?this.s.parent:this.s;E$(t,e)},get:function(){return(this.s.parent?this.s.parent:this.s).clusterTime||null}});ae.enableServerAccounting=function(){Lo=!0,jo={}};ae.disableServerAccounting=function(){Lo=!1};ae.servers=function(){return jo};Object.defineProperty(ae.prototype,"name",{enumerable:!0,get:function(){return this.s.options.host+":"+this.s.options.port}});function yu(e,t,r,n,i,s){if(!e.s.pool.isConnected()&&e.s.options.reconnect&&e.s.disconnectHandler!=null&&!i.monitoring)return e.s.disconnectHandler.add(t,r,n,i,s),!0;if(!e.s.pool.isConnected())return s(new bn(oi("no connection available to server %s",e.name))),!0}a(yu,"disconnectHandler");function s_(e){return function(){if(!e.s.pool.isDestroyed()){e.emit("monitoring",e);var t=new Date().getTime();e.command("admin.$cmd",{ismaster:!0},{socketTimeout:typeof e.s.options.connectionTimeout!="number"?2e3:e.s.options.connectionTimeout,monitoring:!0},(r,n)=>{e.lastIsMasterMS=new Date().getTime()-t,!e.s.pool.isDestroyed()&&(n&&(e.ismaster=n.result),e.monitoringProcessId=setTimeout(s_(e),e.s.monitoringInterval))})}}}a(s_,"monitoringProcess");var si=a(function(e,t){return function(r,n){if(e.s.logger.isInfo()){var i=r instanceof bn?JSON.stringify(r):{};e.s.logger.info(oi("server %s fired event %s out with message %s",e.name,t,i))}if(t==="connect"){if(e.initialConnect=!1,e.ismaster=n.ismaster,e.lastIsMasterMS=n.lastIsMasterMS,n.agreedCompressor&&(e.s.pool.options.agreedCompressor=n.agreedCompressor),n.zlibCompressionLevel&&(e.s.pool.options.zlibCompressionLevel=n.zlibCompressionLevel),n.ismaster.$clusterTime){let s=n.ismaster.$clusterTime;e.clusterTime=s}e.ismaster.msg==="isdbgrid"&&(e._type="mongos"),e.s.monitoring&&(e.monitoringProcessId=setTimeout(s_(e),e.s.monitoringInterval)),Sn.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:Sn.getTopologyType(e)}),e.s.inTopology||Sn.emitTopologyDescriptionChanged(e,{topologyType:"Single",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:Sn.getTopologyType(e)}]}),e.s.logger.isInfo()&&e.s.logger.info(oi("server %s connected with ismaster [%s]",e.name,JSON.stringify(e.ismaster))),e.emit("connect",e)}else if(t==="error"||t==="parseError"||t==="close"||t==="timeout"||t==="reconnect"||t==="attemptReconnect"||t==="reconnectFailed"){if(Lo&&["close","timeout","error","parseError","reconnectFailed"].indexOf(t)!==-1&&(e.s.inTopology||e.emit("topologyOpening",{topologyId:e.id}),delete jo[e.id]),t==="close"&&Sn.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:"Unknown"}),t==="reconnectFailed"){e.emit("reconnectFailed",r),e.listeners("error").length>0&&e.emit("error",r);return}if(["disconnected","connecting"].indexOf(e.s.pool.state)!==-1&&e.initialConnect&&["close","timeout","error","parseError"].indexOf(t)!==-1)return e.initialConnect=!1,e.emit("error",new S$(oi("failed to connect to server [%s] on first connect [%s]",e.name,r)));if(t==="reconnect")return Sn.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:Sn.getTopologyType(e)}),e.emit(t,e);e.emit(t,r)}}},"eventHandler");ae.prototype.connect=function(e){var t=this;if(e=e||{},Lo&&(jo[this.id]=this),t.s.pool&&!t.s.pool.isDisconnected()&&!t.s.pool.isDestroyed())throw new bn(oi("server instance in invalid state %s",t.s.pool.state));t.s.pool=new x$(this,Object.assign(t.s.options,e,{bson:this.s.bson})),t.s.pool.on("close",si(t,"close")),t.s.pool.on("error",si(t,"error")),t.s.pool.on("timeout",si(t,"timeout")),t.s.pool.on("parseError",si(t,"parseError")),t.s.pool.on("connect",si(t,"connect")),t.s.pool.on("reconnect",si(t,"reconnect")),t.s.pool.on("reconnectFailed",si(t,"reconnectFailed")),C$(t.s.pool,t,["commandStarted","commandSucceeded","commandFailed"]),t.s.inTopology||this.emit("topologyOpening",{topologyId:mu(t)}),t.emit("serverOpening",{topologyId:mu(t),address:t.name}),t.s.pool.connect()};ae.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};ae.prototype.getDescription=function(){var e=this.ismaster||{},t={type:Sn.getTopologyType(this),address:this.name};return e.hosts&&(t.hosts=e.hosts),e.arbiters&&(t.arbiters=e.arbiters),e.passives&&(t.passives=e.passives),e.setName&&(t.setName=e.setName),t};ae.prototype.lastIsMaster=function(){return this.ismaster};ae.prototype.unref=function(){this.s.pool.unref()};ae.prototype.isConnected=function(){return this.s.pool?this.s.pool.isConnected():!1};ae.prototype.isDestroyed=function(){return this.s.pool?this.s.pool.isDestroyed():!1};function gu(e){if(!e.s.pool)return new bn("server instance is not connected");if(e.s.pool.isDestroyed())return new bn("server instance pool was destroyed")}a(gu,"basicWriteValidations");function R$(e,t){if(gu(e,t),t.readPreference&&!(t.readPreference instanceof m$))throw new Error("readPreference must be an instance of ReadPreference")}a(R$,"basicReadValidations");ae.prototype.command=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var s=R$(i,r);if(s)return n(s);if(r=Object.assign({},r,{wireProtocolCommand:!1}),i.s.logger.isDebug()){let o=T$(t);i.s.logger.debug(oi("executing command [%s] against %s",JSON.stringify({ns:e,cmd:o.shouldRedact?`${o.name} details REDACTED`:t,options:g$(A$,r)}),i.name))}if(!yu(i,"command",e,t,r,n)){if(qm(this,t))return n(new bn(`server ${this.name} does not support collation`));ai.command(i,e,t,r,n)}};ae.prototype.query=function(e,t,r,n,i){ai.query(this,e,t,r,n,i)};ae.prototype.getMore=function(e,t,r,n,i){ai.getMore(this,e,t,r,n,i)};ae.prototype.killCursors=function(e,t,r){ai.killCursors(this,e,t,r)};ae.prototype.insert=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var s=gu(i,r);if(s)return n(s);if(!yu(i,"insert",e,t,r,n))return t=Array.isArray(t)?t:[t],ai.insert(i,e,t,r,n)};ae.prototype.update=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var s=gu(i,r);if(s)return n(s);if(!yu(i,"update",e,t,r,n))return qm(this,r)?n(new bn(`server ${this.name} does not support collation`)):(t=Array.isArray(t)?t:[t],ai.update(i,e,t,r,n))};ae.prototype.remove=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var s=gu(i,r);if(s)return n(s);if(!yu(i,"remove",e,t,r,n))return qm(this,r)?n(new bn(`server ${this.name} does not support collation`)):(t=Array.isArray(t)?t:[t],ai.remove(i,e,t,r,n))};ae.prototype.cursor=function(e,t,r){r=r||{};let n=r.topology||this;var i=r.cursorFactory||this.s.Cursor;return new i(n,e,t,r)};ae.prototype.equals=function(e){return typeof e=="string"?this.name.toLowerCase()===e.toLowerCase():e.name?this.name.toLowerCase()===e.name.toLowerCase():!1};ae.prototype.connections=function(){return this.s.pool.allConnections()};ae.prototype.selectServer=function(e,t,r){typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0,t={}),typeof t=="function"&&(r=t,t=e,e=void 0),r(null,this)};var I$=["close","error","timeout","parseError","connect"];ae.prototype.destroy=function(e,t){if(this._destroyed){typeof t=="function"&&t(null,null);return}typeof e=="function"&&(t=e,e={}),e=e||{};var r=this;if(Lo&&delete jo[this.id],this.monitoringProcessId&&clearTimeout(this.monitoringProcessId),!r.s.pool||this._destroyed){this._destroyed=!0,typeof t=="function"&&t(null,null);return}this._destroyed=!0,e.emitClose&&r.emit("close",r),e.emitDestroy&&r.emit("destroy",r),I$.forEach(function(n){r.s.pool.removeAllListeners(n)}),r.listeners("serverClosed").length>0&&r.emit("serverClosed",{topologyId:mu(r),address:r.name}),r.listeners("topologyClosed").length>0&&!r.s.inTopology&&r.emit("topologyClosed",{topologyId:mu(r)}),r.s.logger.isDebug()&&r.s.logger.debug(oi("destroy called on server %s",r.name)),this.s.pool.destroy(e.force,t)};o_.exports=ae});var f_=y((die,p_)=>{"use strict";var q$=require("util").inherits,a_=require("util").format,M$=we().diff,u_=require("events").EventEmitter,P$=Vt(),wn=$e(),ci=q().MongoError,xu=pt().Buffer,pe={Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown"},rt={Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown"},Ct=a(function(e){e=e||{},u_.call(this),this.topologyType=e.setName?pe.ReplicaSetNoPrimary:pe.Unknown,this.setName=e.setName,this.set={},this.id=e.id,this.setName=e.setName,this.logger=e.logger||P$("ReplSet",e),this.index=0,this.acceptableLatency=e.acceptableLatency||15,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS||1e4,this.primary=null,this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.maxElectionId=null,this.maxSetVersion=0,this.replicasetDescription={topologyType:"Unknown",servers:[]},this.logicalSessionTimeoutMinutes=void 0},"ReplSetState");q$(Ct,u_);Ct.prototype.hasPrimaryAndSecondary=function(){return this.primary!=null&&this.secondaries.length>0};Ct.prototype.hasPrimaryOrSecondary=function(){return this.hasPrimary()||this.hasSecondary()};Ct.prototype.hasPrimary=function(){return this.primary!=null};Ct.prototype.hasSecondary=function(){return this.secondaries.length>0};Ct.prototype.get=function(e){for(var t=this.allServers(),r=0;r<t.length;r++)if(t[r].name.toLowerCase()===e.toLowerCase())return t[r];return null};Ct.prototype.allServers=function(e){e=e||{};var t=this.primary?[this.primary]:[];return t=t.concat(this.secondaries),e.ignoreArbiters||(t=t.concat(this.arbiters)),t=t.concat(this.passives),t};Ct.prototype.destroy=function(e,t){let r=this.secondaries.concat(this.arbiters).concat(this.passives).concat(this.ghosts);this.primary&&r.push(this.primary);let n=r.length,i=a(()=>{n--,!(n>0)&&(this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.primary=null,fs(this),typeof t=="function"&&t(null,null))},"serverDestroyed");if(n===0){i();return}r.forEach(s=>s.destroy(e,i))};Ct.prototype.remove=function(e,t){t=t||{};var r=e.name.toLowerCase(),n=this.primary?[this.primary]:[];n=n.concat(this.secondaries),n=n.concat(this.arbiters),n=n.concat(this.passives);for(var i=0;i<n.length;i++)if(!t.force&&n[i].equals(e)&&n[i].isConnected&&n[i].isConnected())return;this.set[r]&&(this.set[r].type=rt.Unknown,this.set[r].electionId=null,this.set[r].setName=null,this.set[r].setVersion=null);var s=null;this.primary&&this.primary.equals(e)&&(this.primary=null,this.topologyType=pe.ReplicaSetNoPrimary,s="primary"),s=dt(e,this.secondaries)?"secondary":s,s=dt(e,this.arbiters)?"arbiter":s,s=dt(e,this.passives)?"secondary":s,dt(e,this.ghosts),dt(e,this.unknownServers),this.unknownServers.push(r),s&&this.emit("left",s,e)};var c_=a(e=>e.arbiterOnly&&e.setName,"isArbiter");Ct.prototype.update=function(e){var t=this;let r=e.lastIsMaster();r&&r.isWritablePrimary&&(r.ismaster=r.isWritablePrimary);var n=e.name.toLowerCase();if(r){var i=Array.isArray(r.hosts)?r.hosts:[];i=i.concat(Array.isArray(r.arbiters)?r.arbiters:[]),i=i.concat(Array.isArray(r.passives)?r.passives:[]),i=i.map(function(v){return v.toLowerCase()});for(var s=0;s<i.length;s++)this.unknownServers.indexOf(i[s])===-1&&(!this.set[i[s]]||this.set[i[s]].type===rt.Unknown)&&this.unknownServers.push(i[s].toLowerCase()),this.set[i[s]]||(this.set[i[s]]={type:rt.Unknown,electionId:null,setName:null,setVersion:null})}if(!r&&!Su(r,e,this.unknownServers))return t.set[n]={type:rt.Unknown,setVersion:null,electionId:null,setName:null},t.set[n].type=rt.Unknown,t.set[n].electionId=r&&r.electionId,t.set[n].setName=r&&r.setName,t.set[n].setVersion=r&&r.setVersion,t.unknownServers.indexOf(e.name)===-1&&t.unknownServers.push(n),!1;if(r.logicalSessionTimeoutMinutes!==void 0&&!c_(r)&&(t.logicalSessionTimeoutMinutes===void 0||r.logicalSessionTimeoutMinutes===null?t.logicalSessionTimeoutMinutes=r.logicalSessionTimeoutMinutes:t.logicalSessionTimeoutMinutes=Math.min(t.logicalSessionTimeoutMinutes,r.logicalSessionTimeoutMinutes)),r&&r.msg==="isdbgrid")return this.primary&&this.primary.name===n&&(this.primary=null,this.topologyType=pe.ReplicaSetNoPrimary),!1;if(r.isreplicaset)return t.set[n]={type:rt.RSGhost,setVersion:null,electionId:null,setName:r.setName},this.primary&&this.primary.name===n&&(this.primary=null),this.topologyType=this.primary?pe.ReplicaSetWithPrimary:pe.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),!1;if(r.setName&&r.hidden||r.setName&&!r.ismaster&&!r.secondary&&!r.arbiterOnly&&!r.passive)return t.set[n]={type:rt.RSOther,setVersion:null,electionId:null,setName:r.setName},this.topologyType=this.primary?pe.ReplicaSetWithPrimary:pe.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),!1;if(r&&r.ismaster&&!r.setName)return this.remove(e,{force:!0}),!1;if(r&&!r.ismaster&&!r.secondary&&!r.arbiterOnly)return this.remove(e,{force:!0}),!1;if(r.me&&r.me.toLowerCase()!==n)return this.logger.isWarn()&&this.logger.warn(a_("the seedlist server was removed due to its address %s not matching its ismaster.me address %s",e.name,r.me)),delete this.set[n],dt(e,t.unknownServers),e.destroy({force:!0}),this.primary&&!this.primary.equals(e)?this.topologyType=pe.ReplicaSetWithPrimary:this.topologyType=pe.ReplicaSetNoPrimary,!this.primary&&r.primary&&(this.set[r.primary.toLowerCase()]={type:rt.PossiblePrimary,setName:null,electionId:null,setVersion:null}),!1;if(!this.primary&&r.ismaster&&r.setName){var o=e.lastIsMaster().electionId;if(this.setName&&this.setName!==r.setName)return this.topologyType=pe.ReplicaSetNoPrimary,new ci(a_("setName from ismaster does not match provided connection setName [%s] != [%s]",r.setName,this.setName));if(!this.maxElectionId&&o)this.maxElectionId=o;else if(this.maxElectionId&&o){var c=Dm(this.maxElectionId,o),l=e.lastIsMaster().setVersion;if(c===1)return this.topologyType=pe.ReplicaSetNoPrimary,!1;if(c===0&&l&&l<this.maxSetVersion)return this.topologyType=pe.ReplicaSetNoPrimary,!1;this.maxSetVersion=l,this.maxElectionId=o}var u=r.hosts.map(function(v){return v.toLowerCase()}),p=u.indexOf(n);return p!==-1?(t.primary=e,t.set[n]={type:rt.RSPrimary,setVersion:r.setVersion,electionId:r.electionId,setName:r.setName},this.topologyType=pe.ReplicaSetWithPrimary,r.setName&&(this.setName=r.setName),dt(e,t.unknownServers),dt(e,t.secondaries),dt(e,t.passives),t.emit("joined","primary",e)):this.topologyType=pe.ReplicaSetNoPrimary,fs(t),!0}else if(r.ismaster&&r.setName){var d=t.set[t.primary.name.toLowerCase()].electionId,f=t.set[t.primary.name.toLowerCase()].setVersion,h=t.set[t.primary.name.toLowerCase()].setName;o=e.lastIsMaster().electionId,l=e.lastIsMaster().setVersion;var m=e.lastIsMaster().setName;if(this.primary.equals(e)&&h===m)return!1;if(h&&h!==m)return this.primary.equals(e)?this.topologyType=pe.ReplicaSetNoPrimary:this.topologyType=pe.ReplicaSetWithPrimary,!1;if(d&&o){if(c=Dm(d,o),c===1)return!1;if(c===0&&f>l)return!1}else if(!d&&o&&l&&l<this.maxSetVersion)return!1;if(!this.maxElectionId&&o)this.maxElectionId=o;else if(this.maxElectionId&&o){if(c=Dm(this.maxElectionId,o),c===1)return!1;if(c===0&&f&&l){if(l<this.maxSetVersion)return!1}else if(l<this.maxSetVersion)return!1;this.maxElectionId=o,this.maxSetVersion=l}else this.maxSetVersion=l;return t.set[t.primary.name.toLowerCase()]={type:rt.Unknown,setVersion:null,electionId:null,setName:null},t.emit("left","primary",this.primary),t.primary.destroy({force:!0}),t.primary=e,t.set[n]={type:rt.RSPrimary,setVersion:r.setVersion,electionId:r.electionId,setName:r.setName},this.topologyType=pe.ReplicaSetWithPrimary,r.setName&&(this.setName=r.setName),dt(e,t.unknownServers),dt(e,t.secondaries),dt(e,t.passives),t.emit("joined","primary",e),fs(t),!0}return!this.primary&&r.primary&&(t.set[r.primary.toLowerCase()]={type:rt.PossiblePrimary,setVersion:null,electionId:null,setName:null}),r.secondary&&r.setName&&!Su(r,e,this.secondaries)&&this.setName&&this.setName===r.setName?(Bm(t,rt.RSSecondary,r,e,this.secondaries),this.topologyType=this.primary?pe.ReplicaSetWithPrimary:pe.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),dt(e,t.unknownServers),this.primary&&this.primary.name.toLowerCase()===n&&(e.destroy({force:!0}),this.primary=null,t.emit("left","primary",e)),t.emit("joined","secondary",e),fs(t),!0):c_(r)&&!Su(r,e,this.arbiters)&&this.setName&&this.setName===r.setName?(Bm(t,rt.RSArbiter,r,e,this.arbiters),this.topologyType=this.primary?pe.ReplicaSetWithPrimary:pe.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),dt(e,t.unknownServers),t.emit("joined","arbiter",e),fs(t),!0):r.passive&&r.setName&&!Su(r,e,this.passives)&&this.setName&&this.setName===r.setName?(Bm(t,rt.RSSecondary,r,e,this.passives),this.topologyType=this.primary?pe.ReplicaSetWithPrimary:pe.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),dt(e,t.unknownServers),this.primary&&this.primary.name.toLowerCase()===n&&(e.destroy({force:!0}),this.primary=null,t.emit("left","primary",e)),t.emit("joined","secondary",e),fs(t),!0):this.set[n]&&this.set[n].type===rt.RSPrimary?(t.emit("left","primary",this.primary),this.primary.destroy({force:!0}),this.primary=null,this.topologyType=pe.ReplicaSetNoPrimary,!1):(this.topologyType=this.primary?pe.ReplicaSetWithPrimary:pe.ReplicaSetNoPrimary,!1)};Ct.prototype.updateServerMaxStaleness=function(e,t){for(var r=0,n=0;n<this.secondaries.length;n++)r=Math.max(r,this.secondaries[n].lastWriteDate);e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&this.hasPrimary()?e.staleness=e.lastUpdateTime-e.lastWriteDate-(this.primary.lastUpdateTime-this.primary.lastWriteDate)+t:e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&(e.staleness=r-e.lastWriteDate+t)};Ct.prototype.updateSecondariesMaxStaleness=function(e){for(var t=0;t<this.secondaries.length;t++)this.updateServerMaxStaleness(this.secondaries[t],e)};Ct.prototype.pickServer=function(e){if(e=e||wn.primary,e.preference==="primary"&&e.maxStalenessSeconds!=null)return new ci("primary readPreference incompatible with maxStalenessSeconds");var t=this.primary?[this.primary]:[];if(t=t.concat(this.secondaries),e.maxStalenessSeconds!=null){for(var r=0;r<t.length;r++)if(t[r].ismaster.maxWireVersion<5)return new ci("maxStalenessSeconds not supported by at least one of the replicaset members")}if(e.preference==="nearest"&&e.maxStalenessSeconds==null)return Pm(this,e);if(e.preference==="nearest"&&e.maxStalenessSeconds!=null)return Mm(this,e);var n=this.secondaries;if(e.equals(wn.secondary)&&n.length===0)return new ci("no secondary server available");if(e.equals(wn.secondaryPreferred)&&n.length===0&&this.primary==null)return new ci("no secondary or primary server available");if(e.equals(wn.primary)&&this.primary==null)return new ci("no primary server available");if(e.equals(wn.secondaryPreferred)||e.equals(wn.secondary)){if(n.length>0&&e.maxStalenessSeconds==null){var i=Pm(this,e);if(i)return i}else if(n.length>0&&e.maxStalenessSeconds!=null&&(i=Mm(this,e),i))return i;return e.equals(wn.secondaryPreferred)?this.primary:null}if(e.equals(wn.primaryPreferred)){if(i=null,this.primary)return this.primary;if(n.length>0&&e.maxStalenessSeconds==null?i=Pm(this,e):n.length>0&&e.maxStalenessSeconds!=null&&(i=Mm(this,e)),i)return i}return this.primary};var l_=a(function(e,t){if(e.tags==null)return t;for(var r=[],n=Array.isArray(e.tags)?e.tags:[e.tags],i=0;i<n.length;i++)for(var s=n[i],o=0;o<t.length;o++){var c=t[o].lastIsMaster().tags||{},l=!0;for(var u in s)c[u]!==s[u]&&(l=!1);l&&r.push(t[o])}return r},"filterByTags");function Mm(e,t){var r=[],n=t.maxStalenessSeconds*1e3;if(n<90*1e3)return new ci("maxStalenessSeconds must be set to at least 90 seconds");e.primary&&t.preference!=="secondary"&&t.preference!=="secondaryPreferred"&&r.push(e.primary);for(var i=0;i<e.secondaries.length;i++)r.push(e.secondaries[i]);if(e.primary&&r.length===0&&t.preference!=="secondaryPreferred"&&r.push(e.primary),r=l_(t,r),r=r.filter(function(o){return o.staleness<=n}),r.sort(function(o,c){return o.lastIsMasterMS-c.lastIsMasterMS}),r.length===0)return null;e.index=e.index%r.length;var s=r[e.index];return e.index=e.index+1,s}a(Mm,"pickNearestMaxStalenessSeconds");function Pm(e,t){var r=[];e.primary&&t.preference!=="secondary"&&t.preference!=="secondaryPreferred"&&r.push(e.primary);for(var n=0;n<e.secondaries.length;n++)r.push(e.secondaries[n]);r.length===0&&e.primary&&t.preference!=="secondaryPreferred"&&r.push(e.primary),r=l_(t,r),r.sort(function(o,c){return o.lastIsMasterMS-c.lastIsMasterMS});var i=r.length>0?r[0].lastIsMasterMS:0;if(r=r.filter(function(o){return o.lastIsMasterMS<=i+e.acceptableLatency}),r.length===0)return null;e.index=e.index%r.length;var s=r[e.index];return e.index=e.index+1,s}a(Pm,"pickNearest");function Su(e,t,r){for(var n=0;n<r.length;n++)if(r[n]&&r[n].name&&r[n].name.toLowerCase()===t.name.toLowerCase())return!0;return!1}a(Su,"inList");function Bm(e,t,r,n,i){var s=n.name.toLowerCase();e.set[s].type=t,e.set[s].electionId=r&&r.electionId,e.set[s].setName=r&&r.setName,e.set[s].setVersion=r&&r.setVersion,i.push(n)}a(Bm,"addToList");function Dm(e,t){var r=xu.from(e.toHexString(),"hex"),n=xu.from(t.toHexString(),"hex");if(r===n)return 0;if(typeof xu.compare=="function")return xu.compare(r,n);for(var i=r.length,s=n.length,o=Math.min(i,s),c=0;c<o&&r[c]===n[c];c++);return c!==o&&(i=r[c],s=n[c]),i<s?-1:s<i?1:0}a(Dm,"compareObjectIds");function dt(e,t){for(var r=0;r<t.length;r++){if(t[r].equals&&t[r].equals(e))return t.splice(r,1),!0;if(typeof t[r]=="string"&&t[r].toLowerCase()===e.name.toLowerCase())return t.splice(r,1),!0}return!1}a(dt,"removeFrom");function fs(e){if(e.listeners("topologyDescriptionChanged").length>0){var t="Unknown",r=e.setName;e.hasPrimaryAndSecondary()?t="ReplicaSetWithPrimary":!e.hasPrimary()&&e.hasSecondary()&&(t="ReplicaSetNoPrimary");var n={topologyType:t,setName:r,servers:[]};if(e.hasPrimary()){var i=e.primary.getDescription();i.type="RSPrimary",n.servers.push(i)}n.servers=n.servers.concat(e.secondaries.map(function(c){var l=c.getDescription();return l.type="RSSecondary",l})),n.servers=n.servers.concat(e.arbiters.map(function(c){var l=c.getDescription();return l.type="RSArbiter",l})),n.servers=n.servers.concat(e.passives.map(function(c){var l=c.getDescription();return l.type="RSSecondary",l}));var s=M$(e.replicasetDescription,n),o={topologyId:e.id,previousDescription:e.replicasetDescription,newDescription:n,diff:s};e.emit("topologyDescriptionChanged",o),e.replicasetDescription=n}}a(fs,"emitTopologyDescriptionChanged");p_.exports=Ct});var E_=y((mie,w_)=>{"use strict";var B$=require("util").inherits,Pr=require("util").format,m_=require("events").EventEmitter,Mr=$e(),D$=Gt().CoreCursor,L$=ke().retrieveBSON,j$=Vt(),Yt=q().MongoError,Eu=vu(),U$=f_(),ds=we().Timeout,y_=we().Interval,k$=we().SessionMixins,g_=we().isRetryableWritesSupported,v_=U().relayEvents,nt=L$(),F$=we().getMMAPError,W$=U().makeClientMetadata,x_=we().legacyIsRetryableWriteError,S_=b().now,z$=b().calculateDurationInMs,ui="disconnected",li="connecting",bu="connected",_t="unreferenced",Re="destroyed";function On(e,t){var r={disconnected:[li,Re,ui],connecting:[li,Re,bu,ui],connected:[bu,ui,Re,_t],unreferenced:[_t,Re],destroyed:[Re]},n=r[e.state];n&&n.indexOf(t)!==-1?e.state=t:e.s.logger.error(Pr("Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]",e.id,e.state,t,n))}a(On,"stateTransition");var $$=1,wu=["connect","close","error","timeout","parseError"],Ie=a(function(e,t){var r=this;if(t=t||{},!Array.isArray(e))throw new Yt("seedlist must be an array");if(e.length===0)throw new Yt("seedlist must contain at least one entry");e.forEach(function(o){if(typeof o.host!="string"||typeof o.port!="number")throw new Yt("seedlist entry must contain a host and port")}),m_.call(this),this.id=$$++;var n=t.localThresholdMS||15;t.acceptableLatency&&(n=t.acceptableLatency);var i=j$("ReplSet",t);this.s={options:Object.assign({metadata:W$(t)},t),bson:t.bson||new nt([nt.Binary,nt.Code,nt.DBRef,nt.Decimal128,nt.Double,nt.Int32,nt.Long,nt.Map,nt.MaxKey,nt.MinKey,nt.ObjectId,nt.BSONRegExp,nt.Symbol,nt.Timestamp]),Cursor:t.cursorFactory||D$,logger:i,seedlist:e,replicaSetState:new U$({id:this.id,setName:t.setName,acceptableLatency:n,heartbeatFrequencyMS:t.haInterval?t.haInterval:1e4,logger:i}),connectingServers:[],haInterval:t.haInterval?t.haInterval:1e4,minHeartbeatFrequencyMS:500,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:typeof t.debug=="boolean"?t.debug:!1},this.s.replicaSetState.on("topologyDescriptionChanged",function(o){r.emit("topologyDescriptionChanged",o)}),this.s.logger.isWarn()&&this.s.options.socketTimeout!==0&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(Pr("warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts",this.s.options.socketTimeout,this.s.haInterval));var s=["joined","left"];s.forEach(function(o){r.s.replicaSetState.on(o,function(c,l){r.emit(o,c,l)})}),this.initialConnectState={connect:!1,fullsetup:!1,all:!1},this.state=ui,this.haTimeoutId=null,this.ismaster=null,this.intervalIds=[],this.clusterTime=null},"ReplSet");B$(Ie,m_);Object.assign(Ie.prototype,k$);Object.defineProperty(Ie.prototype,"type",{enumerable:!0,get:function(){return"replset"}});Object.defineProperty(Ie.prototype,"parserType",{enumerable:!0,get:function(){return nt.native?"c++":"js"}});Object.defineProperty(Ie.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.s.replicaSetState.logicalSessionTimeoutMinutes||null}});function Lm(e){e.s.replicaSetState.hasPrimaryAndSecondary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute():e.s.replicaSetState.hasPrimary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute({executePrimary:!0}):e.s.replicaSetState.hasSecondary()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute({executeSecondary:!0})}a(Lm,"rexecuteOperations");function d_(e,t,r){if(t.length===0)return r();var n=t.length,i=null;function s(){n=n-1,n===0&&r(i)}a(s,"done");var o=a(function(u,p){return function(d){var f=this;if(u.state===Re||u.state===_t)return this.destroy({force:!0}),s();if(p==="connect"){var h=u.s.replicaSetState.update(f);if(h){f.lastIsMaster()&&f.lastIsMaster().ismaster&&(u.ismaster=f.lastIsMaster());for(let m=0;m<wu.length;m++)f.removeAllListeners(wu[m]);f.on("error",En(u,"error")),f.on("close",En(u,"close")),f.on("timeout",En(u,"timeout")),f.on("parseError",En(u,"parseError")),jm(f.lastIsMaster().me,u,{}),Lm(u)}else f.destroy({force:!0})}else p==="error"&&(i=d);Lm(u),s()}},"_handleEvent");function c(u,p){setTimeout(function(){if(e.state===Re||e.state===_t)return;let d=e.s.connectingServers.findIndex(h=>h.name===u);if(d>=0)return e.s.connectingServers[d].destroy({force:!0}),e.s.connectingServers.splice(d,1),s();var f=new Eu(Object.assign({},e.s.options,{host:u.split(":")[0],port:parseInt(u.split(":")[1],10),reconnect:!1,monitoring:!1,parent:e}));f.once("connect",o(e,"connect")),f.once("close",o(e,"close")),f.once("timeout",o(e,"timeout")),f.once("error",o(e,"error")),f.once("parseError",o(e,"parseError")),f.on("serverOpening",h=>e.emit("serverOpening",h)),f.on("serverDescriptionChanged",h=>e.emit("serverDescriptionChanged",h)),f.on("serverClosed",h=>e.emit("serverClosed",h)),v_(f,e,["commandStarted","commandSucceeded","commandFailed"]),e.s.connectingServers.push(f),f.connect(e.s.connectOptions)},p)}a(c,"execute");for(var l=0;l<t.length;l++)c(t[l],l)}a(d_,"connectNewServers");var H$=a(function(e,t,r){var n=new Date().getTime();ko(e,"serverHeartbeatStarted",{connectionId:t.name}),t.command("admin.$cmd",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(i,s){if(e.state===Re||e.state===_t)return t.destroy({force:!0}),r(i,s);var o=new Date().getTime()-n;t.lastUpdateTime=S_(),i?(ko(e,"serverHeartbeatFailed",{durationMS:o,failure:i,connectionId:t.name}),e.s.replicaSetState.remove(t)):(t.ismaster=s.result,t.ismaster.lastWrite&&t.ismaster.lastWrite.lastWriteDate&&(t.lastWriteDate=t.ismaster.lastWrite.lastWriteDate.getTime()),t.lastIsMasterMS===-1?t.lastIsMasterMS=o:t.lastIsMasterMS&&(t.lastIsMasterMS=.2*o+(1-.2)*t.lastIsMasterMS),e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),ko(e,"serverHeartbeatSucceeded",{durationMS:o,reply:s.result,connectionId:t.name})),e.s.replicaSetState.updateServerMaxStaleness(t,e.s.haInterval),r(i,s)})},"pingServer"),jm=a(function(e,t,r){if(!r.haInterval){for(var n=0;n<t.intervalIds.length;n++)if(t.intervalIds[n].__host===e)return}var i=r.haInterval?ds:y_,s=r.haInterval?r.haInterval:t.s.haInterval,o=new i(function(){if(t.state===Re||t.state===_t){o.stop();return}var c=t.s.replicaSetState.get(e);if(c)return H$(t,c,function(l){if(!l){if(t.state===Re||t.state===_t){o.stop();return}t.intervalIds=t.intervalIds.filter(function(u){return u.isRunning()}),i===ds?t.state===li&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(On(t,bu),process.nextTick(function(){t.emit("connect",t)}),Um(t,{})):t.state===ui&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(On(t,li),Lm(t),process.nextTick(function(){t.emit("reconnect",t)})),t.initialConnectState.connect&&!t.initialConnectState.fullsetup&&t.s.replicaSetState.hasPrimaryAndSecondary()&&(t.initialConnectState.fullsetup=!0,t.initialConnectState.all=!0,process.nextTick(function(){t.emit("fullsetup",t),t.emit("all",t)}))}})},s);o.start(),o.__host=e,t.intervalIds.push(o)},"monitorServer");function Um(e,t){if(e.state===Re||e.state===_t)return;t=t||{};var r=Object.keys(e.s.replicaSetState.set),n=t.haInterval?ds:y_,i=t.haInterval?t.haInterval:e.s.haInterval;if(n===ds)return d_(e,e.s.replicaSetState.unknownServers,function(l){if(!(e.state===Re||e.state===_t)){if(!e.s.replicaSetState.hasPrimary()&&!e.s.options.secondaryOnlyConnectionAllowed)return l?e.emit("error",l):(e.emit("error",new Yt("no primary found in replicaset or invalid replica set name")),e.destroy({force:!0}));if(!e.s.replicaSetState.hasSecondary()&&e.s.options.secondaryOnlyConnectionAllowed)return l?e.emit("error",l):(e.emit("error",new Yt("no secondary found in replicaset or invalid replica set name")),e.destroy({force:!0}));for(var u=0;u<r.length;u++)jm(r[u],e,t)}});for(var s=0;s<r.length;s++)jm(r[s],e,t);function o(l){return function(){l.state===Re||l.state===_t||d_(l,l.s.replicaSetState.unknownServers,function(){var u=l.s.replicaSetState.hasPrimary()?i:l.s.minHeartbeatFrequencyMS;l.intervalIds.push(new ds(o(l),u).start())})}}a(o,"executeReconnect");var c=e.s.replicaSetState.hasPrimary()?i:e.s.minHeartbeatFrequencyMS;e.intervalIds.push(new ds(o(e),c).start())}a(Um,"topologyMonitor");function b_(e,t){for(var r=0;r<e.length;r++)if(e[r].name.toLowerCase()===t.name.toLowerCase())return!0;e.push(t)}a(b_,"addServerToList");function En(e,t){return function(){e.state===Re||e.state===_t||(e.s.logger.isDebug()&&e.s.logger.debug(Pr("handleEvent %s from server %s in replset with id %s",t,this.name,e.id)),e.s.replicaSetState.remove(this),!(e.state===Re||e.state===_t)&&(!e.s.replicaSetState.hasPrimary()&&!e.s.replicaSetState.hasSecondary()&&e.s.options.secondaryOnlyConnectionAllowed?On(e,ui):e.s.replicaSetState.hasPrimary()||On(e,ui),b_(e.s.connectingServers,this)))}}a(En,"handleEvent");function V$(e){let t=e.state===li,r=e.s.replicaSetState.hasPrimary(),n=e.s.replicaSetState.hasSecondary(),i=e.s.options.secondaryOnlyConnectionAllowed,s=e.s.connectOptions.readPreference&&e.s.connectOptions.readPreference.equals(Mr.secondary);return t&&(s&&n||!s&&r)||n&&i}a(V$,"shouldTriggerConnect");function Uo(e,t){return function(){var r=this;if(e.s.logger.isDebug()&&e.s.logger.debug(Pr("handleInitialConnectEvent %s from server %s in replset with id %s",t,this.name,e.id)),e.state===Re||e.state===_t)return this.destroy({force:!0});if(t==="connect"){var n=e.s.replicaSetState.update(r);if(n===!0){r.lastIsMaster()&&r.lastIsMaster().ismaster&&(e.ismaster=r.lastIsMaster()),e.s.logger.isDebug()&&e.s.logger.debug(Pr("handleInitialConnectEvent %s from server %s in replset with id %s has state [%s]",t,r.name,e.id,JSON.stringify(e.s.replicaSetState.set)));for(let s=0;s<wu.length;s++)r.removeAllListeners(wu[s]);r.on("error",En(e,"error")),r.on("close",En(e,"close")),r.on("timeout",En(e,"timeout")),r.on("parseError",En(e,"parseError")),V$(e)&&(On(e,bu),e.initialConnectState.connect=!0,process.nextTick(function(){e.emit("connect",e)}),Um(e,{}))}else{if(n instanceof Yt)return r.destroy({force:!0}),e.destroy({force:!0}),e.emit("error",n);r.destroy({force:!0})}}else e.emit("failed",this),b_(e.s.connectingServers,this),e.s.replicaSetState.remove(this);e.initialConnectState.connect&&!e.initialConnectState.fullsetup&&e.s.replicaSetState.hasPrimaryAndSecondary()&&(e.initialConnectState.fullsetup=!0,e.initialConnectState.all=!0,process.nextTick(function(){e.emit("fullsetup",e),e.emit("all",e)}));for(var i=0;i<e.s.connectingServers.length;i++)e.s.connectingServers[i].equals(this)&&e.s.connectingServers.splice(i,1);e.s.connectingServers.length===0&&e.state===li&&Um(e,{haInterval:1})}}a(Uo,"handleInitialConnectEvent");function K$(e,t){e.s.connectingServers=e.s.connectingServers.concat(t);var r=0;function n(i,s){setTimeout(function(){e.s.replicaSetState.update(i)&&i.lastIsMaster()&&i.lastIsMaster().ismaster&&(e.ismaster=i.lastIsMaster()),i.once("close",Uo(e,"close")),i.once("timeout",Uo(e,"timeout")),i.once("parseError",Uo(e,"parseError")),i.once("error",Uo(e,"error")),i.once("connect",Uo(e,"connect")),i.on("serverOpening",o=>e.emit("serverOpening",o)),i.on("serverDescriptionChanged",o=>e.emit("serverDescriptionChanged",o)),i.on("serverClosed",o=>e.emit("serverClosed",o)),v_(i,e,["commandStarted","commandSucceeded","commandFailed"]),i.connect(e.s.connectOptions)},s)}for(a(n,"connect");t.length>0;)n(t.shift(),r++)}a(K$,"connectServers");function ko(e,t,r){e.listeners(t).length>0&&e.emit(t,r)}a(ko,"emitSDAMEvent");Ie.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},On(this,li);var r=this.s.seedlist.map(function(n){return new Eu(Object.assign({},t.s.options,n,e,{reconnect:!1,monitoring:!1,parent:t}))});if(this.s.options.socketTimeout>0&&this.s.options.socketTimeout<=this.s.options.haInterval)return t.emit("error",new Yt(Pr("haInterval [%s] MS must be set to less than socketTimeout [%s] MS",this.s.options.haInterval,this.s.options.socketTimeout)));ko(this,"topologyOpening",{topologyId:this.id}),K$(t,r)};Ie.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};Ie.prototype.destroy=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=this.s.connectingServers.length+1,n=a(()=>{r--,!(r>0)&&(ko(this,"topologyClosed",{topologyId:this.id}),typeof t=="function"&&t(null,null))},"serverDestroyed");if(this.state===Re){typeof t=="function"&&t(null,null);return}On(this,Re),this.haTimeoutId&&clearTimeout(this.haTimeoutId);for(var i=0;i<this.intervalIds.length;i++)this.intervalIds[i].stop();if(this.intervalIds=[],r===0){n();return}this.s.replicaSetState.destroy(e,n),this.s.connectingServers.forEach(function(s){s.destroy(e,n)})};Ie.prototype.unref=function(){On(this,_t),this.s.replicaSetState.allServers().forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)};Ie.prototype.lastIsMaster=function(){return this.s.options.secondaryOnlyConnectionAllowed&&!this.s.replicaSetState.hasPrimary()&&this.s.replicaSetState.hasSecondary()?this.s.replicaSetState.secondaries[0].lastIsMaster():this.s.replicaSetState.primary?this.s.replicaSetState.primary.lastIsMaster():this.ismaster};Ie.prototype.connections=function(){for(var e=this.s.replicaSetState.allServers(),t=[],r=0;r<e.length;r++)t=t.concat(e[r].connections());return t};Ie.prototype.isConnected=function(e){return e=e||{},e.readPreference&&e.readPreference.equals(Mr.secondary)?this.s.replicaSetState.hasSecondary():e.readPreference&&e.readPreference.equals(Mr.primary)?this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(Mr.primaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(Mr.secondaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():this.s.options.secondaryOnlyConnectionAllowed&&this.s.replicaSetState.hasSecondary()?!0:this.s.replicaSetState.hasPrimary()};Ie.prototype.isDestroyed=function(){return this.state===Re};var G$=1e4,h_=1e3;Ie.prototype.selectServer=function(e,t,r){typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0,t={}),typeof t=="function"&&(r=t,t=e),t=t||{};let n;e instanceof Mr?n=e:n=t.readPreference||Mr.primary;let i,s=S_(),o=a(()=>{if(z$(s)>=G$){i!=null?r(i,null):r(new Yt("Server selection timed out"));return}let c=this.s.replicaSetState.pickServer(n);if(c==null){setTimeout(o,h_);return}if(!(c instanceof Eu)){i=c,setTimeout(o,h_);return}this.s.debug&&this.emit("pickedServer",t.readPreference,c),r(null,c)},"_selectServer");o()};Ie.prototype.getServers=function(){return this.s.replicaSetState.allServers()};function Ou(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.self,i=e.op,s=e.ns,o=e.ops;if(n.state===Re)return r(new Yt(Pr("topology was destroyed")));let c=!e.retrying&&!!t.retryWrites&&t.session&&g_(n)&&!t.session.inTransaction()&&t.explain===void 0;if(!n.s.replicaSetState.hasPrimary()){if(n.s.disconnectHandler)return n.s.disconnectHandler.add(i,s,o,t,r);if(!c)return r(new Yt("no primary server found"))}let l=a((u,p)=>{if(!u)return r(null,p);if(!x_(u,n))return u=F$(u),r(u);if(c){let d=Object.assign({},e,{retrying:!0});return Ou(d,t,r)}return n.s.replicaSetState.primary&&(n.s.replicaSetState.primary.destroy(),n.s.replicaSetState.remove(n.s.replicaSetState.primary,{force:!0})),r(u)},"handler");r.operationId&&(l.operationId=r.operationId),c&&(t.session.incrementTransactionNumber(),t.willRetryWrite=c),n.s.replicaSetState.primary[i](s,o,t,l)}a(Ou,"executeWriteOperation");Ie.prototype.insert=function(e,t,r,n){Ou({self:this,op:"insert",ns:e,ops:t},r,n)};Ie.prototype.update=function(e,t,r,n){Ou({self:this,op:"update",ns:e,ops:t},r,n)};Ie.prototype.remove=function(e,t,r,n){Ou({self:this,op:"remove",ns:e,ops:t},r,n)};var Y$=["findAndModify","insert","update","delete"];function J$(e){return Y$.some(t=>e[t])}a(J$,"isWriteCommand");Ie.prototype.command=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Re)return n(new Yt(Pr("topology was destroyed")));var i=this,s=r.readPreference?r.readPreference:Mr.primary;if(s.preference==="primary"&&!this.s.replicaSetState.hasPrimary()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);if(s.preference==="secondary"&&!this.s.replicaSetState.hasSecondary()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);if(s.preference!=="primary"&&!this.s.replicaSetState.hasSecondary()&&!this.s.replicaSetState.hasPrimary()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);var o=this.s.replicaSetState.pickServer(s);if(!(o instanceof Eu))return n(o);if(i.s.debug&&i.emit("pickedServer",Mr.primary,o),o==null)return n(new Yt(Pr("no server found that matches the provided readPreference %s",s)));let c=!r.retrying&&!!r.retryWrites&&r.session&&g_(i)&&!r.session.inTransaction()&&J$(t),l=a((u,p)=>{if(!u)return n(null,p);if(!x_(u,i))return n(u);if(c){let d=Object.assign({},r,{retrying:!0});return this.command(e,t,d,n)}return this.s.replicaSetState.primary&&(this.s.replicaSetState.primary.destroy(),this.s.replicaSetState.remove(this.s.replicaSetState.primary,{force:!0})),n(u)},"cb");c&&(r.session.incrementTransactionNumber(),r.willRetryWrite=c),o.command(e,t,r,l)};Ie.prototype.cursor=function(e,t,r){r=r||{};let n=r.topology||this;var i=r.cursorFactory||this.s.Cursor;return new i(n,e,t,r)};w_.exports=Ie});var q_=y((gie,I_)=>{"use strict";var X$=require("util").inherits,Cn=require("util").format,T_=require("events").EventEmitter,Q$=Gt().CoreCursor,Z$=Vt(),e4=ke().retrieveBSON,Qt=q().MongoError,C_=vu(),t4=we().diff,r4=we().cloneOptions,n4=we().SessionMixins,__=we().isRetryableWritesSupported,Cu=U().relayEvents,it=e4(),i4=we().getMMAPError,s4=U().makeClientMetadata,A_=we().legacyIsRetryableWriteError,Tu="disconnected",hs="connecting",km="connected",Jt="unreferenced",ht="destroying",Oe="destroyed";function zo(e,t){var r={disconnected:[hs,ht,Oe,Tu],connecting:[hs,ht,Oe,km,Tu],connected:[km,Tu,ht,Oe,Jt],unreferenced:[Jt,ht,Oe],destroyed:[Oe]},n=r[e.state];n&&n.indexOf(t)!==-1?e.state=t:e.s.logger.error(Cn("Mongos with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]",e.id,e.state,t,n))}a(zo,"stateTransition");var o4=1,_u=["connect","close","error","timeout","parseError"],Me=a(function(e,t){t=t||{},this.id=o4++,Array.isArray(e)&&(e=e.reduce((r,n)=>(r.find(i=>i.host===n.host&&i.port===n.port)||r.push(n),r),[])),this.s={options:Object.assign({metadata:s4(t)},t),bson:t.bson||new it([it.Binary,it.Code,it.DBRef,it.Decimal128,it.Double,it.Int32,it.Long,it.Map,it.MaxKey,it.MinKey,it.ObjectId,it.BSONRegExp,it.Symbol,it.Timestamp]),Cursor:t.cursorFactory||Q$,logger:Z$("Mongos",t),seedlist:e,haInterval:t.haInterval?t.haInterval:1e4,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:typeof t.debug=="boolean"?t.debug:!1,localThresholdMS:t.localThresholdMS||15},this.s.logger.isWarn()&&this.s.options.socketTimeout!==0&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(Cn("warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts",this.s.options.socketTimeout,this.s.haInterval)),this.state=Tu,this.connectingProxies=[],this.connectedProxies=[],this.disconnectedProxies=[],this.index=0,this.haTimeoutId=null,this.ismaster=null,this.topologyDescription={topologyType:"Unknown",servers:[]},this.clusterTime=null,T_.call(this)},"Mongos");X$(Me,T_);Object.assign(Me.prototype,n4);Object.defineProperty(Me.prototype,"type",{enumerable:!0,get:function(){return"mongos"}});Object.defineProperty(Me.prototype,"parserType",{enumerable:!0,get:function(){return it.native?"c++":"js"}});Object.defineProperty(Me.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}});function Wo(e,t,r){e.listeners(t).length>0&&e.emit(t,r)}a(Wo,"emitSDAMEvent");var a4=["serverDescriptionChanged","error","close","timeout","parseError"];function N_(e,t,r){t=t||{},a4.forEach(n=>e.removeAllListeners(n)),e.destroy(t,r)}a(N_,"destroyServer");Me.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},zo(this,hs);var r=this.s.seedlist.map(function(n){let i=new C_(Object.assign({},t.s.options,n,e,{reconnect:!1,monitoring:!1,parent:t}));return Cu(i,t,["serverDescriptionChanged"]),i});Wo(this,"topologyOpening",{topologyId:this.id}),c4(t,r)};Me.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};function Tn(e){return function(){e.state===Oe||e.state===ht||(Xt(e.connectedProxies,e.disconnectedProxies,this),pi(e),e.emit("left","mongos",this),e.emit("serverClosed",{topologyId:e.id,address:this.name}))}}a(Tn,"handleEvent");function Fo(e,t){return function(){var r=this;if(e.state===Oe)return pi(e),Xt(e.connectingProxies,e.disconnectedProxies,this),this.destroy();if(t==="connect")if(e.ismaster=r.lastIsMaster(),e.ismaster.msg==="isdbgrid"){for(let i=0;i<e.connectedProxies.length;i++)if(e.connectedProxies[i].name===r.name)return Xt(e.connectingProxies,e.disconnectedProxies,r),pi(e),r.destroy(),e.emit("failed",r);for(let i=0;i<_u.length;i++)r.removeAllListeners(_u[i]);r.on("error",Tn(e,"error")),r.on("close",Tn(e,"close")),r.on("timeout",Tn(e,"timeout")),r.on("parseError",Tn(e,"parseError")),Xt(e.connectingProxies,e.connectedProxies,r),e.emit("joined","mongos",r)}else{if(e.s.logger.isWarn()){var n="expected mongos proxy, but found replicaset member mongod for server %s";e.ismaster.hosts||(n="expected mongos proxy, but found standalone mongod for server %s"),e.s.logger.warn(Cn(n,r.name))}r.destroy(!0),R_(e.connectingProxies,r),e.emit("left","server",r),e.emit("failed",r)}else Xt(e.connectingProxies,e.disconnectedProxies,this),e.emit("left","mongos",this),e.emit("failed",this);if(pi(e),e.connectingProxies.length===0){if(e.connectedProxies.length>0&&e.state===hs)zo(e,km),e.emit("connect",e),e.emit("fullsetup",e),e.emit("all",e);else if(e.disconnectedProxies.length===0)return e.s.logger.isWarn()&&e.s.logger.warn(Cn("no mongos proxies found in seed list, did you mean to connect to a replicaset")),e.emit("error",new Qt("no mongos proxies found in seed list"));Fm(e,{firstConnect:!0})}}}a(Fo,"handleInitialConnectEvent");function c4(e,t){e.connectingProxies=e.connectingProxies.concat(t);var r=0;function n(i,s){setTimeout(function(){e.emit("serverOpening",{topologyId:e.id,address:i.name}),pi(e),i.once("close",Fo(e,"close")),i.once("timeout",Fo(e,"timeout")),i.once("parseError",Fo(e,"parseError")),i.once("error",Fo(e,"error")),i.once("connect",Fo(e,"connect")),Cu(i,e,["commandStarted","commandSucceeded","commandFailed"]),i.connect(e.s.connectOptions)},s)}a(n,"connect"),t.forEach(i=>n(i,r++))}a(c4,"connectProxies");function Au(e,t){let r=t&&t.transaction;if(r&&r.server){if(r.server.isConnected())return r.server;r.unpinServer()}for(var n=e.connectedProxies.slice(0),i=Number.MAX_VALUE,s=0;s<n.length;s++)n[s].lastIsMasterMS<i&&(i=n[s].lastIsMasterMS);n=n.filter(function(c){if(c.lastIsMasterMS<=i+e.s.localThresholdMS&&c.isConnected())return!0});let o;return n.length===0?o=e.connectedProxies[0]:(o=n[e.index%n.length],e.index=(e.index+1)%n.length),r&&r.isActive&&o&&o.isConnected()&&r.pinServer(o),o}a(Au,"pickProxy");function Xt(e,t,r){for(var n=0;n<e.length;n++)e[n].name===r.name&&e.splice(n,1);for(n=0;n<t.length;n++)t[n].name===r.name&&t.splice(n,1);t.push(r)}a(Xt,"moveServerFrom");function R_(e,t){for(var r=0;r<e.length;r++)e[r].name===t.name&&e.splice(r,1)}a(R_,"removeProxyFrom");function O_(e,t,r){var n=t.length,i=a(function(c,l){return function(){var u=this;if(n=n-1,c.state===Oe||c.state===ht||c.state===Jt)return Xt(c.connectingProxies,c.disconnectedProxies,u),this.destroy();if(l==="connect"){if(c.state===Oe||c.state===ht||c.state===Jt)return Xt(c.connectingProxies,c.disconnectedProxies,u),u.destroy();for(var p=0;p<_u.length;p++)u.removeAllListeners(_u[p]);u.on("error",Tn(c,"error")),u.on("close",Tn(c,"close")),u.on("timeout",Tn(c,"timeout")),u.on("parseError",Tn(c,"parseError")),Xt(c.connectingProxies,c.connectedProxies,u),pi(c),c.emit("joined","mongos",u)}else Xt(c.connectingProxies,c.disconnectedProxies,u),this.destroy();n===0&&r()}},"_handleEvent");if(n===0)return r();function s(c,l){setTimeout(function(){if(!(e.state===Oe||e.state===ht||e.state===Jt)){var u=new C_(Object.assign({},e.s.options,{host:c.name.split(":")[0],port:parseInt(c.name.split(":")[1],10),reconnect:!1,monitoring:!1,parent:e}));N_(c,{force:!0}),R_(e.disconnectedProxies,c),Cu(u,e,["serverDescriptionChanged"]),e.emit("serverOpening",{topologyId:u.s.topologyId!==-1?u.s.topologyId:e.id,address:u.name}),u.once("connect",i(e,"connect")),u.once("close",i(e,"close")),u.once("timeout",i(e,"timeout")),u.once("error",i(e,"error")),u.once("parseError",i(e,"parseError")),Cu(u,e,["commandStarted","commandSucceeded","commandFailed"]),e.connectingProxies.push(u),u.connect(e.s.connectOptions)}},l)}a(s,"execute");for(var o=0;o<t.length;o++)s(t[o],o)}a(O_,"reconnectProxies");function Fm(e,t){t=t||{},!(e.state===Oe||e.state===ht||e.state===Jt)&&(e.haTimeoutId=setTimeout(function(){if(e.state===Oe||e.state===ht||e.state===Jt)return;e.isConnected()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute();var r=e.connectedProxies.slice(0),n=r.length;function i(o,c,l){var u=new Date().getTime();Wo(e,"serverHeartbeatStarted",{connectionId:c.name}),c.command("admin.$cmd",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(p,d){if(e.state===Oe||e.state===ht||e.state===Jt)return Xt(e.connectedProxies,e.disconnectedProxies,c),c.destroy(),l(p,d);var f=new Date().getTime()-u;p?(Wo(e,"serverHeartbeatFailed",{durationMS:f,failure:p,connectionId:c.name}),Xt(e.connectedProxies,e.disconnectedProxies,c)):(c.ismaster=d.result,c.lastIsMasterMS=f,Wo(e,"serverHeartbeatSucceeded",{durationMS:f,reply:d.result,connectionId:c.name})),l(p,d)})}if(a(i,"pingServer"),r.length===0)return e.listeners("close").length>0&&e.state===hs?e.emit("error",new Qt("no mongos proxy available")):e.emit("close",e),O_(e,e.disconnectedProxies,function(){e.state===Oe||e.state===ht||e.state===Jt||(e.state===hs&&t.firstConnect?(e.emit("connect",e),e.emit("fullsetup",e),e.emit("all",e)):e.isConnected()?e.emit("reconnect",e):!e.isConnected()&&e.listeners("close").length>0&&e.emit("close",e),Fm(e))});for(var s=0;s<r.length;s++)i(e,r[s],function(){if(n=n-1,n===0){if(e.state===Oe||e.state===ht||e.state===Jt)return;O_(e,e.disconnectedProxies,function(){e.state===Oe||e.state===ht||e.state===Jt||Fm(e)})}})},e.s.haInterval))}a(Fm,"topologyMonitor");Me.prototype.lastIsMaster=function(){return this.ismaster};Me.prototype.unref=function(){zo(this,Jt);var e=this.connectedProxies.concat(this.connectingProxies);e.forEach(function(t){t.unref()}),clearTimeout(this.haTimeoutId)};Me.prototype.destroy=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{},zo(this,ht),this.haTimeoutId&&clearTimeout(this.haTimeoutId);let r=this.connectedProxies.concat(this.connectingProxies),n=r.length,i=a(()=>{n--,!(n>0)&&(pi(this),Wo(this,"topologyClosed",{topologyId:this.id}),zo(this,Oe),typeof t=="function"&&t(null,null))},"serverDestroyed");if(n===0){i();return}r.forEach(s=>{this.emit("serverClosed",{topologyId:this.id,address:s.name}),N_(s,e,i),Xt(this.connectedProxies,this.disconnectedProxies,s)})};Me.prototype.isConnected=function(){return this.connectedProxies.length>0};Me.prototype.isDestroyed=function(){return this.state===Oe};function Nu(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.self,i=e.op,s=e.ns,o=e.ops,c=Au(n,t.session);if(!c)return r(new Qt("no mongos proxy available"));let l=!e.retrying&&!!t.retryWrites&&t.session&&__(n)&&!t.session.inTransaction()&&t.explain===void 0,u=a((p,d)=>{if(!p)return r(null,d);if(!A_(p,n)||!l)return p=i4(p),r(p);if(c=Au(n,t.session),!c)return r(p);let f=Object.assign({},e,{retrying:!0});return Nu(f,t,r)},"handler");r.operationId&&(u.operationId=r.operationId),l&&(t.session.incrementTransactionNumber(),t.willRetryWrite=l),c[i](s,o,t,u)}a(Nu,"executeWriteOperation");Me.prototype.insert=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Oe)return n(new Qt(Cn("topology was destroyed")));if(!this.isConnected()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("insert",e,t,r,n);if(!this.isConnected())return n(new Qt("no mongos proxy available"));Nu({self:this,op:"insert",ns:e,ops:t},r,n)};Me.prototype.update=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Oe)return n(new Qt(Cn("topology was destroyed")));if(!this.isConnected()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("update",e,t,r,n);if(!this.isConnected())return n(new Qt("no mongos proxy available"));Nu({self:this,op:"update",ns:e,ops:t},r,n)};Me.prototype.remove=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Oe)return n(new Qt(Cn("topology was destroyed")));if(!this.isConnected()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("remove",e,t,r,n);if(!this.isConnected())return n(new Qt("no mongos proxy available"));Nu({self:this,op:"remove",ns:e,ops:t},r,n)};var u4=["findAndModify","insert","update","delete"];function l4(e){return u4.some(t=>e[t])}a(l4,"isWriteCommand");Me.prototype.command=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Oe)return n(new Qt(Cn("topology was destroyed")));var i=this,s=Au(i,r.session);if((s==null||!s.isConnected())&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);if(s==null)return n(new Qt("no mongos proxy available"));var o=r4(r);o.topology=i;let c=!r.retrying&&r.retryWrites&&r.session&&__(i)&&!r.session.inTransaction()&&l4(t),l=a((u,p)=>{if(!u)return n(null,p);if(!A_(u,i))return n(u);if(c){let d=Object.assign({},o,{retrying:!0});return this.command(e,t,d,n)}return n(u)},"cb");c&&(o.session.incrementTransactionNumber(),o.willRetryWrite=c),s.command(e,t,o,l)};Me.prototype.cursor=function(e,t,r){r=r||{};let n=r.topology||this;var i=r.cursorFactory||this.s.Cursor;return new i(n,e,t,r)};Me.prototype.selectServer=function(e,t,r){typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0,t={}),typeof t=="function"&&(r=t,t=e,e=void 0),t=t||{};let n=Au(this,t.session);if(n==null){r(new Qt("server selection failed"));return}this.s.debug&&this.emit("pickedServer",null,n),r(null,n)};Me.prototype.connections=function(){for(var e=[],t=0;t<this.connectedProxies.length;t++)e=e.concat(this.connectedProxies[t].connections());return e};function pi(e){if(e.listeners("topologyDescriptionChanged").length>0){var t="Unknown";e.connectedProxies.length>0&&(t="Sharded");var r={topologyType:t,servers:[]},n=e.disconnectedProxies.concat(e.connectingProxies);r.servers=r.servers.concat(n.map(function(o){var c=o.getDescription();return c.type="Unknown",c})),r.servers=r.servers.concat(e.connectedProxies.map(function(o){var c=o.getDescription();return c.type="Mongos",c}));var i=t4(e.topologyDescription,r),s={topologyId:e.id,previousDescription:e.topologyDescription,newDescription:r,diff:i};i.servers.length>0&&e.emit("topologyDescriptionChanged",s),e.topologyDescription=r}}a(pi,"emitTopologyDescriptionChanged");I_.exports=Me});var Ru=y((xie,M_)=>{"use strict";function Te(e,r){var r=r||{};this._head=0,this._tail=0,this._capacity=r.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}a(Te,"Denque");Te.prototype.peekAt=a(function(t){var r=t;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}},"peekAt");Te.prototype.get=a(function(t){return this.peekAt(t)},"get");Te.prototype.peek=a(function(){if(this._head!==this._tail)return this._list[this._head]},"peek");Te.prototype.peekFront=a(function(){return this.peek()},"peekFront");Te.prototype.peekBack=a(function(){return this.peekAt(-1)},"peekBack");Object.defineProperty(Te.prototype,"length",{get:a(function(){return this.size()},"length")});Te.prototype.size=a(function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"size");Te.prototype.unshift=a(function(t){if(t===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"unshift");Te.prototype.shift=a(function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}},"shift");Te.prototype.push=a(function(t){if(t===void 0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"push");Te.prototype.pop=a(function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),n}},"pop");Te.prototype.removeOne=a(function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(t<n/2){for(o=t;o>0;o--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-t;o>0;o--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}},"removeOne");Te.prototype.remove=a(function(t,r){var n=t,i,s=r;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),c=this._list.length;if(!(n>=o||n<-o||r<1)){if(n<0&&(n+=o),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=o)return i=this.toArray(),this.clear(),i;n+r>o&&(r=o-n);var l;for(i=new Array(r),l=0;l<r;l++)i[l]=this._list[this._head+n+l&this._capacityMask];if(n=this._head+n&this._capacityMask,t+r===o){for(this._tail=this._tail-r+c&this._capacityMask,l=r;l>0;l--)this._list[n=n+1+c&this._capacityMask]=void 0;return i}if(t===0){for(this._head=this._head+r+c&this._capacityMask,l=r-1;l>0;l--)this._list[n=n+1+c&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+t+r+c&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[n=n-1+c&this._capacityMask]);for(n=this._head-1+c&this._capacityMask;s>0;)this._list[n=n-1+c&this._capacityMask]=void 0,s--;t<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+c&this._capacityMask,l=o-(r+t);l>0;l--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+c&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=c>>>2&&this._shrinkArray(),i}}},"remove");Te.prototype.splice=a(function(t,r){var n=t;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,c,l=arguments.length,u=this._list.length,p=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(c=[],n>0&&(this._head=this._head+n+u&this._capacityMask)):(c=this.remove(n,r),this._head=this._head+n+u&this._capacityMask);l>p;)this.unshift(arguments[--l]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+r));var d=o.length;for(s=0;s<d;s++)o[s]=this._list[this._head+n+r+s&this._capacityMask];for(r===0?(c=[],n!=i&&(this._tail=this._head+n+u&this._capacityMask)):(c=this.remove(n,r),this._tail=this._tail-d+u&this._capacityMask);p<l;)this.push(arguments[p++]);for(s=0;s<d;s++)this.push(o[s])}return c}else return this.remove(n,r)}},"splice");Te.prototype.clear=a(function(){this._head=0,this._tail=0},"clear");Te.prototype.isEmpty=a(function(){return this._head===this._tail},"isEmpty");Te.prototype.toArray=a(function(){return this._copyArray(!1)},"toArray");Te.prototype._fromArray=a(function(t){for(var r=0;r<t.length;r++)this.push(t[r])},"_fromArray");Te.prototype._copyArray=a(function(t){var r=[],n=this._list,i=n.length,s;if(t||this._head>this._tail){for(s=this._head;s<i;s++)r.push(n[s]);for(s=0;s<this._tail;s++)r.push(n[s])}else for(s=this._head;s<this._tail;s++)r.push(n[s]);return r},"_copyArray");Te.prototype._growArray=a(function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},"_growArray");Te.prototype._shrinkArray=a(function(){this._list.length>>>=1,this._capacityMask>>>=1},"_shrinkArray");M_.exports=Te});var oy=y((bie,P_)=>{"use strict";var Xm=class Xm{constructor(t,r,n,i){Object.assign(this,{topologyId:t,address:r,previousDescription:n,newDescription:i})}};a(Xm,"ServerDescriptionChangedEvent");var Wm=Xm,Qm=class Qm{constructor(t,r){Object.assign(this,{topologyId:t,address:r})}};a(Qm,"ServerOpeningEvent");var zm=Qm,Zm=class Zm{constructor(t,r){Object.assign(this,{topologyId:t,address:r})}};a(Zm,"ServerClosedEvent");var $m=Zm,ey=class ey{constructor(t,r,n){Object.assign(this,{topologyId:t,previousDescription:r,newDescription:n})}};a(ey,"TopologyDescriptionChangedEvent");var Hm=ey,ty=class ty{constructor(t){Object.assign(this,{topologyId:t})}};a(ty,"TopologyOpeningEvent");var Vm=ty,ry=class ry{constructor(t){Object.assign(this,{topologyId:t})}};a(ry,"TopologyClosedEvent");var Km=ry,ny=class ny{constructor(t){Object.assign(this,{connectionId:t})}};a(ny,"ServerHeartbeatStartedEvent");var Gm=ny,iy=class iy{constructor(t,r,n){Object.assign(this,{connectionId:n,duration:t,reply:r})}};a(iy,"ServerHeartbeatSucceededEvent");var Ym=iy,sy=class sy{constructor(t,r,n){Object.assign(this,{connectionId:n,duration:t,failure:r})}};a(sy,"ServerHeartbeatFailedEvent");var Jm=sy;P_.exports={ServerDescriptionChangedEvent:Wm,ServerOpeningEvent:zm,ServerClosedEvent:$m,TopologyDescriptionChangedEvent:Hm,TopologyOpeningEvent:Vm,TopologyClosedEvent:Km,ServerHeartbeatStartedEvent:Gm,ServerHeartbeatSucceededEvent:Ym,ServerHeartbeatFailedEvent:Jm}});var $o=y((Eie,ay)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?ay.exports={nextTick:p4}:ay.exports=process;function p4(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(a(function(){e.call(null,t)},"afterTickOne"));case 3:return process.nextTick(a(function(){e.call(null,t,r)},"afterTickTwo"));case 4:return process.nextTick(a(function(){e.call(null,t,r,n)},"afterTickThree"));default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(a(function(){e.apply(null,s)},"afterTick"))}}a(p4,"nextTick")});var D_=y((Tie,B_)=>{var f4={}.toString;B_.exports=Array.isArray||function(e){return f4.call(e)=="[object Array]"}});var cy=y((Cie,L_)=>{L_.exports=require("stream")});var ms=y(st=>{function d4(e){return Array.isArray?Array.isArray(e):Iu(e)==="[object Array]"}a(d4,"isArray");st.isArray=d4;function h4(e){return typeof e=="boolean"}a(h4,"isBoolean");st.isBoolean=h4;function m4(e){return e===null}a(m4,"isNull");st.isNull=m4;function y4(e){return e==null}a(y4,"isNullOrUndefined");st.isNullOrUndefined=y4;function g4(e){return typeof e=="number"}a(g4,"isNumber");st.isNumber=g4;function v4(e){return typeof e=="string"}a(v4,"isString");st.isString=v4;function x4(e){return typeof e=="symbol"}a(x4,"isSymbol");st.isSymbol=x4;function S4(e){return e===void 0}a(S4,"isUndefined");st.isUndefined=S4;function b4(e){return Iu(e)==="[object RegExp]"}a(b4,"isRegExp");st.isRegExp=b4;function w4(e){return typeof e=="object"&&e!==null}a(w4,"isObject");st.isObject=w4;function E4(e){return Iu(e)==="[object Date]"}a(E4,"isDate");st.isDate=E4;function O4(e){return Iu(e)==="[object Error]"||e instanceof Error}a(O4,"isError");st.isError=O4;function T4(e){return typeof e=="function"}a(T4,"isFunction");st.isFunction=T4;function C4(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}a(C4,"isPrimitive");st.isPrimitive=C4;st.isBuffer=require("buffer").Buffer.isBuffer;function Iu(e){return Object.prototype.toString.call(e)}a(Iu,"objectToString")});var j_=y((Nie,uy)=>{typeof Object.create=="function"?uy.exports=a(function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))},"inherits"):uy.exports=a(function(t,r){if(r){t.super_=r;var n=a(function(){},"TempCtor");n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}},"inherits")});var ys=y((Iie,py)=>{try{if(ly=require("util"),typeof ly.inherits!="function")throw"";py.exports=ly.inherits}catch{py.exports=j_()}var ly});var k_=y((qie,fy)=>{"use strict";function _4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a(_4,"_classCallCheck");var U_=pt().Buffer,Ho=require("util");function A4(e,t,r){e.copy(t,r)}a(A4,"copyBuffer");fy.exports=function(){function e(){_4(this,e),this.head=null,this.tail=null,this.length=0}return a(e,"BufferList"),e.prototype.push=a(function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},"push"),e.prototype.unshift=a(function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},"unshift"),e.prototype.shift=a(function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},"shift"),e.prototype.clear=a(function(){this.head=this.tail=null,this.length=0},"clear"),e.prototype.join=a(function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},"join"),e.prototype.concat=a(function(r){if(this.length===0)return U_.alloc(0);for(var n=U_.allocUnsafe(r>>>0),i=this.head,s=0;i;)A4(i.data,n,s),s+=i.data.length,i=i.next;return n},"concat"),e}();Ho&&Ho.inspect&&Ho.inspect.custom&&(fy.exports.prototype[Ho.inspect.custom]=function(){var e=Ho.inspect({length:this.length});return this.constructor.name+" "+e})});var dy=y((Pie,F_)=>{"use strict";var qu=$o();function N4(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,qu.nextTick(Mu,this,e)):qu.nextTick(Mu,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,qu.nextTick(Mu,r,s)):qu.nextTick(Mu,r,s):t&&t(s)}),this)}a(N4,"destroy");function R4(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}a(R4,"undestroy");function Mu(e,t){e.emit("error",t)}a(Mu,"emitErrorNT");F_.exports={destroy:N4,undestroy:R4}});var z_=y((Die,W_)=>{W_.exports=require("util").deprecate});var my=y((Lie,X_)=>{"use strict";var fi=$o();X_.exports=Pe;function H_(e){var t=this;this.next=null,this.entry=null,this.finish=function(){G4(t,e)}}a(H_,"CorkedRequest");var I4=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:fi.nextTick,gs;Pe.WritableState=Ko;var V_=Object.create(ms());V_.inherits=ys();var q4={deprecate:z_()},K_=cy(),Bu=pt().Buffer,M4=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function P4(e){return Bu.from(e)}a(P4,"_uint8ArrayToBuffer");function B4(e){return Bu.isBuffer(e)||e instanceof M4}a(B4,"_isUint8Array");var G_=dy();V_.inherits(Pe,K_);function D4(){}a(D4,"nop");function Ko(e,t){gs=gs||di(),e=e||{};var r=t instanceof gs;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(c){z4(t,c)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new H_(this)}a(Ko,"WritableState");Ko.prototype.getBuffer=a(function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},"getBuffer");(function(){try{Object.defineProperty(Ko.prototype,"buffer",{get:q4.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Pu;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Pu=Function.prototype[Symbol.hasInstance],Object.defineProperty(Pe,Symbol.hasInstance,{value:function(e){return Pu.call(this,e)?!0:this!==Pe?!1:e&&e._writableState instanceof Ko}})):Pu=a(function(e){return e instanceof this},"realHasInstance");function Pe(e){if(gs=gs||di(),!Pu.call(Pe,this)&&!(this instanceof gs))return new Pe(e);this._writableState=new Ko(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),K_.call(this)}a(Pe,"Writable");Pe.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function L4(e,t){var r=new Error("write after end");e.emit("error",r),fi.nextTick(t,r)}a(L4,"writeAfterEnd");function j4(e,t,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),fi.nextTick(n,s),i=!1),i}a(j4,"validChunk");Pe.prototype.write=function(e,t,r){var n=this._writableState,i=!1,s=!n.objectMode&&B4(e);return s&&!Bu.isBuffer(e)&&(e=P4(e)),typeof t=="function"&&(r=t,t=null),s?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=D4),n.ended?L4(this,r):(s||j4(this,n,e,r))&&(n.pendingcb++,i=k4(this,n,s,e,t,r)),i};Pe.prototype.cork=function(){var e=this._writableState;e.corked++};Pe.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&Y_(this,e))};Pe.prototype.setDefaultEncoding=a(function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},"setDefaultEncoding");function U4(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Bu.from(t,r)),t}a(U4,"decodeChunk");Object.defineProperty(Pe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k4(e,t,r,n,i,s){if(!r){var o=U4(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else hy(e,t,!1,c,n,i,s);return l}a(k4,"writeOrBuffer");function hy(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}a(hy,"doWrite");function F4(e,t,r,n,i){--t.pendingcb,r?(fi.nextTick(i,n),fi.nextTick(Vo,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),Vo(e,t))}a(F4,"onwriteError");function W4(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}a(W4,"onwriteStateUpdate");function z4(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(W4(r),t)F4(e,r,n,t,i);else{var s=J_(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Y_(e,r),n?I4($_,e,r,s,i):$_(e,r,s,i)}}a(z4,"onwrite");function $_(e,t,r,n){r||$4(e,t),t.pendingcb--,n(),Vo(e,t)}a($_,"afterWrite");function $4(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}a($4,"onwriteDrain");function Y_(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0,c=!0;r;)i[o]=r,r.isBuf||(c=!1),r=r.next,o+=1;i.allBuffers=c,hy(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new H_(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,p=r.callback,d=t.objectMode?1:l.length;if(hy(e,t,!1,d,l,u,p),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}a(Y_,"clearBuffer");Pe.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};Pe.prototype._writev=null;Pe.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||K4(this,n,r)};function J_(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}a(J_,"needFinish");function H4(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Vo(e,t)})}a(H4,"callFinal");function V4(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,fi.nextTick(H4,e,t)):(t.prefinished=!0,e.emit("prefinish")))}a(V4,"prefinish");function Vo(e,t){var r=J_(t);return r&&(V4(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}a(Vo,"finishMaybe");function K4(e,t,r){t.ending=!0,Vo(e,t),r&&(t.finished?fi.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}a(K4,"endWritable");function G4(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}a(G4,"onCorkedFinish");Object.defineProperty(Pe.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Pe.prototype.destroy=G_.destroy;Pe.prototype._undestroy=G_.undestroy;Pe.prototype._destroy=function(e,t){this.end(),t(e)}});var di=y((Uie,tA)=>{"use strict";var Q_=$o(),Y4=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};tA.exports=Br;var Z_=Object.create(ms());Z_.inherits=ys();var eA=vy(),gy=my();Z_.inherits(Br,eA);for(yy=Y4(gy.prototype),Du=0;Du<yy.length;Du++)Lu=yy[Du],Br.prototype[Lu]||(Br.prototype[Lu]=gy.prototype[Lu]);var yy,Lu,Du;function Br(e){if(!(this instanceof Br))return new Br(e);eA.call(this,e),gy.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",J4)}a(Br,"Duplex");Object.defineProperty(Br.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function J4(){this.allowHalfOpen||this._writableState.ended||Q_.nextTick(X4,this)}a(J4,"onend");function X4(e){e.end()}a(X4,"onEndNT");Object.defineProperty(Br.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});Br.prototype._destroy=function(e,t){this.push(null),this.end(),Q_.nextTick(t,e)}});var by=y(nA=>{"use strict";var Sy=pt().Buffer,rA=Sy.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Q4(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}a(Q4,"_normalizeEncoding");function Z4(e){var t=Q4(e);if(typeof t!="string"&&(Sy.isEncoding===rA||!rA(e)))throw new Error("Unknown encoding: "+e);return t||e}a(Z4,"normalizeEncoding");nA.StringDecoder=Go;function Go(e){this.encoding=Z4(e);var t;switch(this.encoding){case"utf16le":this.text=s6,this.end=o6,t=4;break;case"utf8":this.fillLast=r6,t=4;break;case"base64":this.text=a6,this.end=c6,t=3;break;default:this.write=u6,this.end=l6;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Sy.allocUnsafe(t)}a(Go,"StringDecoder");Go.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Go.prototype.end=i6;Go.prototype.text=n6;Go.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function xy(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}a(xy,"utf8CheckByte");function e6(e,t,r){var n=t.length-1;if(n<r)return 0;var i=xy(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=xy(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=xy(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}a(e6,"utf8CheckIncomplete");function t6(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}a(t6,"utf8CheckExtraBytes");function r6(e){var t=this.lastTotal-this.lastNeed,r=t6(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}a(r6,"utf8FillLast");function n6(e,t){var r=e6(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}a(n6,"utf8Text");function i6(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}a(i6,"utf8End");function s6(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}a(s6,"utf16Text");function o6(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}a(o6,"utf16End");function a6(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}a(a6,"base64Text");function c6(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}a(c6,"base64End");function u6(e){return e.toString(this.encoding)}a(u6,"simpleWrite");function l6(e){return e&&e.length?this.write(e):""}a(l6,"simpleEnd")});var vy=y(($ie,mA)=>{"use strict";var xs=$o();mA.exports=he;var p6=D_(),Yo;he.ReadableState=lA;var zie=require("events").EventEmitter,aA=a(function(e,t){return e.listeners(t).length},"EElistenerCount"),Cy=cy(),Jo=pt().Buffer,f6=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d6(e){return Jo.from(e)}a(d6,"_uint8ArrayToBuffer");function h6(e){return Jo.isBuffer(e)||e instanceof f6}a(h6,"_isUint8Array");var cA=Object.create(ms());cA.inherits=ys();var wy=require("util"),ce=void 0;wy&&wy.debuglog?ce=wy.debuglog("stream"):ce=a(function(){},"debug");var m6=k_(),uA=dy(),vs;cA.inherits(he,Cy);var Ey=["error","close","destroy","pause","resume"];function y6(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):p6(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}a(y6,"prependListener");function lA(e,t){Yo=Yo||di(),e=e||{};var r=t instanceof Yo;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m6,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(vs||(vs=by().StringDecoder),this.decoder=new vs(e.encoding),this.encoding=e.encoding)}a(lA,"ReadableState");function he(e){if(Yo=Yo||di(),!(this instanceof he))return new he(e);this._readableState=new lA(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Cy.call(this)}a(he,"Readable");Object.defineProperty(he.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});he.prototype.destroy=uA.destroy;he.prototype._undestroy=uA.undestroy;he.prototype._destroy=function(e,t){this.push(null),t(e)};he.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Jo.from(e,t),t=""),n=!0),pA(this,e,t,!1,n)};he.prototype.unshift=function(e){return pA(this,e,null,!0,!1)};function pA(e,t,r,n,i){var s=e._readableState;if(t===null)s.reading=!1,S6(e,s);else{var o;i||(o=g6(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?(typeof t!="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==Jo.prototype&&(t=d6(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Oy(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||t.length!==0?Oy(e,s,t,!1):fA(e,s)):Oy(e,s,t,!1))):n||(s.reading=!1)}return v6(s)}a(pA,"readableAddChunk");function Oy(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&ju(e)),fA(e,t)}a(Oy,"addChunk");function g6(e,t){var r;return!h6(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}a(g6,"chunkInvalid");function v6(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}a(v6,"needMoreData");he.prototype.isPaused=function(){return this._readableState.flowing===!1};he.prototype.setEncoding=function(e){return vs||(vs=by().StringDecoder),this._readableState.decoder=new vs(e),this._readableState.encoding=e,this};var iA=8388608;function x6(e){return e>=iA?e=iA:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}a(x6,"computeNewHighWaterMark");function sA(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=x6(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}a(sA,"howMuchToRead");he.prototype.read=function(e){ce("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return ce("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ty(this):ju(this),null;if(e=sA(e,t),e===0&&t.ended)return t.length===0&&Ty(this),null;var n=t.needReadable;ce("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,ce("length less than watermark",n)),t.ended||t.reading?(n=!1,ce("reading or ended",n)):n&&(ce("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=sA(r,t)));var i;return e>0?i=dA(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ty(this)),i!==null&&this.emit("data",i),i};function S6(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,ju(e)}}a(S6,"onEofChunk");function ju(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(ce("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?xs.nextTick(oA,e):oA(e))}a(ju,"emitReadable");function oA(e){ce("emit readable"),e.emit("readable"),_y(e)}a(oA,"emitReadable_");function fA(e,t){t.readingMore||(t.readingMore=!0,xs.nextTick(b6,e,t))}a(fA,"maybeReadMore");function b6(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(ce("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}a(b6,"maybeReadMore_");he.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};he.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,ce("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,s=i?c:x;n.endEmitted?xs.nextTick(s):r.once("end",s),e.on("unpipe",o);function o(w,C){ce("onunpipe"),w===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,p())}a(o,"onunpipe");function c(){ce("onend"),e.end()}a(c,"onend");var l=w6(r);e.on("drain",l);var u=!1;function p(){ce("cleanup"),e.removeListener("close",m),e.removeListener("finish",v),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",o),r.removeListener("end",c),r.removeListener("end",x),r.removeListener("data",f),u=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}a(p,"cleanup");var d=!1;r.on("data",f);function f(w){ce("ondata"),d=!1;var C=e.write(w);C===!1&&!d&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&hA(n.pipes,e)!==-1)&&!u&&(ce("false write response, pause",n.awaitDrain),n.awaitDrain++,d=!0),r.pause())}a(f,"ondata");function h(w){ce("onerror",w),x(),e.removeListener("error",h),aA(e,"error")===0&&e.emit("error",w)}a(h,"onerror"),y6(e,"error",h);function m(){e.removeListener("finish",v),x()}a(m,"onclose"),e.once("close",m);function v(){ce("onfinish"),e.removeListener("close",m),x()}a(v,"onfinish"),e.once("finish",v);function x(){ce("unpipe"),r.unpipe(e)}return a(x,"unpipe"),e.emit("pipe",r),n.flowing||(ce("pipe resume"),r.resume()),e};function w6(e){return function(){var t=e._readableState;ce("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&aA(e,"data")&&(t.flowing=!0,_y(e))}}a(w6,"pipeOnDrain");he.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=hA(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};he.prototype.on=function(e,t){var r=Cy.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ju(this):xs.nextTick(E6,this))}return r};he.prototype.addListener=he.prototype.on;function E6(e){ce("readable nexttick read 0"),e.read(0)}a(E6,"nReadingNextTick");he.prototype.resume=function(){var e=this._readableState;return e.flowing||(ce("resume"),e.flowing=!0,O6(this,e)),this};function O6(e,t){t.resumeScheduled||(t.resumeScheduled=!0,xs.nextTick(T6,e,t))}a(O6,"resume");function T6(e,t){t.reading||(ce("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),_y(e),t.flowing&&!t.reading&&e.read(0)}a(T6,"resume_");he.prototype.pause=function(){return ce("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ce("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function _y(e){var t=e._readableState;for(ce("flow",t.flowing);t.flowing&&e.read()!==null;);}a(_y,"flow");he.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(ce("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(ce("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var c=t.push(o);c||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(o){return function(){return e[o].apply(e,arguments)}}(i));for(var s=0;s<Ey.length;s++)e.on(Ey[s],this.emit.bind(this,Ey[s]));return this._read=function(o){ce("wrapped _read",o),n&&(n=!1,e.resume())},this};Object.defineProperty(he.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});he._fromList=dA;function dA(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=C6(e,t.buffer,t.decoder),r}a(dA,"fromList");function C6(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?_6(e,t):A6(e,t),n}a(C6,"fromListPartial");function _6(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),e-=o,e===0){o===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++n}return t.length-=n,i}a(_6,"copyFromBufferString");function A6(e,t){var r=Jo.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,o),e-=o,e===0){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}a(A6,"copyFromBuffer");function Ty(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,xs.nextTick(N6,t,e))}a(Ty,"endReadable");function N6(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}a(N6,"endReadableNT");function hA(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}a(hA,"indexOf")});var Ay=y((Vie,vA)=>{"use strict";vA.exports=Dr;var Uu=di(),gA=Object.create(ms());gA.inherits=ys();gA.inherits(Dr,Uu);function R6(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}a(R6,"afterTransform");function Dr(e){if(!(this instanceof Dr))return new Dr(e);Uu.call(this,e),this._transformState={afterTransform:R6.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",I6)}a(Dr,"Transform");function I6(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){yA(e,t,r)}):yA(this,null,null)}a(I6,"prefinish");Dr.prototype.push=function(e,t){return this._transformState.needTransform=!1,Uu.prototype.push.call(this,e,t)};Dr.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Dr.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Dr.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Dr.prototype._destroy=function(e,t){var r=this;Uu.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function yA(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}a(yA,"done")});var wA=y((Gie,bA)=>{"use strict";bA.exports=Xo;var xA=Ay(),SA=Object.create(ms());SA.inherits=ys();SA.inherits(Xo,xA);function Xo(e){if(!(this instanceof Xo))return new Xo(e);xA.call(this,e)}a(Xo,"PassThrough");Xo.prototype._transform=function(e,t,r){r(null,e)}});var EA=y((Ke,ku)=>{var hr=require("stream");process.env.READABLE_STREAM==="disable"&&hr?(ku.exports=hr,Ke=ku.exports=hr.Readable,Ke.Readable=hr.Readable,Ke.Writable=hr.Writable,Ke.Duplex=hr.Duplex,Ke.Transform=hr.Transform,Ke.PassThrough=hr.PassThrough,Ke.Stream=hr):(Ke=ku.exports=vy(),Ke.Stream=hr||Ke,Ke.Readable=Ke,Ke.Writable=my(),Ke.Duplex=di(),Ke.Transform=Ay(),Ke.PassThrough=wA())});var TA=y((Jie,OA)=>{"use strict";var Ny=EA().Duplex,q6=require("util"),mr=pt().Buffer;function le(e){if(!(this instanceof le))return new le(e);if(this._bufs=[],this.length=0,typeof e=="function"){this._callback=e;var t=a(function(n){this._callback&&(this._callback(n),this._callback=null)},"piper").bind(this);this.on("pipe",a(function(n){n.on("error",t)},"onPipe")),this.on("unpipe",a(function(n){n.removeListener("error",t)},"onUnpipe"))}else this.append(e);Ny.call(this)}a(le,"BufferList");q6.inherits(le,Ny);le.prototype._offset=a(function(t){var r=0,n=0,i;if(t===0)return[0,0];for(;n<this._bufs.length;n++){if(i=r+this._bufs[n].length,t<i||n==this._bufs.length-1)return[n,t-r];r=i}},"_offset");le.prototype._reverseOffset=function(e){for(var t=e[0],r=e[1],n=0;n<t;n++)r+=this._bufs[n].length;return r};le.prototype.append=a(function(t){var r=0;if(mr.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;r<t.length;r++)this.append(t[r]);else if(t instanceof le)for(;r<t._bufs.length;r++)this.append(t._bufs[r]);else t!=null&&(typeof t=="number"&&(t=t.toString()),this._appendBuffer(mr.from(t)));return this},"append");le.prototype._appendBuffer=a(function(t){this._bufs.push(t),this.length+=t.length},"appendBuffer");le.prototype._write=a(function(t,r,n){this._appendBuffer(t),typeof n=="function"&&n()},"_write");le.prototype._read=a(function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},"_read");le.prototype.end=a(function(t){Ny.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},"end");le.prototype.get=a(function(t){if(!(t>this.length||t<0)){var r=this._offset(t);return this._bufs[r[0]][r[1]]}},"get");le.prototype.slice=a(function(t,r){return typeof t=="number"&&t<0&&(t+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,t,r)},"slice");le.prototype.copy=a(function(t,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return t||mr.alloc(0);var s=!!t,o=this._offset(n),c=i-n,l=c,u=s&&r||0,p=o[1],d,f;if(n===0&&i==this.length){if(!s)return this._bufs.length===1?this._bufs[0]:mr.concat(this._bufs,this.length);for(f=0;f<this._bufs.length;f++)this._bufs[f].copy(t,u),u+=this._bufs[f].length;return t}if(l<=this._bufs[o[0]].length-p)return s?this._bufs[o[0]].copy(t,r,p,p+l):this._bufs[o[0]].slice(p,p+l);for(s||(t=mr.allocUnsafe(c)),f=o[0];f<this._bufs.length;f++){if(d=this._bufs[f].length-p,l>d)this._bufs[f].copy(t,u,p),u+=d;else{this._bufs[f].copy(t,u,p,p+l),u+=d;break}l-=d,p&&(p=0)}return t.length>u?t.slice(0,u):t},"copy");le.prototype.shallowSlice=a(function(t,r){if(t=t||0,r=typeof r!="number"?this.length:r,t<0&&(t+=this.length),r<0&&(r+=this.length),t===r)return new le;var n=this._offset(t),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]==0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!=0&&(s[0]=s[0].slice(n[1])),new le(s)},"shallowSlice");le.prototype.toString=a(function(t,r,n){return this.slice(r,n).toString(t)},"toString");le.prototype.consume=a(function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;)if(t>=this._bufs[0].length)t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}return this},"consume");le.prototype.duplicate=a(function(){for(var t=0,r=new le;t<this._bufs.length;t++)r.append(this._bufs[t]);return r},"duplicate");le.prototype.destroy=a(function(){this._bufs.length=0,this.length=0,this.push(null)},"destroy");le.prototype.indexOf=function(e,t,r){if(r===void 0&&typeof t=="string"&&(r=t,t=void 0),typeof e=="function"||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof e=="number"?e=mr.from([e]):typeof e=="string"?e=mr.from(e,r):e instanceof le?e=e.slice():mr.isBuffer(e)||(e=mr.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),e.length===0)return t>this.length?this.length:t;var n=this._offset(t),i=n[0],s=n[1];for(i;i<this._bufs.length;i++){for(var o=this._bufs[i];s<o.length;){var c=o.length-s;if(c>=e.length){var l=o.indexOf(e,s);if(l!==-1)return this._reverseOffset([i,l]);s=o.length-e.length+1}else{var u=this._reverseOffset([i,s]);if(this._match(u,e))return u;s++}}s=0}return-1};le.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0};(function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)(function(r){e[r]===null?le.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:le.prototype[r]=function(n){return this.slice(n,n+e[r])[r](0)}})(t)})();OA.exports=le});var qA=y((Qie,IA)=>{"use strict";var M6=require("stream").Duplex,P6=TA(),CA=q().MongoParseError,B6=Ar().decompress,_A=Bt().Response,AA=Xn().BinMsg,D6=q().MongoError,L6=ue().opcodes.OP_COMPRESSED,NA=ue().opcodes.OP_MSG,_n=ue().MESSAGE_HEADER_SIZE,RA=ue().COMPRESSION_DETAILS_SIZE,j6=ue().opcodes,U6=Ar().compress,k6=Ar().compressorIDs,F6=Ar().uncompressibleCommands,W6=Xn().Msg,z6=1024*1024*16*4,Ry=Symbol("buffer"),My=class My extends M6{constructor(t){t=t||{},super(t),this.bson=t.bson,this.maxBsonMessageSize=t.maxBsonMessageSize||z6,this[Ry]=new P6}_write(t,r,n){this[Ry].append(t),qy(this,n)}_read(){}writeCommand(t,r){if(!(r&&!!r.agreedCompressor)||!$6(t)){let c=t.toBin();this.push(Array.isArray(c)?Buffer.concat(c):c);return}let i=Buffer.concat(t.toBin()),s=i.slice(_n),o=i.readInt32LE(12);U6({options:r},s,(c,l)=>{if(c){r.cb(c,null);return}let u=Buffer.alloc(_n);u.writeInt32LE(_n+RA+l.length,0),u.writeInt32LE(t.requestId,4),u.writeInt32LE(0,8),u.writeInt32LE(j6.OP_COMPRESSED,12);let p=Buffer.alloc(RA);p.writeInt32LE(o,0),p.writeInt32LE(s.length,4),p.writeUInt8(k6[r.agreedCompressor],8),this.push(Buffer.concat([u,p,l]))})}};a(My,"MessageStream");var Iy=My;function $6(e){let t=e instanceof W6?e.command:e.query,r=Object.keys(t)[0];return!F6.has(r)}a($6,"canCompress");function qy(e,t){let r=e[Ry];if(r.length<4){t();return}let n=r.readInt32LE(0);if(n<0){t(new CA(`Invalid message size: ${n}`));return}if(n>e.maxBsonMessageSize){t(new CA(`Invalid message size: ${n}, max allowed: ${e.maxBsonMessageSize}`));return}if(n>r.length){t();return}let i=r.slice(0,n);r.consume(n);let s={length:i.readInt32LE(0),requestId:i.readInt32LE(4),responseTo:i.readInt32LE(8),opCode:i.readInt32LE(12)},o=s.opCode===NA?AA:_A,c=e.responseOptions;if(s.opCode!==L6){let p=i.slice(_n);e.emit("message",new o(e.bson,i,s,p,c)),r.length>=4?qy(e,t):t();return}s.fromCompressed=!0,s.opCode=i.readInt32LE(_n),s.length=i.readInt32LE(_n+4);let l=i[_n+8],u=i.slice(_n+9);o=s.opCode===NA?AA:_A,B6(l,u,(p,d)=>{if(p){t(p);return}if(d.length!==s.length){t(new D6("Decompressing a compressed message from the server failed. The message is corrupt."));return}e.emit("message",new o(e.bson,i,s,d,c)),r.length>=4?qy(e,t):t()})}a(qy,"processIncomingData");IA.exports=Iy});var BA=y((ese,PA)=>{"use strict";var MA=Jn().parseServerType,H6=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","__nodejs_mock_server__"],By=class By{constructor(t,r){this.address=t,this.type=MA(null),this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.compressors=r&&r.compression&&Array.isArray(r.compression.compressors)?r.compression.compressors:[]}receiveResponse(t){this.type=MA(t),H6.forEach(r=>{typeof t[r]<"u"&&(this[r]=t[r])}),t.compression&&(this.compressor=this.compressors.filter(r=>t.compression.indexOf(r)!==-1)[0])}};a(By,"StreamDescription");var Py=By;PA.exports={StreamDescription:Py}});var Wy=y((rse,UA)=>{"use strict";var V6=require("events"),K6=qA(),DA=q().MongoError,G6=q().MongoNetworkError,Y6=q().MongoNetworkTimeoutError,J6=q().MongoWriteConcernError,X6=Fc(),Q6=BA().StreamDescription,hi=Cm(),Fu=Nh(),Z6=yn().updateSessionFromResponse,eH=U().uuidV4,Ly=b().now,tH=b().calculateDurationInMs,An=Symbol("stream"),Lr=Symbol("queue"),Ss=Symbol("messageStream"),LA=Symbol("generation"),Dy=Symbol("lastUseTime"),ky=Symbol("clusterTime"),Nn=Symbol("description"),jA=Symbol("ismaster"),jy=Symbol("autoEncrypter"),Fy=class Fy extends V6{constructor(t,r){super(r),this.id=r.id,this.address=nH(t),this.bson=r.bson,this.socketTimeout=typeof r.socketTimeout=="number"?r.socketTimeout:0,this.host=r.host||"localhost",this.port=r.port||27017,this.monitorCommands=typeof r.monitorCommands=="boolean"?r.monitorCommands:!1,this.serverApi=r.serverApi,this.closed=!1,this.destroyed=!1,this[Nn]=new Q6(this.address,r),this[LA]=r.generation,this[Dy]=Ly(),r.autoEncrypter&&(this[jy]=r.autoEncrypter),this[Lr]=new Map,this[Ss]=new K6(r),this[Ss].on("message",rH(this)),this[An]=t,t.on("error",()=>{}),this[Ss].on("error",n=>this.handleIssue({destroy:n})),t.on("close",()=>this.handleIssue({isClose:!0})),t.on("timeout",()=>this.handleIssue({isTimeout:!0,destroy:!0})),t.pipe(this[Ss]),this[Ss].pipe(t)}get description(){return this[Nn]}get ismaster(){return this[jA]}set ismaster(t){this[Nn].receiveResponse(t),this[jA]=t}get generation(){return this[LA]||0}get idleTime(){return tH(this[Dy])}get clusterTime(){return this[ky]}get stream(){return this[An]}markAvailable(){this[Dy]=Ly()}handleIssue(t){if(!this.closed){t.destroy&&this[An].destroy(typeof t.destroy=="boolean"?void 0:t.destroy),this.closed=!0;for(let r of this[Lr]){let n=r[1];t.isTimeout?n.cb(new Y6(`connection ${this.id} to ${this.address} timed out`,{beforeHandshake:this.ismaster==null})):t.isClose?n.cb(new G6(`connection ${this.id} to ${this.address} closed`)):n.cb(typeof t.destroy=="boolean"?void 0:t.destroy)}this[Lr].clear(),this.emit("close")}}destroy(t,r){if(typeof t=="function"&&(r=t,t={}),t=Object.assign({force:!1},t),this[An]==null||this.destroyed){this.destroyed=!0,typeof r=="function"&&r();return}if(t.force){this[An].destroy(),this.destroyed=!0,typeof r=="function"&&r();return}this[An].end(n=>{this.destroyed=!0,typeof r=="function"&&r(n)})}applyApiVersion(t){return this.serverApi&&(t.serverApi=this.serverApi),t}command(t,r,n,i){typeof n=="function"&&(i=n,n={}),hi.command(mi(this),t,r,this.applyApiVersion(n),i)}query(t,r,n,i,s){hi.query(mi(this),t,r,n,this.applyApiVersion(i),s)}getMore(t,r,n,i,s){hi.getMore(mi(this),t,r,n,this.applyApiVersion(i),s)}killCursors(t,r,n){hi.killCursors(mi(this),t,r,this.applyApiVersion({}),n)}insert(t,r,n,i){hi.insert(mi(this),t,r,this.applyApiVersion(n),i)}update(t,r,n,i){hi.update(mi(this),t,r,this.applyApiVersion(n),i)}remove(t,r,n,i){hi.remove(mi(this),t,r,this.applyApiVersion(n),i)}};a(Fy,"Connection");var Uy=Fy;function mi(e){let t={description:e.description,clusterTime:e[ky],s:{bson:e.bson,pool:{write:iH.bind(e),isConnected:()=>!0}}};return e[jy]&&(t.autoEncrypter=e[jy]),t}a(mi,"makeServerTrampoline");function rH(e){return a(function(r){if(e.emit("message",r),!e[Lr].has(r.responseTo))return;let n=e[Lr].get(r.responseTo),i=n.cb;e[Lr].delete(r.responseTo),r.moreToCome?e[Lr].set(r.requestId,n):n.socketTimeoutOverride&&e[An].setTimeout(e.socketTimeout);try{r.parse(n)}catch(s){i(new DA(s));return}if(r.documents[0]){let s=r.documents[0],o=n.session;if(o&&Z6(o,s),s.$clusterTime&&(e[ky]=s.$clusterTime,e.emit("clusterTimeReceived",s.$clusterTime)),n.command){if(s.writeConcernError){i(new J6(s.writeConcernError,s));return}if(s.ok===0||s.$err||s.errmsg||s.code){i(new DA(s));return}}}i(void 0,new X6(n.fullResult?r:r.documents[0],e,r))},"messageHandler")}a(rH,"messageHandler");function nH(e){return typeof e.address=="function"?`${e.remoteAddress}:${e.remotePort}`:eH().toString("hex")}a(nH,"streamIdentifier");function iH(e,t,r){typeof t=="function"&&(r=t),t=t||{};let n={requestId:e.requestId,cb:r,session:t.session,fullResult:typeof t.fullResult=="boolean"?t.fullResult:!1,noResponse:typeof t.noResponse=="boolean"?t.noResponse:!1,documentsReturnedIn:t.documentsReturnedIn,command:!!t.command,promoteLongs:typeof t.promoteLongs=="boolean"?t.promoteLongs:!0,promoteValues:typeof t.promoteValues=="boolean"?t.promoteValues:!0,promoteBuffers:typeof t.promoteBuffers=="boolean"?t.promoteBuffers:!1,bsonRegExp:typeof t.bsonRegExp=="boolean"?t.bsonRegExp:!1,raw:typeof t.raw=="boolean"?t.raw:!1};this[Nn]&&this[Nn].compressor&&(n.agreedCompressor=this[Nn].compressor,this[Nn].zlibCompressionLevel&&(n.zlibCompressionLevel=this[Nn].zlibCompressionLevel)),typeof t.socketTimeout=="number"&&(n.socketTimeoutOverride=!0,this[An].setTimeout(t.socketTimeout)),this.monitorCommands&&(this.emit("commandStarted",new Fu.CommandStartedEvent(this,e)),n.started=Ly(),n.cb=(i,s)=>{i?this.emit("commandFailed",new Fu.CommandFailedEvent(this,e,i,n.started)):s&&s.result&&(s.result.ok===0||s.result.$err)?this.emit("commandFailed",new Fu.CommandFailedEvent(this,e,s.result,n.started)):this.emit("commandSucceeded",new Fu.CommandSucceededEvent(this,e,s,n.started)),typeof r=="function"&&r(i,s)}),n.noResponse||this[Lr].set(n.requestId,n);try{this[Ss].writeCommand(e,n)}catch(i){if(!n.noResponse){this[Lr].delete(n.requestId),n.cb(i);return}}n.noResponse&&n.cb()}a(iH,"write");UA.exports={Connection:Uy}});var WA=y((ise,FA)=>{"use strict";var kA=q().MongoError,Hy=class Hy extends kA{constructor(t){super("Attempted to check out a connection from closed connection pool"),this.name="MongoPoolClosedError",this.address=t.address}};a(Hy,"PoolClosedError");var zy=Hy,Vy=class Vy extends kA{constructor(t){super("Timed out while checking out a connection from connection pool"),this.name="MongoWaitQueueTimeoutError",this.address=t.address}};a(Vy,"WaitQueueTimeoutError");var $y=Vy;FA.exports={PoolClosedError:zy,WaitQueueTimeoutError:$y}});var Qo=y((ose,zA)=>{"use strict";var ng=class ng{constructor(t){this.time=new Date,this.address=t.address}};a(ng,"ConnectionPoolMonitoringEvent");var Zt=ng,ig=class ig extends Zt{constructor(t){super(t),this.options=t.options}};a(ig,"ConnectionPoolCreatedEvent");var Ky=ig,sg=class sg extends Zt{constructor(t){super(t)}};a(sg,"ConnectionPoolClosedEvent");var Gy=sg,og=class og extends Zt{constructor(t,r){super(t),this.connectionId=r.id}};a(og,"ConnectionCreatedEvent");var Yy=og,ag=class ag extends Zt{constructor(t,r){super(t),this.connectionId=r.id}};a(ag,"ConnectionReadyEvent");var Jy=ag,cg=class cg extends Zt{constructor(t,r,n){super(t),this.connectionId=r.id,this.reason=n||"unknown"}};a(cg,"ConnectionClosedEvent");var Xy=cg,ug=class ug extends Zt{constructor(t){super(t)}};a(ug,"ConnectionCheckOutStartedEvent");var Qy=ug,lg=class lg extends Zt{constructor(t,r){super(t),this.reason=r}};a(lg,"ConnectionCheckOutFailedEvent");var Zy=lg,pg=class pg extends Zt{constructor(t,r){super(t),this.connectionId=r.id}};a(pg,"ConnectionCheckedOutEvent");var eg=pg,fg=class fg extends Zt{constructor(t,r){super(t),this.connectionId=r.id}};a(fg,"ConnectionCheckedInEvent");var tg=fg,dg=class dg extends Zt{constructor(t){super(t)}};a(dg,"ConnectionPoolClearedEvent");var rg=dg,sH=["connectionPoolCreated","connectionPoolClosed","connectionCreated","connectionReady","connectionClosed","connectionCheckOutStarted","connectionCheckOutFailed","connectionCheckedOut","connectionCheckedIn","connectionPoolCleared"];zA.exports={CMAP_EVENT_NAMES:sH,ConnectionPoolCreatedEvent:Ky,ConnectionPoolClosedEvent:Gy,ConnectionCreatedEvent:Yy,ConnectionReadyEvent:Jy,ConnectionClosedEvent:Xy,ConnectionCheckOutStartedEvent:Qy,ConnectionCheckOutFailedEvent:Zy,ConnectionCheckedOutEvent:eg,ConnectionCheckedInEvent:tg,ConnectionPoolClearedEvent:rg}});var tN=y((cse,eN)=>{"use strict";var $A=Ru(),HA=require("events").EventEmitter,oH=Vt(),aH=b().makeCounter,cH=q().MongoError,uH=Wy().Connection,lH=U().eachAsync,pH=eu(),fH=U().relayEvents,KA=WA(),dH=KA.PoolClosedError,hH=KA.WaitQueueTimeoutError,yr=Qo(),mH=yr.ConnectionPoolCreatedEvent,yH=yr.ConnectionPoolClosedEvent,gH=yr.ConnectionCreatedEvent,vH=yr.ConnectionReadyEvent,GA=yr.ConnectionClosedEvent,xH=yr.ConnectionCheckOutStartedEvent,hg=yr.ConnectionCheckOutFailedEvent,VA=yr.ConnectionCheckedOutEvent,SH=yr.ConnectionCheckedInEvent,bH=yr.ConnectionPoolClearedEvent,YA=Symbol("logger"),jr=Symbol("connections"),ea=Symbol("permits"),Wu=Symbol("minPoolSizeTimer"),Zo=Symbol("generation"),zu=Symbol("connectionCounter"),$u=Symbol("cancellationToken"),Rn=Symbol("waitQueue"),Hu=Symbol("cancelled"),wH=new Set(["ssl","bson","connectionType","serverApi","monitorCommands","socketTimeout","credentials","compression","host","port","localAddress","localPort","family","hints","lookup","path","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","passphrase","pfx","secureOptions","secureProtocol","sessionIdContext","allowHalfOpen","rejectUnauthorized","pskCallback","ALPNProtocols","servername","checkServerIdentity","session","minDHSize","secureContext","maxPoolSize","minPoolSize","maxIdleTimeMS","waitQueueTimeoutMS"]);function EH(e,t){let r=Array.from(wH).reduce((n,i)=>(Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]),n),{});return Object.freeze(Object.assign({},t,r))}a(EH,"resolveOptions");var gg=class gg extends HA{constructor(t){if(super(),t=t||{},this.closed=!1,this.options=EH(t,{connectionType:uH,maxPoolSize:typeof t.maxPoolSize=="number"?t.maxPoolSize:100,minPoolSize:typeof t.minPoolSize=="number"?t.minPoolSize:0,maxIdleTimeMS:typeof t.maxIdleTimeMS=="number"?t.maxIdleTimeMS:0,waitQueueTimeoutMS:typeof t.waitQueueTimeoutMS=="number"?t.waitQueueTimeoutMS:0,autoEncrypter:t.autoEncrypter,metadata:t.metadata,useUnifiedTopology:t.useUnifiedTopology}),t.minSize>t.maxSize)throw new TypeError("Connection pool minimum size must not be greater than maximum pool size");this[YA]=oH("ConnectionPool",t),this[jr]=new $A,this[ea]=this.options.maxPoolSize,this[Wu]=void 0,this[Zo]=0,this[zu]=aH(1),this[$u]=new HA,this[$u].setMaxListeners(1/0),this[Rn]=new $A,process.nextTick(()=>{this.emit("connectionPoolCreated",new mH(this)),JA(this)})}get address(){return`${this.options.host}:${this.options.port}`}get generation(){return this[Zo]}get totalConnectionCount(){return this[jr].length+(this.options.maxPoolSize-this[ea])}get availableConnectionCount(){return this[jr].length}get waitQueueSize(){return this[Rn].length}checkOut(t){if(this.emit("connectionCheckOutStarted",new xH(this)),this.closed){this.emit("connectionCheckOutFailed",new hg(this,"poolClosed")),t(new dH(this));return}let r={callback:t},n=this,i=this.options.waitQueueTimeoutMS;i&&(r.timer=setTimeout(()=>{r[Hu]=!0,r.timer=void 0,n.emit("connectionCheckOutFailed",new hg(n,"timeout")),r.callback(new hH(n))},i)),this[Rn].push(r),process.nextTick(()=>yg(this))}checkIn(t){let r=this.closed,n=XA(this,t),i=!!(r||n||t.closed);if(i||(t.markAvailable(),this[jr].push(t)),this.emit("connectionCheckedIn",new SH(this,t)),i){let s=t.closed?"error":r?"poolClosed":"stale";ZA(this,t,s)}process.nextTick(()=>yg(this))}clear(){this[Zo]+=1,this.emit("connectionPoolCleared",new bH(this))}close(t,r){if(typeof t=="function"&&(r=t),t=Object.assign({force:!1},t),this.closed)return r();for(this[$u].emit("cancel");this.waitQueueSize;){let n=this[Rn].pop();clearTimeout(n.timer),n[Hu]||n.callback(new cH("connection pool closed"))}this[Wu]&&clearTimeout(this[Wu]),typeof this[zu].return=="function"&&this[zu].return(),this.closed=!0,lH(this[jr].toArray(),(n,i)=>{this.emit("connectionClosed",new GA(this,n,"poolClosed")),n.destroy(t,i)},n=>{this[jr].clear(),this.emit("connectionPoolClosed",new yH(this)),r(n)})}withConnection(t,r){this.checkOut((n,i)=>{t(n,i,(s,o)=>{typeof r=="function"&&(s?r(s):r(void 0,o)),i&&this.checkIn(i)})})}};a(gg,"ConnectionPool");var mg=gg;function JA(e){if(e.closed||e.options.minPoolSize===0)return;let t=e.options.minPoolSize;for(let r=e.totalConnectionCount;r<t;++r)QA(e);e[Wu]=setTimeout(()=>JA(e),10)}a(JA,"ensureMinPoolSize");function XA(e,t){return t.generation!==e[Zo]}a(XA,"connectionIsStale");function OH(e,t){return!!(e.options.maxIdleTimeMS&&t.idleTime>e.options.maxIdleTimeMS)}a(OH,"connectionIsIdle");function QA(e,t){let r=Object.assign({id:e[zu].next().value,generation:e[Zo]},e.options);e[ea]--,pH(r,e[$u],(n,i)=>{if(n){e[ea]++,e[YA].debug(`connection attempt failed with error [${JSON.stringify(n)}]`),typeof t=="function"&&t(n);return}if(e.closed){i.destroy({force:!0});return}if(fH(i,e,["commandStarted","commandFailed","commandSucceeded","clusterTimeReceived"]),e.emit("connectionCreated",new gH(e,i)),i.markAvailable(),e.emit("connectionReady",new vH(e,i)),typeof t=="function"){t(void 0,i);return}e[jr].push(i),process.nextTick(()=>yg(e))})}a(QA,"createConnection");function ZA(e,t,r){e.emit("connectionClosed",new GA(e,t,r)),e[ea]++,process.nextTick(()=>t.destroy())}a(ZA,"destroyConnection");function yg(e){if(e.closed)return;for(;e.waitQueueSize;){let r=e[Rn].peekFront();if(r[Hu]){e[Rn].shift();continue}if(!e.availableConnectionCount)break;let n=e[jr].shift(),i=XA(e,n),s=OH(e,n);if(!i&&!s&&!n.closed){e.emit("connectionCheckedOut",new VA(e,n)),clearTimeout(r.timer),e[Rn].shift(),r.callback(void 0,n);return}let o=n.closed?"error":i?"stale":"idle";ZA(e,n,o)}let t=e.options.maxPoolSize;if(e.waitQueueSize&&(t<=0||e.totalConnectionCount<t)){QA(e,(r,n)=>{let i=e[Rn].shift();if(i==null||i[Hu]){r==null&&e[jr].push(n);return}r?e.emit("connectionCheckOutFailed",new hg(e,r)):e.emit("connectionCheckedOut",new VA(e,n)),clearTimeout(i.timer),i.callback(r,n)});return}}a(yg,"processWaitQueue");eN.exports={ConnectionPool:mg}});var fN=y((lse,pN)=>{"use strict";var TH=Qe().ServerType,rN=require("events"),cN=eu(),CH=Wy().Connection,uN=Qe(),_H=U().makeStateMachine,AH=q().MongoNetworkError,NH=ke().retrieveBSON(),nN=b().makeInterruptableAsyncInterval,Vu=b().calculateDurationInMs,vg=b().now,bg=oy(),iN=bg.ServerHeartbeatStartedEvent,sN=bg.ServerHeartbeatSucceededEvent,RH=bg.ServerHeartbeatFailedEvent,ra=Symbol("server"),mt=Symbol("monitorId"),Ce=Symbol("connection"),yi=Symbol("cancellationToken"),Ur=Symbol("rttPinger"),ta=Symbol("roundTripTime"),qn=uN.STATE_CLOSED,In=uN.STATE_CLOSING,bs="idle",ws="monitoring",Es=_H({[In]:[In,bs,qn],[qn]:[qn,ws],[bs]:[bs,ws,In],[ws]:[ws,bs,In]}),IH=new Set([In,qn,ws]);function na(e){return e.s.state===qn||e.s.state===In}a(na,"isInCloseState");var wg=class wg extends rN{constructor(t,r){super(r),this[ra]=t,this[Ce]=void 0,this[yi]=new rN,this[yi].setMaxListeners(1/0),this[mt]=null,this.s={state:qn},this.address=t.description.address,this.options=Object.freeze({connectTimeoutMS:typeof r.connectionTimeout=="number"?r.connectionTimeout:typeof r.connectTimeoutMS=="number"?r.connectTimeoutMS:1e4,heartbeatFrequencyMS:typeof r.heartbeatFrequencyMS=="number"?r.heartbeatFrequencyMS:1e4,minHeartbeatFrequencyMS:typeof r.minHeartbeatFrequencyMS=="number"?r.minHeartbeatFrequencyMS:500,useUnifiedTopology:r.useUnifiedTopology});let n=Object.assign({id:"<monitor>",host:t.description.host,port:t.description.port,bson:t.s.bson,connectionType:CH},t.s.options,this.options,{raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0,bsonRegExp:!0});delete n.credentials,delete n.autoEncrypter,this.connectOptions=Object.freeze(n)}connect(){if(this.s.state!==qn)return;let t=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this[mt]=nN(aN(this),{interval:t,minInterval:r,immediate:!0})}requestCheck(){IH.has(this.s.state)||this[mt].wake()}reset(){let t=this[ra].description.topologyVersion;if(na(this)||t==null)return;Es(this,In),oN(this),Es(this,bs);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this[mt]=nN(aN(this),{interval:r,minInterval:n})}close(){na(this)||(Es(this,In),oN(this),this.emit("close"),Es(this,qn))}};a(wg,"Monitor");var xg=wg;function oN(e){e[mt]&&(e[mt].stop(),e[mt]=null),e[Ur]&&(e[Ur].close(),e[Ur]=void 0),e[yi].emit("cancel"),e[mt]&&(clearTimeout(e[mt]),e[mt]=void 0),e[Ce]&&e[Ce].destroy({force:!0})}a(oN,"resetMonitorState");function qH(e,t){let r=vg();e.emit("serverHeartbeatStarted",new iN(e.address));function n(i){e[Ce]&&(e[Ce].destroy({force:!0}),e[Ce]=void 0),e.emit("serverHeartbeatFailed",new RH(Vu(r),i,e.address)),e.emit("resetServer",i),e.emit("resetConnectionPool"),t(i)}if(a(n,"failureHandler"),e[Ce]!=null&&!e[Ce].closed){let i=e.options.connectTimeoutMS,s=e.options.heartbeatFrequencyMS,o=e[ra].description.topologyVersion,c=o!=null,l=e[Ce].serverApi,u=e[Ce].helloOk,p={[l||u?"hello":"ismaster"]:!0};u&&(p.helloOk=u);let d={socketTimeout:i};c&&(p.maxAwaitTimeMS=s,p.topologyVersion=MH(o),i&&(d.socketTimeout=i+s),d.exhaustAllowed=!0,e[Ur]==null&&(e[Ur]=new Sg(e[yi],e.connectOptions))),e[Ce].command("admin.$cmd",p,d,(f,h)=>{if(f){n(f);return}let m=h.result,v=e[Ur];"isWritablePrimary"in m&&(m.ismaster=m.isWritablePrimary);let x=c&&v?v.roundTripTime:Vu(r);e.emit("serverHeartbeatSucceeded",new sN(x,m,e.address)),c&&m.topologyVersion?(e.emit("serverHeartbeatStarted",new iN(e.address)),r=vg()):(e[Ur]&&(e[Ur].close(),e[Ur]=void 0),t(void 0,m))});return}cN(e.connectOptions,e[yi],(i,s)=>{if(s&&na(e)){s.destroy({force:!0});return}if(i){e[Ce]=void 0,i instanceof AH||e.emit("resetConnectionPool"),n(i);return}e[Ce]=s,e.emit("serverHeartbeatSucceeded",new sN(Vu(r),s.ismaster,e.address)),t(void 0,s.ismaster)})}a(qH,"checkServer");function aN(e){return t=>{Es(e,ws);function r(){na(e)||Es(e,bs),t()}a(r,"done"),process.nextTick(()=>e.emit("monitoring",e[ra])),qH(e,(n,i)=>{if(n&&e[ra].description.type===TH.Unknown)return e.emit("resetServer",n),r();i&&i.topologyVersion&&setTimeout(()=>{na(e)||e[mt].wake()}),r()})}}a(aN,"monitorServer");function MH(e){return{processId:e.processId,counter:NH.Long.fromNumber(e.counter)}}a(MH,"makeTopologyVersion");var Eg=class Eg{constructor(t,r){this[Ce]=null,this[yi]=t,this[ta]=0,this.closed=!1;let n=r.heartbeatFrequencyMS;this[mt]=setTimeout(()=>lN(this,r),n)}get roundTripTime(){return this[ta]}close(){this.closed=!0,clearTimeout(this[mt]),this[mt]=void 0,this[Ce]&&this[Ce].destroy({force:!0})}};a(Eg,"RTTPinger");var Sg=Eg;function lN(e,t){let r=vg(),n=e[yi],i=t.heartbeatFrequencyMS;if(e.closed)return;function s(o){if(e.closed){o.destroy({force:!0});return}e[Ce]==null&&(e[Ce]=o),e[ta]=Vu(r),e[mt]=setTimeout(()=>lN(e,t),i)}if(a(s,"measureAndReschedule"),e[Ce]==null){cN(t,n,(o,c)=>{if(o){e[Ce]=void 0,e[ta]=0;return}s(c)});return}e[Ce].command("admin.$cmd",{ismaster:1},o=>{if(o){e[Ce]=void 0,e[ta]=0;return}s()})}a(lN,"measureRoundTripTime");pN.exports={Monitor:xg}});var bN=y((fse,SN)=>{"use strict";var PH=require("events"),BH=tN().ConnectionPool,DH=Qo().CMAP_EVENT_NAMES,Fr=q().MongoError,dN=U().relayEvents,yt=ke().retrieveBSON(),LH=Vt(),mN=Jn().ServerDescription,jH=Jn().compareTopologyVersion,UH=$e(),kH=fN().Monitor,yN=q().MongoNetworkError,gN=q().MongoNetworkTimeoutError,vN=U().collationNotSupported,FH=ke().debugOptions,WH=q().isSDAMUnrecoverableError,zH=q().isRetryableWriteError,$H=q().isNodeShuttingDownError,HH=q().isNetworkErrorBeforeHandshake,Tg=U().maxWireVersion,VH=U().makeStateMachine,KH=Zn().extractCommand,oa=Qe(),GH=oa.ServerType,YH=os().isTransactionCommand,JH=["reconnect","reconnectTries","reconnectInterval","emitError","cursorFactory","host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","checkServerIdentity","socketTimeout","ssl","ca","crl","cert","key","rejectUnauthorized","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","servername"],gr=oa.STATE_CLOSING,At=oa.STATE_CLOSED,sa=oa.STATE_CONNECTING,Gu=oa.STATE_CONNECTED,Ku=VH({[At]:[At,sa],[sa]:[sa,gr,Gu,At],[Gu]:[Gu,gr,At],[gr]:[gr,At]}),kr=Symbol("monitor"),Cg=class Cg extends PH{constructor(t,r,n){super(),this.s={description:t,options:r,logger:LH("Server",r),bson:r.bson||new yt([yt.Binary,yt.Code,yt.DBRef,yt.Decimal128,yt.Double,yt.Int32,yt.Long,yt.Map,yt.MaxKey,yt.MinKey,yt.ObjectId,yt.BSONRegExp,yt.Symbol,yt.Timestamp]),state:At,credentials:r.credentials,topology:n},this.serverApi=r.serverApi;let i=Object.assign({host:this.description.host,port:this.description.port,bson:this.s.bson},r);this.s.pool=new BH(i),dN(this.s.pool,this,["commandStarted","commandSucceeded","commandFailed"].concat(DH)),this.s.pool.on("clusterTimeReceived",s=>{this.clusterTime=s}),this[kr]=new kH(this,this.s.options),dN(this[kr],this,["serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","monitoring"]),this[kr].on("resetConnectionPool",()=>{this.s.pool.clear()}),this[kr].on("resetServer",s=>Mn(this,s)),this[kr].on("serverHeartbeatSucceeded",s=>{this.emit("descriptionReceived",new mN(this.description.address,s.reply,{roundTripTime:XH(this.description.roundTripTime,s.duration)})),this.s.state===sa&&(Ku(this,Gu),this.emit("connect",this))})}get description(){return this.s.description}get supportsRetryableWrites(){return xN(this)}get name(){return this.s.description.address}get autoEncrypter(){return this.s.options&&this.s.options.autoEncrypter?this.s.options.autoEncrypter:null}connect(){this.s.state===At&&(Ku(this,sa),this[kr].connect())}destroy(t,r){if(typeof t=="function"&&(r=t,t={}),t=Object.assign({},{force:!1},t),this.s.state===At){typeof r=="function"&&r();return}Ku(this,gr),this[kr].close(),this.s.pool.close(t,n=>{Ku(this,At),this.emit("closed"),typeof r=="function"&&r(n)})}requestCheck(){this[kr].requestCheck()}command(t,r,n,i){if(typeof n=="function"&&(i=n,n={},n=n||{}),n.serverApi=this.serverApi,this.s.state===gr||this.s.state===At){i(new Fr("server is closed"));return}let s=QH(this,n);if(s)return i(s);if(n=Object.assign({},n,{wireProtocolCommand:!1}),this.s.logger.isDebug()){let o=KH(r);this.s.logger.debug(`executing command [${JSON.stringify({ns:t,cmd:o.shouldRedact?`${o.name} details REDACTED`:r,options:FH(JH,n)})}] against ${this.name}`)}if(vN(this,r)){i(new Fr(`server ${this.name} does not support collation`));return}this.s.pool.withConnection((o,c,l)=>{if(o)return Mn(this,o),l(o);c.command(t,r,n,ia(this,c,r,n,l))},i)}query(t,r,n,i,s){if(this.s.state===gr||this.s.state===At){s(new Fr("server is closed"));return}this.s.pool.withConnection((o,c,l)=>{if(o)return Mn(this,o),l(o);c.query(t,r,n,i,ia(this,c,r,i,l))},s)}getMore(t,r,n,i,s){if(this.s.state===gr||this.s.state===At){s(new Fr("server is closed"));return}this.s.pool.withConnection((o,c,l)=>{if(o)return Mn(this,o),l(o);c.getMore(t,r,n,i,ia(this,c,null,i,l))},s)}killCursors(t,r,n){if(this.s.state===gr||this.s.state===At){typeof n=="function"&&n(new Fr("server is closed"));return}this.s.pool.withConnection((i,s,o)=>{if(i)return Mn(this,i),o(i);s.killCursors(t,r,ia(this,s,null,void 0,o))},n)}insert(t,r,n,i){Og({server:this,op:"insert",ns:t,ops:r},n,i)}update(t,r,n,i){Og({server:this,op:"update",ns:t,ops:r},n,i)}remove(t,r,n,i){Og({server:this,op:"remove",ns:t,ops:r},n,i)}};a(Cg,"Server");var Yu=Cg;Object.defineProperty(Yu.prototype,"clusterTime",{get:function(){return this.s.topology.clusterTime},set:function(e){this.s.topology.clusterTime=e}});function xN(e){return e.description.maxWireVersion>=6&&e.description.logicalSessionTimeoutMinutes&&e.description.type!==GH.Standalone}a(xN,"supportsRetryableWrites");function XH(e,t){if(e===-1)return t;let r=.2;return r*t+(1-r)*e}a(XH,"calculateRoundTripTime");function QH(e,t){if(t.readPreference&&!(t.readPreference instanceof UH))return new Fr("readPreference must be an instance of ReadPreference")}a(QH,"basicReadValidations");function Og(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.server,i=e.op,s=e.ns,o=Array.isArray(e.ops)?e.ops:[e.ops];if(n.s.state===gr||n.s.state===At){r(new Fr("server is closed"));return}if(vN(n,t)){r(new Fr(`server ${n.name} does not support collation`));return}if((t.writeConcern&&t.writeConcern.w===0||Tg(n)<5)&&(i==="update"||i==="remove")&&o.find(l=>l.hint)){r(new Fr(`servers < 3.4 do not support hint on ${i}`));return}n.s.pool.withConnection((l,u,p)=>{if(l)return Mn(n,l),p(l);u[i](s,o,t,ia(n,u,o,t,p))},r)}a(Og,"executeWriteOperation");function Mn(e,t){t instanceof yN&&!(t instanceof gN)&&e[kr].reset(),e.emit("descriptionReceived",new mN(e.description.address,null,{error:t,topologyVersion:t&&t.topologyVersion?t.topologyVersion:e.description.topologyVersion}))}a(Mn,"markServerUnknown");function ZH(e,t){return t.generation!==e.generation}a(ZH,"connectionIsStale");function eV(e,t){let r=t.topologyVersion,n=e.description.topologyVersion;return jH(n,r)<0}a(eV,"shouldHandleStateChangeError");function hN(e,t){return e&&e.inTransaction()&&!YH(t)}a(hN,"inActiveTransaction");function ia(e,t,r,n,i){let s=n&&n.session;return a(function(c,l){c&&!ZH(e.s.pool,t)&&(c instanceof yN?(s&&!s.hasEnded&&(s.serverSession.isDirty=!0),xN(e)&&!hN(s,r)&&c.addErrorLabel("RetryableWriteError"),(!(c instanceof gN)||HH(c))&&(Mn(e,c),e.s.pool.clear())):(Tg(e)<9&&zH(c)&&!hN(s,r)&&c.addErrorLabel("RetryableWriteError"),WH(c)&&eV(e,c)&&((Tg(e)<=7||$H(c))&&e.s.pool.clear(),Mn(e,c),process.nextTick(()=>e.requestCheck())))),i(c,l)},"handleOperationResult")}a(ia,"makeOperationHandler");SN.exports={Server:Yu}});var wN=y((hse,Ag)=>{"use strict";var tV=Vt(),rV=require("events").EventEmitter,nV=require("dns");function iV(e,t){let r=/^.*?\./,n=`.${e.replace(r,"")}`,i=`.${t.replace(r,"")}`;return n.endsWith(i)}a(iV,"matchesParentDomain");var Ng=class Ng{constructor(t){this.srvRecords=t}addresses(){return new Set(this.srvRecords.map(t=>`${t.name}:${t.port}`))}};a(Ng,"SrvPollingEvent");var Ju=Ng,Rg=class Rg extends rV{constructor(t){if(super(),!t||!t.srvHost)throw new TypeError("options for SrvPoller must exist and include srvHost");this.srvHost=t.srvHost,this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=t.heartbeatFrequencyMS||1e4,this.logger=tV("srvPoller",t),this.haMode=!1,this.generation=0,this._timeout=null}get srvAddress(){return`_mongodb._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&(clearTimeout(this._timeout),this.generation+=1,this._timeout=null)}schedule(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>this._poll(),this.intervalMS)}success(t){this.haMode=!1,this.schedule(),this.emit("srvRecordDiscovery",new Ju(t))}failure(t,r){this.logger.warn(t,r),this.haMode=!0,this.schedule()}parentDomainMismatch(t){this.logger.warn(`parent domain mismatch on SRV record (${t.name}:${t.port})`,t)}_poll(){let t=this.generation;nV.resolveSrv(this.srvAddress,(r,n)=>{if(t!==this.generation)return;if(r){this.failure("DNS error",r);return}let i=[];if(n.forEach(s=>{iV(s.name,this.srvHost)?i.push(s):this.parentDomainMismatch(s)}),!i.length){this.failure("No valid addresses found at host");return}this.success(i)})}};a(Rg,"SrvPoller");var _g=Rg;Ag.exports.SrvPollingEvent=Ju;Ag.exports.SrvPoller=_g});var TN=y((yse,ON)=>{"use strict";var ca=Qe().ServerType,aa=Qe().TopologyType,Xu=$e(),Ig=q().MongoError,sV=1e4,EN=90;function oV(){return function(e,t){return qg(e,t.filter(r=>r.isWritable))}}a(oV,"writableServerSelector");function aV(e,t,r){if(e.maxStalenessSeconds==null||e.maxStalenessSeconds<0)return r;let n=e.maxStalenessSeconds,i=(t.heartbeatFrequencyMS+sV)/1e3;if(n<i)throw new Ig(`maxStalenessSeconds must be at least ${i} seconds`);if(n<EN)throw new Ig(`maxStalenessSeconds must be at least ${EN} seconds`);if(t.type===aa.ReplicaSetWithPrimary){let s=Array.from(t.servers.values()).filter(Qu)[0];return r.reduce((o,c)=>((c.lastUpdateTime-c.lastWriteDate-(s.lastUpdateTime-s.lastWriteDate)+t.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&o.push(c),o),[])}if(t.type===aa.ReplicaSetNoPrimary){if(r.length===0)return r;let s=r.reduce((o,c)=>c.lastWriteDate>o.lastWriteDate?c:o);return r.reduce((o,c)=>((s.lastWriteDate-c.lastWriteDate+t.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&o.push(c),o),[])}return r}a(aV,"maxStalenessReducer");function cV(e,t){let r=Object.keys(e),n=Object.keys(t);for(let i=0;i<r.length;++i){let s=r[i];if(n.indexOf(s)===-1||t[s]!==e[s])return!1}return!0}a(cV,"tagSetMatch");function uV(e,t){if(e.tags==null||Array.isArray(e.tags)&&e.tags.length===0)return t;for(let r=0;r<e.tags.length;++r){let n=e.tags[r],i=t.reduce((s,o)=>(cV(n,o.tags)&&s.push(o),s),[]);if(i.length)return i}return[]}a(uV,"tagSetReducer");function qg(e,t){let r=t.reduce((i,s)=>i===-1?s.roundTripTime:Math.min(s.roundTripTime,i),-1),n=r+e.localThresholdMS;return t.reduce((i,s)=>(s.roundTripTime<=n&&s.roundTripTime>=r&&i.push(s),i),[])}a(qg,"latencyWindowReducer");function Qu(e){return e.type===ca.RSPrimary}a(Qu,"primaryFilter");function lV(e){return e.type===ca.RSSecondary}a(lV,"secondaryFilter");function pV(e){return e.type===ca.RSSecondary||e.type===ca.RSPrimary}a(pV,"nearestFilter");function fV(e){return e.type!==ca.Unknown}a(fV,"knownFilter");function dV(e){if(!e.isValid())throw new TypeError("Invalid read preference specified");return function(t,r){let n=t.commonWireVersion;if(n&&e.minWireVersion&&e.minWireVersion>n)throw new Ig(`Minimum wire version '${e.minWireVersion}' required, but found '${n}'`);if(t.type===aa.Unknown)return[];if(t.type===aa.Single||t.type===aa.Sharded)return qg(t,r.filter(fV));let i=e.mode;if(i===Xu.PRIMARY)return r.filter(Qu);if(i===Xu.PRIMARY_PREFERRED){let c=r.filter(Qu);if(c.length)return c}let s=i===Xu.NEAREST?pV:lV,o=qg(t,uV(e,aV(e,t,r.filter(s))));return i===Xu.SECONDARY_PREFERRED&&o.length===0?r.filter(Qu):o}}a(dV,"readPreferenceServerSelector");ON.exports={writableServerSelector:oV,readPreferenceServerSelector:dV}});var DN=y((vse,BN)=>{"use strict";var hV=Ru(),mV=require("events"),yV=Jn().ServerDescription,gV=Qe().ServerType,CN=oh().TopologyDescription,Wr=Qe().TopologyType,Pn=oy(),vV=bN().Server,xV=U().relayEvents,sr=$e(),SV=Gt().CoreCursor,bV=require("util").deprecate,ot=ke().retrieveBSON(),wV=we().createCompressionInfo,EV=yn().ClientSession,nl=q().MongoError,OV=q().MongoServerSelectionError,TV=we().resolveClusterTime,CV=wN().SrvPoller,_V=we().getMMAPError,AV=U().makeStateMachine,NV=U().eachAsync,RV=b().emitDeprecationWarning,IV=yn().ServerSessionPool,qV=U().makeClientMetadata,MV=Qo().CMAP_EVENT_NAMES,PV=Jn().compareTopologyVersion,BV=b().emitWarning,gi=Qe(),DV=gi.drainTimerQueue,LV=gi.clearAndRemoveTimerFrom,AN=TN(),Zu=AN.readPreferenceServerSelector,jV=AN.writableServerSelector,UV=0,NN=["serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","commandStarted","commandSucceeded","commandFailed","monitoring"].concat(MV),kV=["connect","descriptionReceived","close","ended"],Os=gi.STATE_CLOSING,xr=gi.STATE_CLOSED,tl=gi.STATE_CONNECTING,Ts=gi.STATE_CONNECTED,el=AV({[xr]:[xr,tl],[tl]:[tl,Os,Ts,xr],[Ts]:[Ts,Os,xr],[Os]:[Os,xr]}),FV=new Set(["autoReconnect","reconnectTries","reconnectInterval","bufferMaxEntries"]),Mg=Symbol("cancelled"),vr=Symbol("waitQueue"),Pg=class Pg extends mV{constructor(t,r){super(),typeof r>"u"&&typeof t!="string"&&(r=t,t=[],r.host&&t.push({host:r.host,port:r.port})),t=t||[],typeof t=="string"&&(t=HV(t)),r=Object.assign({},gi.TOPOLOGY_DEFAULTS,r),r=Object.freeze(Object.assign(r,{metadata:qV(r),compression:{compressors:wV(r)}})),FV.forEach(o=>{r[o]&&RV(`The option \`${o}\` is incompatible with the unified topology, please read more by visiting http://bit.ly/2D8WfT6`,"DeprecationWarning")});let n=VV(t,r),i=UV++,s=t.reduce((o,c)=>{c.domain_socket&&(c.host=c.domain_socket);let l=c.port?`${c.host}:${c.port}`:`${c.host}:27017`;return o.set(l,new yV(l)),o},new Map);this[vr]=new hV,this.s={id:i,options:r,seedlist:t,state:xr,description:new CN(n,s,r.replicaSet,null,null,null,r),serverSelectionTimeoutMS:r.serverSelectionTimeoutMS,heartbeatFrequencyMS:r.heartbeatFrequencyMS,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS,Cursor:r.cursorFactory||SV,bson:r.bson||new ot([ot.Binary,ot.Code,ot.DBRef,ot.Decimal128,ot.Double,ot.Int32,ot.Long,ot.Map,ot.MaxKey,ot.MinKey,ot.ObjectId,ot.BSONRegExp,ot.Symbol,ot.Timestamp]),servers:new Map,sessionPool:new IV(this),sessions:new Set,promiseLibrary:r.promiseLibrary||Promise,credentials:r.credentials,clusterTime:null,connectionTimers:new Set},this.serverApi=r.serverApi,r.srvHost&&(this.s.srvPoller=r.srvPoller||new CV({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:r.srvHost,logger:r.logger,loggerLevel:r.loggerLevel}),this.s.detectTopologyDescriptionChange=o=>{let c=o.previousDescription.type,l=o.newDescription.type;c!==Wr.Sharded&&l===Wr.Sharded&&(this.s.handleSrvPolling=YV(this),this.s.srvPoller.on("srvRecordDiscovery",this.s.handleSrvPolling),this.s.srvPoller.start())},this.on("topologyDescriptionChanged",this.s.detectTopologyDescriptionChange)),this.setMaxListeners(1/0)}get description(){return this.s.description}get parserType(){return ot.native?"c++":"js"}connect(t,r){if(typeof t=="function"&&(r=t,t={}),t=t||{},this.s.state===Ts){typeof r=="function"&&r();return}el(this,tl),this.emit("topologyOpening",new Pn.TopologyOpeningEvent(this.s.id)),this.emit("topologyDescriptionChanged",new Pn.TopologyDescriptionChangedEvent(this.s.id,new CN(Wr.Unknown),this.s.description)),GV(this,Array.from(this.s.description.servers.values())),sr.translate(t);let n=t.readPreference||sr.primary,i=a(s=>{if(s){this.close(),typeof r=="function"?r(s):this.emit("error",s);return}el(this,Ts),this.emit("open",s,this),this.emit("connect",this),typeof r=="function"&&r(s,this)},"connectHandler");if(this.s.credentials){this.command("admin.$cmd",{ping:1},{readPreference:n},i);return}this.selectServer(Zu(n),t,i)}close(t,r){if(typeof t=="function"&&(r=t,t={}),typeof t=="boolean"&&(t={force:t}),t=t||{},this.s.state===xr||this.s.state===Os){typeof r=="function"&&r();return}el(this,Os),PN(this[vr],new nl("Topology closed")),DV(this.s.connectionTimers),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.handleSrvPolling&&(this.s.srvPoller.removeListener("srvRecordDiscovery",this.s.handleSrvPolling),delete this.s.handleSrvPolling)),this.s.detectTopologyDescriptionChange&&(this.removeListener("topologyDescriptionChanged",this.s.detectTopologyDescriptionChange),delete this.s.detectTopologyDescriptionChange),this.s.sessions.forEach(n=>n.endSession()),this.s.sessionPool.endAllPooledSessions(()=>{NV(Array.from(this.s.servers.values()),(n,i)=>RN(n,this,t,i),n=>{this.s.servers.clear(),this.emit("topologyClosed",new Pn.TopologyClosedEvent(this.s.id)),el(this,xr),typeof r=="function"&&r(n)})})}selectServer(t,r,n){if(typeof r=="function")if(n=r,typeof t!="function"){r=t;let p;t instanceof sr?p=t:typeof t=="string"?p=new sr(t):(sr.translate(r),p=r.readPreference||sr.primary),t=Zu(p)}else r={};r=Object.assign({},{serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS},r);let i=this.description.type===Wr.Sharded,s=r.session,o=s&&s.transaction;if(i&&o&&o.server){n(void 0,o.server);return}let c=t;if(typeof t=="object"){let p=t.readPreference?t.readPreference:sr.primary;c=Zu(p)}let l={serverSelector:c,transaction:o,callback:n},u=r.serverSelectionTimeoutMS;u&&(l.timer=setTimeout(()=>{l[Mg]=!0,l.timer=void 0;let p=new OV(`Server selection timed out after ${u} ms`,this.description);l.callback(p)},u)),this[vr].push(l),_N(this)}shouldCheckForSessionSupport(){return this.description.type===Wr.Single?!this.description.hasKnownServers:!this.description.hasDataBearingServers}hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}startSession(t,r){let n=new EV(this,this.s.sessionPool,t,r);return n.once("ended",()=>{this.s.sessions.delete(n)}),this.s.sessions.add(n),n}endSessions(t,r){Array.isArray(t)||(t=[t]),this.command("admin.$cmd",{endSessions:t},{readPreference:sr.primaryPreferred,noResponse:!0,serverApi:this.serverApi},()=>{typeof r=="function"&&r()})}serverUpdateHandler(t){if(!this.s.description.hasServer(t.address)||$V(this.s.description,t))return;let r=this.s.description,n=this.s.description.servers.get(t.address),i=t.$clusterTime;i&&TV(this,i);let s=n&&n.equals(t);if(this.s.description=this.s.description.update(t),this.s.description.compatibilityError){this.emit("error",new nl(this.s.description.compatibilityError));return}s||this.emit("serverDescriptionChanged",new Pn.ServerDescriptionChangedEvent(this.s.id,t.address,n,this.s.description.servers.get(t.address))),qN(this,t),this[vr].length>0&&_N(this),s||this.emit("topologyDescriptionChanged",new Pn.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(t,r){typeof t=="function"&&(r=t,t=null),typeof r=="function"&&r(null,!0)}logout(t){typeof t=="function"&&t(null,!0)}insert(t,r,n,i){rl({topology:this,op:"insert",ns:t,ops:r},n,i)}update(t,r,n,i){rl({topology:this,op:"update",ns:t,ops:r},n,i)}remove(t,r,n,i){rl({topology:this,op:"remove",ns:t,ops:r},n,i)}command(t,r,n,i){typeof n=="function"&&(i=n,n={},n=n||{}),sr.translate(n);let s=n.readPreference||sr.primary;this.selectServer(Zu(s),n,(o,c)=>{if(o){i(o);return}let l=!n.retrying,u=!!n.retryWrites,p=!!n.session,d=c.supportsRetryableWrites,f=!p||!n.session.inTransaction(),h=l&&u&&p&&d&&f&&zV(r),m=a((v,x)=>{if(!v)return i(null,x);if(!MN(v))return i(v);if(h){let w=Object.assign({},n,{retrying:!0});return this.command(t,r,w,i)}return i(v)},"cb");h&&(n.session.incrementTransactionNumber(),n.willRetryWrite=h),c.command(t,r,n,m)})}cursor(t,r,n){n=n||{};let i=n.topology||this,s=n.cursorFactory||this.s.Cursor;return sr.translate(n),new s(i,t,r,n)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===Ts}isDestroyed(){return this.s.state===xr}unref(){BV("`unref` is a noop and will be removed in the next major version")}lastIsMaster(){let t=Array.from(this.description.servers.values());return t.length===0?{}:t.filter(i=>i.type!==gV.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get bson(){return this.s.bson}};a(Pg,"Topology");var Cs=Pg;Object.defineProperty(Cs.prototype,"clusterTime",{enumerable:!0,get:function(){return this.s.clusterTime},set:function(e){this.s.clusterTime=e}});Cs.prototype.destroy=bV(Cs.prototype.close,"destroy() is deprecated, please use close() instead");var WV=["findAndModify","insert","update","delete"];function zV(e){return WV.some(t=>e[t])}a(zV,"isWriteCommand");function $V(e,t){let n=e.servers.get(t.address).topologyVersion;return PV(n,t.topologyVersion)>0}a($V,"isStaleServerDescription");function RN(e,t,r,n){r=r||{},kV.forEach(i=>e.removeAllListeners(i)),e.destroy(r,()=>{t.emit("serverClosed",new Pn.ServerClosedEvent(t.s.id,e.description.address)),NN.forEach(i=>e.removeAllListeners(i)),typeof n=="function"&&n()})}a(RN,"destroyServer");function HV(e){return e.split(",").map(t=>({host:t.split(":")[0],port:t.split(":")[1]||27017}))}a(HV,"parseStringSeedlist");function VV(e,t){return t.directConnection?Wr.Single:(t.replicaSet||t.setName||t.rs_name)==null?Wr.Unknown:Wr.ReplicaSetNoPrimary}a(VV,"topologyTypeFromSeedlist");function KV(e){return e[Math.floor(Math.random()*e.length)]}a(KV,"randomSelection");function IN(e,t,r){e.emit("serverOpening",new Pn.ServerOpeningEvent(e.s.id,t.address));let n=new vV(t,e.s.options,e);if(xV(n,e,NN),n.on("descriptionReceived",e.serverUpdateHandler.bind(e)),r){let i=setTimeout(()=>{LV(i,e.s.connectionTimers),n.connect()},r);return e.s.connectionTimers.add(i),n}return n.connect(),n}a(IN,"createAndConnectServer");function GV(e,t){e.s.servers=t.reduce((r,n)=>{let i=IN(e,n);return r.set(n.address,i),r},new Map)}a(GV,"connectServers");function qN(e,t){if(t&&e.s.servers.has(t.address)){let r=e.s.servers.get(t.address);r.s.description=t}for(let r of e.description.servers.values())if(!e.s.servers.has(r.address)){let n=IN(e,r);e.s.servers.set(r.address,n)}for(let r of e.s.servers){let n=r[0];if(e.description.hasServer(n))continue;let i=e.s.servers.get(n);e.s.servers.delete(n),RN(i,e)}}a(qN,"updateServers");function rl(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.topology,i=e.op,s=e.ns,o=e.ops;n.selectServer(jV(),t,(c,l)=>{if(c){r(c,null);return}let u=!e.retrying,p=!!t.retryWrites,d=!!t.session,f=l.supportsRetryableWrites,h=!d||!t.session.inTransaction(),m=t.explain===void 0,v=u&&p&&d&&f&&h&&m,x=a((w,C)=>{if(!w)return r(null,C);if(!MN(w))return w=_V(w),r(w);if(v){let g=Object.assign({},e,{retrying:!0});return rl(g,t,r)}return r(w)},"handler");r.operationId&&(x.operationId=r.operationId),v&&(t.session.incrementTransactionNumber(),t.willRetryWrite=v),l[i](s,o,t,x)})}a(rl,"executeWriteOperation");function MN(e){return e instanceof nl&&e.hasErrorLabel("RetryableWriteError")}a(MN,"shouldRetryOperation");function YV(e){return a(function(r){let n=e.s.description;e.s.description=e.s.description.updateFromSrvPollingEvent(r),e.s.description!==n&&(qN(e),e.emit("topologyDescriptionChanged",new Pn.TopologyDescriptionChangedEvent(e.s.id,n,e.s.description)))},"handleSrvPolling")}a(YV,"srvPollingHandler");function PN(e,t){for(;e.length;){let r=e.shift();clearTimeout(r.timer),r[Mg]||r.callback(t)}}a(PN,"drainWaitQueue");function _N(e){if(e.s.state===xr){PN(e[vr],new nl("Topology is closed, please connect"));return}let t=Array.from(e.description.servers.values()),r=e[vr].length;for(let n=0;n<r&&e[vr].length;++n){let i=e[vr].shift();if(i[Mg])continue;let s;try{let p=i.serverSelector;s=p?p(e.description,t):t}catch(p){clearTimeout(i.timer),i.callback(p);continue}if(s.length===0){e[vr].push(i);continue}let o=KV(s),c=e.s.servers.get(o.address),l=i.transaction;e.description.type===Wr.Sharded&&l&&l.isActive&&l.pinServer(c),clearTimeout(i.timer),i.callback(void 0,c)}e[vr].length>0&&e.s.servers.forEach(n=>process.nextTick(()=>n.requestCheck()))}a(_N,"processWaitQueue");BN.exports={Topology:Cs}});var zN=y((Sse,WN)=>{"use strict";var il=require("url"),vi=require("querystring"),LN=require("dns"),X=q().MongoParseError,JV=$e(),XV=b().emitWarningOnce,QV=/(mongodb(?:\+srv|)):\/\/(?: (?:[^:]*) (?: : ([^@]*) )? @ )?([^/?]*)(?:\/|)(.*)/,ZV=new Set(["sslCA","sslCert","sslKey","tlsCAFile","tlsCertificateKeyFile"].map(e=>e.toLowerCase()));function eK(e,t){let r=/^.*?\./,n=`.${e.replace(r,"")}`,i=`.${t.replace(r,"")}`;return n.endsWith(i)}a(eK,"matchesParentDomain");function tK(e,t,r){let n=il.parse(e,!0);if(t.directConnection||t.directconnection)return r(new X("directConnection not supported with SRV URI"));if(n.hostname.split(".").length<3)return r(new X("URI does not have hostname, domain name and tld"));if(n.domainLength=n.hostname.split(".").length,e.substring(14).split("/")[0].match(","))return r(new X("Invalid URI, cannot contain multiple hostnames"));if(n.port)return r(new X(`Ports not accepted with '${Dg}' URIs`));let s=n.host;LN.resolveSrv(`_mongodb._tcp.${s}`,(o,c)=>{if(o)return r(o);if(c.length===0)return r(new X("No addresses found at host"));for(let l=0;l<c.length;l++)if(!eK(c[l].name,n.hostname,n.domainLength))return r(new X("Server record does not share hostname with parent URI"));n.protocol="mongodb",n.host=c.map(l=>`${l.name}:${l.port}`).join(","),!("ssl"in t)&&(!n.search||!("ssl"in n.query)||n.query.ssl===null)&&(n.query.ssl=!0),LN.resolveTxt(s,(l,u)=>{if(l){if(l.code!=="ENODATA"&&l.code!=="ENOTFOUND")return r(l);u=null}if(u){if(u.length>1)return r(new X("Multiple text records not allowed"));if(u=vi.parse(u[0].join("")),Object.keys(u).some(d=>d.toLowerCase()==="loadbalanced"))return r(new X("Load balancer mode requires driver version 4+"));if(Object.keys(u).some(d=>d!=="authSource"&&d!=="replicaSet"))return r(new X("Text record must only set `authSource` or `replicaSet`"));n.query=Object.assign({},u,n.query)}n.search=vi.stringify(n.query);let p=il.format(n);FN(p,t,(d,f)=>{if(d){r(d);return}r(null,Object.assign({},f,{srvHost:s}))})})})}a(tK,"parseSrvConnectionString");function Bg(e,t){if(Array.isArray(t))t=t.filter((r,n)=>t.indexOf(r)===n),t.length===1&&(t=t[0]);else if(t.indexOf(":")>0)t=t.split(",").reduce((r,n)=>{let i=n.split(":");return r[i[0]]=Bg(e,i[1]),r},{});else if(t.indexOf(",")>0)t=t.split(",").map(r=>Bg(e,r));else if(t.toLowerCase()==="true"||t.toLowerCase()==="false")t=t.toLowerCase()==="true";else if(!Number.isNaN(t)&&!nK.has(e)){let r=parseFloat(t);Number.isNaN(r)||(t=parseFloat(t))}return t}a(Bg,"parseQueryStringItemValue");var rK=new Set(["slaveok","slave_ok","sslvalidate","fsync","safe","retrywrites","j"]),nK=new Set(["authsource","replicaset"]),jN=new Set(["GSSAPI","MONGODB-AWS","MONGODB-X509","MONGODB-CR","DEFAULT","SCRAM-SHA-1","SCRAM-SHA-256","PLAIN"]),UN={replicaset:"replicaSet",connecttimeoutms:"connectTimeoutMS",sockettimeoutms:"socketTimeoutMS",maxpoolsize:"maxPoolSize",minpoolsize:"minPoolSize",maxidletimems:"maxIdleTimeMS",waitqueuemultiple:"waitQueueMultiple",waitqueuetimeoutms:"waitQueueTimeoutMS",wtimeoutms:"wtimeoutMS",readconcern:"readConcern",readconcernlevel:"readConcernLevel",readpreference:"readPreference",maxstalenessseconds:"maxStalenessSeconds",readpreferencetags:"readPreferenceTags",authsource:"authSource",authmechanism:"authMechanism",authmechanismproperties:"authMechanismProperties",gssapiservicename:"gssapiServiceName",localthresholdms:"localThresholdMS",serverselectiontimeoutms:"serverSelectionTimeoutMS",serverselectiontryonce:"serverSelectionTryOnce",heartbeatfrequencyms:"heartbeatFrequencyMS",retrywrites:"retryWrites",uuidrepresentation:"uuidRepresentation",zlibcompressionlevel:"zlibCompressionLevel",tlsallowinvalidcertificates:"tlsAllowInvalidCertificates",tlsallowinvalidhostnames:"tlsAllowInvalidHostnames",tlsinsecure:"tlsInsecure",tlscafile:"tlsCAFile",tlscertificatekeyfile:"tlsCertificateKeyFile",tlscertificatekeyfilepassword:"tlsCertificateKeyFilePassword",wtimeout:"wTimeoutMS",j:"journal",directconnection:"directConnection"};function iK(e,t,r,n){if(t==="journal"?t="j":t==="wtimeoutms"&&(t="wtimeout"),rK.has(t)?r=r==="true"||r===!0:t==="appname"?r=decodeURIComponent(r):t==="readconcernlevel"&&(e.readConcernLevel=r,t="readconcern",r={level:r}),t==="compressors"&&(r=Array.isArray(r)?r:[r],!r.every(i=>i==="snappy"||i==="zlib")))throw new X("Value for `compressors` must be at least one of: `snappy`, `zlib`");if(t==="authmechanism"&&!jN.has(r))throw new X(`Value for authMechanism must be one of: ${Array.from(jN).join(", ")}, found: ${r}`);if(t==="readpreference"&&!JV.isValid(r))throw new X("Value for `readPreference` must be one of: `primary`, `primaryPreferred`, `secondary`, `secondaryPreferred`, `nearest`");if(t==="zlibcompressionlevel"&&(r<-1||r>9))throw new X("zlibCompressionLevel must be an integer between -1 and 9");if((t==="compressors"||t==="zlibcompressionlevel")&&(e.compression=e.compression||{},e=e.compression),t==="authmechanismproperties"&&(typeof r.SERVICE_NAME=="string"&&(e.gssapiServiceName=r.SERVICE_NAME),typeof r.SERVICE_REALM=="string"&&(e.gssapiServiceRealm=r.SERVICE_REALM),typeof r.CANONICALIZE_HOST_NAME<"u"&&(e.gssapiCanonicalizeHostName=r.CANONICALIZE_HOST_NAME)),t==="readpreferencetags"&&(r=Array.isArray(r)?oK(r):[r]),n.caseTranslate&&UN[t]){e[UN[t]]=r;return}e[t]=r}a(iK,"applyConnectionStringOption");var sK=new Set(["GSSAPI","MONGODB-CR","PLAIN","SCRAM-SHA-1","SCRAM-SHA-256"]);function oK(e){let t=[];for(let r=0;r<e.length;r++)t[r]={},e[r].split(",").forEach(n=>{let i=n.split(":");t[r][i[0]]=i[1]});return t}a(oK,"splitArrayOfMultipleReadPreferenceTags");function aK(e){if(e.options==null)return;let t=e.options,r=t.authsource||t.authSource;r!=null&&(e.auth=Object.assign({},e.auth,{db:r}));let n=t.authmechanism||t.authMechanism;if(n!=null){if(sK.has(n)&&(!e.auth||e.auth.username==null))throw new X(`Username required for mechanism \`${n}\``);if(n==="GSSAPI"){if(r!=null&&r!=="$external")throw new X(`Invalid source \`${r}\` for mechanism \`${n}\` specified.`);e.auth=Object.assign({},e.auth,{db:"$external"})}if(n==="MONGODB-AWS"){if(r!=null&&r!=="$external")throw new X(`Invalid source \`${r}\` for mechanism \`${n}\` specified.`);e.auth=Object.assign({},e.auth,{db:"$external"})}if(n==="MONGODB-X509"){if(e.auth&&e.auth.password!=null)throw new X(`Password not allowed for mechanism \`${n}\``);if(r!=null&&r!=="$external")throw new X(`Invalid source \`${r}\` for mechanism \`${n}\` specified.`);e.auth=Object.assign({},e.auth,{db:"$external"})}n==="PLAIN"&&e.auth&&e.auth.db==null&&(e.auth=Object.assign({},e.auth,{db:"$external"}))}return e.auth&&e.auth.db==null&&(e.auth=Object.assign({},e.auth,{db:"admin"})),e}a(aK,"applyAuthExpectations");function cK(e,t){let r={},n=vi.parse(e);lK(n);for(let i in n){let s=n[i];if(s===""||s==null)throw new X("Incomplete key value pair for option");let o=i.toLowerCase();if(o==="serverapi")throw new X("URI cannot contain `serverApi`, it can only be passed to the client");let c=ZV.has(o)?s:Bg(o,s);iK(r,o,c,t)}return r.wtimeout&&r.wtimeoutms&&(delete r.wtimeout,XV("Unsupported option `wtimeout` specified")),Object.keys(r).length?r:null}a(cK,"parseQueryString");function uK(e){return e.tls&&(e.ssl=e.tls),e.tlsInsecure?(e.checkServerIdentity=!1,e.sslValidate=!1):Object.assign(e,{checkServerIdentity:!e.tlsAllowInvalidHostnames,sslValidate:!e.tlsAllowInvalidCertificates}),e.tlsCAFile&&(e.ssl=!0,e.sslCA=e.tlsCAFile),e.tlsCertificateKeyFile&&(e.ssl=!0,e.tlsCertificateFile?(e.sslCert=e.tlsCertificateFile,e.sslKey=e.tlsCertificateKeyFile):(e.sslKey=e.tlsCertificateKeyFile,e.sslCert=e.tlsCertificateKeyFile)),e.tlsCertificateKeyFilePassword&&(e.ssl=!0,e.sslPass=e.tlsCertificateKeyFilePassword),e}a(uK,"translateTLSOptions");function lK(e){let t=Object.keys(e);if(t.indexOf("tlsInsecure")!==-1&&(t.indexOf("tlsAllowInvalidCertificates")!==-1||t.indexOf("tlsAllowInvalidHostnames")!==-1))throw new X("The `tlsInsecure` option cannot be used with `tlsAllowInvalidCertificates` or `tlsAllowInvalidHostnames`.");let r=kN("tls",e,t),n=kN("ssl",e,t);if(r!=null&&n!=null&&r!==n)throw new X("All values of `tls` and `ssl` must be the same.")}a(lK,"checkTLSOptions");function kN(e,t,r){let n=r.indexOf(e)!==-1,i;if(Array.isArray(t[e])?i=t[e][0]:i=t[e],n&&Array.isArray(t[e])){let s=t[e][0];t[e].forEach(o=>{if(o!==s)throw new X(`All values of ${e} must be the same.`)})}return i}a(kN,"assertTlsOptionsAreEqual");var pK="mongodb",Dg="mongodb+srv",fK=[pK,Dg];function FN(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},{caseTranslate:!0},t);try{il.parse(e)}catch{return r(new X("URI malformed, cannot be parsed"))}let n=e.match(QV);if(!n)return r(new X("Invalid connection string"));let i=n[1];if(fK.indexOf(i)===-1)return r(new X("Invalid protocol provided"));let s=n[4].split("?"),o=s.length>0?s[0]:null,c=s.length>1?s[1]:null,l;try{l=cK(c,t)}catch(v){return r(v)}if(l=Object.assign({},l,t),Object.keys(l).some(v=>v.toLowerCase()==="loadbalanced"))return r(new X("Load balancer mode requires driver version 4+"));if(i===Dg)return tK(e,l,r);let u={username:null,password:null,db:o&&o!==""?vi.unescape(o):null};if(l.auth?(l.auth.username&&(u.username=l.auth.username),l.auth.user&&(u.username=l.auth.user),l.auth.password&&(u.password=l.auth.password)):(l.username&&(u.username=l.username),l.user&&(u.username=l.user),l.password&&(u.password=l.password)),n[4].split("?")[0].indexOf("@")!==-1)return r(new X("Unescaped slash in userinfo section"));let p=n[3].split("@");if(p.length>2)return r(new X("Unescaped at-sign in authority section"));if(p[0]==null||p[0]==="")return r(new X("No username provided in authority section"));if(p.length>1){let v=p.shift().split(":");if(v.length>2)return r(new X("Unescaped colon in authority section"));if(v[0]==="")return r(new X("Invalid empty username provided"));u.username||(u.username=vi.unescape(v[0])),u.password||(u.password=v[1]?vi.unescape(v[1]):null)}let d=null,f=p.shift().split(",").map(v=>{let x=il.parse(`mongodb://${v}`);if(x.path==="/:")return d=new X("Double colon in host identifier"),null;if(v.match(/\.sock/)&&(x.hostname=vi.unescape(v),x.port=null),Number.isNaN(x.port)){d=new X("Invalid port (non-numeric string)");return}let w={host:x.hostname,port:x.port?parseInt(x.port):27017};if(w.port===0){d=new X("Invalid port (zero) with hostname");return}if(w.port>65535){d=new X("Invalid port (larger than 65535) with hostname");return}if(w.port<0){d=new X("Invalid port (negative number)");return}return w}).filter(v=>!!v);if(d)return r(d);if(f.length===0||f[0].host===""||f[0].host===null)return r(new X("No hostname or hostnames provided in connection string"));if(!!l.directConnection&&f.length!==1)return r(new X("directConnection option requires exactly one host"));l.directConnection==null&&f.length===1&&l.replicaSet==null&&(l.directConnection=!0);let m={hosts:f,auth:u.db||u.username?u:null,options:Object.keys(l).length?l:null};m.auth&&m.auth.db?m.defaultDatabase=m.auth.db:m.defaultDatabase="test",m.options=uK(m.options);try{aK(m)}catch(v){return r(v)}r(null,m)}a(FN,"parseConnectionString");WN.exports=FN});var I=y((wse,HN)=>{"use strict";var $N=Cc(),dK=_c()(require),hK=U().retrieveEJSON();try{let e=dK("bson-ext");e&&($N=e)}catch{}var Lg=Object.freeze({v1:"1"}),mK=Object.keys(Lg).map(e=>Lg[e]);HN.exports={ServerApiVersion:Lg,ValidServerApiVersions:mK,MongoError:q().MongoError,MongoNetworkError:q().MongoNetworkError,MongoParseError:q().MongoParseError,MongoTimeoutError:q().MongoTimeoutError,MongoServerSelectionError:q().MongoServerSelectionError,MongoWriteConcernError:q().MongoWriteConcernError,Connection:xh(),Server:vu(),ReplSet:E_(),Mongos:q_(),Logger:Vt(),Cursor:Gt().CoreCursor,ReadPreference:$e(),Sessions:yn(),BSON:$N,EJSON:hK,Topology:DN().Topology,Query:Bt().Query,MongoCredentials:rm().MongoCredentials,defaultAuthProviders:am().defaultAuthProviders,MongoCR:Dh(),X509:Uh(),Plain:Wh(),GSSAPI:Vh(),ScramSHA1:Io().ScramSHA1,ScramSHA256:Io().ScramSHA256,parseConnectionString:zN()}});var KN=y((Ese,VN)=>{"use strict";var yK=require("events").EventEmitter,Ug=class Ug extends yK{constructor(){super()}instrument(t,r){this.$MongoClient=t;let n=this.$prototypeConnect=t.prototype.connect,i=this;t.prototype.connect=function(s){return this.s.options.monitorCommands=!0,this.on("commandStarted",o=>i.emit("started",o)),this.on("commandSucceeded",o=>i.emit("succeeded",o)),this.on("commandFailed",o=>i.emit("failed",o)),n.call(this,s)},typeof r=="function"&&r(null,this)}uninstrument(){this.$MongoClient.prototype.connect=this.$prototypeConnect}};a(Ug,"Instrumentation");var jg=Ug;VN.exports=jg});var ua=y((Tse,YN)=>{"use strict";var gK=I().MongoNetworkError,Be=Gn().MONGODB_ERROR_CODES,GN=new Set([Be.HostUnreachable,Be.HostNotFound,Be.NetworkTimeout,Be.ShutdownInProgress,Be.PrimarySteppedDown,Be.ExceededTimeLimit,Be.SocketException,Be.NotMaster,Be.InterruptedAtShutdown,Be.InterruptedDueToReplStateChange,Be.NotMasterNoSlaveOk,Be.NotMasterOrSecondary,Be.StaleShardVersion,Be.StaleEpoch,Be.StaleConfig,Be.RetryChangeStream,Be.FailedToSatisfyReadPreference,Be.CursorNotFound]);function vK(e,t){return e instanceof gK?!0:t>=9?e.code===Be.CursorNotFound?!0:e.hasErrorLabel("ResumableChangeStreamError"):GN.has(e.code)}a(vK,"isResumableError");YN.exports={GET_MORE_RESUMABLE_CODES:GN,isResumableError:vK,MONGODB_ERROR_CODES:Be}});var sl=y((_se,JN)=>{"use strict";JN.exports={SYSTEM_NAMESPACE_COLLECTION:"system.namespaces",SYSTEM_INDEX_COLLECTION:"system.indexes",SYSTEM_PROFILE_COLLECTION:"system.profile",SYSTEM_USER_COLLECTION:"system.users",SYSTEM_COMMAND_COLLECTION:"$cmd",SYSTEM_JS_COLLECTION:"system.js"}});var Ge=y((Ase,rR)=>{"use strict";var xi=Gn().MONGODB_ERROR_CODES,kg=b().applyWriteConcern,xK=I().BSON.Code,SK=b().debugOptions,xe=b().handleCallback,jt=I().MongoError,XN=b().parseIndexOptions,_s=I().ReadPreference,QN=b().toError,bK=Zn().extractCommand,wK=sl(),EK=b().MongoDBNamespace,OK=["authSource","w","wtimeout","j","native_parser","forceServerObjectId","serializeFunctions","raw","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","bufferMaxEntries","numberOfRetries","retryMiliSeconds","readPreference","pkFactory","parentDb","promiseLibrary","noListener"];function ZN(e,t,r,n,i){let s=Object.assign({},{readPreference:_s.PRIMARY},n);if(s=kg(s,{db:e},n),s.writeConcern&&typeof i!="function")throw jt.create({message:"Cannot use a writeConcern without a provided callback",driver:!0});if(e.serverConfig&&e.serverConfig.isDestroyed())return i(new jt("topology was destroyed"));IK(e,t,r,s,(o,c)=>{if(o==null||o.code===xi.CannotCreateIndex||o.code===xi.DuplicateKey||o.code===xi.IndexOptionsConflict||o.code===xi.IndexKeySpecsConflict||o.code===xi.InterruptedAtShutdown||o.code===xi.InvalidIndexSpecificationOption)return xe(i,o,c);let l=tR(e,t,r,n);s.checkKeys=!1,e.s.topology.insert(e.s.namespace.withCollection(wK.SYSTEM_INDEX_COLLECTION),l,s,(u,p)=>{if(i!=null){if(u)return xe(i,u);if(p==null)return xe(i,null,null);if(p.result.writeErrors)return xe(i,jt.create(p.result.writeErrors[0]),null);xe(i,null,l.name)}})})}a(ZN,"createIndex");function TK(e,t,r){function n(i){if(r.listeners(t).length>0){r.emit(t,i,e);for(let s=0;s<e.s.children.length;s++)e.s.children[s].emit(t,i,e.s.children[s])}}return a(n,"listener"),n}a(TK,"createListener");function CK(e,t,r,n,i){let s=kg({},{db:e},n),c=tR(e,t,r,n).name;if(e.serverConfig&&e.serverConfig.isDestroyed())return i(new jt("topology was destroyed"));s.readPreference=_s.PRIMARY,eR(e,t,s,(l,u)=>{if(l!=null&&l.code!==xi.NamespaceNotFound)return xe(i,l,null);if(u==null||!u[c])ZN(e,t,r,n,i);else if(typeof i=="function")return xe(i,null,c)})}a(CK,"ensureIndex");function _K(e,t,r,n,i){let s=t,o=[];if(e.serverConfig&&e.serverConfig.isDestroyed())return i(new jt("topology was destroyed"));s&&s._bsontype==="Code"||(s=new xK(s)),r!=null&&!Array.isArray(r)&&typeof r!="function"?o=[r]:r!=null&&Array.isArray(r)&&typeof r!="function"&&(o=r);let c={$eval:s,args:o};n.nolock&&(c.nolock=n.nolock),n.readPreference=new _s(_s.PRIMARY),Fg(e,c,n,(l,u)=>{if(l)return xe(i,l,null);if(u&&u.ok===1)return xe(i,null,u.retval);if(u)return xe(i,jt.create({message:`eval failed: ${u.errmsg}`,driver:!0}),null);xe(i,l,u)})}a(_K,"evaluate");function Fg(e,t,r,n){if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new jt("topology was destroyed"));let i=r.dbName||r.authdb||e.databaseName;if(r.readPreference=_s.resolve(e,r),e.s.logger.isDebug()){let s=bK(t);e.s.logger.debug(`executing command ${JSON.stringify(s.shouldRedact?`${s.name} details REDACTED`:t)} against ${i}.$cmd with options [${JSON.stringify(SK(OK,r))}]`)}e.s.topology.command(e.s.namespace.withCollection("$cmd"),t,r,(s,o)=>{if(s)return xe(n,s);if(r.full)return xe(n,null,o);xe(n,null,o.result)})}a(Fg,"executeCommand");function AK(e,t,r,n){let i=new EK("admin","$cmd");e.s.topology.command(i,t,r,(s,o)=>{if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new jt("topology was destroyed"));if(s)return xe(n,s);xe(n,null,o.result)})}a(AK,"executeDbAdminCommand");function eR(e,t,r,n){let i=r.full==null?!1:r.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new jt("topology was destroyed"));function s(o){let c={};for(let l=0;l<o.length;l++){let u=o[l];c[u.name]=[];for(let p in u.key)c[u.name].push([p,u.key[p]])}return c}a(s,"processResults"),e.collection(t).listIndexes(r).toArray((o,c)=>{if(o)return n(QN(o));if(!Array.isArray(c))return xe(n,null,[]);if(i)return xe(n,null,c);xe(n,null,s(c))})}a(eR,"indexInformation");function NK(e,t,r){try{e.collection("system.profile").find({},t).toArray(r)}catch(n){return r(n,null)}}a(NK,"profilingInfo");function RK(e){if(typeof e!="string")throw jt.create({message:"database name must be a string",driver:!0});if(e.length===0)throw jt.create({message:"database name cannot be the empty string",driver:!0});if(e==="$external")return;let t=[" ",".","$","/","\\"];for(let r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)throw jt.create({message:"database names cannot contain the character '"+t[r]+"'",driver:!0})}a(RK,"validateDatabaseName");function tR(e,t,r,n){let i=XN(r),s=i.fieldHash,o=typeof n.name=="string"?n.name:i.name,c={ns:e.s.namespace.withCollection(t).toString(),key:s,name:o},l=n==null||typeof n=="object"?!1:n;n=n==null||typeof n=="boolean"?{}:n;let u=Object.keys(c);for(let d in n)u.indexOf(d)===-1&&(c[d]=n[d]);c.unique==null&&(c.unique=l);let p=["w","wtimeout","j","fsync","readPreference","session"];for(let d=0;d<p.length;d++)delete c[p[d]];return c}a(tR,"createCreateIndexCommand");function IK(e,t,r,n,i){let s=XN(r),o=typeof n.name=="string"?n.name:s.name,c=[{name:o,key:s.fieldHash}],l=Object.keys(c[0]).concat(["writeConcern","w","wtimeout","j","fsync","readPreference","session"]);for(let d in n)l.indexOf(d)===-1&&(c[0][d]=n[d]);let u=e.s.topology.capabilities();if(c[0].collation&&u&&!u.commandsTakeCollation){let d=new jt("server/primary/mongos does not support collation");return d.code=67,i(d)}let p=kg({createIndexes:t,indexes:c},{db:e},n);n.readPreference=_s.PRIMARY,Fg(e,p,n,(d,f)=>{if(d)return xe(i,d,null);if(f.ok===0)return xe(i,QN(f),null);xe(i,null,o)})}a(IK,"createIndexUsingCreateIndexes");rR.exports={createListener:TK,createIndex:ZN,ensureIndex:CK,evaluate:_K,executeCommand:Fg,executeDbAdminCommand:AK,indexInformation:eR,profilingInfo:NK,validateDatabaseName:RK}});var gt=y((Rse,oR)=>{"use strict";var ol=b().applyRetryableWrites,al=b().applyWriteConcern,la=b().decorateWithCollation,qK=b().decorateWithReadConcern,MK=Ge().executeCommand,nR=b().formattedOrderClause,ge=b().handleCallback,cl=I().MongoError,PK=I().ReadPreference,zr=b().toError,Wg=Gt().CursorState,iR=U().maxWireVersion;function BK(e,t,r){let n=r.skip,i=r.limit,s=r.hint,o=r.maxTimeMS;t=t||{};let c={count:r.collectionName,query:t};return e.s.numberOfRetries?(e.options.hint?s=e.options.hint:e.cmd.hint&&(s=e.cmd.hint),la(c,e,e.cmd)):la(c,e,r),typeof n=="number"&&(c.skip=n),typeof i=="number"&&(c.limit=i),typeof o=="number"&&(c.maxTimeMS=o),s&&(c.hint=s),qK(c,e),c}a(BK,"buildCountCommand");function DK(e,t,r,n,i,s){let o={findAndModify:e.collectionName,query:t};r=nR(r),r&&(o.sort=r),o.new=!!i.new,o.remove=!!i.remove,o.upsert=!!i.upsert;let c=i.projection||i.fields;c&&(o.fields=c),i.arrayFilters&&(o.arrayFilters=i.arrayFilters,delete i.arrayFilters),n&&!i.remove&&(o.update=n),i.maxTimeMS&&(o.maxTimeMS=i.maxTimeMS),i.serializeFunctions=i.serializeFunctions||e.s.serializeFunctions,i.checkKeys=!1;let l=Object.assign({},i);l=ol(l,e.s.db),l=al(l,{db:e.s.db,collection:e},i),l.writeConcern&&(o.writeConcern=l.writeConcern),l.bypassDocumentValidation===!0&&(o.bypassDocumentValidation=l.bypassDocumentValidation),l.readPreference=PK.primary;try{la(o,e,l)}catch(u){return s(u,null)}MK(e.s.db,o,l,(u,p)=>u?ge(s,u,null):ge(s,null,p))}a(DK,"findAndModify");function LK(e,t,r,n){let i=r.full==null?!1:r.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new cl("topology was destroyed"));function s(o){let c={};for(let l=0;l<o.length;l++){let u=o[l];c[u.name]=[];for(let p in u.key)c[u.name].push([p,u.key[p]])}return c}a(s,"processResults"),e.collection(t).listIndexes(r).toArray((o,c)=>{if(o)return n(zr(o));if(!Array.isArray(c))return ge(n,null,[]);if(i)return ge(n,null,c);ge(n,null,s(c))})}a(LK,"indexInformation");function sR(e,t,r){let n=typeof r.forceServerObjectId=="boolean"?r.forceServerObjectId:e.s.db.options.forceServerObjectId;return n===!0?t:t.map(i=>(n!==!0&&i._id==null&&(i._id=e.s.pkFactory.createPk()),i))}a(sR,"prepareDocs");function jK(e,t){if(e.s.state===Wg.CLOSED||e.isDead&&e.isDead())return ge(t,cl.create({message:"Cursor is closed",driver:!0}));if(e.s.state===Wg.INIT&&e.cmd&&e.cmd.sort)try{e.cmd.sort=nR(e.cmd.sort)}catch(r){return ge(t,r)}e._next((r,n)=>{if(e.s.state=Wg.OPEN,r)return ge(t,r);ge(t,null,n)})}a(jK,"nextObject");function UK(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{},t=Array.isArray(t)?t:[t];let i=Object.assign({},r);i=ol(i,e.s.db),i=al(i,{db:e.s.db,collection:e},r),i.keepGoing===!0&&(i.ordered=!1),i.serializeFunctions=r.serializeFunctions||e.s.serializeFunctions,t=sR(e,t,r),e.s.topology.insert(e.s.namespace,t,i,(s,o)=>{if(n!=null){if(s)return ge(n,s);if(o==null)return ge(n,null,null);if(o.result.code)return ge(n,zr(o.result));if(o.result.writeErrors)return ge(n,zr(o.result.writeErrors[0]));o.ops=t,ge(n,null,o)}})}a(UK,"insertDocuments");function kK(e,t,r,n){typeof r=="function"?(n=r,r={}):typeof t=="function"&&(n=t,r={},t={}),r=r||{};let i=Object.assign({},r);i=ol(i,e.s.db),i=al(i,{db:e.s.db,collection:e},r),t==null&&(t={});let s={q:t,limit:0};r.single?s.limit=1:i.retryWrites&&(i.retryWrites=!1),r.hint&&(s.hint=r.hint);try{la(i,e,r)}catch(o){return n(o,null)}if(r.explain!==void 0&&iR(e.s.topology)<3)return n?n(new cl("server does not support explain on remove")):void 0;e.s.topology.remove(e.s.namespace,[s],i,(o,c)=>{if(n!=null){if(o)return ge(n,o,null);if(c==null)return ge(n,null,null);if(c.result.code)return ge(n,zr(c.result));if(c.result.writeErrors)return ge(n,zr(c.result.writeErrors[0]));ge(n,null,c)}})}a(kK,"removeDocuments");function FK(e,t,r,n,i){if(typeof n=="function"&&(i=n,n=null),n==null&&(n={}),typeof i!="function"&&(i=null),t==null||typeof t!="object")return i(zr("selector must be a valid JavaScript object"));if(r==null||typeof r!="object")return i(zr("document must be a valid JavaScript object"));let s=Object.assign({},n);s=ol(s,e.s.db),s=al(s,{db:e.s.db,collection:e},n),s.serializeFunctions=n.serializeFunctions||e.s.serializeFunctions;let o={q:t,u:r};o.upsert=n.upsert!==void 0?!!n.upsert:!1,o.multi=n.multi!==void 0?!!n.multi:!1,n.hint&&(o.hint=n.hint),s.arrayFilters&&(o.arrayFilters=s.arrayFilters,delete s.arrayFilters),s.retryWrites&&o.multi&&(s.retryWrites=!1);try{la(s,e,n)}catch(c){return i(c,null)}if(n.explain!==void 0&&iR(e.s.topology)<3)return i?i(new cl("server does not support explain on update")):void 0;e.s.topology.update(e.s.namespace,[o],s,(c,l)=>{if(i!=null){if(c)return ge(i,c,null);if(l==null)return ge(i,null,null);if(l.result.code)return ge(i,zr(l.result));if(l.result.writeErrors)return ge(i,zr(l.result.writeErrors[0]));ge(i,null,l)}})}a(FK,"updateDocuments");oR.exports={buildCountCommand:BK,findAndModify:DK,indexInformation:LK,nextObject:jK,prepareDocs:sR,insertDocuments:UK,removeDocuments:kK,updateDocuments:FK}});var As=y((qse,pR)=>{"use strict";var WK=b().applyWriteConcern,zg=I().BSON.Code,zK=Ge().createIndex,$K=b().decorateWithCollation,aR=b().decorateWithReadConcern,HK=Ge().ensureIndex,VK=Ge().evaluate,$g=Ge().executeCommand,Nt=b().handleCallback,cR=Ge().indexInformation,KK=I().BSON.Long,GK=I().MongoError,uR=I().ReadPreference,YK=gt().insertDocuments,JK=gt().updateDocuments,XK=`function () {
var c = db[ns].find(condition);
var map = new Map();
var reduce_function = reduce;

while (c.hasNext()) {
var obj = c.next();
var key = {};

for (var i = 0, len = keys.length; i < len; ++i) {
var k = keys[i];
key[k] = obj[k];
}

var aggObj = map.get(key);

if (aggObj == null) {
var newObj = Object.extend({}, key);
aggObj = Object.extend(newObj, initial);
map.put(key, aggObj);
}

reduce_function(obj, aggObj);
}

return { "result": map.values() };
}`;function QK(e,t,r,n){zK(e.s.db,e.collectionName,t,r,n)}a(QK,"createIndex");function ZK(e,t,r,n){let i=e.s.topology.capabilities();for(let s=0;s<t.length;s++)if(t[s].name==null){let o=[];if(t[s].collation&&i&&!i.commandsTakeCollation)return n(new GK("server/primary/mongos does not support collation"));for(let c in t[s].key)o.push(`${c}_${t[s].key[c]}`);t[s].name=o.join("_")}r=Object.assign({},r,{readPreference:uR.PRIMARY}),$g(e.s.db,{createIndexes:e.collectionName,indexes:t},r,n)}a(ZK,"createIndexes");function eG(e,t,r,n){HK(e.s.db,e.collectionName,t,r,n)}a(eG,"ensureIndex");function tG(e,t,r,n,i,s,o,c,l){if(o){let u=i&&i._bsontype==="Code"?i:new zg(i),p={group:{ns:e.collectionName,$reduce:u,cond:r,initial:n,out:"inline"}};if(s!=null&&(p.group.finalize=s),typeof t=="function"||t&&t._bsontype==="Code")p.group.$keyf=t&&t._bsontype==="Code"?t:new zg(t);else{let d={};t.forEach(f=>{d[f]=1}),p.group.key=d}c=Object.assign({},c),c.readPreference=uR.resolve(e,c),aR(p,e,c);try{$K(p,e,c)}catch(d){return l(d,null)}$g(e.s.db,p,c,(d,f)=>{if(d)return Nt(l,d,null);Nt(l,null,f.retval)})}else{let u=i!=null&&i._bsontype==="Code"?i.scope:{};u.ns=e.collectionName,u.keys=t,u.condition=r,u.initial=n;let p=XK.replace(/ reduce;/,i.toString()+";");VK(e.s.db,new zg(p,u),null,c,(d,f)=>{if(d)return Nt(l,d,null);Nt(l,null,f.result||f)})}}a(tG,"group");function rG(e,t,r){t=Object.assign({},{full:!0},t),cR(e.s.db,e.collectionName,t,r)}a(rG,"indexes");function nG(e,t,r,n){lR(e,r,(i,s)=>{if(i!=null)return Nt(n,i,null);if(!Array.isArray(t))return Nt(n,null,s[t]!=null);for(let o=0;o<t.length;o++)if(s[t[o]]==null)return Nt(n,null,!1);return Nt(n,null,!0)})}a(nG,"indexExists");function lR(e,t,r){cR(e.s.db,e.collectionName,t,r)}a(lR,"indexInformation");function iG(e,t,r){let n={parallelCollectionScan:e.collectionName,numCursors:t.numCursors};aR(n,e,t);let i=t.raw;delete t.raw,$g(e.s.db,n,t,(s,o)=>{if(s)return Nt(r,s,null);if(o==null)return Nt(r,new Error("no result returned for parallelCollectionScan"),null);t=Object.assign({explicitlyIgnoreSession:!0},t);let c=[];i&&(t.raw=i);for(let l=0;l<o.cursors.length;l++){let u=o.cursors[l].cursor.id,p=typeof u=="number"?KK.fromNumber(u):u;c.push(e.s.topology.cursor(e.namespace,p,t))}Nt(r,null,c)})}a(iG,"parallelCollectionScan");function sG(e,t,r,n){let i=WK(Object.assign({},r),{db:e.s.db,collection:e},r);if(t._id!=null)return i.upsert=!0,JK(e,{_id:t._id},t,i,n);YK(e,[t],i,(s,o)=>{if(n!=null){if(t==null)return Nt(n,null,null);if(s)return Nt(n,s,null);Nt(n,null,o)}})}a(sG,"save");pR.exports={createIndex:QK,createIndexes:ZK,ensureIndex:eG,group:tG,indexes:rG,indexExists:nG,indexInformation:lR,parallelCollectionScan:iG,save:sG}});var mR=y((Pse,hR)=>{"use strict";var oG=As().buildCountCommand,Ns=b().handleCallback,fR=I().MongoError,aG=Array.prototype.push,ul=Gt().CursorState;function cG(e,t,r,n){t&&(typeof e.cursorSkip()=="number"&&(r.skip=e.cursorSkip()),typeof e.cursorLimit()=="number"&&(r.limit=e.cursorLimit())),r.readPreference&&e.setReadPreference(r.readPreference),typeof r.maxTimeMS!="number"&&e.cmd&&typeof e.cmd.maxTimeMS=="number"&&(r.maxTimeMS=e.cmd.maxTimeMS);let i={};i.skip=r.skip,i.limit=r.limit,i.hint=r.hint,i.maxTimeMS=r.maxTimeMS,i.collectionName=e.namespace.collection;let s;try{s=oG(e,e.cmd.query,i)}catch(o){return n(o)}e.server=e.topology.s.coreTopology,e.topology.command(e.namespace.withCollection("$cmd"),s,e.options,(o,c)=>{n(o,c?c.result.n:null)})}a(cG,"count");function Hg(e,t){if(!t)throw fR.create({message:"callback is mandatory",driver:!0});if(e.isNotified())return;if(e.s.state===ul.CLOSED||e.isDead())return Ns(t,fR.create({message:"Cursor is closed",driver:!0}));e.s.state===ul.INIT&&(e.s.state=ul.OPEN);let r=null;if(e.bufferedCount()>0){for(;r=dR(e,t);)r(e,t);Hg(e,t)}else e.next((n,i)=>{if(n)return Ns(t,n);if(i==null)return e.close({skipKillCursors:!0},()=>Ns(t,null,null));Ns(t,null,i)!==!1&&Hg(e,t)})}a(Hg,"each");function dR(e,t){if(e.bufferedCount()!==0)return e._next(t),dR}a(dR,"loop");function uG(e,t){let r=[];e.rewind(),e.s.state=ul.INIT;let n=a(()=>{e._next((i,s)=>{if(i)return Ns(t,i);if(s==null)return e.close({skipKillCursors:!0},()=>Ns(t,null,r));if(r.push(s),e.bufferedCount()>0){let o=e.readBufferedDocuments(e.bufferedCount());e.s.transforms&&typeof e.s.transforms.doc=="function"&&(o=o.map(e.s.transforms.doc)),aG.apply(r,o)}n()})},"fetchDocs");n()}a(uG,"toArray");hR.exports={count:cG,each:Hg,toArray:uG}});var gR=y((Dse,yR)=>{"use strict";var lG=gt().buildCountCommand,pG=R().OperationBase,Kg=class Kg extends pG{constructor(t,r,n){super(n),this.cursor=t,this.applySkipLimit=r}execute(t){let r=this.cursor,n=this.applySkipLimit,i=this.options;n&&(typeof r.cursorSkip()=="number"&&(i.skip=r.cursorSkip()),typeof r.cursorLimit()=="number"&&(i.limit=r.cursorLimit())),i.readPreference&&r.setReadPreference(i.readPreference),typeof i.maxTimeMS!="number"&&r.cmd&&typeof r.cmd.maxTimeMS=="number"&&(i.maxTimeMS=r.cmd.maxTimeMS);let s={};s.skip=i.skip,s.limit=i.limit,s.hint=i.hint,s.maxTimeMS=i.maxTimeMS,s.collectionName=r.namespace.collection;let o;try{o=lG(r,r.cmd.query,s)}catch(c){return t(c)}r.server=r.topology.s.coreTopology,r.topology.command(r.namespace.withCollection("$cmd"),o,r.options,(c,l)=>{t(c,l?l.result.n:null)})}};a(Kg,"CountOperation");var Vg=Kg;yR.exports=Vg});var Sr=y((jse,ER)=>{"use strict";var fG=require("stream").Transform,dG=require("stream").PassThrough,Yg=require("util").deprecate,vR=b().handleCallback,xR=I().ReadPreference,Q=I().MongoError,SR=Gt().CoreCursor,$=Gt().CursorState,hG=I().BSON.Map,pa=b().maybePromise,mG=ps(),yG=b().formattedOrderClause,gG=Bo().Explain,vG=R().Aspect,Gg=mR().each,xG=gR(),bR=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"],wR=["numberOfRetries","tailableRetryInterval"],ll=class ll extends SR{constructor(t,r,n,i){super(t,r,n,i),this.operation&&(i=this.operation.options);let s=i.numberOfRetries||5,o=i.tailableRetryInterval||500,c=s,l=i.promiseLibrary||Promise;this.s={numberOfRetries:s,tailableRetryInterval:o,currentNumberOfRetries:c,state:$.INIT,promiseLibrary:l,explicitlyIgnoreSession:!!i.explicitlyIgnoreSession},!i.explicitlyIgnoreSession&&i.session&&(this.cursorState.session=i.session),this.options.noCursorTimeout===!0&&this.addCursorFlag("noCursorTimeout",!0);let u=1e3;this.cmd.cursor&&this.cmd.cursor.batchSize?u=this.cmd.cursor.batchSize:i.cursor&&i.cursor.batchSize?u=i.cursor.batchSize:typeof i.batchSize=="number"&&(u=i.batchSize),this.setCursorBatchSize(u)}get readPreference(){return this.operation?this.operation.readPreference:this.options.readPreference}get sortValue(){return this.cmd.sort}set session(t){this.cursorState.session=t}_initializeCursor(t){this.operation&&this.operation.session!=null?this.cursorState.session=this.operation.session:!this.s.explicitlyIgnoreSession&&!this.cursorState.session&&this.topology.hasSessionSupport()&&(this.cursorState.session=this.topology.startSession({owner:this}),this.operation&&(this.operation.session=this.cursorState.session)),super._initializeCursor(t)}hasNext(t){if(this.s.state===$.CLOSED||this.isDead&&this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return pa(this,t,r=>{let n=this;if(n.isNotified())return r(null,!1);n._next((i,s)=>{if(i)return r(i);if(s==null||n.s.state===ll.CLOSED||n.isDead())return r(null,!1);n.s.state=$.OPEN,n.cursorState.cursorIndex--,n.cursorState.limit>0&&n.cursorState.currentLimit--,r(null,!0)})})}next(t){return pa(this,t,r=>{let n=this;if(n.s.state===$.CLOSED||n.isDead&&n.isDead()){r(Q.create({message:"Cursor is closed",driver:!0}));return}if(n.s.state===$.INIT&&n.cmd.sort)try{n.cmd.sort=yG(n.cmd.sort)}catch(i){return r(i)}n._next((i,s)=>{if(i)return r(i);n.s.state=$.OPEN,r(null,s)})})}filter(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.query=t,this}maxScan(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.maxScan=t,this}hint(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.hint=t,this}min(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.min=t,this}max(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.max=t,this}returnKey(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.returnKey=t,this}showRecordId(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.showDiskLoc=t,this}snapshot(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.snapshot=t,this}setCursorOption(t,r){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});if(wR.indexOf(t)===-1)throw Q.create({message:`option ${t} is not a supported option ${wR}`,driver:!0});return this.s[t]=r,t==="numberOfRetries"&&(this.s.currentNumberOfRetries=r),this}addCursorFlag(t,r){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});if(bR.indexOf(t)===-1)throw Q.create({message:`flag ${t} is not a supported flag ${bR}`,driver:!0});if(typeof r!="boolean")throw Q.create({message:`flag ${t} must be a boolean value`,driver:!0});return this.cmd[t]=r,this}addQueryModifier(t,r){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});if(t[0]!=="$")throw Q.create({message:`${t} is not a valid query modifier`,driver:!0});let n=t.substr(1);return this.cmd[n]=r,n==="orderby"&&(this.cmd.sort=this.cmd[n]),this}comment(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.comment=t,this}maxAwaitTimeMS(t){if(typeof t!="number")throw Q.create({message:"maxAwaitTimeMS must be a number",driver:!0});if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.maxAwaitTimeMS=t,this}maxTimeMS(t){if(typeof t!="number")throw Q.create({message:"maxTimeMS must be a number",driver:!0});if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.maxTimeMS=t,this}project(t){if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});return this.cmd.fields=t,this}sort(t,r){if(this.options.tailable)throw Q.create({message:"Tailable cursor doesn't support sorting",driver:!0});if(this.s.state===$.CLOSED||this.s.state===$.OPEN||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});let n=t;return Array.isArray(n)&&Array.isArray(n[0])&&(n=new hG(n.map(i=>{let s=[i[0],null];if(i[1]==="asc")s[1]=1;else if(i[1]==="desc")s[1]=-1;else if(i[1]===1||i[1]===-1||i[1].$meta)s[1]=i[1];else throw new Q("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]");return s}))),r!=null&&(n=[[t,r]]),this.cmd.sort=n,this}batchSize(t){if(this.options.tailable)throw Q.create({message:"Tailable cursor doesn't support batchSize",driver:!0});if(this.s.state===$.CLOSED||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw Q.create({message:"batchSize requires an integer",driver:!0});return this.cmd.batchSize=t,this.setCursorBatchSize(t),this}collation(t){return this.cmd.collation=t,this}limit(t){if(this.options.tailable)throw Q.create({message:"Tailable cursor doesn't support limit",driver:!0});if(this.s.state===$.OPEN||this.s.state===$.CLOSED||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw Q.create({message:"limit requires an integer",driver:!0});return this.cmd.limit=t,this.setCursorLimit(t),this}skip(t){if(this.options.tailable)throw Q.create({message:"Tailable cursor doesn't support skip",driver:!0});if(this.s.state===$.OPEN||this.s.state===$.CLOSED||this.isDead())throw Q.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw Q.create({message:"skip requires an integer",driver:!0});return this.cmd.skip=t,this.setCursorSkip(t),this}each(t){this.rewind(),this.s.state=$.INIT,Gg(this,t)}forEach(t,r){if(this.rewind(),this.s.state=$.INIT,typeof r=="function")Gg(this,(n,i)=>{if(n)return r(n),!1;if(i!=null){try{t(i)}catch(s){return r(s),!1}return!0}if(i==null&&r){let s=r;return r=null,s(null),!1}});else return new this.s.promiseLibrary((n,i)=>{Gg(this,(s,o)=>{if(s)return i(s),!1;if(o==null)return n(null),!1;try{t(o)}catch(c){return i(c),!1}return!0})})}setReadPreference(t){if(this.s.state!==$.INIT)throw Q.create({message:"cannot change cursor readPreference after cursor has been accessed",driver:!0});if(t instanceof xR)this.options.readPreference=t;else if(typeof t=="string")this.options.readPreference=new xR(t);else throw new TypeError("Invalid read preference: "+t);return this}toArray(t){if(this.options.tailable)throw Q.create({message:"Tailable cursor cannot be converted to array",driver:!0});return pa(this,t,r=>{let n=this,i=[];n.rewind(),n.s.state=$.INIT;let s=a(()=>{n._next((o,c)=>{if(o)return vR(r,o);if(c==null)return n.close({skipKillCursors:!0},()=>vR(r,null,i));if(i.push(c),n.bufferedCount()>0){let l=n.readBufferedDocuments(n.bufferedCount());Array.prototype.push.apply(i,l)}s()})},"fetchDocs");s()})}count(t,r,n){if(this.cmd.query==null)throw Q.create({message:"count can only be used with find command",driver:!0});typeof r=="function"&&(n=r,r={}),r=r||{},typeof t=="function"&&(n=t,t=!0),this.cursorState.session&&(r=Object.assign({},r,{session:this.cursorState.session}));let i=new xG(this,t,r);return mG(this.topology,i,n)}close(t,r){return typeof t=="function"&&(r=t,t={}),t=Object.assign({},{skipKillCursors:!1},t),pa(this,r,n=>{this.s.state=$.CLOSED,t.skipKillCursors||this.kill(),this._endSession(()=>{this.emit("close"),n(null,this)})})}map(t){if(this.cursorState.transforms&&this.cursorState.transforms.doc){let r=this.cursorState.transforms.doc;this.cursorState.transforms.doc=n=>t(r(n))}else this.cursorState.transforms={doc:t};return this}isClosed(){return this.isDead()}destroy(t){t&&this.emit("error",t),this.pause(),this.close()}stream(t){return this.cursorState.streamOptions=t||{},this}transformStream(t){let r=t||{};if(typeof r.transform=="function"){let n=new fG({objectMode:!0,transform:function(i,s,o){this.push(r.transform(i)),o()}});return this.pipe(n)}return this.pipe(new dG({objectMode:!0}))}explain(t,r){if(typeof t=="function"&&(r=t,t=!0),t===void 0&&(t=!0),!this.operation||!this.operation.hasAspect(vG.EXPLAINABLE))throw new Q("This command cannot be explained");return this.operation.explain=new gG(t),pa(this,r,n=>{SR.prototype._next.apply(this,[n])})}getLogger(){return this.logger}};a(ll,"Cursor");var Bn=ll;Bn.prototype.maxTimeMs=Bn.prototype.maxTimeMS;Yg(Bn.prototype.each,"Cursor.each is deprecated. Use Cursor.forEach instead.");Yg(Bn.prototype.maxScan,"Cursor.maxScan is deprecated, and will be removed in a later version");Yg(Bn.prototype.snapshot,"Cursor Snapshot is deprecated, and will be removed in a later version");ER.exports=Bn});var br=y((kse,CR)=>{"use strict";var pl=R().Aspect,SG=R().OperationBase,OR=I().ReadPreference,bG=ni(),wG=_r(),EG=U().maxWireVersion,OG=b().decorateWithExplain,TG=yn().commandSupportsReadConcern,CG=q().MongoError,_G=Zn().extractCommand,TR=5,Xg=class Xg extends SG{constructor(t,r,n){super(r),this.ns=t.s.namespace.withCollection("$cmd");let i=this.hasAspect(pl.NO_INHERIT_OPTIONS)?void 0:t;this.readPreference=this.hasAspect(pl.WRITE_OPERATION)?OR.primary:OR.resolve(i,this.options),this.readConcern=NG(i,this.options),this.writeConcern=AG(i,this.options),n&&typeof n.fullResponse=="boolean"&&(this.fullResponse=!0),this.options.readPreference=this.readPreference,t.s.logger?this.logger=t.s.logger:t.s.db&&t.s.db.logger&&(this.logger=t.s.db.logger)}executeCommand(t,r,n){this.server=t;let i=this.options,s=EG(t),o=this.session&&this.session.inTransaction();if(this.readConcern&&TG(r)&&!o&&Object.assign(r,{readConcern:this.readConcern}),i.collation&&s<TR){n(new CG(`Server ${t.name}, which reports wire version ${s}, does not support collation`));return}if(s>=TR&&(this.writeConcern&&this.hasAspect(pl.WRITE_OPERATION)&&Object.assign(r,{writeConcern:this.writeConcern}),i.collation&&typeof i.collation=="object"&&Object.assign(r,{collation:i.collation})),typeof i.maxTimeMS=="number"&&(r.maxTimeMS=i.maxTimeMS),typeof i.comment=="string"&&(r.comment=i.comment),this.hasAspect(pl.EXPLAINABLE)&&this.explain&&(s<6&&r.aggregate?r.explain=!0:r=OG(r,this.explain)),this.logger&&this.logger.isDebug()){let c=_G(r);this.logger.debug(`executing command ${JSON.stringify(c.shouldRedact?`${c.name} details REDACTED`:r)} against ${this.ns}`)}t.command(this.ns.toString(),r,this.options,(c,l)=>{if(c){n(c,null);return}if(this.fullResponse){n(null,l);return}n(null,l.result)})}};a(Xg,"CommandOperationV2");var Jg=Xg;function AG(e,t){return wG.fromOptions(t)||e&&e.writeConcern}a(AG,"resolveWriteConcern");function NG(e,t){return bG.fromOptions(t)||e&&e.readConcern}a(NG,"resolveReadConcern");CR.exports=Jg});var fa=y((Wse,AR)=>{"use strict";var RG=br(),_R=I().MongoError,IG=U().maxWireVersion,qG=I().ReadPreference,fl=R().Aspect,MG=R().defineAspects,PG=1,BG=8,Qg=class Qg extends RG{constructor(t,r,n){if(super(t,n,{fullResponse:!0}),this.target=t.s.namespace&&t.s.namespace.collection?t.s.namespace.collection:PG,this.pipeline=r,this.hasWriteStage=!1,typeof n.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let i=r[r.length-1];(i.$out||i.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage&&(this.readPreference=qG.primary),this.explain&&this.writeConcern)throw new _R('"explain" cannot be used on an aggregate call with writeConcern');if(n.cursor!=null&&typeof n.cursor!="object")throw new _R("cursor options must be an object")}get canRetryRead(){return!this.hasWriteStage}addToPipeline(t){this.pipeline.push(t)}execute(t,r){let n=this.options,i=IG(t),s={aggregate:this.target,pipeline:this.pipeline};this.hasWriteStage&&i<BG&&(this.readConcern=null),i>=5&&this.hasWriteStage&&this.writeConcern&&Object.assign(s,{writeConcern:this.writeConcern}),n.bypassDocumentValidation===!0&&(s.bypassDocumentValidation=n.bypassDocumentValidation),typeof n.allowDiskUse=="boolean"&&(s.allowDiskUse=n.allowDiskUse),n.hint&&(s.hint=n.hint),this.explain&&(n.full=!1),s.cursor=n.cursor||{},n.batchSize&&!this.hasWriteStage&&(s.cursor.batchSize=n.batchSize),super.executeCommand(t,s,r)}};a(Qg,"AggregateOperation");var dl=Qg;MG(dl,[fl.READ_OPERATION,fl.RETRYABLE,fl.EXECUTE_WITH_SELECTION,fl.EXPLAINABLE]);AR.exports=dl});var Sl=y(($se,qR)=>{"use strict";var RR=I().BSON.Long,DG=I().MongoError,hl=I().BSON.ObjectID,vt=I().BSON,NR=I().MongoWriteConcernError,Zg=b().emitWarningOnce,Si=b().toError,wi=b().handleCallback,LG=b().applyRetryableWrites,jG=b().applyWriteConcern,UG=b().executeLegacyOperation,kG=b().isPromiseLike,yl=b().hasAtomicOperators,FG=U().maxWireVersion,WG=64,bi=1,$r=2,Dn=3,zG=new vt([vt.Binary,vt.Code,vt.DBRef,vt.Decimal128,vt.Double,vt.Int32,vt.Long,vt.Map,vt.MaxKey,vt.MinKey,vt.ObjectId,vt.BSONRegExp,vt.Symbol,vt.Timestamp]),rv=class rv{constructor(t,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=t,this.operations=[],this.size=0,this.sizeBytes=0}};a(rv,"Batch");var ev=rv,Rs=Symbol("upsertedIds"),Is=Symbol("insertedIds"),nv=class nv{constructor(t){this.result=t,this[Rs]=void 0,this[Is]=void 0}get insertedCount(){return typeof this.result.nInserted!="number"?0:this.result.nInserted}get matchedCount(){return typeof this.result.nMatched!="number"?0:this.result.nMatched}get modifiedCount(){return typeof this.result.nModified!="number"?0:this.result.nModified}get deletedCount(){return typeof this.result.nRemoved!="number"?0:this.result.nRemoved}get upsertedCount(){return this.result.upserted?this.result.upserted.length:0}get upsertedIds(){if(this[Rs])return this[Rs];this[Rs]={};for(let t of this.result.upserted||[])this[Rs][t.index]=t._id;return this[Rs]}get insertedIds(){if(this[Is])return this[Is];this[Is]={};for(let t of this.result.insertedIds||[])this[Is][t.index]=t._id;return this[Is]}get n(){return this.result.insertedCount}get ok(){return this.result.ok}get nInserted(){return this.result.nInserted}get nUpserted(){return this.result.nUpserted}get nMatched(){return this.result.nMatched}get nModified(){return this.result.nModified}get nRemoved(){return this.result.nRemoved}getInsertedIds(){return this.result.insertedIds}getUpsertedIds(){return this.result.upserted}getUpsertedIdAt(t){return this.result.upserted[t]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(t){return t<this.result.writeErrors.length?this.result.writeErrors[t]:null}getWriteErrors(){return this.result.writeErrors}getLastOp(){return this.result.lastOp}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return null;if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let t="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];t=t+n.errmsg,r===0&&(t=t+" and ")}return new da({errmsg:t,code:WG})}}toJSON(){return this.result}toString(){return`BulkWriteResult(${this.toJSON(this.result)})`}isOk(){return this.result.ok===1}};a(nv,"BulkWriteResult");var qs=nv,iv=class iv{constructor(t){this.err=t}get code(){return this.err.code}get errmsg(){return this.err.errmsg}toJSON(){return{code:this.err.code,errmsg:this.err.errmsg}}toString(){return`WriteConcernError(${this.err.errmsg})`}};a(iv,"WriteConcernError");var da=iv,sv=class sv{constructor(t){this.err=t}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};a(sv,"WriteError");var gl=sv;function ml(e){return typeof e=="number"?RR.fromNumber(e):e}a(ml,"longOrConvert");function xl(e,t,r,n){if(r)n=r;else if(n&&n.result)n=n.result;else if(n==null)return;if(n.ok===0&&t.ok===1){t.ok=0;let s={index:0,code:n.code||0,errmsg:n.message,op:e.operations[0]};t.writeErrors.push(new gl(s));return}else if(n.ok===0&&t.ok===0)return;if(n.opTime||n.lastOp){let s=n.lastOp||n.opTime;if(s._bsontype==="Timestamp"&&(s={ts:s,t:RR.ZERO}),!t.lastOp)t.lastOp=s;else{let o=ml(t.lastOp.ts),c=ml(s.ts);if(c.greaterThan(o))t.lastOp=s;else if(c.equals(o)){let l=ml(t.lastOp.t);ml(s.t).greaterThan(l)&&(t.lastOp=s)}}}e.batchType===bi&&n.n&&(t.nInserted=t.nInserted+n.n),e.batchType===Dn&&n.n&&(t.nRemoved=t.nRemoved+n.n);let i=0;if(Array.isArray(n.upserted)){i=n.upserted.length;for(let s=0;s<n.upserted.length;s++)t.upserted.push({index:n.upserted[s].index+e.originalZeroIndex,_id:n.upserted[s]._id})}else n.upserted&&(i=1,t.upserted.push({index:e.originalZeroIndex,_id:n.upserted}));if(e.batchType===$r&&n.n){let s=n.nModified;t.nUpserted=t.nUpserted+i,t.nMatched=t.nMatched+(n.n-i),typeof s=="number"?t.nModified=t.nModified+s:t.nModified=null}if(Array.isArray(n.writeErrors))for(let s=0;s<n.writeErrors.length;s++){let o={index:e.originalIndexes[n.writeErrors[s].index],code:n.writeErrors[s].code,errmsg:n.writeErrors[s].errmsg,op:e.operations[n.writeErrors[s].index]};t.writeErrors.push(new gl(o))}n.writeConcernError&&t.writeConcernErrors.push(new da(n.writeConcernError))}a(xl,"mergeBatchResults");function IR(e,t,r){if(e.s.batches.length===0)return wi(r,null,new qs(e.s.bulkResult));let n=e.s.batches.shift();function i(s,o){if((s&&s.driver||s&&s.message)&&!(s instanceof NR))return wi(r,s);if(s&&(s.ok=0),s instanceof NR)return $G(n,e.s.bulkResult,s,r);let c=new qs(e.s.bulkResult);if(xl(n,e.s.bulkResult,s,o)!=null)return wi(r,null,c);e.handleWriteError(r,c)||IR(e,t,r)}a(i,"resultHandler"),e.finalOptionsHandler({options:t,batch:n,resultHandler:i},r)}a(IR,"executeCommands");function $G(e,t,r,n){xl(e,t,null,r.result);let i=new da({errmsg:r.result.writeConcernError.errmsg,code:r.result.writeConcernError.result});return wi(n,new Ms(Si(i),new qs(t)),null)}a($G,"handleMongoWriteConcernError");var ov=class ov extends DG{constructor(t,r){let n=t.err||t.errmsg||t.errMessage||t;super(n),Object.assign(this,t),this.name="BulkWriteError",this.result=r}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};a(ov,"BulkWriteError");var Ms=ov,av=class av{constructor(t){this.s=t.s}update(t){let r=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:!1,n={q:this.s.currentOp.selector,u:t,multi:!0,upsert:r};return t.hint&&(n.hint=t.hint),this.s.currentOp=null,this.s.options.addToOperationsList(this,$r,n)}updateOne(t){let r=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:!1,n={q:this.s.currentOp.selector,u:t,multi:!1,upsert:r};if(t.hint&&(n.hint=t.hint),!yl(t))throw new TypeError("Update document requires atomic operators");return this.s.currentOp=null,this.s.options.addToOperationsList(this,$r,n)}replaceOne(t){let r=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:!1,n={q:this.s.currentOp.selector,u:t,multi:!1,upsert:r};if(t.hint&&(n.hint=t.hint),yl(t))throw new TypeError("Replacement document must not use atomic operators");return this.s.currentOp=null,this.s.options.addToOperationsList(this,$r,n)}upsert(){return this.s.currentOp.upsert=!0,this}deleteOne(){let t={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,this.s.options.addToOperationsList(this,Dn,t)}delete(){let t={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,this.s.options.addToOperationsList(this,Dn,t)}removeOne(){return Zg("bulk operation `removeOne` has been deprecated, please use `deleteOne`"),this.deleteOne()}remove(){return Zg("bulk operation `remove` has been deprecated, please use `delete`"),this.delete()}};a(av,"FindOperators");var tv=av,cv=class cv{constructor(t,r,n,i){this.isOrdered=i,n=n??{};let s=r.s.namespace,o=!1,c=null,l=t.bson,u=t.lastIsMaster(),p=!!(t.s.options&&t.s.options.autoEncrypter),d=u&&u.maxBsonObjectSize?u.maxBsonObjectSize:1024*1024*16,f=p?1024*1024*2:d,h=u&&u.maxWriteBatchSize?u.maxWriteBatchSize:1e3,m=(h-1).toString(10).length+2,v=Object.assign({},n);v=LG(v,r.s.db),v=jG(v,{collection:r},n);let x=v.writeConcern,w=n.promiseLibrary||Promise,C={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:C,currentBatch:null,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:null,currentUpdateBatch:null,currentRemoveBatch:null,batches:[],writeConcern:x,maxBsonObjectSize:d,maxBatchSizeBytes:f,maxWriteBatchSize:h,maxKeySize:m,namespace:s,bson:l,topology:t,options:v,currentOp:c,executed:o,collection:r,promiseLibrary:w,err:null,checkKeys:typeof n.checkKeys=="boolean"?n.checkKeys:!0},n.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(t){return this.s.collection.s.db.options.forceServerObjectId!==!0&&t._id==null&&(t._id=new hl),this.s.options.addToOperationsList(this,bi,t)}find(t){if(!t)throw Si("Bulk find operation must specify a selector");return this.s.currentOp={selector:t},new tv(this)}raw(t){let r=Object.keys(t)[0],n=typeof this.s.options.forceServerObjectId=="boolean"?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(t.updateOne&&t.updateOne.q||t.updateMany&&t.updateMany.q||t.replaceOne&&t.replaceOne.q)return t[r].multi=!(t.updateOne||t.replaceOne),this.s.options.addToOperationsList(this,$r,t[r]);if(t.updateOne||t.updateMany||t.replaceOne){if(t.replaceOne&&yl(t[r].replacement))throw new TypeError("Replacement document must not use atomic operators");if((t.updateOne||t.updateMany)&&!yl(t[r].update))throw new TypeError("Update document requires atomic operators");let i=!(t.updateOne||t.replaceOne),s={q:t[r].filter,u:t[r].update||t[r].replacement,multi:i};if(t[r].hint&&(s.hint=t[r].hint),this.isOrdered?(s.upsert=!!t[r].upsert,t.collation&&(s.collation=t.collation)):t[r].upsert&&(s.upsert=!0),t[r].arrayFilters){if(FG(this.s.topology)<6)throw new TypeError("arrayFilters are only supported on MongoDB 3.6+");s.arrayFilters=t[r].arrayFilters}return this.s.options.addToOperationsList(this,$r,s)}if(t.removeOne||t.removeMany||t.deleteOne&&t.deleteOne.q||t.deleteMany&&t.deleteMany.q)return t[r].limit=t.removeOne?1:0,this.s.options.addToOperationsList(this,Dn,t[r]);if(t.deleteOne||t.deleteMany){let i=t.deleteOne?1:0,s={q:t[r].filter,limit:i};return t[r].hint&&(s.hint=t[r].hint),this.isOrdered&&t.collation&&(s.collation=t.collation),this.s.options.addToOperationsList(this,Dn,s)}if(t.insertOne&&t.insertOne.document==null)return n!==!0&&t.insertOne._id==null&&(t.insertOne._id=new hl),this.s.options.addToOperationsList(this,bi,t.insertOne);if(t.insertOne&&t.insertOne.document)return n!==!0&&t.insertOne.document._id==null&&(t.insertOne.document._id=new hl),this.s.options.addToOperationsList(this,bi,t.insertOne.document);if(t.insertMany){Zg("bulk operation `insertMany` has been deprecated; use multiple `insertOne` ops instead");for(let i=0;i<t.insertMany.length;i++)n!==!0&&t.insertMany[i]._id==null&&(t.insertMany[i]._id=new hl),this.s.options.addToOperationsList(this,bi,t.insertMany[i]);return}throw Si("bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany")}_handleEarlyError(t,r){if(typeof r=="function"){r(t,null);return}return this.s.promiseLibrary.reject(t)}bulkExecute(t,r,n){typeof r=="function"&&(n=r);let i=Object.assign({},this.s.options,r);if(typeof t=="function"?n=t:t&&typeof t=="object"&&(this.s.writeConcern=t),this.s.executed){let s=Si("batch cannot be re-executed");return this._handleEarlyError(s,n)}if(this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0){let s=Si("Invalid Operation, no operations specified");return this._handleEarlyError(s,n)}return{options:i,callback:n}}execute(t,r,n){let i=this.bulkExecute(t,r,n);return!i||kG(i)?i:(r=i.options,n=i.callback,UG(this.s.topology,IR,[this,r,n]))}finalOptionsHandler(t,r){let n=Object.assign({ordered:this.isOrdered},t.options);this.s.writeConcern!=null&&(n.writeConcern=this.s.writeConcern),n.bypassDocumentValidation!==!0&&delete n.bypassDocumentValidation,this.operationId&&(t.resultHandler.operationId=this.operationId),this.s.options.serializeFunctions&&(n.serializeFunctions=!0),this.s.options.ignoreUndefined&&(n.ignoreUndefined=!0),this.s.bypassDocumentValidation===!0&&(n.bypassDocumentValidation=!0),this.s.checkKeys===!1&&(n.checkKeys=!1),n.retryWrites&&(t.batch.batchType===$r&&(n.retryWrites=n.retryWrites&&!t.batch.operations.some(i=>i.multi)),t.batch.batchType===Dn&&(n.retryWrites=n.retryWrites&&!t.batch.operations.some(i=>i.limit===0)));try{t.batch.batchType===bi?this.s.topology.insert(this.s.namespace,t.batch.operations,n,t.resultHandler):t.batch.batchType===$r?this.s.topology.update(this.s.namespace,t.batch.operations,n,t.resultHandler):t.batch.batchType===Dn&&this.s.topology.remove(this.s.namespace,t.batch.operations,n,t.resultHandler)}catch(i){i.ok=0,wi(r,null,xl(t.batch,this.s.bulkResult,i,null))}}handleWriteError(t,r){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";return wi(t,new Ms(Si({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors}),r),null),!0}if(r.getWriteConcernError())return wi(t,new Ms(Si(r.getWriteConcernError()),r),null),!0}};a(cv,"BulkOperationBase");var vl=cv;Object.defineProperty(vl.prototype,"length",{enumerable:!0,get:function(){return this.s.currentIndex}});qR.exports={Batch:ev,BulkOperationBase:vl,mergeBatchResults:xl,bson:zG,INSERT:bi,UPDATE:$r,REMOVE:Dn,BulkWriteError:Ms,BulkWriteResult:qs}});var DR=y((Vse,uv)=>{"use strict";var Hr=Sl(),HG=Hr.BulkOperationBase,MR=Hr.Batch,VG=Hr.bson,KG=b(),PR=KG.toError;function GG(e,t,r){let n=VG.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=e.s.maxBsonObjectSize)throw PR("document is larger than the maximum size "+e.s.maxBsonObjectSize);e.s.currentBatch=null,t===Hr.INSERT?e.s.currentBatch=e.s.currentInsertBatch:t===Hr.UPDATE?e.s.currentBatch=e.s.currentUpdateBatch:t===Hr.REMOVE&&(e.s.currentBatch=e.s.currentRemoveBatch);let i=e.s.maxKeySize;if(e.s.currentBatch==null&&(e.s.currentBatch=new MR(t,e.s.currentIndex)),(e.s.currentBatch.size+1>=e.s.maxWriteBatchSize||e.s.currentBatch.size>0&&e.s.currentBatch.sizeBytes+i+n>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==t)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new MR(t,e.s.currentIndex)),Array.isArray(r))throw PR("operation passed in cannot be an Array");return e.s.currentBatch.operations.push(r),e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentIndex=e.s.currentIndex+1,t===Hr.INSERT?(e.s.currentInsertBatch=e.s.currentBatch,e.s.bulkResult.insertedIds.push({index:e.s.bulkResult.insertedIds.length,_id:r._id})):t===Hr.UPDATE?e.s.currentUpdateBatch=e.s.currentBatch:t===Hr.REMOVE&&(e.s.currentRemoveBatch=e.s.currentBatch),e.s.currentBatch.size+=1,e.s.currentBatch.sizeBytes+=i+n,e}a(GG,"addToOperationsList");var lv=class lv extends HG{constructor(t,r,n){n=n||{},n=Object.assign(n,{addToOperationsList:GG}),super(t,r,n,!1)}handleWriteError(t,r){return this.s.batches.length?!1:super.handleWriteError(t,r)}};a(lv,"UnorderedBulkOperation");var ha=lv;function BR(e,t,r){return new ha(e,t,r)}a(BR,"initializeUnorderedBulkOp");BR.UnorderedBulkOperation=ha;uv.exports=BR;uv.exports.Bulk=ha});var kR=y((Gse,pv)=>{"use strict";var bl=Sl(),YG=bl.BulkOperationBase,LR=bl.Batch,JG=bl.bson,XG=b(),jR=XG.toError;function QG(e,t,r){let n=JG.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=e.s.maxBsonObjectSize)throw jR("document is larger than the maximum size "+e.s.maxBsonObjectSize);e.s.currentBatch==null&&(e.s.currentBatch=new LR(t,e.s.currentIndex));let i=e.s.maxKeySize;if((e.s.currentBatchSize+1>=e.s.maxWriteBatchSize||e.s.currentBatchSize>0&&e.s.currentBatchSizeBytes+i+n>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==t)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new LR(t,e.s.currentIndex),e.s.currentBatchSize=0,e.s.currentBatchSizeBytes=0),t===bl.INSERT&&e.s.bulkResult.insertedIds.push({index:e.s.currentIndex,_id:r._id}),Array.isArray(r))throw jR("operation passed in cannot be an Array");return e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentBatch.operations.push(r),e.s.currentBatchSize+=1,e.s.currentBatchSizeBytes+=i+n,e.s.currentIndex+=1,e}a(QG,"addToOperationsList");var fv=class fv extends YG{constructor(t,r,n){n=n||{},n=Object.assign(n,{addToOperationsList:QG}),super(t,r,n,!0)}};a(fv,"OrderedBulkOperation");var ma=fv;function UR(e,t,r){return new ma(e,t,r)}a(UR,"initializeOrderedBulkOp");UR.OrderedBulkOperation=ma;pv.exports=UR;pv.exports.Bulk=ma});var wl=y((Jse,WR)=>{"use strict";var FR=I().MongoError,ZG=Sr(),e5=Gt().CursorState,dv=class dv extends ZG{constructor(t,r,n){super(t,r,n)}batchSize(t){if(this.s.state===e5.CLOSED||this.isDead())throw FR.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw FR.create({message:"batchSize requires an integer",driver:!0});return this.operation.options.batchSize=t,this.setCursorBatchSize(t),this}geoNear(t){return this.operation.addToPipeline({$geoNear:t}),this}group(t){return this.operation.addToPipeline({$group:t}),this}limit(t){return this.operation.addToPipeline({$limit:t}),this}match(t){return this.operation.addToPipeline({$match:t}),this}maxTimeMS(t){return this.operation.options.maxTimeMS=t,this}out(t){return this.operation.addToPipeline({$out:t}),this}project(t){return this.operation.addToPipeline({$project:t}),this}lookup(t){return this.operation.addToPipeline({$lookup:t}),this}redact(t){return this.operation.addToPipeline({$redact:t}),this}skip(t){return this.operation.addToPipeline({$skip:t}),this}sort(t){return this.operation.addToPipeline({$sort:t}),this}unwind(t){return this.operation.addToPipeline({$unwind:t}),this}getLogger(){return this.logger}};a(dv,"AggregationCursor");var ya=dv;ya.prototype.get=ya.prototype.toArray;WR.exports=ya});var Ol=y((Qse,$R)=>{"use strict";var zR=I().ReadPreference,El=I().MongoError,t5=Sr(),hv=Gt().CursorState,mv=class mv extends t5{constructor(t,r,n,i){super(t,r,n,i)}setReadPreference(t){if(this.s.state===hv.CLOSED||this.isDead())throw El.create({message:"Cursor is closed",driver:!0});if(this.s.state!==hv.INIT)throw El.create({message:"cannot change cursor readPreference after cursor has been accessed",driver:!0});if(t instanceof zR)this.options.readPreference=t;else if(typeof t=="string")this.options.readPreference=new zR(t);else throw new TypeError("Invalid read preference: "+t);return this}batchSize(t){if(this.s.state===hv.CLOSED||this.isDead())throw El.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw El.create({message:"batchSize requires an integer",driver:!0});return this.cmd.cursor&&(this.cmd.cursor.batchSize=t),this.setCursorBatchSize(t),this}maxTimeMS(t){return this.topology.lastIsMaster().minWireVersion>2&&(this.cmd.maxTimeMS=t),this}getLogger(){return this.logger}};a(mv,"CommandCursor");var ga=mv;ga.prototype.get=ga.prototype.toArray;$R.exports=ga});var vv=y((eoe,HR)=>{"use strict";var r5=b().applyRetryableWrites,n5=b().applyWriteConcern,i5=I().MongoError,s5=R().OperationBase,gv=class gv extends s5{constructor(t,r,n){super(n),this.collection=t,this.operations=r}execute(t){let r=this.collection,n=this.operations,i=this.options;r.s.options.ignoreUndefined&&(i=Object.assign({},i),i.ignoreUndefined=r.s.options.ignoreUndefined);let s=i.ordered===!0||i.ordered==null?r.initializeOrderedBulkOp(i):r.initializeUnorderedBulkOp(i),o=!1;try{for(let p=0;p<n.length;p++){let d=Object.keys(n[p])[0];n[p][d].collation&&(o=!0),s.raw(n[p])}}catch(p){return t(p,null)}let c=Object.assign({},i);c=r5(c,r.s.db),c=n5(c,{db:r.s.db,collection:r},i);let l=c.writeConcern?c.writeConcern:{},u=r.s.topology.capabilities();if(o&&u&&!u.commandsTakeCollation)return t(new i5("server/primary/mongos does not support collation"));s.execute(l,c,(p,d)=>{if(!d&&p)return t(p,null);t(null,d)})}};a(gv,"BulkWriteOperation");var yv=gv;HR.exports=yv});var bv=y((roe,VR)=>{"use strict";var o5=fa(),Sv=class Sv extends o5{constructor(t,r,n){let i=[{$match:r}];typeof n.skip=="number"&&i.push({$skip:n.skip}),typeof n.limit=="number"&&i.push({$limit:n.limit}),i.push({$group:{_id:1,n:{$sum:1}}}),super(t,i,n)}execute(t,r){super.execute(t,(n,i)=>{if(n){r(n,null);return}let s=i.result;if(s.cursor==null||s.cursor.firstBatch==null){r(null,0);return}let o=s.cursor.firstBatch;r(null,o.length?o[0].n:0)})}};a(Sv,"CountDocumentsOperation");var xv=Sv;VR.exports=xv});var Ev=y((ioe,YR)=>{"use strict";var KR=R().Aspect,a5=R().defineAspects,c5=br(),GR=I().MongoError,u5=b().parseIndexOptions,l5=U().maxWireVersion,p5=new Set(["background","unique","name","partialFilterExpression","sparse","expireAfterSeconds","storageEngine","collation","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]),wv=class wv extends c5{constructor(t,r,n,i){if(super(t,i),this.collection=r,!Array.isArray(n)||Array.isArray(n[0])){this.onlyReturnNameOfCreatedIndex=!0;let s=u5(n),c={name:typeof i.name=="string"?i.name:s.name,key:s.fieldHash};for(let l in i)p5.has(l)&&(c[l]=i[l]);this.indexes=[c];return}this.indexes=n}execute(t,r){let n=this.options,i=this.indexes,s=l5(t);for(let c=0;c<i.length;c++){if(i[c].collation&&s<5){r(new GR(`Server ${t.name}, which reports wire version ${s}, does not support collation`));return}if(i[c].name==null){let l=[];for(let u in i[c].key)l.push(`${u}_${i[c].key[u]}`);i[c].name=l.join("_")}}let o={createIndexes:this.collection,indexes:i};if(n.commitQuorum!=null){if(s<9){r(new GR("`commitQuorum` option for `createIndexes` not supported on servers < 4.4"));return}o.commitQuorum=n.commitQuorum}this.options.collation=void 0,super.executeCommand(t,o,(c,l)=>{if(c){r(c);return}r(null,this.onlyReturnNameOfCreatedIndex?i[0].name:l)})}};a(wv,"CreateIndexesOperation");var Tl=wv;a5(Tl,[KR.WRITE_OPERATION,KR.EXECUTE_WITH_SELECTION]);YR.exports=Tl});var XR=y((ooe,JR)=>{"use strict";var f5=R().OperationBase,d5=gt().removeDocuments,h5=R().Aspect,m5=R().defineAspects,Ov=class Ov extends f5{constructor(t,r,n){super(n),this.collection=t,this.filter=r}execute(t){let r=this.collection,n=this.filter,i=this.options;i.single=!1,d5(r,n,i,(s,o)=>{if(t!=null){if(s&&t)return t(s);if(o==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,o.result);o.deletedCount=o.result.n,t(null,o)}})}};a(Ov,"DeleteManyOperation");var Cl=Ov;m5(Cl,[h5.EXPLAINABLE]);JR.exports=Cl});var ZR=y((coe,QR)=>{"use strict";var y5=R().OperationBase,g5=gt().removeDocuments,v5=R().Aspect,x5=R().defineAspects,Tv=class Tv extends y5{constructor(t,r,n){super(n),this.collection=t,this.filter=r}execute(t){let r=this.collection,n=this.filter,i=this.options;i.single=!0,g5(r,n,i,(s,o)=>{if(t!=null){if(s&&t)return t(s);if(o==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,o.result);o.deletedCount=o.result.n,t(null,o)}})}};a(Tv,"DeleteOneOperation");var _l=Tv;x5(_l,[v5.EXPLAINABLE]);QR.exports=_l});var tI=y((loe,eI)=>{"use strict";var Al=R().Aspect,S5=R().defineAspects,b5=br(),w5=b().decorateWithCollation,E5=b().decorateWithReadConcern,O5=U().maxWireVersion,T5=ua().MongoError,Cv=class Cv extends b5{constructor(t,r,n,i){super(t,i),this.collection=t,this.key=r,this.query=n}execute(t,r){let n=this.collection,i=this.key,s=this.query,o=this.options,c={distinct:n.collectionName,key:i,query:s};typeof o.maxTimeMS=="number"&&(c.maxTimeMS=o.maxTimeMS),E5(c,n,o);try{w5(c,n,o)}catch(l){return r(l,null)}if(this.explain&&O5(t)<4){r(new T5("server does not support explain on distinct"));return}super.executeCommand(t,c,(l,u)=>{if(l){r(l);return}r(null,this.options.full||this.explain?u:u.values)})}};a(Cv,"DistinctOperation");var Nl=Cv;S5(Nl,[Al.READ_OPERATION,Al.RETRYABLE,Al.EXECUTE_WITH_SELECTION,Al.EXPLAINABLE]);eI.exports=Nl});var or=y((foe,iI)=>{"use strict";var rI=R().Aspect,C5=R().OperationBase,nI=b().applyWriteConcern,_5=b().debugOptions,_v=b().handleCallback,A5=I().MongoError,Av=I().ReadPreference,N5=b().MongoDBNamespace,R5=Zn().extractCommand,I5=["authSource","w","wtimeout","j","native_parser","forceServerObjectId","serializeFunctions","raw","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","bufferMaxEntries","numberOfRetries","retryMiliSeconds","readPreference","pkFactory","parentDb","promiseLibrary","noListener"],Rv=class Rv extends C5{constructor(t,r,n,i){super(r),this.hasAspect(rI.WRITE_OPERATION)?(n!=null?nI(this.options,{db:t,coll:n},this.options):nI(this.options,{db:t},this.options),this.options.readPreference=Av.primary):n!=null?this.options.readPreference=Av.resolve(n,r):this.options.readPreference=Av.resolve(t,r),this.db=t,i!=null&&(this.command=i),n!=null&&(this.collection=n)}_buildCommand(){if(this.command!=null)return this.command}execute(t){let r=this.db,n=Object.assign({},this.options);if(r.serverConfig&&r.serverConfig.isDestroyed())return t(new A5("topology was destroyed"));let i;try{i=this._buildCommand()}catch(c){return t(c)}let s=n.dbName||n.authdb||r.databaseName;if(this.hasAspect(rI.WRITE_OPERATION)&&n.writeConcern&&(!n.session||!n.session.inTransaction())&&(i.writeConcern=n.writeConcern),r.s.logger.isDebug()){let c=R5(i);r.s.logger.debug(`executing command ${JSON.stringify(c.shouldRedact?`${c.name} details REDACTED`:i)} against ${s}.$cmd with options [${JSON.stringify(_5(I5,n))}]`)}let o=this.namespace!=null?this.namespace:new N5(s,"$cmd");r.s.topology.command(o,i,n,(c,l)=>{if(c)return _v(t,c);if(n.full)return _v(t,null,l);_v(t,null,l.result)})}};a(Rv,"CommandOperation");var Nv=Rv;iI.exports=Nv});var Rl=y((hoe,sI)=>{"use strict";var q5=R().Aspect,M5=or(),P5=R().defineAspects,Iv=b().handleCallback,Pv=class Pv extends M5{constructor(t,r){let n=Object.assign({},r,t.s.options);r.session&&(n.session=r.session),super(t,n)}execute(t){super.execute((r,n)=>{if(r)return Iv(t,r);if(n.ok)return Iv(t,null,!0);Iv(t,null,!1)})}};a(Pv,"DropOperation");var Ps=Pv;P5(Ps,q5.WRITE_OPERATION);var Bv=class Bv extends Ps{constructor(t,r,n){super(t,n),this.name=r,this.namespace=`${t.namespace}.${r}`}_buildCommand(){return{drop:this.name}}};a(Bv,"DropCollectionOperation");var qv=Bv,Dv=class Dv extends Ps{_buildCommand(){return{dropDatabase:1}}};a(Dv,"DropDatabaseOperation");var Mv=Dv;sI.exports={DropOperation:Ps,DropCollectionOperation:qv,DropDatabaseOperation:Mv}});var jv=y((yoe,aI)=>{"use strict";var B5=R().Aspect,D5=R().defineAspects,L5=or(),j5=b().applyWriteConcern,oI=b().handleCallback,Lv=class Lv extends L5{constructor(t,r,n){super(t.s.db,n,t),this.collection=t,this.indexName=r}_buildCommand(){let t=this.collection,r=this.indexName,n=this.options,i={dropIndexes:t.collectionName,index:r};return i=j5(i,{db:t.s.db,collection:t},n),i}execute(t){super.execute((r,n)=>{if(typeof t=="function"){if(r)return oI(t,r,null);oI(t,null,n)}})}};a(Lv,"DropIndexOperation");var Il=Lv;D5(Il,B5.WRITE_OPERATION);aI.exports=Il});var lI=y((voe,uI)=>{"use strict";var U5=R().Aspect,k5=R().defineAspects,F5=jv(),cI=b().handleCallback,Uv=class Uv extends F5{constructor(t,r){super(t,"*",r)}execute(t){super.execute(r=>{if(r)return cI(t,r,!1);cI(t,null,!0)})}};a(Uv,"DropIndexesOperation");var ql=Uv;k5(ql,U5.WRITE_OPERATION);uI.exports=ql});var fI=y((Soe,pI)=>{"use strict";var W5=Gn().MONGODB_ERROR_CODES,kv=R().Aspect,z5=R().defineAspects,$5=br(),H5=U().maxWireVersion,V5=bv(),Fv=class Fv extends $5{constructor(t,r){super(t,r),this.collection=t,this.collectionName=t.s.namespace.collection}execute(t,r){if(H5(t)<12)return this.executeLegacy(t,r);if(this.options.query)return new V5(this.collection,this.options.query,this.options).execute(t,r);let n=[{$collStats:{count:{}}},{$group:{_id:1,n:{$sum:"$count"}}}],i={aggregate:this.collectionName,pipeline:n,cursor:{}};typeof this.options.maxTimeMS=="number"&&(i.maxTimeMS=this.options.maxTimeMS),super.executeCommand(t,i,(s,o)=>{if(s&&s.code!==W5.NamespaceNotFound){r(s);return}r(void 0,o&&o.cursor&&o.cursor.firstBatch&&o.cursor.firstBatch[0].n||0)})}executeLegacy(t,r){let n={count:this.collectionName},i=this.options;i.query&&(n.query=i.query),i.hint&&(n.hint=i.hint),typeof i.maxTimeMS=="number"&&(n.maxTimeMS=i.maxTimeMS),typeof i.skip=="number"&&(n.skip=i.skip),typeof i.limit=="number"&&(n.limit=i.limit),super.executeCommand(t,n,(s,o)=>{if(s){r(s);return}r(null,o.n)})}};a(Fv,"EstimatedDocumentCountOperation");var Ml=Fv;z5(Ml,[kv.READ_OPERATION,kv.RETRYABLE,kv.EXECUTE_WITH_SELECTION]);pI.exports=Ml});var mI=y((woe,hI)=>{"use strict";var K5=R().OperationBase,Pl=R().Aspect,G5=R().defineAspects,dI=I().ReadPreference,Y5=U().maxWireVersion,J5=q().MongoError,Wv=class Wv extends K5{constructor(t,r,n,i){super(i),this.ns=r,this.cmd=n,this.readPreference=dI.resolve(t,this.options)}execute(t,r){if(this.server=t,this.readPreference=dI.resolve(this,this.options),typeof this.cmd.allowDiskUse<"u"&&Y5(t)<4){r(new J5("The `allowDiskUse` option is not supported on MongoDB < 3.2"));return}this.explain&&(this.options.explain=this.explain.verbosity);let n=this.cursorState||{};t.query(this.ns.toString(),this.cmd,n,this.options,r)}};a(Wv,"FindOperation");var Bl=Wv;G5(Bl,[Pl.READ_OPERATION,Pl.RETRYABLE,Pl.EXECUTE_WITH_SELECTION,Pl.EXPLAINABLE]);hI.exports=Bl});var vI=y((Ooe,gI)=>{"use strict";var yI=b().handleCallback,X5=R().OperationBase,Q5=b().toError,Z5=R().Aspect,eY=R().defineAspects,zv=class zv extends X5{constructor(t,r,n){super(n),this.collection=t,this.query=r}execute(t){let r=this.collection,n=this.query,i=this.options;try{r.find(n,i).limit(-1).batchSize(1).next((o,c)=>{if(o!=null)return yI(t,Q5(o),null);yI(t,null,c)})}catch(s){t(s)}}};a(zv,"FindOneOperation");var Dl=zv;eY(Dl,[Z5.EXPLAINABLE]);gI.exports=Dl});var va=y((Coe,wI)=>{"use strict";var tY=R().OperationBase,rY=b().applyRetryableWrites,nY=b().applyWriteConcern,iY=b().decorateWithCollation,sY=Ge().executeCommand,oY=b().formattedOrderClause,xI=b().handleCallback,aY=I().ReadPreference,SI=U().maxWireVersion,bI=ua().MongoError,cY=R().Aspect,uY=R().defineAspects,lY=b().decorateWithExplain,$v=class $v extends tY{constructor(t,r,n,i,s){super(s),this.collection=t,this.query=r,this.sort=n,this.doc=i}execute(t){let r=this.collection,n=this.query,i=oY(this.sort),s=this.doc,o=this.options,c={findAndModify:r.collectionName,query:n};i&&(c.sort=i),c.new=!!o.new,c.remove=!!o.remove,c.upsert=!!o.upsert;let l=o.projection||o.fields;l&&(c.fields=l),o.arrayFilters&&(c.arrayFilters=o.arrayFilters),s&&!o.remove&&(c.update=s),o.maxTimeMS&&(c.maxTimeMS=o.maxTimeMS),o.serializeFunctions=o.serializeFunctions||r.s.serializeFunctions,o.checkKeys=!1,o=rY(o,r.s.db),o=nY(o,{db:r.s.db,collection:r},o),o.writeConcern&&(c.writeConcern=o.writeConcern),o.bypassDocumentValidation===!0&&(c.bypassDocumentValidation=o.bypassDocumentValidation),o.readPreference=aY.primary;try{iY(c,r,o)}catch(u){return t(u,null)}if(o.hint){if(o.writeConcern&&o.writeConcern.w===0||SI(r.s.topology)<8){t(new bI("The current topology does not support a hint on findAndModify commands"));return}c.hint=o.hint}if(this.explain){if(SI(r.s.topology)<4){t(new bI("server does not support explain on findAndModify"));return}c=lY(c,this.explain)}sY(r.s.db,c,o,(u,p)=>u?xI(t,u,null):xI(t,null,p))}};a($v,"FindAndModifyOperation");var Ll=$v;uY(Ll,[cY.EXPLAINABLE]);wI.exports=Ll});var OI=y((Aoe,EI)=>{"use strict";var pY=va(),Vv=class Vv extends pY{constructor(t,r,n){let i=Object.assign({},n);if(i.fields=n.projection,i.remove=!0,r==null||typeof r!="object")throw new TypeError("Filter parameter must be an object");super(t,r,i.sort,null,i)}};a(Vv,"FindOneAndDeleteOperation");var Hv=Vv;EI.exports=Hv});var CI=y((Roe,TI)=>{"use strict";var fY=I().MongoError,dY=va(),hY=b().hasAtomicOperators,Gv=class Gv extends dY{constructor(t,r,n,i){if("returnDocument"in i&&"returnOriginal"in i)throw new fY("findOneAndReplace option returnOriginal is deprecated in favor of returnDocument and cannot be combined");let s=Object.assign({},i);if(s.fields=i.projection,s.update=!0,s.new=i.returnDocument==="after"||i.returnOriginal===!1,s.upsert=i.upsert===!0,r==null||typeof r!="object")throw new TypeError("Filter parameter must be an object");if(n==null||typeof n!="object")throw new TypeError("Replacement parameter must be an object");if(hY(n))throw new TypeError("Replacement document must not contain atomic operators");super(t,r,s.sort,n,s)}};a(Gv,"FindOneAndReplaceOperation");var Kv=Gv;TI.exports=Kv});var AI=y((qoe,_I)=>{"use strict";var mY=I().MongoError,yY=va(),gY=b().hasAtomicOperators,Jv=class Jv extends yY{constructor(t,r,n,i){if("returnDocument"in i&&"returnOriginal"in i)throw new mY("findOneAndUpdate option returnOriginal is deprecated in favor of returnDocument and cannot be combined");let s=Object.assign({},i);if(s.fields=i.projection,s.update=!0,s.new=i.returnDocument==="after"||i.returnOriginal===!1,s.upsert=i.upsert===!0,r==null||typeof r!="object")throw new TypeError("Filter parameter must be an object");if(n==null||typeof n!="object")throw new TypeError("Update parameter must be an object");if(!gY(n))throw new TypeError("Update document requires atomic operators");super(t,r,s.sort,n,s)}};a(Jv,"FindOneAndUpdateOperation");var Yv=Jv;_I.exports=Yv});var RI=y((Poe,NI)=>{"use strict";var vY=R().Aspect,xY=R().defineAspects,SY=R().OperationBase,bY=b().decorateCommand,wY=b().decorateWithReadConcern,EY=Ge().executeCommand,Xv=b().handleCallback,OY=I().ReadPreference,TY=b().toError,Qv=class Qv extends SY{constructor(t,r,n,i){super(i),this.collection=t,this.x=r,this.y=n}execute(t){let r=this.collection,n=this.x,i=this.y,s=this.options,o={geoSearch:r.collectionName,near:[n,i]};o=bY(o,s,["readPreference","session"]),s=Object.assign({},s),s.readPreference=OY.resolve(r,s),wY(o,r,s),EY(r.s.db,o,s,(c,l)=>{if(c)return Xv(t,c);(l.err||l.errmsg)&&Xv(t,TY(l)),Xv(t,null,l)})}};a(Qv,"GeoHaystackSearchOperation");var jl=Qv;xY(jl,vY.READ_OPERATION);NI.exports=jl});var qI=y((Doe,II)=>{"use strict";var CY=R().OperationBase,_Y=gt().indexInformation,ex=class ex extends CY{constructor(t,r){super(r),this.collection=t}execute(t){let r=this.collection,n=this.options;n=Object.assign({},{full:!0},n),_Y(r.s.db,r.collectionName,n,t)}};a(ex,"IndexesOperation");var Zv=ex;II.exports=Zv});var PI=y((joe,MI)=>{"use strict";var AY=R().OperationBase,Ul=b().handleCallback,NY=Ge().indexInformation,rx=class rx extends AY{constructor(t,r,n){super(n),this.collection=t,this.indexes=r}execute(t){let r=this.collection,n=this.indexes,i=this.options;NY(r.s.db,r.collectionName,i,(s,o)=>{if(s!=null)return Ul(t,s,null);if(!Array.isArray(n))return Ul(t,null,o[n]!=null);for(let c=0;c<n.length;c++)if(o[n[c]]==null)return Ul(t,null,!1);return Ul(t,null,!0)})}};a(rx,"IndexExistsOperation");var tx=rx;MI.exports=tx});var sx=y((koe,BI)=>{"use strict";var RY=R().OperationBase,IY=gt().indexInformation,ix=class ix extends RY{constructor(t,r,n){super(n),this.db=t,this.name=r}execute(t){let r=this.db,n=this.name,i=this.options;IY(r,n,i,t)}};a(ix,"IndexInformationOperation");var nx=ix;BI.exports=nx});var LI=y((Woe,DI)=>{"use strict";var qY=R().OperationBase,MY=vv(),PY=I().MongoError,BY=gt().prepareDocs,ax=class ax extends qY{constructor(t,r,n){super(n),this.collection=t,this.docs=r}execute(t){let r=this.collection,n=this.docs,i=this.options;if(!Array.isArray(n))return t(PY.create({message:"docs parameter must be an array of documents",driver:!0}));i.serializeFunctions=i.serializeFunctions||r.s.serializeFunctions,n=BY(r,n,i);let s=n.map(c=>({insertOne:{document:c}}));new MY(r,s,i).execute((c,l)=>{if(c)return t(c,null);t(null,DY(n,l))})}};a(ax,"InsertManyOperation");var ox=ax;function DY(e,t){let r={result:{ok:1,n:t.insertedCount},ops:e,insertedCount:t.insertedCount,insertedIds:t.insertedIds};return t.getLastOp()&&(r.result.opTime=t.getLastOp()),r}a(DY,"mapInsertManyResults");DI.exports=ox});var UI=y(($oe,jI)=>{"use strict";var LY=I().MongoError,jY=R().OperationBase,UY=gt().insertDocuments,ux=class ux extends jY{constructor(t,r,n){super(n),this.collection=t,this.doc=r}execute(t){let r=this.collection,n=this.doc,i=this.options;if(Array.isArray(n))return t(LY.create({message:"doc parameter must be an object",driver:!0}));UY(r,[n],i,(s,o)=>{if(t!=null){if(s&&t)return t(s);if(o==null)return t(null,{result:{ok:1}});o.insertedCount=o.result.n,o.insertedId=n._id,t&&t(null,o)}})}};a(ux,"InsertOneOperation");var cx=ux;jI.exports=cx});var dx=y((Voe,kI)=>{"use strict";var kY=R().OperationBase,lx=b().handleCallback,FY=I().MongoError,fx=class fx extends kY{constructor(t,r){super(r),this.collection=t}execute(t){let r=this.collection,n=this.options;r.s.db.listCollections({name:r.collectionName},n).toArray((i,s)=>{if(i)return lx(t,i);if(s.length===0)return lx(t,FY.create({message:`collection ${r.namespace} not found`,driver:!0}));lx(t,i,s[0].options||null)})}};a(fx,"OptionsOperation");var px=fx;kI.exports=px});var zI=y((Goe,WI)=>{"use strict";var WY=dx(),FI=b().handleCallback,mx=class mx extends WY{constructor(t,r){super(t,r)}execute(t){super.execute((r,n)=>{if(r)return FI(t,r);FI(t,null,!!(n&&n.capped))})}};a(mx,"IsCappedOperation");var hx=mx;WI.exports=hx});var HI=y((Joe,$I)=>{"use strict";var zY=br(),yx=R().Aspect,$Y=R().defineAspects,HY=U().maxWireVersion,VY=3,gx=class gx extends zY{constructor(t,r){super(t,r,{fullResponse:!0}),this.collectionNamespace=t.s.namespace}execute(t,r){if(HY(t)<VY){let s=this.collectionNamespace.withCollection("system.indexes").toString(),o=this.collectionNamespace.toString();t.query(s,{query:{ns:o}},{},this.options,r);return}let i=this.options.batchSize?{batchSize:this.options.batchSize}:{};super.executeCommand(t,{listIndexes:this.collectionNamespace.collection,cursor:i},r)}};a(gx,"ListIndexesOperation");var kl=gx;$Y(kl,[yx.READ_OPERATION,yx.RETRYABLE,yx.EXECUTE_WITH_SELECTION]);$I.exports=kl});var xx=y((Qoe,KI)=>{"use strict";var KY=R().Aspect,GY=or(),YY=R().defineAspects,JY=require("crypto"),VI=b().handleCallback,XY=b().toError,QY=b().emitWarning,vx=class vx extends GY{constructor(t,r,n,i){super(t,i),this.username=r,this.password=n}_buildCommand(){let t=this.db,r=this.username,n=this.password,i=this.options,s=[];Array.isArray(i.roles)&&(s=i.roles),typeof i.roles=="string"&&(s=[i.roles]),s.length===0&&QY("Creating a user without roles is deprecated in MongoDB >= 2.6"),(t.databaseName.toLowerCase()==="admin"||i.dbName==="admin")&&!Array.isArray(i.roles)?s=["root"]:Array.isArray(i.roles)||(s=["dbOwner"]);let o=t.s.topology.lastIsMaster().maxWireVersion>=7,c=n;if(!o){let u=JY.createHash("md5");u.update(r+":mongo:"+n),c=u.digest("hex")}let l={createUser:r,customData:i.customData||{},roles:s,digestPassword:o};return typeof n=="string"&&(l.pwd=c),l}execute(t){if(this.options.digestPassword!=null)return t(XY("The digestPassword option is not supported via add_user. Please use db.command('createUser', ...) instead for this option."));super.execute((n,i)=>n?VI(t,n,null):VI(t,n,i))}};a(vx,"AddUserOperation");var Fl=vx;YY(Fl,KY.WRITE_OPERATION);KI.exports=Fl});var JI=y((eae,YI)=>{"use strict";var ZY=R().OperationBase,GI=b().handleCallback,Sx;function e7(){return Sx||(Sx=Bs()),Sx}a(e7,"loadCollection");var wx=class wx extends ZY{constructor(t,r){super(r),this.db=t}execute(t){let r=this.db,n=this.options,i=e7();n=Object.assign({},n,{nameOnly:!0}),r.listCollections({},n).toArray((s,o)=>{if(s!=null)return GI(t,s,null);o=o.filter(c=>c.name.indexOf("$")===-1),GI(t,null,o.map(c=>new i(r,r.s.topology,r.databaseName,c.name,r.s.pkFactory,r.s.options)))})}};a(wx,"CollectionsOperation");var bx=wx;YI.exports=bx});var ZI=y((rae,QI)=>{"use strict";var t7=br(),r7=R().defineAspects,XI=R().Aspect,Ex=class Ex extends t7{constructor(t,r,n){super(t,n),this.command=r}execute(t,r){let n=this.command;this.executeCommand(t,n,r)}};a(Ex,"RunCommandOperation");var Wl=Ex;r7(Wl,[XI.EXECUTE_WITH_SELECTION,XI.NO_INHERIT_OPTIONS]);QI.exports=Wl});var tq=y((iae,eq)=>{"use strict";var n7=R().Aspect,i7=R().defineAspects,s7=or(),o7=b().applyWriteConcern,a7=$l().loadCollection,c7=I().MongoError,u7=I().ReadPreference,l7=new Set(["w","wtimeout","j","fsync","autoIndexId","strict","serializeFunctions","pkFactory","raw","readPreference","session","readConcern","writeConcern"]),Ox=class Ox extends s7{constructor(t,r,n){super(t,n),this.name=r}_buildCommand(){let t=this.name,r=this.options,n={create:t};for(let i in r)r[i]!=null&&typeof r[i]!="function"&&!l7.has(i)&&(n[i]=r[i]);return n}execute(t){let r=this.db,n=this.name,i=this.options,s=a7(),o=Object.assign({nameOnly:!0,strict:!1},i);o=o7(o,{db:r},o);function c(u){if(u)return t(u);try{t(null,new s(r,r.s.topology,r.databaseName,n,r.s.pkFactory,i))}catch(p){t(p)}}if(a(c,"done"),o.strict){r.listCollections({name:n},o).setReadPreference(u7.PRIMARY).toArray((u,p)=>{if(u)return t(u);if(p.length>0)return t(new c7(`Collection ${n} already exists. Currently in strict mode.`));super.execute(c)});return}super.execute(c)}};a(Ox,"CreateCollectionOperation");var zl=Ox;i7(zl,n7.WRITE_OPERATION);eq.exports=zl});var _x=y((oae,nq)=>{"use strict";var p7=R().OperationBase,rq=b().handleCallback,f7=I().MongoError,d7=b().MongoDBNamespace,Cx=class Cx extends p7{constructor(t,r,n){super(n),this.db=t,this.selector=r}execute(t){let r=this.db,n=this.selector,i=this.options,s=new d7("admin","$cmd");r.s.topology.command(s,n,i,(o,c)=>{if(r.serverConfig&&r.serverConfig.isDestroyed())return t(new f7("topology was destroyed"));if(o)return rq(t,o);rq(t,null,c.result)})}};a(Cx,"ExecuteDbAdminCommandOperation");var Tx=Cx;nq.exports=Tx});var sq=y((cae,iq)=>{"use strict";var h7=br(),Ax=R().Aspect,m7=R().defineAspects,y7=U().maxWireVersion,g7=sl(),v7=3;function x7(e){let t=`${e}.`;return{doc:r=>{let n=r.name.indexOf(t);return r.name&&n===0&&(r.name=r.name.substr(n+t.length)),r}}}a(x7,"listCollectionsTransforms");var Nx=class Nx extends h7{constructor(t,r,n){super(t,n,{fullResponse:!0}),this.db=t,this.filter=r,this.nameOnly=!!this.options.nameOnly,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize)}execute(t,r){if(y7(t)<v7){let i=this.filter,s=this.db.s.namespace.db;typeof i.name=="string"&&!new RegExp("^"+s+"\\.").test(i.name)&&(i=Object.assign({},i),i.name=this.db.s.namespace.withCollection(i.name).toString()),i==null&&(i.name=`/${s}/`),i.name?i={$and:[{name:i.name},{name:/^((?!\$).)*$/}]}:i={name:/^((?!\$).)*$/};let o=x7(s);t.query(`${s}.${g7.SYSTEM_NAMESPACE_COLLECTION}`,{query:i},{batchSize:this.batchSize||1e3},{},(c,l)=>{l&&l.message&&l.message.documents&&Array.isArray(l.message.documents)&&(l.message.documents=l.message.documents.map(o.doc)),r(c,l)});return}let n={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly};return super.executeCommand(t,n,r)}};a(Nx,"ListCollectionsOperation");var Hl=Nx;m7(Hl,[Ax.READ_OPERATION,Ax.RETRYABLE,Ax.EXECUTE_WITH_SELECTION]);iq.exports=Hl});var aq=y((lae,oq)=>{"use strict";var S7=or(),Ix=class Ix extends S7{constructor(t,r,n){super(t,n)}_buildCommand(){return{profile:-1}}execute(t){super.execute((r,n)=>{if(r==null&&n.ok===1){let i=n.was;return i===0?t(null,"off"):i===1?t(null,"slow_only"):i===2?t(null,"all"):t(new Error("Error: illegal profiling level value "+i),null)}else r!=null?t(r,null):t(new Error("Error with profile command"),null)})}};a(Ix,"ProfilingLevelOperation");var Rx=Ix;oq.exports=Rx});var Mx=y((fae,uq)=>{"use strict";var b7=R().Aspect,w7=or(),E7=R().defineAspects,cq=b().handleCallback,O7=_r(),qx=class qx extends w7{constructor(t,r,n){let i={},s=O7.fromOptions(n);s!=null&&(i.writeConcern=s),n.dbName&&(i.dbName=n.dbName),typeof n.maxTimeMS=="number"&&(i.maxTimeMS=n.maxTimeMS),super(t,i),this.username=r}_buildCommand(){return{dropUser:this.username}}execute(t){super.execute((r,n)=>{if(r)return cq(t,r,null);cq(t,r,!!n.ok)})}};a(qx,"RemoveUserOperation");var Vl=qx;E7(Vl,b7.WRITE_OPERATION);uq.exports=Vl});var Dx=y((hae,pq)=>{"use strict";var T7=R().OperationBase,C7=b().applyWriteConcern,_7=b().checkCollectionName,A7=Ge().executeDbAdminCommand,Kl=b().handleCallback,N7=$l().loadCollection,lq=b().toError,Bx=class Bx extends T7{constructor(t,r,n){super(n),this.collection=t,this.newName=r}execute(t){let r=this.collection,n=this.newName,i=this.options,s=N7();_7(n);let o=r.namespace,c=r.s.namespace.withCollection(n).toString(),l=typeof i.dropTarget=="boolean"?i.dropTarget:!1,u={renameCollection:o,to:c,dropTarget:l};C7(u,{db:r.s.db,collection:r},i),A7(r.s.db.admin().s.db,u,i,(p,d)=>{if(p)return Kl(t,p,null);if(d.errmsg)return Kl(t,lq(d),null);try{return Kl(t,null,new s(r.s.db,r.s.topology,r.s.namespace.db,n,r.s.pkFactory,r.s.options))}catch(f){return Kl(t,lq(f),null)}})}};a(Bx,"RenameOperation");var Px=Bx;pq.exports=Px});var dq=y((yae,fq)=>{"use strict";var R7=or(),I7=new Set(["off","slow_only","all"]),jx=class jx extends R7{constructor(t,r,n){let i=0;r==="off"?i=0:r==="slow_only"?i=1:r==="all"&&(i=2),super(t,n),this.level=r,this.profile=i}_buildCommand(){return{profile:this.profile}}execute(t){let r=this.level;if(!I7.has(r))return t(new Error("Error: illegal profiling level value "+r));super.execute((n,i)=>n==null&&i.ok===1?t(null,r):n!=null?t(n,null):t(new Error("Error with profile command"),null))}};a(jx,"SetProfilingLevelOperation");var Lx=jx;fq.exports=Lx});var mq=y((vae,hq)=>{"use strict";var q7=or(),kx=class kx extends q7{constructor(t,r,n){let i={validate:r},s=Object.keys(n);for(let o=0;o<s.length;o++)Object.prototype.hasOwnProperty.call(n,s[o])&&s[o]!=="session"&&(i[s[o]]=n[s[o]]);super(t.s.db,n,null,i),this.collectionName=r}execute(t){let r=this.collectionName;super.execute((n,i)=>n!=null?t(n,null):i.ok===0?t(new Error("Error with validate command"),null):i.result!=null&&i.result.constructor!==String?t(new Error("Error with validation data"),null):i.result!=null&&i.result.match(/exception|corrupt/)!=null?t(new Error("Error: invalid collection "+r),null):i.valid!=null&&!i.valid?t(new Error("Error: invalid collection "+r),null):t(null,i))}};a(kx,"ValidateCollectionOperation");var Ux=kx;hq.exports=Ux});var gq=y((Sae,yq)=>{"use strict";var M7=br(),Fx=R().Aspect,P7=R().defineAspects,B7=b().MongoDBNamespace,Wx=class Wx extends M7{constructor(t,r){super(t,r),this.ns=new B7("admin","$cmd")}execute(t,r){let n={listDatabases:1};this.options.nameOnly&&(n.nameOnly=Number(n.nameOnly)),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),super.executeCommand(t,n,r)}};a(Wx,"ListDatabasesOperation");var Gl=Wx;P7(Gl,[Fx.READ_OPERATION,Fx.RETRYABLE,Fx.EXECUTE_WITH_SELECTION]);yq.exports=Gl});var zx=y((wae,xq)=>{"use strict";var vq=b().applyWriteConcern,D7=xx(),Ds=_x(),L7=Mx(),j7=mq(),U7=gq(),wr=ps();function Ut(e,t,r){if(!(this instanceof Ut))return new Ut(e,t);this.s={db:e,topology:t,promiseLibrary:r}}a(Ut,"Admin");Ut.prototype.command=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift():{};let i=new Ds(this.s.db,e,t);return wr(this.s.db.s.topology,i,r)};Ut.prototype.buildInfo=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={buildinfo:1},n=new Ds(this.s.db,r,e);return wr(this.s.db.s.topology,n,t)};Ut.prototype.serverInfo=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={buildinfo:1},n=new Ds(this.s.db,r,e);return wr(this.s.db.s.topology,n,t)};Ut.prototype.serverStatus=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new Ds(this.s.db,{serverStatus:1},e);return wr(this.s.db.s.topology,r,t)};Ut.prototype.ping=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={ping:1},n=new Ds(this.s.db,r,e);return wr(this.s.db.s.topology,n,t)};Ut.prototype.addUser=function(e,t,r,n){let i=Array.prototype.slice.call(arguments,2);n=typeof i[i.length-1]=="function"?i.pop():void 0,typeof e=="string"&&t!=null&&typeof t=="object"&&(r=t,t=null),r=i.length?i.shift():{},r=Object.assign({},r),r=vq(r,{db:this.s.db}),r.dbName="admin";let s=new D7(this.s.db,e,t,r);return wr(this.s.db.s.topology,s,n)};Ut.prototype.removeUser=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift():{},t=Object.assign({},t),t=vq(t,{db:this.s.db}),t.dbName="admin";let i=new L7(this.s.db,e,t);return wr(this.s.db.s.topology,i,r)};Ut.prototype.validateCollection=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new j7(this,e,t);return wr(this.s.db.s.topology,n,r)};Ut.prototype.listDatabases=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},wr(this.s.db.s.topology,new U7(this.s.db,e),t)};Ut.prototype.replSetGetStatus=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new Ds(this.s.db,{replSetGetStatus:1},e);return wr(this.s.db.s.topology,r,t)};xq.exports=Ut});var Sa=y((Oae,Tq)=>{"use strict";var Eq=require("events").EventEmitter,k7=require("util").inherits,$x=b().getSingleProperty,F7=Ol(),Yl=b().handleCallback,W7=b().filterOptions,Sq=b().toError,Jl=I().ReadPreference,bq=I().MongoError,z7=I().ObjectID,$7=I().Logger,wq=Bs(),H7=b().conditionallyMergeWriteConcern,Hx=b().executeLegacyOperation,V7=Xl(),xa=require("util").deprecate,Oq=b().deprecateOptions,K7=b().MongoDBNamespace,Ls=sl(),G7=_r(),Vx=ni(),Y7=wl(),Ln=Ge().createListener,J7=Ge().ensureIndex,X7=Ge().evaluate,Q7=Ge().profilingInfo,Z7=Ge().validateDatabaseName,e9=fa(),t9=xx(),r9=JI(),n9=or(),i9=ZI(),s9=tq(),o9=Ev(),a9=Rl().DropCollectionOperation,c9=Rl().DropDatabaseOperation,u9=_x(),l9=sx(),p9=sq(),f9=aq(),d9=Mx(),h9=Dx(),m9=dq(),Rt=ps(),y9=["w","wtimeout","fsync","j","writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","bufferMaxEntries","authSource","ignoreUndefined","promiseLibrary","readConcern","retryMiliSeconds","numberOfRetries","parentDb","noListener","loggerLevel","logger","promoteBuffers","promoteLongs","promoteValues","bsonRegExp","compression","retryWrites"];function K(e,t,r){if(r=r||{},!(this instanceof K))return new K(e,t,r);Eq.call(this);let n=r.promiseLibrary||Promise;r=W7(r,y9),r.promiseLibrary=n,this.s={dbCache:{},children:[],topology:t,options:r,logger:$7("Db",r),bson:t?t.bson:null,readPreference:Jl.fromOptions(r),bufferMaxEntries:typeof r.bufferMaxEntries=="number"?r.bufferMaxEntries:-1,parentDb:r.parentDb||null,pkFactory:r.pkFactory||z7,nativeParser:r.nativeParser||r.native_parser,promiseLibrary:n,noListener:typeof r.noListener=="boolean"?r.noListener:!1,readConcern:Vx.fromOptions(r),writeConcern:G7.fromOptions(r),namespace:new K7(e)},Z7(e),$x(this,"serverConfig",this.s.topology),$x(this,"bufferMaxEntries",this.s.bufferMaxEntries),$x(this,"databaseName",this.s.namespace.db),!r.parentDb&&(this.s.noListener||(t.on("error",Ln(this,"error",this)),t.on("timeout",Ln(this,"timeout",this)),t.on("close",Ln(this,"close",this)),t.on("parseError",Ln(this,"parseError",this)),t.once("open",Ln(this,"open",this)),t.once("fullsetup",Ln(this,"fullsetup",this)),t.once("all",Ln(this,"all",this)),t.on("reconnect",Ln(this,"reconnect",this))))}a(K,"Db");k7(K,Eq);K.prototype.on=xa(function(){return K.super_.prototype.on.apply(this,arguments)},"Listening to events on the Db class has been deprecated and will be removed in the next major version.");K.prototype.once=xa(function(){return K.super_.prototype.once.apply(this,arguments)},"Listening to events on the Db class has been deprecated and will be removed in the next major version.");Object.defineProperty(K.prototype,"topology",{enumerable:!0,get:function(){return this.s.topology}});Object.defineProperty(K.prototype,"options",{enumerable:!0,get:function(){return this.s.options}});Object.defineProperty(K.prototype,"slaveOk",{enumerable:!0,get:function(){return this.s.options.readPreference!=null&&(this.s.options.readPreference!=="primary"||this.s.options.readPreference.mode!=="primary")}});Object.defineProperty(K.prototype,"readConcern",{enumerable:!0,get:function(){return this.s.readConcern}});Object.defineProperty(K.prototype,"readPreference",{enumerable:!0,get:function(){return this.s.readPreference==null?Jl.primary:this.s.readPreference}});Object.defineProperty(K.prototype,"writeConcern",{enumerable:!0,get:function(){return this.s.writeConcern}});Object.defineProperty(K.prototype,"namespace",{enumerable:!0,get:function(){return this.s.namespace.toString()}});K.prototype.command=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t);let n=new i9(this,e,t);return Rt(this.s.topology,n,r)};K.prototype.aggregate=function(e,t,r){typeof t=="function"&&(r=t,t={}),t==null&&r==null&&(t={});let n=new Y7(this.s.topology,new e9(this,e,t),t);if(typeof r=="function"){r(null,n);return}return n};K.prototype.admin=function(){let e=zx();return new e(this,this.s.topology,this.s.promiseLibrary)};var g9=["pkFactory","readPreference","serializeFunctions","strict","readConcern","ignoreUndefined","promoteValues","promoteBuffers","promoteLongs","bsonRegExp"];K.prototype.collection=Oq({name:"Db.collection",deprecatedOptions:["strict"],optionsIndex:1},function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},t=Object.assign({},t),t.promiseLibrary=this.s.promiseLibrary,t.readConcern=t.readConcern?new Vx(t.readConcern.level):this.readConcern,this.s.options.ignoreUndefined&&(t.ignoreUndefined=this.s.options.ignoreUndefined);for(let i of g9)!(i in t)&&this.s.options[i]!==void 0&&(t[i]=this.s.options[i]);if(t=H7(t,this.s.options),t==null||!t.strict)try{let i=new wq(this,this.s.topology,this.databaseName,e,this.s.pkFactory,t);return r&&r(null,i),i}catch(i){if(i instanceof bq&&r)return r(i);throw i}if(typeof r!="function")throw Sq(`A callback is required in strict mode. While getting collection ${e}`);if(this.serverConfig&&this.serverConfig.isDestroyed())return r(new bq("topology was destroyed"));let n=Object.assign({},t,{nameOnly:!0});this.listCollections({name:e},n).toArray((i,s)=>{if(i!=null)return Yl(r,i,null);if(s.length===0)return Yl(r,Sq(`Collection ${e} does not exist. Currently in strict mode.`),null);try{return Yl(r,null,new wq(this,this.s.topology,this.databaseName,e,this.s.pkFactory,t))}catch(o){return Yl(r,o,null)}})});K.prototype.createCollection=Oq({name:"Db.createCollection",deprecatedOptions:["autoIndexId","strict","w","wtimeout","j"],optionsIndex:1},function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},t.promiseLibrary=t.promiseLibrary||this.s.promiseLibrary,t.readConcern=t.readConcern?new Vx(t.readConcern.level):this.readConcern;let n=new s9(this,e,t);return Rt(this.s.topology,n,r)});K.prototype.stats=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={dbStats:!0};e.scale!=null&&(r.scale=e.scale),e.readPreference==null&&this.s.readPreference&&(e.readPreference=this.s.readPreference);let n=new n9(this,e,null,r);return Rt(this.s.topology,n,t)};K.prototype.listCollections=function(e,t){return e=e||{},t=t||{},new F7(this.s.topology,new p9(this,e,t),t)};K.prototype.eval=xa(function(e,t,r,n){let i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift():t,r=i.length?i.shift()||{}:{},Hx(this.s.topology,X7,[this,e,t,r,n])},"Db.eval is deprecated as of MongoDB version 3.2");K.prototype.renameCollection=function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=Object.assign({},r,{readPreference:Jl.PRIMARY}),r.new_collection=!0;let i=new h9(this.collection(e),t,r);return Rt(this.s.topology,i,n)};K.prototype.dropCollection=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new a9(this,e,t);return Rt(this.s.topology,n,r)};K.prototype.dropDatabase=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new c9(this,e);return Rt(this.s.topology,r,t)};K.prototype.collections=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new r9(this,e);return Rt(this.s.topology,r,t)};K.prototype.executeDbAdminCommand=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},t.readPreference=Jl.resolve(this,t);let n=new u9(this,e,t);return Rt(this.s.topology,n,r)};K.prototype.createIndex=function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r?Object.assign({},r):{};let i=new o9(this,e,t,r);return Rt(this.s.topology,i,n)};K.prototype.ensureIndex=xa(function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},Hx(this.s.topology,J7,[this,e,t,r,n])},"Db.ensureIndex is deprecated as of MongoDB version 3.0 / driver version 2.0");K.prototype.addChild=function(e){if(this.s.parentDb)return this.s.parentDb.addChild(e);this.s.children.push(e)};K.prototype.addUser=function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{},typeof e=="string"&&t!=null&&typeof t=="object"&&(r=t,t=null);let i=new t9(this,e,t,r);return Rt(this.s.topology,i,n)};K.prototype.removeUser=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new d9(this,e,t);return Rt(this.s.topology,n,r)};K.prototype.setProfilingLevel=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new m9(this,e,t);return Rt(this.s.topology,n,r)};K.prototype.profilingInfo=xa(function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},Hx(this.s.topology,Q7,[this,e,t])},"Db.profilingInfo is deprecated. Query the system.profile collection directly.");K.prototype.profilingLevel=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new f9(this,e);return Rt(this.s.topology,r,t)};K.prototype.indexInformation=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new l9(this,e,t);return Rt(this.s.topology,n,r)};K.prototype.unref=function(){this.s.topology.unref()};K.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new V7(this,e,t)};K.prototype.getLogger=function(){return this.s.logger};K.SYSTEM_NAMESPACE_COLLECTION=Ls.SYSTEM_NAMESPACE_COLLECTION;K.SYSTEM_INDEX_COLLECTION=Ls.SYSTEM_INDEX_COLLECTION;K.SYSTEM_PROFILE_COLLECTION=Ls.SYSTEM_PROFILE_COLLECTION;K.SYSTEM_USER_COLLECTION=Ls.SYSTEM_USER_COLLECTION;K.SYSTEM_COMMAND_COLLECTION=Ls.SYSTEM_COMMAND_COLLECTION;K.SYSTEM_JS_COLLECTION=Ls.SYSTEM_JS_COLLECTION;Tq.exports=K});var $l=y((Cae,Cq)=>{"use strict";var Kx,Gx,Yx;function v9(){return Kx||(Kx=Bs()),Kx}a(v9,"loadCollection");function x9(){return Gx||(Gx=Sr()),Gx}a(x9,"loadCursor");function S9(){return Yx||(Yx=Sa()),Yx}a(S9,"loadDb");Cq.exports={loadCollection:v9,loadCursor:x9,loadDb:S9}});var Nq=y((Aae,Aq)=>{"use strict";var b9=b().applyWriteConcern,w9=I().BSON.Code,E9=b().decorateWithCollation,O9=b().decorateWithReadConcern,T9=Ge().executeCommand,js=b().handleCallback,C9=b().isObject,_9=$l().loadDb,A9=R().OperationBase,N9=I().ReadPreference,R9=b().toError,I9=R().Aspect,q9=R().defineAspects,M9=b().decorateWithExplain,P9=U().maxWireVersion,B9=ua().MongoError,D9=["explain","readPreference","session","bypassDocumentValidation","w","wtimeout","j","writeConcern"],Jx=class Jx extends A9{constructor(t,r,n,i){super(i),this.collection=t,this.map=r,this.reduce=n}execute(t){let r=this.collection,n=this.map,i=this.reduce,s=this.options,o={mapReduce:r.collectionName,map:n,reduce:i};for(let c in s)c==="scope"?o[c]=_q(s[c]):D9.indexOf(c)===-1&&(o[c]=s[c]);s=Object.assign({},s),s.readPreference=N9.resolve(r,s),s.readPreference!==!1&&s.readPreference!=="primary"&&s.out&&s.out.inline!==1&&s.out!=="inline"?(s.readPreference="primary",b9(o,{db:r.s.db,collection:r},s)):O9(o,r,s),s.bypassDocumentValidation===!0&&(o.bypassDocumentValidation=s.bypassDocumentValidation);try{E9(o,r,s)}catch(c){return t(c,null)}if(this.explain){if(P9(r.s.topology)<9){t(new B9("server does not support explain on mapReduce"));return}o=M9(o,this.explain)}T9(r.s.db,o,s,(c,l)=>{if(c)return js(t,c);if(l.ok!==1||l.err||l.errmsg)return js(t,R9(l));if(this.explain)return t(void 0,l);let u={};if(l.timeMillis&&(u.processtime=l.timeMillis),l.counts&&(u.counts=l.counts),l.timing&&(u.timing=l.timing),l.results)return s.verbose==null||!s.verbose?js(t,null,l.results):js(t,null,{results:l.results,stats:u});let p=null;if(l.result!=null&&typeof l.result=="object"){let d=l.result,f=_9();p=new f(d.db,r.s.db.s.topology,r.s.db.s.options).collection(d.collection)}else p=r.s.db.collection(l.result);if(s.verbose==null||!s.verbose)return js(t,c,p);js(t,c,{collection:p,stats:u})})}};a(Jx,"MapReduceOperation");var Ql=Jx;function _q(e){if(!C9(e)||e._bsontype==="ObjectID")return e;let t=Object.keys(e),r,n={};for(let i=t.length-1;i>=0;i--)r=t[i],typeof e[r]=="function"?n[r]=new w9(String(e[r])):n[r]=_q(e[r]);return n}a(_q,"processScope");q9(Ql,[I9.EXPLAINABLE]);Aq.exports=Ql});var Iq=y((Rae,Rq)=>{"use strict";var L9=R().Aspect,j9=R().defineAspects,U9=br(),k9=Qe().serverType,F9=Qe().ServerType,W9=I().MongoError,Xx=class Xx extends U9{constructor(t,r){super(t,r),this.collectionName=t.collectionName}execute(t,r){if(k9(t)!==F9.Standalone){r(new W9("reIndex can only be executed on standalone servers."));return}super.executeCommand(t,{reIndex:this.collectionName},(n,i)=>{if(n){r(n);return}r(null,!!i.ok)})}};a(Xx,"ReIndexOperation");var Zl=Xx;j9(Zl,[L9.EXECUTE_WITH_SELECTION]);Rq.exports=Zl});var Mq=y((qae,qq)=>{"use strict";var z9=R().OperationBase,$9=gt().updateDocuments,H9=b().hasAtomicOperators,Zx=class Zx extends z9{constructor(t,r,n,i){if(super(i),H9(n))throw new TypeError("Replacement document must not contain atomic operators");this.collection=t,this.filter=r,this.replacement=n}execute(t){let r=this.collection,n=this.filter,i=this.replacement,s=this.options;s.multi=!1,$9(r,n,i,s,(o,c)=>V9(o,c,i,t))}};a(Zx,"ReplaceOneOperation");var Qx=Zx;function V9(e,t,r,n){if(n!=null){if(e&&n)return n(e);if(t==null)return n(null,{result:{ok:1}});t.modifiedCount=t.result.nModified!=null?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,t.ops=[r],n&&n(null,t)}}a(V9,"replaceCallback");qq.exports=Qx});var Bq=y((Pae,Pq)=>{"use strict";var K9=R().Aspect,G9=or(),Y9=R().defineAspects,eS=class eS extends G9{constructor(t,r){super(t.s.db,r,t)}_buildCommand(){let t=this.collection,r=this.options,n={collStats:t.collectionName};return r.scale!=null&&(n.scale=r.scale),n}};a(eS,"StatsOperation");var ep=eS;Y9(ep,K9.READ_OPERATION);Pq.exports=ep});var Lq=y((Dae,Dq)=>{"use strict";var J9=R().OperationBase,X9=gt().updateDocuments,Q9=b().hasAtomicOperators,Z9=R().Aspect,eJ=R().defineAspects,tS=class tS extends J9{constructor(t,r,n,i){if(super(i),!Q9(n))throw new TypeError("Update document requires atomic operators");this.collection=t,this.filter=r,this.update=n}execute(t){let r=this.collection,n=this.filter,i=this.update,s=this.options;s.multi=!0,X9(r,n,i,s,(o,c)=>{if(t!=null){if(o)return t(o);if(c==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,c.result);c.modifiedCount=c.result.nModified!=null?c.result.nModified:c.result.n,c.upsertedId=Array.isArray(c.result.upserted)&&c.result.upserted.length>0?c.result.upserted[0]:null,c.upsertedCount=Array.isArray(c.result.upserted)&&c.result.upserted.length?c.result.upserted.length:0,c.matchedCount=Array.isArray(c.result.upserted)&&c.result.upserted.length>0?0:c.result.n,t(null,c)}})}};a(tS,"UpdateManyOperation");var tp=tS;eJ(tp,[Z9.EXPLAINABLE]);Dq.exports=tp});var Uq=y((jae,jq)=>{"use strict";var tJ=R().OperationBase,rJ=gt().updateDocuments,nJ=b().hasAtomicOperators,iJ=R().Aspect,sJ=R().defineAspects,rS=class rS extends tJ{constructor(t,r,n,i){if(super(i),!nJ(n))throw new TypeError("Update document requires atomic operators");this.collection=t,this.filter=r,this.update=n}execute(t){let r=this.collection,n=this.filter,i=this.update,s=this.options;s.multi=!1,rJ(r,n,i,s,(o,c)=>{if(t!=null){if(o)return t(o);if(c==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,c.result);c.modifiedCount=c.result.nModified!=null?c.result.nModified:c.result.n,c.upsertedId=Array.isArray(c.result.upserted)&&c.result.upserted.length>0?c.result.upserted[0]:null,c.upsertedCount=Array.isArray(c.result.upserted)&&c.result.upserted.length?c.result.upserted.length:0,c.matchedCount=Array.isArray(c.result.upserted)&&c.result.upserted.length>0?0:c.result.n,t(null,c)}})}};a(rS,"UpdateOneOperation");var rp=rS;sJ(rp,[iJ.EXPLAINABLE]);jq.exports=rp});var Bs=y((kae,Gq)=>{"use strict";var kt=require("util").deprecate,np=b().deprecateOptions,kq=b().emitWarningOnce,oJ=b().checkCollectionName,aJ=I().BSON.ObjectID,Fq=I().MongoError,Wq=b().normalizeHintField,cJ=b().decorateCommand,uJ=b().decorateWithCollation,lJ=b().decorateWithReadConcern,pJ=b().formattedOrderClause,Us=I().ReadPreference,fJ=DR(),dJ=kR(),hJ=Xl(),ks=b().executeLegacyOperation,mJ=_r(),yJ=ni(),gJ=b().MongoDBNamespace,vJ=wl(),xJ=Ol(),SJ=As().ensureIndex,bJ=As().group,wJ=As().parallelCollectionScan,EJ=gt().removeDocuments,OJ=As().save,TJ=gt().updateDocuments,CJ=fa(),_J=vv(),AJ=bv(),zq=Ev(),NJ=XR(),RJ=ZR(),IJ=tI(),qJ=Rl().DropCollectionOperation,MJ=jv(),PJ=lI(),$q=fI(),BJ=mI(),DJ=vI(),Hq=va(),LJ=OI(),jJ=CI(),UJ=AI(),kJ=RI(),FJ=qI(),WJ=PI(),zJ=sx(),$J=LI(),HJ=UI(),VJ=zI(),KJ=HI(),GJ=Nq(),YJ=dx(),JJ=Dx(),XJ=Iq(),QJ=Mq(),ZJ=Bq(),eX=Lq(),tX=Uq(),oe=ps(),rX=["ignoreUndefined"];function j(e,t,r,n,i,s){oJ(n);let o=null,c=s==null||s.slaveOk==null?e.slaveOk:s.slaveOk,l=s==null||s.serializeFunctions==null?e.s.options.serializeFunctions:s.serializeFunctions,u=s==null||s.raw==null?e.s.options.raw:s.raw,p=s==null||s.promoteLongs==null?e.s.options.promoteLongs:s.promoteLongs,d=s==null||s.promoteValues==null?e.s.options.promoteValues:s.promoteValues,f=s==null||s.promoteBuffers==null?e.s.options.promoteBuffers:s.promoteBuffers,h=s==null||s.bsonRegExp==null?e.s.options.bsonRegExp:s.bsonRegExp,m=null,v=new gJ(r,n),x=s.promiseLibrary||Promise;i=i??aJ,this.s={pkFactory:i,db:e,topology:t,options:s,namespace:v,readPreference:Us.fromOptions(s),slaveOk:c,serializeFunctions:l,raw:u,promoteLongs:p,promoteValues:d,promoteBuffers:f,bsonRegExp:h,internalHint:o,collectionHint:m,promiseLibrary:x,readConcern:yJ.fromOptions(s),writeConcern:mJ.fromOptions(s)}}a(j,"Collection");Object.defineProperty(j.prototype,"dbName",{enumerable:!0,get:function(){return this.s.namespace.db}});Object.defineProperty(j.prototype,"collectionName",{enumerable:!0,get:function(){return this.s.namespace.collection}});Object.defineProperty(j.prototype,"namespace",{enumerable:!0,get:function(){return this.s.namespace.toString()}});Object.defineProperty(j.prototype,"readConcern",{enumerable:!0,get:function(){return this.s.readConcern==null?this.s.db.readConcern:this.s.readConcern}});Object.defineProperty(j.prototype,"readPreference",{enumerable:!0,get:function(){return this.s.readPreference==null?this.s.db.readPreference:this.s.readPreference}});Object.defineProperty(j.prototype,"writeConcern",{enumerable:!0,get:function(){return this.s.writeConcern==null?this.s.db.writeConcern:this.s.writeConcern}});Object.defineProperty(j.prototype,"hint",{enumerable:!0,get:function(){return this.s.collectionHint},set:function(e){this.s.collectionHint=Wq(e)}});var Vq=["maxScan","fields","snapshot","oplogReplay"];j.prototype.find=np({name:"collection.find",deprecatedOptions:Vq,optionsIndex:1},function(e,t,r){typeof r=="object"&&kq("Third parameter to `find()` must be a callback or undefined");let n=e;typeof r!="function"&&(typeof t=="function"?(r=t,t=void 0):t==null&&(r=typeof n=="function"?n:void 0,n=typeof n=="object"?n:void 0)),n=n??{};let i=n;if(Buffer.isBuffer(i)){let u=i[0]|i[1]<<8|i[2]<<16|i[3]<<24;if(u!==i.length){let p=new Error("query selector raw message size does not match message header size ["+i.length+"] != ["+u+"]");throw p.name="MongoError",p}}n!=null&&n._bsontype==="ObjectID"&&(n={_id:n}),t||(t={});let s=t.projection||t.fields;s&&!Buffer.isBuffer(s)&&Array.isArray(s)&&(s=s.length?s.reduce((u,p)=>(u[p]=1,u),{}):{_id:1});let o=Object.assign({},t);for(let u in this.s.options)rX.indexOf(u)!==-1&&(o[u]=this.s.options[u]);if(o.skip=t.skip?t.skip:0,o.limit=t.limit?t.limit:0,o.raw=typeof t.raw=="boolean"?t.raw:this.s.raw,o.hint=t.hint!=null?Wq(t.hint):this.s.collectionHint,o.timeout=typeof t.timeout>"u"?void 0:t.timeout,o.slaveOk=t.slaveOk!=null?t.slaveOk:this.s.db.slaveOk,o.readPreference=Us.resolve(this,o),o.readPreference!=null&&(o.readPreference!=="primary"||o.readPreference.mode!=="primary")&&(o.slaveOk=!0),n!=null&&typeof n!="object")throw Fq.create({message:"query selector must be an object",driver:!0});let c={find:this.s.namespace.toString(),limit:o.limit,skip:o.skip,query:n};typeof t.allowDiskUse=="boolean"&&(c.allowDiskUse=t.allowDiskUse),typeof o.awaitdata=="boolean"&&(o.awaitData=o.awaitdata),typeof o.timeout=="boolean"&&(o.noCursorTimeout=!o.timeout),cJ(c,o,["session","collation"]),s&&(c.fields=s),o.db=this.s.db,o.promiseLibrary=this.s.promiseLibrary,o.raw==null&&typeof this.s.raw=="boolean"&&(o.raw=this.s.raw),o.promoteLongs==null&&typeof this.s.promoteLongs=="boolean"&&(o.promoteLongs=this.s.promoteLongs),o.promoteValues==null&&typeof this.s.promoteValues=="boolean"&&(o.promoteValues=this.s.promoteValues),o.promoteBuffers==null&&typeof this.s.promoteBuffers=="boolean"&&(o.promoteBuffers=this.s.promoteBuffers),o.bsonRegExp==null&&typeof this.s.bsonRegExp=="boolean"&&(o.bsonRegExp=this.s.bsonRegExp),c.sort&&(c.sort=pJ(c.sort)),lJ(c,this,t);try{uJ(c,this,t)}catch(u){if(typeof r=="function")return r(u,null);throw u}let l=this.s.topology.cursor(new BJ(this,this.s.namespace,c,o),o);if(typeof r=="function"){r(null,l);return}return l});j.prototype.insertOne=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined);let n=new HJ(this,e,t);return oe(this.s.topology,n,r)};j.prototype.insertMany=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t?Object.assign({},t):{ordered:!0};let n=new $J(this,e,t);return oe(this.s.topology,n,r)};j.prototype.bulkWrite=function(e,t,r){if(typeof t=="function"&&(r=t,t={}),t=t||{ordered:!0},!Array.isArray(e))throw Fq.create({message:"operations must be an array of documents",driver:!0});let n=new _J(this,e,t);return oe(this.s.topology,n,r)};j.prototype.insert=kt(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{ordered:!1},e=Array.isArray(e)?e:[e],t.keepGoing===!0&&(t.ordered=!1),this.insertMany(e,t,r)},"collection.insert is deprecated. Use insertOne, insertMany or bulkWrite instead.");j.prototype.updateOne=function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=Object.assign({},r),this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),oe(this.s.topology,new tX(this,e,t,r),n)};j.prototype.replaceOne=function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=Object.assign({},r),this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),oe(this.s.topology,new QJ(this,e,t,r),n)};j.prototype.updateMany=function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=Object.assign({},r),this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),oe(this.s.topology,new eX(this,e,t,r),n)};j.prototype.update=kt(function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),ks(this.s.topology,TJ,[this,e,t,r,n])},"collection.update is deprecated. Use updateOne, updateMany, or bulkWrite instead.");j.prototype.deleteOne=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t),this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined);let n=new RJ(this,e,t);return oe(this.s.topology,n,r)};j.prototype.removeOne=j.prototype.deleteOne;j.prototype.deleteMany=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t),this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined);let n=new NJ(this,e,t);return oe(this.s.topology,n,r)};j.prototype.removeMany=j.prototype.deleteMany;j.prototype.remove=kt(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined),ks(this.s.topology,EJ,[this,e,t,r])},"collection.remove is deprecated. Use deleteOne, deleteMany, or bulkWrite instead.");j.prototype.save=kt(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined),ks(this.s.topology,OJ,[this,e,t,r])},"collection.save is deprecated. Use insertOne, insertMany, updateOne, or updateMany instead.");j.prototype.findOne=np({name:"collection.find",deprecatedOptions:Vq,optionsIndex:1},function(e,t,r){typeof r=="object"&&kq("Third parameter to `findOne()` must be a callback or undefined"),typeof e=="function"&&(r=e,e={},t={}),typeof t=="function"&&(r=t,t={}),e=e||{},t=t||{};let n=new DJ(this,e,t);return oe(this.s.topology,n,r)});j.prototype.rename=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t,{readPreference:Us.PRIMARY});let n=new JJ(this,e,t);return oe(this.s.topology,n,r)};j.prototype.drop=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new qJ(this.s.db,this.collectionName,e);return oe(this.s.topology,r,t)};j.prototype.options=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new YJ(this,e);return oe(this.s.topology,r,t)};j.prototype.isCapped=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new VJ(this,e);return oe(this.s.topology,r,t)};j.prototype.createIndex=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new zq(this,this.collectionName,e,t);return oe(this.s.topology,n,r)};j.prototype.createIndexes=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t?Object.assign({},t):{},typeof t.maxTimeMS!="number"&&delete t.maxTimeMS;let n=new zq(this,this.collectionName,e,t);return oe(this.s.topology,n,r)};j.prototype.dropIndex=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift()||{}:{},t.readPreference=Us.PRIMARY;let i=new MJ(this,e,t);return oe(this.s.topology,i,r)};j.prototype.dropIndexes=function(e,t){typeof e=="function"&&(t=e,e={}),e=e?Object.assign({},e):{},typeof e.maxTimeMS!="number"&&delete e.maxTimeMS;let r=new PJ(this,e);return oe(this.s.topology,r,t)};j.prototype.dropAllIndexes=kt(j.prototype.dropIndexes,"collection.dropAllIndexes is deprecated. Use dropIndexes instead.");j.prototype.reIndex=kt(function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new XJ(this,e);return oe(this.s.topology,r,t)},"collection.reIndex is deprecated. Use db.command instead.");j.prototype.listIndexes=function(e){return new xJ(this.s.topology,new KJ(this,e),e)};j.prototype.ensureIndex=kt(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},ks(this.s.topology,SJ,[this,e,t,r])},"collection.ensureIndex is deprecated. Use createIndexes instead.");j.prototype.indexExists=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new WJ(this,e,t);return oe(this.s.topology,n,r)};j.prototype.indexInformation=function(e,t){let r=Array.prototype.slice.call(arguments,0);t=typeof r[r.length-1]=="function"?r.pop():void 0,e=r.length?r.shift()||{}:{};let n=new zJ(this.s.db,this.collectionName,e);return oe(this.s.topology,n,t)};j.prototype.count=kt(function(e,t,r){let n=Array.prototype.slice.call(arguments,0);return r=typeof n[n.length-1]=="function"?n.pop():void 0,e=n.length?n.shift()||{}:{},t=n.length?n.shift()||{}:{},typeof t=="function"&&(r=t,t={}),t=t||{},oe(this.s.topology,new $q(this,Object.assign({query:e},t)),r)},"collection.count is deprecated, and will be removed in a future version. Use Collection.countDocuments or Collection.estimatedDocumentCount instead");j.prototype.estimatedDocumentCount=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new $q(this,e);return oe(this.s.topology,r,t)};j.prototype.countDocuments=function(e,t,r){let n=Array.prototype.slice.call(arguments,0);r=typeof n[n.length-1]=="function"?n.pop():void 0,e=n.length?n.shift()||{}:{},t=n.length?n.shift()||{}:{};let i=new AJ(this,e,t);return oe(this.s.topology,i,r)};j.prototype.distinct=function(e,t,r,n){let i=Array.prototype.slice.call(arguments,1);n=typeof i[i.length-1]=="function"?i.pop():void 0;let s=i.length?i.shift()||{}:{},o=i.length?i.shift()||{}:{},c=new IJ(this,e,s,o);return oe(this.s.topology,c,n)};j.prototype.indexes=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new FJ(this,e);return oe(this.s.topology,r,t)};j.prototype.stats=function(e,t){let r=Array.prototype.slice.call(arguments,0);t=typeof r[r.length-1]=="function"?r.pop():void 0,e=r.length?r.shift()||{}:{};let n=new ZJ(this,e);return oe(this.s.topology,n,t)};j.prototype.findOneAndDelete=function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined),oe(this.s.topology,new LJ(this,e,t),r)};j.prototype.findOneAndReplace=np({name:"collection.findOneAndReplace",deprecatedOptions:["returnOriginal"],optionsIndex:2},function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),oe(this.s.topology,new jJ(this,e,t,r),n)});j.prototype.findOneAndUpdate=np({name:"collection.findOneAndUpdate",deprecatedOptions:["returnOriginal"],optionsIndex:2},function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),oe(this.s.topology,new UJ(this,e,t,r),n)});j.prototype.findAndModify=kt(Kq,"collection.findAndModify is deprecated. Use findOneAndUpdate, findOneAndReplace or findOneAndDelete instead.");j.prototype._findAndModify=Kq;function Kq(e,t,r,n,i){let s=Array.prototype.slice.call(arguments,1);return i=typeof s[s.length-1]=="function"?s.pop():void 0,t=s.length?s.shift()||[]:[],r=s.length?s.shift():null,n=s.length?s.shift()||{}:{},n=Object.assign({},n),n.readPreference=Us.PRIMARY,oe(this.s.topology,new Hq(this,e,t,r,n),i)}a(Kq,"_findAndModify");j.prototype.findAndRemove=kt(function(e,t,r,n){let i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift()||[]:[],r=i.length?i.shift()||{}:{},r.remove=!0,oe(this.s.topology,new Hq(this,e,t,null,r),n)},"collection.findAndRemove is deprecated. Use findOneAndDelete instead.");j.prototype.aggregate=function(e,t,r){if(Array.isArray(e))typeof t=="function"&&(r=t,t={}),t==null&&r==null&&(t={});else{let i=Array.prototype.slice.call(arguments,0);r=i.pop();let s=i[i.length-1];t=s&&(s.readPreference||s.explain||s.cursor||s.out||s.maxTimeMS||s.hint||s.allowDiskUse)?i.pop():{},e=i}let n=new vJ(this.s.topology,new CJ(this,e,t),t);if(typeof r=="function"){r(null,n);return}return n};j.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new hJ(this,e,t)};j.prototype.parallelCollectionScan=kt(function(e,t){return typeof e=="function"&&(t=e,e={numCursors:1}),e.numCursors=e.numCursors||1,e.batchSize=e.batchSize||1e3,e=Object.assign({},e),e.readPreference=Us.resolve(this,e),e.promiseLibrary=this.s.promiseLibrary,e.session&&(e.session=void 0),ks(this.s.topology,wJ,[this,e,t],{skipSessions:!0})},"parallelCollectionScan is deprecated in MongoDB v4.1");j.prototype.geoHaystackSearch=kt(function(e,t,r,n){let i=Array.prototype.slice.call(arguments,2);n=typeof i[i.length-1]=="function"?i.pop():void 0,r=i.length?i.shift()||{}:{};let s=new kJ(this,e,t,r);return oe(this.s.topology,s,n)},"geoHaystackSearch is deprecated, and will be removed in a future version.");j.prototype.group=kt(function(e,t,r,n,i,s,o,c){let l=Array.prototype.slice.call(arguments,3);return c=typeof l[l.length-1]=="function"?l.pop():void 0,n=l.length?l.shift():null,i=l.length?l.shift():null,s=l.length?l.shift():null,o=l.length?l.shift()||{}:{},typeof i!="function"&&(s=i,i=null),!Array.isArray(e)&&e instanceof Object&&typeof e!="function"&&e._bsontype!=="Code"&&(e=Object.keys(e)),typeof n=="function"&&(n=n.toString()),typeof i=="function"&&(i=i.toString()),s=s??!0,ks(this.s.topology,bJ,[this,e,t,r,n,i,s,o,c])},"MongoDB 3.6 or higher no longer supports the group command. We recommend rewriting using the aggregation framework.");j.prototype.mapReduce=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={}),r.out==null)throw new Error("the out option parameter must be defined, see mongodb docs for possible values");typeof e=="function"&&(e=e.toString()),typeof t=="function"&&(t=t.toString()),typeof r.finalize=="function"&&(r.finalize=r.finalize.toString());let i=new GJ(this,e,t,r);return oe(this.s.topology,i,n)};j.prototype.initializeUnorderedBulkOp=function(e){return e=e||{},e.ignoreUndefined==null&&(e.ignoreUndefined=this.s.options.ignoreUndefined),e.promiseLibrary=this.s.promiseLibrary,fJ(this.s.topology,this,e)};j.prototype.initializeOrderedBulkOp=function(e){return e=e||{},e.ignoreUndefined==null&&(e.ignoreUndefined=this.s.options.ignoreUndefined),e.promiseLibrary=this.s.promiseLibrary,dJ(this.s.topology,this,e)};j.prototype.getLogger=function(){return this.s.db.s.logger};Gq.exports=j});var Xl=y((Wae,iM)=>{"use strict";var nX=Ru(),iX=require("events"),sX=ua().isResumableError,wa=I().MongoError,oX=Sr(),aX=U().relayEvents,iS=U().maxWireVersion,nS=b().maybePromise,Yq=b().now,cX=b().calculateDurationInMs,uX=fa(),ba=Symbol("resumeQueue"),Zq=["resumeAfter","startAfter","startAtOperationTime","fullDocument"],eM=["batchSize","maxAwaitTimeMS","collation","readPreference"].concat(Zq),ip={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},cS=class cS extends iX{constructor(t,r,n){super();let i=Bs(),s=Sa(),o=Fs();if(this.pipeline=r||[],this.options=n||{},this.parent=t,this.namespace=t.s.namespace,t instanceof i)this.type=ip.COLLECTION,this.topology=t.s.db.serverConfig;else if(t instanceof s)this.type=ip.DATABASE,this.topology=t.serverConfig;else if(t instanceof o)this.type=ip.CLUSTER,this.topology=t.topology;else throw new TypeError("parent provided to ChangeStream constructor is not an instance of Collection, Db, or MongoClient");this.promiseLibrary=t.s.promiseLibrary,!this.options.readPreference&&t.s.readPreference&&(this.options.readPreference=t.s.readPreference),this[ba]=new nX,this.cursor=tM(this,n),this.closed=!1,this.on("newListener",c=>{c==="change"&&this.cursor&&this.listenerCount("change")===0&&this.cursor.on("data",l=>aS(this,l))}),this.on("removeListener",c=>{c==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursor.removeAllListeners("data")})}get resumeToken(){return this.cursor.resumeToken}hasNext(t){return nS(this.parent,t,r=>{Xq(this,(n,i)=>{if(n)return r(n);i.hasNext(r)})})}next(t){return nS(this.parent,t,r=>{Xq(this,(n,i)=>{if(n)return r(n);i.next((s,o)=>{if(s){this[ba].push(()=>this.next(r)),nM(this,s,r);return}aS(this,o,r)})})})}isClosed(){return this.closed||this.cursor&&this.cursor.isClosed()}close(t){return nS(this.parent,t,r=>{if(this.closed||(this.closed=!0,!this.cursor))return r();let n=this.cursor;return n.close(i=>(["data","close","end","error"].forEach(s=>n.removeAllListeners(s)),this.cursor=void 0,r(i)))})}pipe(t,r){return this.pipeDestinations||(this.pipeDestinations=[]),this.pipeDestinations.push(t),this.cursor.pipe(t,r)}unpipe(t){return this.pipeDestinations&&this.pipeDestinations.indexOf(t)>-1&&this.pipeDestinations.splice(this.pipeDestinations.indexOf(t),1),this.cursor.unpipe(t)}stream(t){return this.streamOptions=t,this.cursor.stream(t)}pause(){return this.cursor.pause()}resume(){return this.cursor.resume()}};a(cS,"ChangeStream");var sS=cS,uS=class uS extends oX{constructor(t,r,n){super(t,r,n),n=n||{},this._resumeToken=null,this.startAtOperationTime=n.startAtOperationTime,n.startAfter?this.resumeToken=n.startAfter:n.resumeAfter&&(this.resumeToken=n.resumeAfter)}set resumeToken(t){this._resumeToken=t,this.emit("resumeTokenChanged",t)}get resumeToken(){return this._resumeToken}get resumeOptions(){let t={};for(let r of eM)this.options[r]&&(t[r]=this.options[r]);if(this.resumeToken||this.startAtOperationTime)if(["resumeAfter","startAfter","startAtOperationTime"].forEach(r=>delete t[r]),this.resumeToken){let r=this.options.startAfter&&!this.hasReceived?"startAfter":"resumeAfter";t[r]=this.resumeToken}else this.startAtOperationTime&&iS(this.server)>=7&&(t.startAtOperationTime=this.startAtOperationTime);return t}cacheResumeToken(t){this.bufferedCount()===0&&this.cursorState.postBatchResumeToken?this.resumeToken=this.cursorState.postBatchResumeToken:this.resumeToken=t,this.hasReceived=!0}_processBatch(t,r){let n=r.cursor;n.postBatchResumeToken&&(this.cursorState.postBatchResumeToken=n.postBatchResumeToken,n[t].length===0&&(this.resumeToken=n.postBatchResumeToken))}_initializeCursor(t){super._initializeCursor((r,n)=>{if(r||n==null){t(r,n);return}let i=n.documents[0];this.startAtOperationTime==null&&this.resumeAfter==null&&this.startAfter==null&&iS(this.server)>=7&&(this.startAtOperationTime=i.operationTime),this._processBatch("firstBatch",i),this.emit("init",n),this.emit("response"),t(r,n)})}_getMore(t){super._getMore((r,n)=>{if(r){t(r);return}this._processBatch("nextBatch",n),this.emit("more",n),this.emit("response"),t(r,n)})}};a(uS,"ChangeStreamCursor");var oS=uS;function tM(e,t){let r={fullDocument:t.fullDocument||"default"};Jq(r,t,Zq),e.type===ip.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r}].concat(e.pipeline),i=Jq({},t,eM),s=new oS(e.topology,new uX(e.parent,n,t),i);if(aX(s,e,["resumeTokenChanged","end","close"]),e.listenerCount("change")>0&&s.on("data",function(o){aS(e,o)}),s.on("error",function(o){nM(e,o)}),e.pipeDestinations){let o=s.stream(e.streamOptions);for(let c of e.pipeDestinations)o.pipe(c)}return s}a(tM,"createChangeStreamCursor");function Jq(e,t,r){return r.forEach(n=>{t[n]&&(e[n]=t[n])}),e}a(Jq,"applyKnownOptions");var lX=3e4;function rM(e,t,r){setTimeout(()=>{t&&t.start==null&&(t.start=Yq());let n=t.start||Yq(),i=t.timeout||lX,s=t.readPreference;if(e.isConnected({readPreference:s}))return r();if(cX(n)>i)return r(new wa("Timed out waiting for connection"));rM(e,t,r)},500)}a(rM,"waitForTopologyConnected");function aS(e,t,r){let n=e.cursor;if(t==null&&(e.closed=!0),e.closed){r&&r(new wa("ChangeStream is closed"));return}if(t&&!t._id){let i=new Error("A change stream document has been received that lacks a resume token (_id).");return r?r(i):e.emit("error",i)}return n.cacheResumeToken(t._id),e.options.startAtOperationTime=void 0,r?r(void 0,t):e.emit("change",t)}a(aS,"processNewChange");function nM(e,t,r){let n=e.topology,i=e.cursor;if(e.closed){r&&r(new wa("ChangeStream is closed"));return}function s(c){e.cursor=c,Qq(e)}a(s,"resumeWithCursor");function o(c){r||(e.emit("error",c),e.emit("close")),Qq(e,c),e.closed=!0}if(a(o,"unresumableError"),i&&sX(t,iS(i.server))){e.cursor=void 0,["data","close","end","error"].forEach(c=>i.removeAllListeners(c)),i.close(),rM(n,{readPreference:i.options.readPreference},c=>{if(c)return o(c);let l=tM(e,i.resumeOptions);if(!r)return s(l);l.hasNext(u=>{if(u)return o(u);s(l)})});return}return r?r(t):e.emit("error",t)}a(nM,"processError");function Xq(e,t){if(e.isClosed()){t(new wa("ChangeStream is closed."));return}if(e.cursor){t(void 0,e.cursor);return}e[ba].push(t)}a(Xq,"getCursor");function Qq(e,t){for(;e[ba].length;){let r=e[ba].pop();if(e.isClosed()&&!t){r(new wa("Change Stream is not open."));return}r(t,e.cursor)}}a(Qq,"processResumeQueue");iM.exports=sS});var jn=y(sp=>{"use strict";var pX=require("events"),Ei=I().MongoError,Ea=require("util").format,lS=I().ReadPreference,fX=I().Sessions.ClientSession,Ws=a(function(e,t){var r=this,n=[];t=t||{force:!1,bufferMaxEntries:-1},this.s={storedOps:n,storeOptions:t,topology:e},Object.defineProperty(this,"length",{enumerable:!0,get:function(){return r.s.storedOps.length}})},"Store");Ws.prototype.add=function(e,t,r,n,i){if(this.s.storeOptions.force)return i(Ei.create({message:"db closed by application",driver:!0}));if(this.s.storeOptions.bufferMaxEntries===0)return i(Ei.create({message:Ea("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries){for(;this.s.storedOps.length>0;){var s=this.s.storedOps.shift();s.c(Ei.create({message:Ea("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}))}return}this.s.storedOps.push({t:e,n:t,o:r,op:n,c:i})};Ws.prototype.addObjectAndMethod=function(e,t,r,n,i){if(this.s.storeOptions.force)return i(Ei.create({message:"db closed by application",driver:!0}));if(this.s.storeOptions.bufferMaxEntries===0)return i(Ei.create({message:Ea("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries){for(;this.s.storedOps.length>0;){var s=this.s.storedOps.shift();s.c(Ei.create({message:Ea("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}))}return}this.s.storedOps.push({t:e,m:r,o:t,p:n,c:i})};Ws.prototype.flush=function(e){for(;this.s.storedOps.length>0;)this.s.storedOps.shift().c(e||Ei.create({message:Ea("no connection available for operation"),driver:!0}))};var sM=["primary","primaryPreferred","nearest","secondaryPreferred"],oM=["secondary","secondaryPreferred"];Ws.prototype.execute=function(e){e=e||{};var t=this.s.storedOps;this.s.storedOps=[];for(var r=typeof e.executePrimary=="boolean"?e.executePrimary:!0,n=typeof e.executeSecondary=="boolean"?e.executeSecondary:!0;t.length>0;){var i=t.shift();i.t==="cursor"?(r&&n||r&&i.o.options&&i.o.options.readPreference&&sM.indexOf(i.o.options.readPreference.mode)!==-1||!r&&n&&i.o.options&&i.o.options.readPreference&&oM.indexOf(i.o.options.readPreference.mode)!==-1)&&i.o[i.m].apply(i.o,i.p):i.t==="auth"?this.s.topology[i.t].apply(this.s.topology,i.o):r&&n?this.s.topology[i.t](i.n,i.o,i.op,i.c):r&&i.op&&i.op.readPreference&&sM.indexOf(i.op.readPreference.mode)!==-1?this.s.topology[i.t](i.n,i.o,i.op,i.c):!r&&n&&i.op&&i.op.readPreference&&oM.indexOf(i.op.readPreference.mode)!==-1&&this.s.topology[i.t](i.n,i.o,i.op,i.c)}};Ws.prototype.all=function(){return this.s.storedOps};var aM=a(function(e){var t=a(function(d,f,h){Object.defineProperty(d,f,{enumerable:!0,get:function(){return h}})},"setup_get_property"),r=!1,n=!1,i=!1,s=!1,o=!1,c=!1,l=e.maxWriteBatchSize||1e3,u=!1,p=!1;e.minWireVersion>=0&&(i=!0),e.maxWireVersion>=1&&(r=!0,s=!0),e.maxWireVersion>=2&&(n=!0),e.maxWireVersion>=3&&(o=!0,c=!0),e.maxWireVersion>=5&&(u=!0,p=!0),e.minWireVersion==null&&(e.minWireVersion=0),e.maxWireVersion==null&&(e.maxWireVersion=0),t(this,"hasAggregationCursor",r),t(this,"hasWriteCommands",n),t(this,"hasTextSearch",i),t(this,"hasAuthCommands",s),t(this,"hasListCollectionsCommand",o),t(this,"hasListIndexesCommand",c),t(this,"minWireVersion",e.minWireVersion),t(this,"maxWireVersion",e.maxWireVersion),t(this,"maxNumberOfDocsInBatch",l),t(this,"commandsTakeWriteConcern",u),t(this,"commandsTakeCollation",p)},"ServerCapabilities"),pS=class pS extends pX{constructor(){super(),this.setMaxListeners(1/0)}hasSessionSupport(){return this.logicalSessionTimeoutMinutes!=null}startSession(t,r){let n=new fX(this,this.s.sessionPool,t,r);return n.once("ended",()=>{this.s.sessions.delete(n)}),this.s.sessions.add(n),n}endSessions(t,r){return this.s.coreTopology.endSessions(t,r)}get clientMetadata(){return this.s.coreTopology.s.options.metadata}capabilities(){return this.s.sCapabilities?this.s.sCapabilities:this.s.coreTopology.lastIsMaster()==null?null:(this.s.sCapabilities=new aM(this.s.coreTopology.lastIsMaster()),this.s.sCapabilities)}command(t,r,n,i){this.s.coreTopology.command(t.toString(),r,lS.translate(n),i)}insert(t,r,n,i){this.s.coreTopology.insert(t.toString(),r,n,i)}update(t,r,n,i){this.s.coreTopology.update(t.toString(),r,n,i)}remove(t,r,n,i){this.s.coreTopology.remove(t.toString(),r,n,i)}isConnected(t){return t=t||{},t=lS.translate(t),this.s.coreTopology.isConnected(t)}isDestroyed(){return this.s.coreTopology.isDestroyed()}cursor(t,r,n){return n=n||{},n=lS.translate(n),n.disconnectHandler=this.s.store,n.topology=this,this.s.coreTopology.cursor(t,r,n)}lastIsMaster(){return this.s.coreTopology.lastIsMaster()}selectServer(t,r,n){return this.s.coreTopology.selectServer(t,r,n)}unref(){return this.s.coreTopology.unref()}connections(){return this.s.coreTopology.connections()}close(t,r){this.s.sessions.forEach(n=>n.endSession()),this.s.sessionPool&&this.s.sessionPool.endAllPooledSessions(),t===!0&&(this.s.storeOptions.force=t,this.s.store.flush()),this.s.coreTopology.destroy({force:typeof t=="boolean"?t:!1},r)}};a(pS,"TopologyBase");var Oi=pS;Object.defineProperty(Oi.prototype,"bson",{enumerable:!0,get:function(){return this.s.coreTopology.s.bson}});Object.defineProperty(Oi.prototype,"parserType",{enumerable:!0,get:function(){return this.s.coreTopology.parserType}});Object.defineProperty(Oi.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.s.coreTopology.logicalSessionTimeoutMinutes}});Object.defineProperty(Oi.prototype,"type",{enumerable:!0,get:function(){return this.s.coreTopology.type}});sp.Store=Ws;sp.ServerCapabilities=aM;sp.TopologyBase=Oi});var hS=y((Vae,uM)=>{"use strict";var dX=I().Topology,hX=jn().ServerCapabilities,mX=Sr(),cM=b().translateOptions,dS=class dS extends dX{constructor(t,r){r=r||{};let n=Object.assign({},{cursorFactory:mX,reconnect:!1,emitError:typeof r.emitError=="boolean"?r.emitError:!0,maxPoolSize:typeof r.maxPoolSize=="number"?r.maxPoolSize:typeof r.poolSize=="number"?r.poolSize:10,minPoolSize:typeof r.minPoolSize=="number"?r.minPoolSize:typeof r.minSize=="number"?r.minSize:0,monitorCommands:typeof r.monitorCommands=="boolean"?r.monitorCommands:!1});n=cM(n,r);var i=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;n=cM(n,i),n.serverApi=r.serverApi,n.useUnifiedTopology=r.useUnifiedTopology,super(t,n)}capabilities(){return this.s.sCapabilities?this.s.sCapabilities:this.lastIsMaster()==null?null:(this.s.sCapabilities=new hX(this.lastIsMaster()),this.s.sCapabilities)}command(t,r,n,i){super.command(t.toString(),r,n,i)}insert(t,r,n,i){super.insert(t.toString(),r,n,i)}update(t,r,n,i){super.update(t.toString(),r,n,i)}remove(t,r,n,i){super.remove(t.toString(),r,n,i)}};a(dS,"NativeTopology");var fS=dS;uM.exports=fS});var Oa=y((Gae,pM)=>{"use strict";var yX=I().Server,gX=Sr(),vX=jn().TopologyBase,xX=jn().Store,SX=I().MongoError,bX=b().MAX_JS_INT,lM=b().translateOptions,wX=b().filterOptions,EX=b().mergeOptions,OX=["ha","haInterval","acceptableLatencyMS","poolSize","ssl","checkServerIdentity","sslValidate","sslCA","sslCRL","sslCert","ciphers","ecdhCurve","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","keepAliveInitialDelay","noDelay","connectTimeoutMS","socketTimeoutMS","family","loggerLevel","logger","reconnectTries","reconnectInterval","monitoring","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","compression","promiseLibrary","monitorCommands"],mS=class mS extends vX{constructor(t,r,n){super();var i=this;n=wX(n,OX);let s=n.promiseLibrary;var o={force:!1,bufferMaxEntries:typeof n.bufferMaxEntries=="number"?n.bufferMaxEntries:bX},c=n.store||new xX(i,o);if(t.indexOf("/")!==-1)r!=null&&typeof r=="object"&&(n=r,r=null);else if(r==null)throw SX.create({message:"port must be specified",driver:!0});var l=typeof n.auto_reconnect=="boolean"?n.auto_reconnect:!0;l=typeof n.autoReconnect=="boolean"?n.autoReconnect:l;var u=EX({},{host:t,port:r,disconnectHandler:c,cursorFactory:gX,reconnect:l,emitError:typeof n.emitError=="boolean"?n.emitError:!0,size:typeof n.poolSize=="number"?n.poolSize:5,monitorCommands:typeof n.monitorCommands=="boolean"?n.monitorCommands:!1});u=lM(u,n);var p=n.socketOptions&&Object.keys(n.socketOptions).length>0?n.socketOptions:n;u=lM(u,p),this.s={coreTopology:new yX(u),sCapabilities:null,clonedOptions:u,reconnect:u.reconnect,emitError:u.emitError,poolSize:u.size,storeOptions:o,store:c,host:t,port:r,options:n,sessionPool:null,sessions:new Set,promiseLibrary:s||Promise}}connect(t,r){var n=this;typeof t=="function"&&(r=t,t={}),t==null&&(t=this.s.clonedOptions),typeof r!="function"&&(r=null),t=Object.assign({},this.s.clonedOptions,t),n.s.options=t,n.s.storeOptions.bufferMaxEntries=typeof t.bufferMaxEntries=="number"?t.bufferMaxEntries:-1;var i=a(function(){return function(f){var h=["timeout","error","close"];h.forEach(function(m){n.s.coreTopology.removeListener(m,d[m])}),n.s.coreTopology.removeListener("connect",i);try{r(f)}catch(m){process.nextTick(function(){throw m})}}},"connectErrorHandler"),s=a(function(f){return function(h){f!=="error"&&n.emit(f,h)}},"errorHandler"),o=a(function(){n.emit("reconnect",n),n.s.store.execute()},"reconnectHandler"),c=a(function(f){n.emit("reconnectFailed",f),n.s.store.flush(f)},"reconnectFailedHandler"),l=a(function(){n.s.store.flush()},"destroyHandler"),u=a(function(f){return function(h,m){n.emit(f,h,m)}},"relay"),p=a(function(){["timeout","error","close","destroy"].forEach(function(f){n.s.coreTopology.removeAllListeners(f)}),n.s.coreTopology.on("timeout",s("timeout")),n.s.coreTopology.once("error",s("error")),n.s.coreTopology.on("close",s("close")),n.s.coreTopology.on("destroy",l),n.emit("open",null,n);try{r(null,n)}catch(f){process.nextTick(function(){throw f})}},"connectHandler"),d={timeout:i("timeout"),error:i("error"),close:i("close")};["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed"].forEach(function(f){n.s.coreTopology.removeAllListeners(f)}),n.s.coreTopology.once("timeout",d.timeout),n.s.coreTopology.once("error",d.error),n.s.coreTopology.once("close",d.close),n.s.coreTopology.once("connect",p),n.s.coreTopology.on("reconnect",o),n.s.coreTopology.on("reconnectFailed",c),n.s.coreTopology.on("serverDescriptionChanged",u("serverDescriptionChanged")),n.s.coreTopology.on("serverHeartbeatStarted",u("serverHeartbeatStarted")),n.s.coreTopology.on("serverHeartbeatSucceeded",u("serverHeartbeatSucceeded")),n.s.coreTopology.on("serverHeartbeatFailed",u("serverHeartbeatFailed")),n.s.coreTopology.on("serverOpening",u("serverOpening")),n.s.coreTopology.on("serverClosed",u("serverClosed")),n.s.coreTopology.on("topologyOpening",u("topologyOpening")),n.s.coreTopology.on("topologyClosed",u("topologyClosed")),n.s.coreTopology.on("topologyDescriptionChanged",u("topologyDescriptionChanged")),n.s.coreTopology.on("commandStarted",u("commandStarted")),n.s.coreTopology.on("commandSucceeded",u("commandSucceeded")),n.s.coreTopology.on("commandFailed",u("commandFailed")),n.s.coreTopology.on("attemptReconnect",u("attemptReconnect")),n.s.coreTopology.on("monitoring",u("monitoring")),n.s.coreTopology.connect(t)}};a(mS,"Server");var Ti=mS;Object.defineProperty(Ti.prototype,"poolSize",{enumerable:!0,get:function(){return this.s.coreTopology.connections().length}});Object.defineProperty(Ti.prototype,"autoReconnect",{enumerable:!0,get:function(){return this.s.reconnect}});Object.defineProperty(Ti.prototype,"host",{enumerable:!0,get:function(){return this.s.host}});Object.defineProperty(Ti.prototype,"port",{enumerable:!0,get:function(){return this.s.port}});pM.exports=Ti});var gS=y((Jae,dM)=>{"use strict";var TX=jn().TopologyBase,CX=I().MongoError,_X=I().Mongos,AX=Sr(),NX=Oa(),RX=jn().Store,IX=b().MAX_JS_INT,fM=b().translateOptions,qX=b().filterOptions,MX=b().mergeOptions,PX=["ha","haInterval","acceptableLatencyMS","poolSize","ssl","checkServerIdentity","sslValidate","sslCA","sslCRL","sslCert","ciphers","ecdhCurve","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","keepAliveInitialDelay","noDelay","connectTimeoutMS","socketTimeoutMS","loggerLevel","logger","reconnectTries","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","promiseLibrary","monitorCommands"],yS=class yS extends TX{constructor(t,r){super(),r=r||{};var n=this;r=qX(r,PX);for(var i=0;i<t.length;i++)if(!(t[i]instanceof NX))throw CX.create({message:"all seed list instances must be of the Server type",driver:!0});var s={force:!1,bufferMaxEntries:typeof r.bufferMaxEntries=="number"?r.bufferMaxEntries:IX},o=r.store||new RX(n,s),c=t.map(function(d){return{host:d.host,port:d.port}}),l=typeof r.auto_reconnect=="boolean"?r.auto_reconnect:!0;l=typeof r.autoReconnect=="boolean"?r.autoReconnect:l;var u=MX({},{disconnectHandler:o,cursorFactory:AX,reconnect:l,emitError:typeof r.emitError=="boolean"?r.emitError:!0,size:typeof r.poolSize=="number"?r.poolSize:5,monitorCommands:typeof r.monitorCommands=="boolean"?r.monitorCommands:!1});u=fM(u,r);var p=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;u=fM(u,p),this.s={coreTopology:new _X(c,u),sCapabilities:null,debug:u.debug,storeOptions:s,clonedOptions:u,store:o,options:r,sessionPool:null,sessions:new Set,promiseLibrary:r.promiseLibrary||Promise}}connect(t,r){var n=this;typeof t=="function"&&(r=t,t={}),t==null&&(t={}),typeof r!="function"&&(r=null),t=Object.assign({},this.s.clonedOptions,t),n.s.options=t,n.s.storeOptions.bufferMaxEntries=typeof t.bufferMaxEntries=="number"?t.bufferMaxEntries:-1;var i=a(function(){return function(p){var d=["timeout","error","close"];d.forEach(function(f){n.removeListener(f,i)}),n.s.coreTopology.removeListener("connect",i),n.close(!0);try{r(p)}catch(f){process.nextTick(function(){throw f})}}},"connectErrorHandler"),s=a(function(p){return function(d){p!=="error"&&n.emit(p,d)}},"errorHandler"),o=a(function(){n.emit("reconnect"),n.s.store.execute()},"reconnectHandler"),c=a(function(p){return function(d,f){n.emit(p,d,f)}},"relay"),l=a(function(){var p=["timeout","error","close","fullsetup"];p.forEach(function(d){n.s.coreTopology.removeAllListeners(d)}),n.s.coreTopology.on("timeout",s("timeout")),n.s.coreTopology.on("error",s("error")),n.s.coreTopology.on("close",s("close")),n.s.coreTopology.on("fullsetup",function(){n.emit("fullsetup",n)}),n.emit("open",null,n);try{r(null,n)}catch(d){process.nextTick(function(){throw d})}},"connectHandler"),u=["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed"];u.forEach(function(p){n.s.coreTopology.removeAllListeners(p)}),n.s.coreTopology.on("serverDescriptionChanged",c("serverDescriptionChanged")),n.s.coreTopology.on("serverHeartbeatStarted",c("serverHeartbeatStarted")),n.s.coreTopology.on("serverHeartbeatSucceeded",c("serverHeartbeatSucceeded")),n.s.coreTopology.on("serverHeartbeatFailed",c("serverHeartbeatFailed")),n.s.coreTopology.on("serverOpening",c("serverOpening")),n.s.coreTopology.on("serverClosed",c("serverClosed")),n.s.coreTopology.on("topologyOpening",c("topologyOpening")),n.s.coreTopology.on("topologyClosed",c("topologyClosed")),n.s.coreTopology.on("topologyDescriptionChanged",c("topologyDescriptionChanged")),n.s.coreTopology.on("commandStarted",c("commandStarted")),n.s.coreTopology.on("commandSucceeded",c("commandSucceeded")),n.s.coreTopology.on("commandFailed",c("commandFailed")),n.s.coreTopology.once("timeout",i("timeout")),n.s.coreTopology.once("error",i("error")),n.s.coreTopology.once("close",i("close")),n.s.coreTopology.once("connect",l),n.s.coreTopology.on("joined",c("joined")),n.s.coreTopology.on("left",c("left")),n.s.coreTopology.on("reconnect",o),n.s.coreTopology.connect(t)}};a(yS,"Mongos");var op=yS;Object.defineProperty(op.prototype,"haInterval",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}});dM.exports=op});var xS=y((Qae,mM)=>{"use strict";var BX=Oa(),DX=Sr(),LX=I().MongoError,jX=jn().TopologyBase,UX=jn().Store,kX=I().ReplSet,FX=b().MAX_JS_INT,hM=b().translateOptions,WX=b().filterOptions,zX=b().mergeOptions,$X=["ha","haInterval","replicaSet","rs_name","secondaryAcceptableLatencyMS","connectWithNoPrimary","poolSize","ssl","checkServerIdentity","sslValidate","sslCA","sslCert","ciphers","ecdhCurve","sslCRL","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","keepAliveInitialDelay","noDelay","connectTimeoutMS","socketTimeoutMS","strategy","debug","family","loggerLevel","logger","reconnectTries","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","maxStalenessSeconds","promiseLibrary","minSize","monitorCommands"],vS=class vS extends jX{constructor(t,r){super(),r=r||{};var n=this;r=WX(r,$X);for(var i=0;i<t.length;i++)if(!(t[i]instanceof BX))throw LX.create({message:"all seed list instances must be of the Server type",driver:!0});var s={force:!1,bufferMaxEntries:typeof r.bufferMaxEntries=="number"?r.bufferMaxEntries:FX},o=r.store||new UX(n,s),c=t.map(function(d){return{host:d.host,port:d.port}}),l=zX({},{disconnectHandler:o,cursorFactory:DX,reconnect:!1,emitError:typeof r.emitError=="boolean"?r.emitError:!0,size:typeof r.poolSize=="number"?r.poolSize:5,monitorCommands:typeof r.monitorCommands=="boolean"?r.monitorCommands:!1});l=hM(l,r);var u=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;l=hM(l,u);var p=new kX(c,l);p.on("reconnect",function(){n.emit("reconnect"),o.execute()}),this.s={coreTopology:p,sCapabilities:null,tag:r.tag,storeOptions:s,clonedOptions:l,store:o,options:r,sessionPool:null,sessions:new Set,promiseLibrary:r.promiseLibrary||Promise},l.debug&&Object.defineProperty(this,"replset",{enumerable:!0,get:function(){return p}})}connect(t,r){var n=this;typeof t=="function"&&(r=t,t={}),t==null&&(t={}),typeof r!="function"&&(r=null),t=Object.assign({},this.s.clonedOptions,t),n.s.options=t,n.s.storeOptions.bufferMaxEntries=typeof t.bufferMaxEntries=="number"?t.bufferMaxEntries:-1;var i=a(function(d){return function(f){d!=="error"&&n.emit(d,f)}},"errorHandler"),s=["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed","joined","left","ping","ha"];s.forEach(function(d){n.s.coreTopology.removeAllListeners(d)});var o=a(function(d){return function(f,h){n.emit(d,f,h)}},"relay"),c=a(function(d){return function(f,h){n.emit(d,f,h.lastIsMaster(),h)}},"replsetRelay"),l=a(function(d,f){n.emit("ha",d,f),d==="start"?n.emit("ha_connect",d,f):d==="end"&&n.emit("ha_ismaster",d,f)},"relayHa");n.s.coreTopology.on("joined",c("joined")),n.s.coreTopology.on("left",o("left")),n.s.coreTopology.on("ping",o("ping")),n.s.coreTopology.on("ha",l),n.s.coreTopology.on("serverDescriptionChanged",o("serverDescriptionChanged")),n.s.coreTopology.on("serverHeartbeatStarted",o("serverHeartbeatStarted")),n.s.coreTopology.on("serverHeartbeatSucceeded",o("serverHeartbeatSucceeded")),n.s.coreTopology.on("serverHeartbeatFailed",o("serverHeartbeatFailed")),n.s.coreTopology.on("serverOpening",o("serverOpening")),n.s.coreTopology.on("serverClosed",o("serverClosed")),n.s.coreTopology.on("topologyOpening",o("topologyOpening")),n.s.coreTopology.on("topologyClosed",o("topologyClosed")),n.s.coreTopology.on("topologyDescriptionChanged",o("topologyDescriptionChanged")),n.s.coreTopology.on("commandStarted",o("commandStarted")),n.s.coreTopology.on("commandSucceeded",o("commandSucceeded")),n.s.coreTopology.on("commandFailed",o("commandFailed")),n.s.coreTopology.on("fullsetup",function(){n.emit("fullsetup",n,n)}),n.s.coreTopology.on("all",function(){n.emit("all",null,n)});var u=a(function(){n.s.coreTopology.once("timeout",i("timeout")),n.s.coreTopology.once("error",i("error")),n.s.coreTopology.once("close",i("close")),n.emit("open",null,n);try{r(null,n)}catch(d){process.nextTick(function(){throw d})}},"connectHandler"),p=a(function(){return function(d){["timeout","error","close"].forEach(function(f){n.s.coreTopology.removeListener(f,p)}),n.s.coreTopology.removeListener("connect",p),n.s.coreTopology.destroy();try{r(d)}catch(f){n.s.coreTopology.isConnected()||process.nextTick(function(){throw f})}}},"connectErrorHandler");n.s.coreTopology.once("timeout",p("timeout")),n.s.coreTopology.once("error",p("error")),n.s.coreTopology.once("close",p("close")),n.s.coreTopology.once("connect",u),n.s.coreTopology.connect(t)}close(t,r){["timeout","error","close","joined","left"].forEach(n=>this.removeAllListeners(n)),super.close(t,r)}};a(vS,"ReplSet");var ap=vS;Object.defineProperty(ap.prototype,"haInterval",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}});mM.exports=ap});var xM=y((ece,vM)=>{"use strict";var HX=I().ReadPreference,SS=require("url"),VX=require("util").format,KX=I().Logger,yM=require("dns"),GX=ni(),YX=require("querystring"),cp=q().MongoParseError;vM.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n;try{n=SS.parse(e,!0)}catch{return r(new Error("URL malformed, cannot be parsed"))}if(n.protocol!=="mongodb:"&&n.protocol!=="mongodb+srv:")return r(new Error("Invalid schema, expected `mongodb` or `mongodb+srv`"));if(n.protocol==="mongodb:")return gM(e,t,r);if(n.hostname.split(".").length<3)return r(new Error("URI does not have hostname, domain name and tld"));if(n.domainLength=n.hostname.split(".").length,e.substring(14).split("/")[0].match(","))return r(new Error("Invalid URI, cannot contain multiple hostnames"));if(n.port)return r(new Error("Ports not accepted with `mongodb+srv` URIs"));let s=`_mongodb._tcp.${n.host}`;yM.resolveSrv(s,function(o,c){if(o)return r(o);if(c.length===0)return r(new Error("No addresses found at host"));for(let f=0;f<c.length;f++)if(!JX(c[f].name,n.hostname,n.domainLength))return r(new Error("Server record does not share hostname with parent URI"));let l=n.auth?`mongodb://${n.auth}@`:"mongodb://",p=c.map(function(f,h){return h===0?`${l}${f.name}:${f.port}`:`${f.name}:${f.port}`}).join(",")+"/",d=[];if(n.path){let f=n.path.slice(1);f.indexOf("?")!==-1&&(f=f.slice(0,f.indexOf("?"))),p+=f}(!t.ssl&&!n.search||!t.ssl&&n.search&&!n.search.match("ssl"))&&d.push("ssl=true"),n.search&&d.push(n.search.replace("?","")),yM.resolveTxt(n.host,function(f,h){if(f&&f.code!=="ENODATA"&&f.code!=="ENOTFOUND")return r(f);if(f&&f.code==="ENODATA"&&(h=null),h){if(h.length>1)return r(new cp("Multiple text records not allowed"));h=h[0].join("");let m=YX.parse(h),v=Object.keys(m);if(Object.keys(v).some(x=>x.toLowerCase()==="loadbalanced"))return r(new cp("Load balancer mode requires driver version 4+"));if(v.some(x=>x!=="authSource"&&x!=="replicaSet"))return r(new cp("Text record must only set `authSource` or `replicaSet`"));v.length>0&&d.push(h)}d.length&&(p+=`?${d.join("&")}`),gM(p,t,r)})})};function JX(e,t){let r=/^.*?\./,n=`.${e.replace(r,"")}`,i=`.${t.replace(r,"")}`;return!!n.endsWith(i)}a(JX,"matchesParentDomain");function gM(e,t,r){let n,i;try{n=XX(e,t)}catch(s){i=s}return i?r(i,null):r(null,n)}a(gM,"parseHandler");function XX(e,t){let r="",n="",i="",s="admin",o=SS.parse(e,!0);if((o.hostname==null||o.hostname==="")&&e.indexOf(".sock")===-1)throw new Error("No hostname or hostnames provided in connection string");if(o.port==="0")throw new Error("Invalid port (zero) with hostname");if(!isNaN(parseInt(o.port,10))&&parseInt(o.port,10)>65535)throw new Error("Invalid port (larger than 65535) with hostname");if(o.path&&o.path.length>0&&o.path[0]!=="/"&&e.indexOf(".sock")===-1)throw new Error("Missing delimiting slash between hosts and options");if(o.query)for(let _ in o.query){if(_.indexOf("::")!==-1)throw new Error("Double colon in host identifier");if(o.query[_]==="")throw new Error("Query parameter "+_+" is an incomplete value pair")}if(o.auth){let _=o.auth.split(":");if(e.indexOf(o.auth)!==-1&&_.length>2)throw new Error("Username with password containing an unescaped colon");if(e.indexOf(o.auth)!==-1&&o.auth.indexOf("@")!==-1)throw new Error("Username containing an unescaped at-sign")}let l=e.split("?").shift().split(","),u=[];for(let _=0;_<l.length;_++){let D=l[_];D.indexOf("mongodb")!==-1?D.indexOf("@")!==-1?u.push(D.split("@").pop()):u.push(D.substr(10)):D.indexOf("/")!==-1?u.push(D.split("/").shift()):D.indexOf("/")===-1&&u.push(D.trim())}for(let _=0;_<u.length;_++){let D=SS.parse(VX("mongodb://%s",u[_].trim()));if(!(D.path&&D.path.indexOf(".sock")!==-1)&&D.path&&D.path.indexOf(":")!==-1)throw D.path.split("/").length>1&&D.path.indexOf("::")===-1?new Error("Slash in host identifier"):new Error("Double colon in host identifier")}if(e.indexOf("?")!==-1?(i=e.substr(e.indexOf("?")+1),r=e.substring(10,e.indexOf("?"))):r=e.substring(10),r.indexOf("@")!==-1&&(n=r.split("@")[0],r=r.split("@")[1]),r.split("/").length>2)throw new Error("Unsupported host '"+r.split("?")[0]+"', hosts must be URL encoded and contain at most one unencoded slash");if(r.indexOf(".sock")!==-1){if(r.indexOf(".sock/")!==-1){if(s=r.split(".sock/")[1],s.indexOf("/")!==-1)throw s.split("/").length===2&&s.split("/")[1].length===0?new Error("Illegal trailing backslash after database name"):new Error("More than 1 database name in URL");r=r.split("/",r.indexOf(".sock")+5)}}else if(r.indexOf("/")!==-1){if(r.split("/").length>2)throw r.split("/")[2].length===0?new Error("Illegal trailing backslash after database name"):new Error("More than 1 database name in URL");s=r.split("/")[1],r=r.split("/")[0]}r=decodeURIComponent(r);let p={},d=n||"",f=d.split(":",2),h=decodeURIComponent(f[0]);if(f[0]!==encodeURIComponent(h))throw new Error("Username contains an illegal unescaped character");if(f[0]=h,f[1]){let _=decodeURIComponent(f[1]);if(f[1]!==encodeURIComponent(_))throw new Error("Password contains an illegal unescaped character");f[1]=_}f.length===2&&(p.auth={user:f[0],password:f[1]}),t&&t.auth!=null&&(p.auth=t.auth);let m,v,x,w,C={socketOptions:{}},g={read_preference_tags:[]},T={socketOptions:{}},N={socketOptions:{}};if(p.server_options=C,p.db_options=g,p.rs_options=T,p.mongos_options=N,e.match(/\.sock/)){let _=e.substring(e.indexOf("mongodb://")+10,e.lastIndexOf(".sock")+5);_.indexOf("@")!==-1&&(_=_.split("@")[1]),_=decodeURIComponent(_),x=[{domain_socket:_}]}else{m=r;let _={};x=m.split(",").map(function(D){let k,A,F;if(F=/\[([^\]]+)\](?::(.+))?/.exec(D))k=F[1],A=parseInt(F[2],10)||27017;else{let z=D.split(":",2);k=z[0]||"localhost",A=z[1]!=null?parseInt(z[1],10):27017,k.indexOf("?")!==-1&&(k=k.split(/\?/)[0])}return _[k+"_"+A]?null:(_[k+"_"+A]=1,{host:k,port:A})}).filter(function(D){return D!=null})}if(p.dbName=s||"admin",v=(i||"").split(/[&;]/),v.some(_=>_.toLowerCase()==="loadbalanced"))throw new cp("Load balancer mode requires driver version 4+");if(v.forEach(function(_){if(_){var D=_.split("="),k=D[0],A=D[1];switch(k){case"slaveOk":case"slave_ok":C.slave_ok=A==="true",g.slaveOk=A==="true";break;case"maxPoolSize":case"poolSize":C.poolSize=parseInt(A,10),T.poolSize=parseInt(A,10);break;case"appname":p.appname=decodeURIComponent(A);break;case"autoReconnect":case"auto_reconnect":C.auto_reconnect=A==="true";break;case"ssl":if(A==="prefer"){C.ssl=A,T.ssl=A,N.ssl=A;break}C.ssl=A==="true",T.ssl=A==="true",N.ssl=A==="true";break;case"sslValidate":C.sslValidate=A==="true",T.sslValidate=A==="true",N.sslValidate=A==="true";break;case"replicaSet":case"rs_name":T.rs_name=A;break;case"reconnectWait":T.reconnectWait=parseInt(A,10);break;case"retries":T.retries=parseInt(A,10);break;case"readSecondary":case"read_secondary":T.read_secondary=A==="true";break;case"fsync":g.fsync=A==="true";break;case"journal":g.j=A==="true";break;case"safe":g.safe=A==="true";break;case"nativeParser":case"native_parser":g.native_parser=A==="true";break;case"readConcernLevel":g.readConcern=new GX(A);break;case"connectTimeoutMS":C.socketOptions.connectTimeoutMS=parseInt(A,10),T.socketOptions.connectTimeoutMS=parseInt(A,10),N.socketOptions.connectTimeoutMS=parseInt(A,10);break;case"socketTimeoutMS":C.socketOptions.socketTimeoutMS=parseInt(A,10),T.socketOptions.socketTimeoutMS=parseInt(A,10),N.socketOptions.socketTimeoutMS=parseInt(A,10);break;case"w":g.w=parseInt(A,10),isNaN(g.w)&&(g.w=A);break;case"authSource":g.authSource=A;break;case"gssapiServiceName":g.gssapiServiceName=A;break;case"authMechanism":if(A==="GSSAPI")if(p.auth==null){let F=decodeURIComponent(d);if(F.indexOf("@")===-1)throw new Error("GSSAPI requires a provided principal");p.auth={user:F,password:null}}else p.auth.user=decodeURIComponent(p.auth.user);else A==="MONGODB-X509"&&(p.auth={user:decodeURIComponent(d)});if(A!=="GSSAPI"&&A!=="MONGODB-X509"&&A!=="MONGODB-CR"&&A!=="DEFAULT"&&A!=="SCRAM-SHA-1"&&A!=="SCRAM-SHA-256"&&A!=="PLAIN")throw new Error("Only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, or SCRAM-SHA-1 is supported by authMechanism");g.authMechanism=A;break;case"authMechanismProperties":{let F=A.split(","),z={};F.forEach(function(H){let te=H.split(":");z[te[0]]=te[1]}),g.authMechanismProperties=z,typeof z.SERVICE_NAME=="string"&&(g.gssapiServiceName=z.SERVICE_NAME),typeof z.SERVICE_REALM=="string"&&(g.gssapiServiceRealm=z.SERVICE_REALM),typeof z.CANONICALIZE_HOST_NAME=="string"&&(g.gssapiCanonicalizeHostName=z.CANONICALIZE_HOST_NAME==="true")}break;case"wtimeoutMS":g.wtimeout=parseInt(A,10);break;case"readPreference":if(!HX.isValid(A))throw new Error("readPreference must be either primary/primaryPreferred/secondary/secondaryPreferred/nearest");g.readPreference=A;break;case"maxStalenessSeconds":g.maxStalenessSeconds=parseInt(A,10);break;case"readPreferenceTags":{A=decodeURIComponent(A);let F={};if(A==null||A===""){g.read_preference_tags.push(F);break}let z=A.split(/,/);for(let H=0;H<z.length;H++){let te=z[H].trim().split(/:/);F[te[0]]=te[1]}g.read_preference_tags.push(F)}break;case"compressors":{w=C.compression||{};let F=A.split(",");if(!F.every(function(z){return z==="snappy"||z==="zlib"}))throw new Error("Compressors must be at least one of snappy or zlib");w.compressors=F,C.compression=w}break;case"zlibCompressionLevel":{w=C.compression||{};let F=parseInt(A,10);if(F<-1||F>9)throw new Error("zlibCompressionLevel must be an integer between -1 and 9");w.zlibCompressionLevel=F,C.compression=w}break;case"retryWrites":g.retryWrites=A==="true";break;case"minSize":g.minSize=parseInt(A,10);break;default:KX("URL Parser").warn(`${k} is not supported as a connection string option`);break}}}),g.read_preference_tags.length===0&&(g.read_preference_tags=null),(g.w===-1||g.w===0)&&(g.journal===!0||g.fsync===!0||g.safe===!0))throw new Error("w set to -1 or 0 cannot be combined with safe/w/journal/fsync");return g.readPreference||(g.readPreference="primary"),g=Object.assign(g,t),p.servers=x,p}a(XX,"parseConnectionString")});var wS=y((rce,bM)=>{"use strict";var QX=Fs(),xt=ke().retrieveBSON(),SM=q().MongoError,up;try{up=require("mongodb-client-encryption")}catch{throw new SM("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project")}if(up===void 0||typeof up.extension!="function")throw new SM("loaded version of `mongodb-client-encryption` does not have property `extension`. Please make sure you are loading the correct version of `mongodb-client-encryption`");var ZX=up.extension(ES()).AutoEncrypter,Vr=Symbol("internalClient"),lp=class lp{constructor(t,r){this.bypassAutoEncryption=!!r.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,r.maxPoolSize===0&&r.autoEncryption.keyVaultClient==null?r.autoEncryption.keyVaultClient=t:r.autoEncryption.keyVaultClient==null&&(r.autoEncryption.keyVaultClient=this.getInternalClient(t)),this.bypassAutoEncryption?r.autoEncryption.metadataClient=void 0:r.maxPoolSize===0?r.autoEncryption.metadataClient=t:r.autoEncryption.metadataClient=this.getInternalClient(t),r.autoEncryption.bson=lp.makeBSON(r),this.autoEncrypter=new ZX(t,r.autoEncryption)}getInternalClient(t){if(!this[Vr]){let r={};for(let i of Object.keys(t.s.options))["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].indexOf(i)===-1&&(r[i]=t.s.options[i]);r.minPoolSize=0;let n=["commandStarted","commandSucceeded","commandFailed","serverOpening","serverClosed","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","topologyOpening","topologyClosed","topologyDescriptionChanged","joined","left","ping","ha","connectionPoolCreated","connectionPoolClosed","connectionCreated","connectionReady","connectionClosed","connectionCheckOutStarted","connectionCheckOutFailed","connectionCheckedOut","connectionCheckedIn","connectionPoolCleared"];this[Vr]=new QX(t.s.url,r);for(let i of n)for(let s of t.listeners(i))this[Vr].on(i,s);t.on("newListener",(i,s)=>{this[Vr].on(i,s)}),this.needsConnecting=!0}return this[Vr]}connectInternalClient(t){return this.needsConnecting?(this.needsConnecting=!1,this[Vr].connect(t)):t()}close(t,r,n){this.autoEncrypter.teardown(i=>{if(this[Vr]&&t!==this[Vr])return this[Vr].close(r,n);n(i)})}static makeBSON(t){return(t||{}).bson||new xt([xt.Binary,xt.Code,xt.DBRef,xt.Decimal128,xt.Double,xt.Int32,xt.Long,xt.Map,xt.MaxKey,xt.MinKey,xt.ObjectId,xt.BSONRegExp,xt.Symbol,xt.Timestamp])}};a(lp,"Encrypter");var bS=lp;bM.exports={Encrypter:bS}});var MS=y((ice,IM)=>{"use strict";var eQ=require("util").deprecate,tQ=I().Logger,rQ=I().MongoCredentials,AS=I().MongoError,EM=gS(),OM=hS(),nQ=I().parseConnectionString,iQ=ni(),NS=I().ReadPreference,TM=xS(),TS=Oa(),sQ=I().Sessions.ServerSessionPool,oQ=b().emitDeprecationWarning,CS=b().emitWarningOnce,aQ=require("fs"),CM=_r(),cQ=Qo().CMAP_EVENT_NAMES,OS;function uQ(){return OS||(OS=Fs()),OS}a(uQ,"loadClient");var lQ=eQ(xM(),"current URL string parser is deprecated, and will be removed in a future version. To use the new parser, pass option { useNewUrlParser: true } to MongoClient.connect."),pQ={DEFAULT:"default",PLAIN:"plain",GSSAPI:"gssapi","MONGODB-CR":"mongocr","MONGODB-X509":"x509","MONGODB-AWS":"mongodb-aws","SCRAM-SHA-1":"scram-sha-1","SCRAM-SHA-256":"scram-sha-256"},_M=["timeout","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed","joined","left","ping","ha","all","fullsetup","open"],fQ=new Set(["DEFAULT","PLAIN","GSSAPI","MONGODB-CR","MONGODB-X509","MONGODB-AWS","SCRAM-SHA-1","SCRAM-SHA-256"]),_S=["poolSize","ssl","sslValidate","sslCA","sslCert","sslKey","sslPass","sslCRL","autoReconnect","noDelay","keepAlive","keepAliveInitialDelay","connectTimeoutMS","family","socketTimeoutMS","reconnectTries","reconnectInterval","ha","haInterval","replicaSet","secondaryAcceptableLatencyMS","acceptableLatencyMS","connectWithNoPrimary","authSource","w","wtimeout","j","writeConcern","forceServerObjectId","serializeFunctions","ignoreUndefined","raw","bufferMaxEntries","readPreference","pkFactory","promiseLibrary","readConcern","maxStalenessSeconds","loggerLevel","logger","promoteValues","promoteBuffers","promoteLongs","bsonRegExp","domainsEnabled","checkServerIdentity","validateOptions","appname","auth","user","password","authMechanism","compression","fsync","readPreferenceTags","numberOfRetries","auto_reconnect","minSize","monitorCommands","serverApi","retryWrites","retryReads","useNewUrlParser","useUnifiedTopology","serverSelectionTimeoutMS","useRecoveryToken","autoEncryption","driverInfo","tls","tlsInsecure","tlsinsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames","tlsCAFile","tlsCertificateFile","tlsCertificateKeyFile","tlsCertificateKeyFilePassword","minHeartbeatFrequencyMS","heartbeatFrequencyMS","directConnection","appName","maxPoolSize","minPoolSize","maxIdleTimeMS","waitQueueTimeoutMS"],dQ=["native_parser"],wM=["server","replset","replSet","mongos","db"];function hQ(e){let t=_S.concat(wM);for(let r in e)if(dQ.indexOf(r)===-1){if(t.indexOf(r)===-1){if(e.validateOptions)return new AS(`option ${r} is not supported`);CS(`the options [${r}] is not supported`)}wM.indexOf(r)!==-1&&CS(`the server/replset/mongos/db options are deprecated, all their options are supported at the top level of the options object [${_S}]`)}}a(hQ,"validOptions");var mQ=_S.reduce((e,t)=>(e[t.toLowerCase()]=t,e),{});function RS(e,t){t.on("authenticated",Kr(e,"authenticated")),t.on("error",Kr(e,"error")),t.on("timeout",Kr(e,"timeout")),t.on("close",Kr(e,"close")),t.on("parseError",Kr(e,"parseError")),t.once("open",Kr(e,"open")),t.once("fullsetup",Kr(e,"fullsetup")),t.once("all",Kr(e,"all")),t.on("reconnect",Kr(e,"reconnect"))}a(RS,"addListeners");function IS(e,t){e.topology=t,t instanceof OM||(t.s.sessionPool=new sQ(t.s.coreTopology))}a(IS,"assignTopology");function yQ(e){_M.forEach(t=>e.removeAllListeners(t))}a(yQ,"clearAllEvents");function gQ(e,t){let r=uQ(),n=[];return e instanceof r&&_M.forEach(i=>{t.on(i,(s,o)=>{i==="open"?n.push({event:i,object1:e}):n.push({event:i,object1:s,object2:o})})}),n}a(gQ,"collectEvents");function vQ(e){e.tls!=null&&["sslCA","sslKey","sslCert"].forEach(t=>{e[t]&&(e[t]=aQ.readFileSync(e[t]))})}a(vQ,"resolveTLSOptions");function xQ(e,t,r,n){if(r=Object.assign({},r),n==null)throw new Error("no callback function provided");let i=!1,s=tQ("MongoClient",r);if(t instanceof TS||t instanceof TM||t instanceof EM)return SQ(e,t,r,u);let o=r.useNewUrlParser!==!1,c=o?nQ:lQ,l=o?CQ:OQ;c(t,r,(p,d)=>{if(p)return n(p);let f=l(d),h=AM(f,r);if(h.socketTimeoutMS==null&&(h.socketTimeoutMS=0),h.connectTimeoutMS==null&&(h.connectTimeoutMS=1e4),h.retryWrites==null&&(h.retryWrites=!0),h.useRecoveryToken==null&&(h.useRecoveryToken=!0),h.readPreference==null&&(h.readPreference="primary"),h.db_options&&h.db_options.auth&&delete h.db_options.auth,vQ(h),e.s.options=h,e.s.readPreference=NS.fromOptions(h),e.s.writeConcern=CM.fromOptions(h),f.servers.length===0)return n(new Error("connection string must contain at least one seed host"));if(h.auth&&!h.credentials)try{i=!0,h.credentials=NM(e,h.auth.user,h.auth.password,h)}catch(m){return n(m)}return h.useUnifiedTopology?pp(e,"unified",h,u):(CS("Current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor."),h.replicaSet||h.rs_name?pp(e,"replicaset",h,u):f.servers.length>1?pp(e,"mongos",h,u):bQ(e,h,u))});function u(p,d){let f="seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name";if(p&&p.message==="no mongos proxies found in seed list")return s.isWarn()&&s.warn(f),n(new AS(f));i&&e.emit("authenticated",null,!0),n(p,d)}a(u,"connectCallback")}a(xQ,"connect");function SQ(e,t,r,n){IS(e,t),RS(e,t),qS(e,t);let i=Object.assign({},r);if((typeof r.readPreference=="string"||typeof r.read_preference=="string")&&(i.readPreference=new NS(r.readPreference||r.read_preference)),(i.user||i.password||i.authMechanism)&&!i.credentials)try{i.credentials=NM(e,i.user,i.password,i)}catch(o){return n(o,t)}return t.connect(i,n)}a(SQ,"connectWithUrl");function Kr(e,t){let r=new Set(["all","fullsetup","open","reconnect"]);return(n,i)=>{if(r.has(t))return e.emit(t,e);e.emit(t,n,i)}}a(Kr,"createListener");function bQ(e,t,r){t.promiseLibrary=e.s.promiseLibrary;let i=RM(t)[0],s=gQ(e,i);i.connect(t,(o,c)=>{if(o)return i.close(!0),r(o);yQ(i),qS(e,i),RS(e,i);let l=c.lastIsMaster();if(IS(e,c),l&&l.msg==="isdbgrid")return c.close(),pp(e,"mongos",t,r);TQ(e,s),r(o,c)})}a(bQ,"createServer");var wQ=new Set(["reconnect","reconnectFailed","attemptReconnect","joined","left","ping","ha","all","fullsetup","open"]);function EQ(e){e.on("newListener",t=>{wQ.has(t)&&oQ(`The \`${t}\` event is no longer supported by the unified topology, please read more by visiting http://bit.ly/2D8WfT6`,"DeprecationWarning")})}a(EQ,"registerDeprecatedEventNotifiers");function pp(e,t,r,n){r.promiseLibrary=e.s.promiseLibrary;let i={};t==="unified"&&(i.createServers=!1);let s=RM(r,i);if(r.autoEncryption!=null){let c=wS().Encrypter;r.encrypter=new c(e,r),r.autoEncrypter=r.encrypter.autoEncrypter}let o;if(t==="mongos"?o=new EM(s,r):t==="replicaset"?o=new TM(s,r):t==="unified"&&(o=new OM(r.servers,r),EQ(e)),RS(e,o),qS(e,o),IS(e,o),r.autoEncrypter){r.autoEncrypter.init(c=>{if(c){n(c);return}o.connect(r,l=>{if(l){o.close(!0),n(l);return}r.encrypter.connectInternalClient(u=>{if(u)return n(u);n(void 0,o)})})});return}o.connect(r,c=>{if(c)return o.close(!0),n(c);n(void 0,o)})}a(pp,"createTopology");function AM(e,t){let r=["mongos","server","db","replset","db_options","server_options","rs_options","mongos_options"],n=["readconcern","compression","autoencryption"],i=["w","wtimeout","j","journal","fsync","writeconcern"];for(let o in t)i.indexOf(o.toLowerCase())===-1&&(n.indexOf(o.toLowerCase())!==-1?e[o]=t[o]:r.indexOf(o.toLowerCase())!==-1?e=fp(e,t[o],!1):t[o]&&typeof t[o]=="object"&&!Buffer.isBuffer(t[o])&&!Array.isArray(t[o])?e=fp(e,t[o],!0):e[o]=t[o]);let s=CM.fromOptions(t);return s&&(e.writeConcern=Object.assign({},e.writeConcern,s)),e}a(AM,"createUnifiedOptions");function NM(e,t,r,n){n=Object.assign({},n);let i=n.authSource||n.authdb||n.dbName,s=n.authMechanism||"DEFAULT",o=s.toUpperCase(),c=n.authMechanismProperties;if(!fQ.has(o))throw AS.create({message:`authentication mechanism ${s} not supported', options.authMechanism`,driver:!0});return new rQ({mechanism:pQ[o],mechanismProperties:c,source:i,username:t,password:r})}a(NM,"generateCredentials");function OQ(e){return fp(AM({},e),e,!1)}a(OQ,"legacyTransformUrlOptions");function fp(e,t,r){for(let n in t)t[n]&&typeof t[n]=="object"&&r?e=fp(e,t[n],r):e[n]=t[n];return e}a(fp,"mergeOptions");function qS(e,t){["commandStarted","commandSucceeded","commandFailed","serverOpening","serverClosed","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","topologyOpening","topologyClosed","topologyDescriptionChanged","joined","left","ping","ha"].concat(cQ).forEach(n=>{t.on(n,(i,s)=>{e.emit(n,i,s)})})}a(qS,"relayEvents");function TQ(e,t){for(let r=0;r<t.length;r++)e.emit(t[r].event,t[r].object1,t[r].object2)}a(TQ,"replayEvents");function CQ(e){let t=Object.assign({servers:e.hosts},e.options);for(let s in t){let o=mQ[s];o&&(t[o]=t[s])}let r=e.auth&&e.auth.username,n=e.options&&e.options.authMechanism;(r||n)&&(t.auth=Object.assign({},e.auth),t.auth.db&&(t.authSource=t.authSource||t.auth.db),t.auth.username&&(t.auth.user=t.auth.username)),e.defaultDatabase&&(t.dbName=e.defaultDatabase),t.maxPoolSize&&(t.poolSize=t.maxPoolSize),t.readConcernLevel&&(t.readConcern=new iQ(t.readConcernLevel)),t.wTimeoutMS&&(t.wtimeout=t.wTimeoutMS,t.wTimeoutMS=void 0),e.srvHost&&(t.srvHost=e.srvHost);let i=["w","wtimeout","j","journal","fsync"];for(let s of i)t[s]!==void 0&&(t.writeConcern===void 0&&(t.writeConcern={}),t.writeConcern[s]=t[s],t[s]=void 0);return t}a(CQ,"transformUrlOptions");function RM(e,t){if(t=Object.assign({},{createServers:!0},t),(typeof e.readPreference=="string"||typeof e.read_preference=="string")&&(e.readPreference=new NS(e.readPreference||e.read_preference)),e.readPreference&&(e.readPreferenceTags||e.read_preference_tags)&&(e.readPreference.tags=e.readPreferenceTags||e.read_preference_tags),e.maxStalenessSeconds&&(e.readPreference.maxStalenessSeconds=e.maxStalenessSeconds),e.socketTimeoutMS==null&&(e.socketTimeoutMS=0),e.connectTimeoutMS==null&&(e.connectTimeoutMS=1e4),!!t.createServers)return e.servers.map(r=>r.domain_socket?new TS(r.domain_socket,27017,e):new TS(r.host,r.port,e))}a(RM,"translateOptions");IM.exports={validOptions:hQ,connect:xQ}});var Fs=y((oce,DM)=>{"use strict";var _Q=Xl(),AQ=Sa(),MM=require("events").EventEmitter,NQ=require("util").inherits,dp=I().MongoError,PS=I().ValidServerApiVersions,PM=require("util").deprecate,RQ=_r(),IQ=b().MongoDBNamespace,qM=$e(),BM=b().maybePromise,qQ=hS(),MQ=MS().connect,PQ=MS().validOptions;function Ye(e,t){if(t=t||{},!(this instanceof Ye))return new Ye(e,t);if(MM.call(this),t.autoEncryption&&wS(),t.serverApi){let r=typeof t.serverApi=="string"?{version:t.serverApi}:t.serverApi,n=r&&r.version;if(!n)throw new dp(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${PS.join('", "')}"]`);if(!PS.some(i=>i===n))throw new dp(`Invalid server API version=${n}; must be in the following enum: ["${PS.join('", "')}"]`);t.serverApi=r}this.s={url:e,options:t,promiseLibrary:t&&t.promiseLibrary||Promise,dbCache:new Map,sessions:new Set,writeConcern:RQ.fromOptions(t),readPreference:qM.fromOptions(t)||qM.primary,namespace:new IQ("admin")}}a(Ye,"MongoClient");NQ(Ye,MM);Object.defineProperty(Ye.prototype,"writeConcern",{enumerable:!0,get:function(){return this.s.writeConcern}});Object.defineProperty(Ye.prototype,"readPreference",{enumerable:!0,get:function(){return this.s.readPreference}});Ye.prototype.connect=function(e){if(typeof e=="string")throw new TypeError("`connect` only accepts a callback");let t=this;return BM(this,e,r=>{let n=PQ(t.s.options);if(n)return r(n);MQ(t,t.s.url,t.s.options,i=>{if(i)return r(i);r(null,t)})})};Ye.prototype.logout=PM(function(e,t){typeof e=="function"&&(t=e,e={}),typeof t=="function"&&t(null,!0)},"Multiple authentication is prohibited on a connected client, please only authenticate once per MongoClient");Ye.prototype.close=function(e,t){typeof e=="function"&&(t=e,e=!1);let r=this;return BM(this,t,n=>{let i=a(s=>{if(r.emit("close",r),!(r.topology instanceof qQ))for(let o of r.s.dbCache)o[1].emit("close",r);r.removeAllListeners("close"),n(s)},"completeClose");if(r.topology==null){i();return}r.topology.close(e,s=>{let o=r.topology.s.options.encrypter;if(o)return o.close(r,e,c=>{i(s||c)});i(s)})})};Ye.prototype.db=function(e,t){t=t||{},e||(e=this.s.options.dbName);let r=Object.assign({},this.s.options,t);if(this.s.dbCache.has(e)&&r.returnNonCachedInstance!==!0)return this.s.dbCache.get(e);if(r.promiseLibrary=this.s.promiseLibrary,!this.topology)throw new dp("MongoClient must be connected before calling MongoClient.prototype.db");let n=new AQ(e,this.topology,r);return this.s.dbCache.set(e,n),n};Ye.prototype.isConnected=PM(function(e){return e=e||{},this.topology?this.topology.isConnected(e):!1},"isConnected is deprecated and will be removed in the next major version");Ye.connect=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);return r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift():null,t=t||{},new Ye(e,t).connect(r)};Ye.prototype.startSession=function(e){if(e=Object.assign({explicit:!0},e),!this.topology)throw new dp("Must connect to a server before calling this method");return this.topology.startSession(e,this.s.options)};Ye.prototype.withSession=function(e,t){typeof e=="function"&&(t=e,e=void 0);let r=this.startSession(e),n=a((i,s,o)=>{if(n=a(()=>{throw new ReferenceError("cleanupHandler was called too many times")},"cleanupHandler"),o=Object.assign({throw:!0},o),r.endSession(),i){if(o.throw)throw i;return Promise.reject(i)}},"cleanupHandler");try{let i=t(r);return Promise.resolve(i).then(s=>n(null,s)).catch(s=>n(s,null,{throw:!0}))}catch(i){return n(i,null,{throw:!1})}};Ye.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new _Q(this,e,t)};Ye.prototype.getLogger=function(){return this.s.options.logger};DM.exports=Ye});var BS=y((cce,LM)=>{"use strict";var hp=I().BSON.Binary,BQ=I().BSON.ObjectID,mp=pt().Buffer,It=a(function(e,t,r){if(!(this instanceof It))return new It(e,t);this.file=e;var n=t??{};if(this.writeConcern=r||{w:1},this.objectId=n._id==null?new BQ:n._id,this.chunkNumber=n.n==null?0:n.n,this.data=new hp,typeof n.data=="string"){var i=mp.alloc(n.data.length);i.write(n.data,0,n.data.length,"binary"),this.data=new hp(i)}else if(Array.isArray(n.data)){i=mp.alloc(n.data.length);var s=n.data.join("");i.write(s,0,s.length,"binary"),this.data=new hp(i)}else if(n.data&&n.data._bsontype==="Binary")this.data=n.data;else if(!mp.isBuffer(n.data)&&n.data!=null)throw Error("Illegal chunk format");this.internalPosition=0},"Chunk");It.prototype.write=function(e,t){return this.data.write(e,this.internalPosition,e.length,"binary"),this.internalPosition=this.data.length(),t!=null?t(null,this):this};It.prototype.read=function(e){if(e=e==null||e===0?this.length():e,this.length()-this.internalPosition+1>=e){var t=this.data.read(this.internalPosition,e);return this.internalPosition=this.internalPosition+e,t}else return""};It.prototype.readSlice=function(e){if(this.length()-this.internalPosition>=e){var t=null;return this.data.buffer!=null?t=this.data.buffer.slice(this.internalPosition,this.internalPosition+e):(t=mp.alloc(e),e=this.data.readInto(t,this.internalPosition)),this.internalPosition=this.internalPosition+e,t}else return null};It.prototype.eof=function(){return this.internalPosition===this.length()};It.prototype.getc=function(){return this.read(1)};It.prototype.rewind=function(){this.internalPosition=0,this.data=new hp};It.prototype.save=function(e,t){var r=this;typeof e=="function"&&(t=e,e={}),r.file.chunkCollection(function(n,i){if(n)return t(n);var s={upsert:!0};for(var o in e)s[o]=e[o];for(o in r.writeConcern)s[o]=r.writeConcern[o];r.data.length()>0?r.buildMongoObject(function(c){var l={forceServerObjectId:!0};for(var u in r.writeConcern)l[u]=r.writeConcern[u];i.replaceOne({_id:r.objectId},c,s,function(p){t(p,r)})}):t(null,r)})};It.prototype.buildMongoObject=function(e){var t={files_id:this.file.fileId,n:this.chunkNumber,data:this.data};this.objectId!=null&&(t._id=this.objectId),e(t)};It.prototype.length=function(){return this.data.length()};Object.defineProperty(It.prototype,"position",{enumerable:!0,get:function(){return this.internalPosition},set:function(e){this.internalPosition=e}});It.DEFAULT_CHUNK_SIZE=1024*255;LM.exports=It});var zM=y((lce,WM)=>{"use strict";var Ft=BS(),LS=I().BSON.ObjectID,jS=I().ReadPreference,vp=pt().Buffer,yp=require("fs"),US=require("util").format,DQ=require("util"),Gr=I().MongoError,LQ=DQ.inherits,FM=require("stream").Duplex,jQ=b().shallowClone,at=b().executeLegacyOperation,UQ=require("util").deprecate,kQ=0,Ta=1,FQ=UQ(()=>{},"GridStore is deprecated, and will be removed in a future version. Please use GridFSBucket instead"),Z=a(function e(t,r,n,i,s){if(FQ(),!(this instanceof e))return new e(t,r,n,i,s);this.db=t,typeof s>"u"&&(s={}),typeof i>"u"?(i=n,n=void 0):typeof i=="object"&&(s=i,i=n,n=void 0),r&&r._bsontype==="ObjectID"?(this.referenceBy=Ta,this.fileId=r,this.filename=n):typeof n>"u"?(this.referenceBy=kQ,this.filename=r,i.indexOf("w")!=null&&(this.fileId=new LS)):(this.referenceBy=Ta,this.fileId=r,this.filename=n),this.mode=i??"r",this.options=s||{},this.isOpen=!1,this.root=this.options.root==null?e.DEFAULT_ROOT_COLLECTION:this.options.root,this.position=0,this.readPreference=this.options.readPreference||t.options.readPreference||jS.primary,this.writeConcern=kS(t,this.options),this.internalChunkSize=this.options.chunkSize==null?Ft.DEFAULT_CHUNK_SIZE:this.options.chunkSize;var o=this.options.promiseLibrary||Promise;this.promiseLibrary=o,Object.defineProperty(this,"chunkSize",{enumerable:!0,get:function(){return this.internalChunkSize},set:function(c){this.mode[0]==="w"&&this.position===0&&this.uploadDate==null?this.internalChunkSize=c:this.internalChunkSize=this.internalChunkSize}}),Object.defineProperty(this,"md5",{enumerable:!0,get:function(){return this.internalMd5}}),Object.defineProperty(this,"chunkNumber",{enumerable:!0,get:function(){return this.currentChunk&&this.currentChunk.chunkNumber?this.currentChunk.chunkNumber:null}})},"GridStore");Z.prototype.open=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},this.mode!=="w"&&this.mode!=="w+"&&this.mode!=="r")throw Gr.create({message:"Illegal mode "+this.mode,driver:!0});return at(this.db.s.topology,WQ,[this,e,t],{skipSessions:!0})};var WQ=a(function(e,t,r){var n=kS(e.db,e.options);if(e.mode==="w"||e.mode==="w+"){var i=e.collection();i.ensureIndex([["filename",1]],n,function(){var s=e.chunkCollection(),o=jQ(n);o.unique=!0,s.ensureIndex([["files_id",1],["n",1]],o,function(){jM(e,n,function(c,l){if(c)return r(c);e.isOpen=!0,r(c,l)})})})}else jM(e,n,function(s,o){if(s)return r(s);e.isOpen=!0,r(s,o)})},"open");Z.prototype.eof=function(){return this.position===this.length};Z.prototype.getc=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},at(this.db.s.topology,zQ,[this,e,t],{skipSessions:!0})};var zQ=a(function(e,t,r){e.eof()?r(null,null):e.currentChunk.eof()?zs(e,e.currentChunk.chunkNumber+1,function(n,i){e.currentChunk=i,e.position=e.position+1,r(n,e.currentChunk.getc())}):(e.position=e.position+1,r(null,e.currentChunk.getc()))},"getc");Z.prototype.puts=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n=e.match(/\n$/)==null?e+`
`:e;return at(this.db.s.topology,this.write.bind(this),[n,t,r],{skipSessions:!0})};Z.prototype.stream=function(){return new Yr(this)};Z.prototype.write=a(function(t,r,n,i){return typeof n=="function"&&(i=n,n={}),n=n||{},at(this.db.s.topology,rZ,[this,t,r,n,i],{skipSessions:!0})},"write");Z.prototype.destroy=a(function(){this.writable&&(this.readable=!1,this.writable&&(this.writable=!1,this._q.length=0,this.emit("close")))},"destroy");Z.prototype.writeFile=function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},at(this.db.s.topology,$Q,[this,e,t,r],{skipSessions:!0})};var $Q=a(function(e,t,r,n){if(typeof t=="string"){yp.open(t,"r",function(i,s){if(i)return n(i);e.writeFile(s,n)});return}e.open(function(i,s){if(i)return n(i,s);yp.fstat(t,function(o,c){if(o)return n(o,s);var l=0,u=0,p=a(function(){var d=vp.alloc(s.chunkSize);yp.read(t,d,0,d.length,l,function(f,h,m){if(f)return n(f,s);l=l+h;var v=new Ft(s,{n:u++},s.writeConcern);v.write(m.slice(0,h),function(x,w){if(x)return n(x,s);w.save({},function(C){if(C)return n(C,s);if(s.position=s.position+h,s.currentChunk=w,l>=c.size)yp.close(t,function(g){if(g)return n(g);s.close(function(T){return n(T||null,s)})});else return process.nextTick(p)})})})},"writeChunk");process.nextTick(p)})})},"writeFile");Z.prototype.close=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},at(this.db.s.topology,HQ,[this,e,t],{skipSessions:!0})};var HQ=a(function(e,t,r){e.mode[0]==="w"?(t=Object.assign({},e.writeConcern,t),e.currentChunk!=null&&e.currentChunk.position>0?e.currentChunk.save({},function(n){if(n&&typeof r=="function")return r(n);e.collection(function(i,s){if(i&&typeof r=="function")return r(i);e.uploadDate!=null?DS(e,function(o,c){if(o){if(typeof r=="function")return r(o);throw o}s.save(c,t,function(l){typeof r=="function"&&r(l,c)})}):(e.uploadDate=new Date,DS(e,function(o,c){if(o){if(typeof r=="function")return r(o);throw o}s.save(c,t,function(l){typeof r=="function"&&r(l,c)})}))})}):e.collection(function(n,i){if(n&&typeof r=="function")return r(n);e.uploadDate=new Date,DS(e,function(s,o){if(s){if(typeof r=="function")return r(s);throw s}i.save(o,t,function(c){typeof r=="function"&&r(c,o)})})})):e.mode[0]==="r"?typeof r=="function"&&r(null,null):typeof r=="function"&&r(Gr.create({message:US("Illegal mode %s",e.mode),driver:!0}))},"close");Z.prototype.chunkCollection=function(e){return typeof e=="function"?this.db.collection(this.root+".chunks",e):this.db.collection(this.root+".chunks")};Z.prototype.unlink=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},at(this.db.s.topology,VQ,[this,e,t],{skipSessions:!0})};var VQ=a(function(e,t,r){Ca(e,function(n){if(n!==null)return n.message="at deleteChunks: "+n.message,r(n);e.collection(function(i,s){if(i!==null)return i.message="at collection: "+i.message,r(i);s.remove({_id:e.fileId},e.writeConcern,function(o){r(o,e)})})})},"unlink");Z.prototype.collection=function(e){return typeof e=="function"&&this.db.collection(this.root+".files",e),this.db.collection(this.root+".files")};Z.prototype.readlines=function(e,t,r){var n=Array.prototype.slice.call(arguments,0);return r=typeof n[n.length-1]=="function"?n.pop():void 0,e=n.length?n.shift():`
`,e=e||`
`,t=n.length?n.shift():{},at(this.db.s.topology,KQ,[this,e,t,r],{skipSessions:!0})};var KQ=a(function(e,t,r,n){e.read(function(i,s){if(i)return n(i);var o=s.toString().split(t);o=o.length>0?o.splice(0,o.length-1):[];for(var c=0;c<o.length;c++)o[c]=o[c]+t;n(null,o)})},"readlines");Z.prototype.rewind=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},at(this.db.s.topology,GQ,[this,e,t],{skipSessions:!0})};var GQ=a(function(e,t,r){e.currentChunk.chunkNumber!==0?e.mode[0]==="w"?Ca(e,function(n){if(n)return r(n);e.currentChunk=new Ft(e,{n:0},e.writeConcern),e.position=0,r(null,e)}):e.currentChunk(0,function(n,i){if(n)return r(n);e.currentChunk=i,e.currentChunk.rewind(),e.position=0,r(null,e)}):(e.currentChunk.rewind(),e.position=0,r(null,e))},"rewind");Z.prototype.read=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,0);return n=typeof i[i.length-1]=="function"?i.pop():void 0,e=i.length?i.shift():null,t=i.length?i.shift():null,r=i.length?i.shift():{},at(this.db.s.topology,YQ,[this,e,t,r,n],{skipSessions:!0})};var YQ=a(function(e,t,r,n,i){var s=t??e.length-e.position,o=r??vp.alloc(s);if(o._index=r!=null&&r._index!=null?r._index:0,e.currentChunk.length()-e.currentChunk.position+o._index>=s){var c=e.currentChunk.readSlice(s-o._index);return c.copy(o,o._index),e.position=e.position+o.length,s===0&&o.length===0?i(Gr.create({message:"File does not exist",driver:!0}),null):i(null,o)}c=e.currentChunk.readSlice(e.currentChunk.length()-e.currentChunk.position),c.copy(o,o._index),o._index+=c.length,zs(e,e.currentChunk.chunkNumber+1,function(l,u){if(l)return i(l);u.length()>0?(e.currentChunk=u,e.read(t,o,i)):o._index>0?i(null,o):i(Gr.create({message:"no chunks found for file, possibly corrupt",driver:!0}),null)})},"read");Z.prototype.tell=function(e){var t=this;return typeof e=="function"?e(null,this.position):new t.promiseLibrary(function(r){r(t.position)})};Z.prototype.seek=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift():null,r=i.length?i.shift():{},at(this.db.s.topology,JQ,[this,e,t,r,n],{skipSessions:!0})};var JQ=a(function(e,t,r,n,i){if(e.mode!=="r")return i(Gr.create({message:"seek is only supported for mode r",driver:!0}));var s=r??Z.IO_SEEK_SET,o=t,c=0;s===Z.IO_SEEK_CUR?c=e.position+o:s===Z.IO_SEEK_END?c=e.length+o:c=o;var l=Math.floor(c/e.chunkSize),u=a(function(){zs(e,l,function(p,d){if(p)return i(p,null);if(d==null)return i(new Error("no chunk found"));e.currentChunk=d,e.position=c,e.currentChunk.position=e.position%e.chunkSize,i(p,e)})},"seekChunk");u()},"seek"),jM=a(function(e,t,r){var n=e.collection(),i=e.referenceBy===Ta?{_id:e.fileId}:{filename:e.filename};i=e.fileId==null&&e.filename==null?null:i,t.readPreference=e.readPreference,i!=null?n.findOne(i,t,function(o,c){if(o)return s(o);if(c!=null)e.fileId=c._id,e.filename=e.mode==="r"||e.filename===void 0?c.filename:e.filename,e.contentType=c.contentType,e.internalChunkSize=c.chunkSize,e.uploadDate=c.uploadDate,e.aliases=c.aliases,e.length=c.length,e.metadata=c.metadata,e.internalMd5=c.md5;else if(e.mode!=="r")e.fileId=e.fileId==null?new LS:e.fileId,e.contentType=Z.DEFAULT_CONTENT_TYPE,e.internalChunkSize=e.internalChunkSize==null?Ft.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0;else{e.length=0;var l=e.fileId._bsontype==="ObjectID"?e.fileId.toHexString():e.fileId;return s(Gr.create({message:US("file with id %s not opened for writing",e.referenceBy===Ta?l:e.filename),driver:!0}),e)}e.mode==="r"?zs(e,0,t,function(u,p){if(u)return s(u);e.currentChunk=p,e.position=0,r(null,e)}):e.mode==="w"&&c?Ca(e,t,function(u){if(u)return s(u);e.currentChunk=new Ft(e,{n:0},e.writeConcern),e.contentType=e.options.content_type==null?e.contentType:e.options.content_type,e.internalChunkSize=e.options.chunk_size==null?e.internalChunkSize:e.options.chunk_size,e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=0,r(null,e)}):e.mode==="w"?(e.currentChunk=new Ft(e,{n:0},e.writeConcern),e.contentType=e.options.content_type==null?e.contentType:e.options.content_type,e.internalChunkSize=e.options.chunk_size==null?e.internalChunkSize:e.options.chunk_size,e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=0,r(null,e)):e.mode==="w+"&&zs(e,kM(e),t,function(u,p){if(u)return s(u);e.currentChunk=p??new Ft(e,{n:0},e.writeConcern),e.currentChunk.position=e.currentChunk.data.length(),e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=e.length,r(null,e)})}):(e.fileId=e.fileId==null?new LS:e.fileId,e.contentType=Z.DEFAULT_CONTENT_TYPE,e.internalChunkSize=e.internalChunkSize==null?Ft.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0,e.mode==="w"?Ca(e,t,function(o){if(o)return s(o);e.currentChunk=new Ft(e,{n:0},e.writeConcern),e.contentType=e.options.content_type==null?e.contentType:e.options.content_type,e.internalChunkSize=e.options.chunk_size==null?e.internalChunkSize:e.options.chunk_size,e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=0,r(null,e)}):e.mode==="w+"&&zs(e,kM(e),t,function(o,c){if(o)return s(o);e.currentChunk=c??new Ft(e,{n:0},e.writeConcern),e.currentChunk.position=e.currentChunk.data.length(),e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=e.length,r(null,e)}));function s(o){s.err||r(s.err=o)}a(s,"error")},"_open"),UM=a(function(e,t,r,n){typeof r=="function"&&(n=r,r=null);var i=typeof r=="boolean"?r:!1;if(e.mode!=="w")n(Gr.create({message:US("file with id %s not opened for writing",e.referenceBy===Ta?e.referenceBy:e.filename),driver:!0}),null);else if(e.currentChunk.position+t.length>=e.chunkSize){for(var s=e.currentChunk.chunkNumber,o=e.chunkSize-e.currentChunk.position,c=t.slice(0,o),l=t.slice(o),u=[e.currentChunk.write(c)];l.length>=e.chunkSize;){var p=new Ft(e,{n:s+1},e.writeConcern);c=l.slice(0,e.chunkSize),l=l.slice(e.chunkSize),s=s+1,p.write(c),u.push(p)}e.currentChunk=new Ft(e,{n:s+1},e.writeConcern),l.length>0&&e.currentChunk.write(l),e.position=e.position+t.length;for(var d=u.length,f=0;f<u.length;f++)u[f].save({},function(h){if(h)return n(h);if(d=d-1,d<=0)return i?e.close(function(m){n(m,e)}):n(null,e)})}else return e.position=e.position+t.length,e.currentChunk.write(t),i?e.close(function(h){n(h,e)}):n(null,e)},"writeBuffer"),DS=a(function(e,t){var r={_id:e.fileId,filename:e.filename,contentType:e.contentType,length:e.position?e.position:0,chunkSize:e.chunkSize,uploadDate:e.uploadDate,aliases:e.aliases,metadata:e.metadata},n={filemd5:e.fileId,root:e.root};e.db.command(n,function(i,s){if(i)return t(i);r.md5=s.md5,t(null,r)})},"buildMongoObject"),zs=a(function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||e.writeConcern,r.readPreference=e.readPreference,e.chunkCollection().findOne({files_id:e.fileId,n:t},r,function(i,s){if(i)return n(i);var o=s??{};n(null,new Ft(e,o,e.writeConcern))})},"nthChunk"),kM=a(function(e){return Math.floor((e.length?e.length-1:0)/e.chunkSize)},"lastChunkNumber"),Ca=a(function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||e.writeConcern,e.fileId!=null?e.chunkCollection().remove({files_id:e.fileId},t,function(n){if(n)return r(n,!1);r(null,!0)}):r(null,!0)},"deleteChunks");Z.DEFAULT_ROOT_COLLECTION="fs";Z.DEFAULT_CONTENT_TYPE="binary/octet-stream";Z.IO_SEEK_SET=0;Z.IO_SEEK_CUR=1;Z.IO_SEEK_END=2;Z.exist=function(e,t,r,n,i){var s=Array.prototype.slice.call(arguments,2);return i=typeof s[s.length-1]=="function"?s.pop():void 0,r=s.length?s.shift():null,n=s.length?s.shift():{},n=n||{},at(e.s.topology,XQ,[e,t,r,n,i],{skipSessions:!0})};var XQ=a(function(e,t,r,n,i){var s=n.readPreference||jS.PRIMARY,o=r??Z.DEFAULT_ROOT_COLLECTION;e.collection(o+".files",function(c,l){if(c)return i(c);var u=typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]"?{filename:t}:{_id:t};t!=null&&typeof t=="object"&&Object.prototype.toString.call(t)!=="[object RegExp]"&&(u=t),l.findOne(u,{readPreference:s},function(p,d){if(p)return i(p);i(null,d!=null)})})},"exists");Z.list=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift():null,r=i.length?i.shift():{},r=r||{},at(e.s.topology,QQ,[e,t,r,n],{skipSessions:!0})};var QQ=a(function(e,t,r,n){t!=null&&typeof t=="object"&&(r=t,t=null);var i=r.readPreference||jS.primary,s=r.id!=null?r.id:!1,o=t??Z.DEFAULT_ROOT_COLLECTION,c=[];e.collection(o+".files",function(l,u){if(l)return n(l);u.find({},{readPreference:i},function(p,d){if(p)return n(p);d.each(function(f,h){h!=null?c.push(s?h._id:h.filename):n(f,c)})})})},"list");Z.read=function(e,t,r,n,i,s){var o=Array.prototype.slice.call(arguments,2);return s=typeof o[o.length-1]=="function"?o.pop():void 0,r=o.length?o.shift():null,n=o.length?o.shift():null,i=o.length?o.shift():null,i=i||{},at(e.s.topology,ZQ,[e,t,r,n,i,s],{skipSessions:!0})};var ZQ=a(function(e,t,r,n,i,s){new Z(e,t,"r",i).open(function(o,c){if(o)return s(o);if(n&&n>=c.length)return s("offset larger than size of file",null);if(r&&r>c.length)return s("length is larger than the size of the file",null);if(n&&r&&n+r>c.length)return s("offset and length is larger than the size of the file",null);n!=null?c.seek(n,function(l,u){if(l)return s(l);u.read(r,s)}):c.read(r,s)})},"readStatic");Z.readlines=function(e,t,r,n,i){var s=Array.prototype.slice.call(arguments,2);return i=typeof s[s.length-1]=="function"?s.pop():void 0,r=s.length?s.shift():null,n=s.length?s.shift():null,n=n||{},at(e.s.topology,eZ,[e,t,r,n,i],{skipSessions:!0})};var eZ=a(function(e,t,r,n,i){var s=r??`
`;new Z(e,t,"r",n).open(function(o,c){if(o)return i(o);c.readlines(s,i)})},"readlinesStatic");Z.unlink=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,2);return n=typeof i[i.length-1]=="function"?i.pop():void 0,r=i.length?i.shift():{},r=r||{},at(e.s.topology,tZ,[this,e,t,r,n],{skipSessions:!0})};var tZ=a(function(e,t,r,n,i){var s=kS(t,n);if(r.constructor===Array)for(var o=0,c=0;c<r.length;c++)++o,Z.unlink(t,r[c],n,function(){--o===0&&i(null,e)});else new Z(t,r,"w",n).open(function(l,u){if(l)return i(l);Ca(u,function(p){if(p)return i(p);u.collection(function(d,f){if(d)return i(d);f.remove({_id:u.fileId},s,function(h){i(h,e)})})})})},"unlinkStatic"),rZ=a(function(e,t,r,n,i){return vp.isBuffer(t)?UM(e,t,r,i):UM(e,vp.from(t,"binary"),r,i)},"_writeNormal"),gp=a(function(e){let t=Object.assign(e,e.writeConcern);var r={};return t.w!=null&&(r.w=t.w),t.journal===!0&&(r.j=t.journal),t.j===!0&&(r.j=t.j),t.fsync===!0&&(r.fsync=t.fsync),t.wtimeout!=null&&(r.wtimeout=t.wtimeout),r},"_setWriteConcernHash"),kS=a(function(e,t){var r={w:1};if(t=t||{},t.writeConcern!=null||t.w!=null||typeof t.j=="boolean"||typeof t.journal=="boolean"||typeof t.fsync=="boolean"?r=gp(t):t.safe!=null&&typeof t.safe=="object"?r=gp(t.safe):typeof t.safe=="boolean"?r={w:t.safe?1:0}:e.options.writeConcern!=null||e.options.w!=null||typeof e.options.j=="boolean"||typeof e.options.journal=="boolean"||typeof e.options.fsync=="boolean"?r=gp(e.options):e.safe&&(e.safe.w!=null||typeof e.safe.j=="boolean"||typeof e.safe.journal=="boolean"||typeof e.safe.fsync=="boolean")?r=gp(e.safe):typeof e.safe=="boolean"&&(r={w:e.safe?1:0}),r.w<1&&(r.journal===!0||r.j===!0||r.fsync===!0))throw Gr.create({message:"No acknowledgement using w < 1 cannot be combined with journal:true or fsync:true",driver:!0});return r},"_getWriteConcern"),Yr=a(function(e){FM.call(this),this.gs=e,this.endCalled=!1,this.totalBytesToRead=this.gs.length-this.gs.position,this.seekPosition=this.gs.position},"GridStoreStream");LQ(Yr,FM);Yr.prototype._pipe=Yr.prototype.pipe;Yr.prototype.pipe=function(e){var t=this;return t.gs.isOpen?(t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])):t.gs.open(function(r){if(r)return t.emit("error",r);t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])}),e};Yr.prototype._read=function(){var e=this,t=a(function(){e.gs.read(r,function(n,i){if(n&&!e.endCalled)return e.emit("error",n);if(e.endCalled||i==null)return e.push(null);i.length<=e.totalBytesToRead?(e.totalBytesToRead=e.totalBytesToRead-i.length,e.push(i)):i.length>e.totalBytesToRead&&(e.totalBytesToRead=e.totalBytesToRead-i._index,e.push(i.slice(0,i._index))),e.totalBytesToRead<=0&&(e.endCalled=!0)})},"read"),r=e.gs.length<e.gs.chunkSize?e.gs.length-e.seekPosition:e.gs.chunkSize;e.gs.isOpen?t():e.gs.open(function(n){if(e.totalBytesToRead=e.gs.length-e.gs.position,n)return e.emit("error",n);t()})};Yr.prototype.destroy=function(){this.pause(),this.endCalled=!0,this.gs.close(),this.emit("end")};Yr.prototype.write=function(e){var t=this;return t.endCalled?t.emit("error",Gr.create({message:"attempting to write to stream after end called",driver:!0})):t.gs.isOpen?(t.gs.write(e,function(){t.emit("drain")}),!0):(t.gs.open(function(){t.gs.isOpen=!0,t.gs.write(e,function(){process.nextTick(function(){t.emit("drain")})})}),!1)};Yr.prototype.end=function(e,t,r){var n=this,i=Array.prototype.slice.call(arguments,0);r=typeof i[i.length-1]=="function"?i.pop():void 0,e=i.length?i.shift():null,t=i.length?i.shift():null,n.endCalled=!0,e&&n.gs.write(e,function(){n.gs.close(function(){typeof r=="function"&&r(),n.emit("end")})}),n.gs.close(function(){typeof r=="function"&&r(),n.emit("end")})};WM.exports=Z});var KM=y((fce,VM)=>{"use strict";var $M=require("stream"),nZ=require("util");VM.exports=$s;function $s(e,t,r,n,i){this.s={bytesRead:0,chunks:e,cursor:null,expected:0,files:t,filter:n,init:!1,expectedEnd:0,file:null,options:i,readPreference:r},$M.Readable.call(this)}a($s,"GridFSBucketReadStream");nZ.inherits($s,$M.Readable);$s.prototype._read=function(){var e=this;this.destroyed||oZ(e,function(){iZ(e)})};$s.prototype.start=function(e){return HM(this),this.s.options.start=e,this};$s.prototype.end=function(e){return HM(this),this.s.options.end=e,this};$s.prototype.abort=function(e){var t=this;this.push(null),this.destroyed=!0,this.s.cursor?this.s.cursor.close(function(r){t.emit("close"),e&&e(r)}):(this.s.init||t.emit("close"),e&&e())};function HM(e){if(e.s.init)throw new Error("You cannot change options after the stream has enteredflowing mode!")}a(HM,"throwIfInitialized");function iZ(e){e.destroyed||e.s.cursor.next(function(t,r){if(e.destroyed)return;if(t)return Er(e,t);if(!r){e.push(null),process.nextTick(()=>{e.s.cursor.close(function(f){if(f){Er(e,f);return}e.emit("close")})});return}var n=e.s.file.length-e.s.bytesRead,i=e.s.expected++,s=Math.min(e.s.file.chunkSize,n);if(r.n>i){var o="ChunkIsMissing: Got unexpected n: "+r.n+", expected: "+i;return Er(e,new Error(o))}if(r.n<i)return o="ExtraChunk: Got unexpected n: "+r.n+", expected: "+i,Er(e,new Error(o));var c=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(c.length!==s)return n<=0?(o="ExtraChunk: Got unexpected n: "+r.n,Er(e,new Error(o))):(o="ChunkIsWrongSize: Got unexpected length: "+c.length+", expected: "+s,Er(e,new Error(o)));if(e.s.bytesRead+=c.length,c.length===0)return e.push(null);var l=null,u=null;e.s.bytesToSkip!=null&&(l=e.s.bytesToSkip,e.s.bytesToSkip=0);let p=i===e.s.expectedEnd-1,d=e.s.options.end-e.s.bytesToSkip;p&&e.s.bytesToTrim!=null?u=e.s.file.chunkSize-e.s.bytesToTrim:e.s.options.end&&d<r.data.length()&&(u=d),(l!=null||u!=null)&&(c=c.slice(l||0,u||c.length)),e.push(c)})}a(iZ,"doRead");function sZ(e){var t={};e.s.readPreference&&(t.readPreference=e.s.readPreference),e.s.options&&e.s.options.sort&&(t.sort=e.s.options.sort),e.s.options&&e.s.options.skip&&(t.skip=e.s.options.skip),e.s.files.findOne(e.s.filter,t,function(r,n){if(r)return Er(e,r);if(!n){var i=e.s.filter._id?e.s.filter._id.toString():e.s.filter.filename,s="FileNotFound: file "+i+" was not found",o=new Error(s);return o.code="ENOENT",Er(e,o)}if(n.length<=0){e.push(null);return}if(e.destroyed){e.emit("close");return}try{e.s.bytesToSkip=aZ(e,n,e.s.options)}catch(u){return Er(e,u)}var c={files_id:n._id};if(e.s.options&&e.s.options.start!=null){var l=Math.floor(e.s.options.start/n.chunkSize);l>0&&(c.n={$gte:l})}e.s.cursor=e.s.chunks.find(c).sort({n:1}),e.s.readPreference&&e.s.cursor.setReadPreference(e.s.readPreference),e.s.expectedEnd=Math.ceil(n.length/n.chunkSize),e.s.file=n;try{e.s.bytesToTrim=cZ(e,n,e.s.cursor,e.s.options)}catch(u){return Er(e,u)}e.emit("file",n)})}a(sZ,"init");function oZ(e,t){if(e.s.file)return t();e.s.init||(sZ(e),e.s.init=!0),e.once("file",function(){t()})}a(oZ,"waitForFile");function aZ(e,t,r){if(r&&r.start!=null){if(r.start>t.length)throw new Error("Stream start ("+r.start+") must not be more than the length of the file ("+t.length+")");if(r.start<0)throw new Error("Stream start ("+r.start+") must not be negative");if(r.end!=null&&r.end<r.start)throw new Error("Stream start ("+r.start+") must not be greater than stream end ("+r.end+")");return e.s.bytesRead=Math.floor(r.start/t.chunkSize)*t.chunkSize,e.s.expected=Math.floor(r.start/t.chunkSize),r.start-e.s.bytesRead}}a(aZ,"handleStartOption");function cZ(e,t,r,n){if(n&&n.end!=null){if(n.end>t.length)throw new Error("Stream end ("+n.end+") must not be more than the length of the file ("+t.length+")");if(n.start<0)throw new Error("Stream end ("+n.end+") must not be negative");var i=n.start!=null?Math.floor(n.start/t.chunkSize):0;return r.limit(Math.ceil(n.end/t.chunkSize)-i),e.s.expectedEnd=Math.ceil(n.end/t.chunkSize),Math.ceil(n.end/t.chunkSize)*t.chunkSize-n.end}}a(cZ,"handleEndOption");function Er(e,t){e.emit("error",t)}a(Er,"__handleError")});var t1=y((hce,e1)=>{"use strict";var YM=Gn().MONGODB_ERROR_CODES,JM=I(),uZ=require("crypto"),XM=require("stream"),lZ=require("util"),_a=pt().Buffer,pZ=b().deprecateOptions,Na=pZ({name:"GridFSBucketWriteStream",deprecatedOptions:["disableMD5"],optionsIndex:2},function(e,t,r){if(r=r||{},XM.Writable.call(this,r),this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=t,this.files=e.s._filesCollection,this.options=r,this.done=!1,this.id=r.id?r.id:JM.BSON.ObjectId(),this.chunkSizeBytes=this.options.chunkSizeBytes,this.bufToStore=_a.alloc(this.chunkSizeBytes),this.length=0,this.md5=!r.disableMD5&&uZ.createHash("md5"),this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1,promiseLibrary:this.bucket.s.promiseLibrary},!this.bucket.s.calledOpenUploadStream){this.bucket.s.calledOpenUploadStream=!0;var n=this;fZ(this,function(){n.bucket.s.checkedIndexes=!0,n.bucket.emit("index")})}});lZ.inherits(Na,XM.Writable);Na.prototype.write=function(e,t,r){var n=this;return ZM(this,function(){return hZ(n,e,t,r)})};Na.prototype.abort=function(e){if(this.state.streamEnd){var t=new Error("Cannot abort a stream that has already completed");return typeof e=="function"?e(t):this.state.promiseLibrary.reject(t)}if(this.state.aborted)return t=new Error("Cannot call abort() on a stream twice"),typeof e=="function"?e(t):this.state.promiseLibrary.reject(t);this.state.aborted=!0,this.chunks.deleteMany({files_id:this.id},function(r){typeof e=="function"&&e(r)})};Na.prototype.end=function(e,t,r){var n=this;if(typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),!Aa(this,r)){if(this.state.streamEnd=!0,r&&this.once("finish",function(i){r(null,i)}),!e){ZM(this,function(){GM(n)});return}this.write(e,t,function(){GM(n)})}};function zS(e,t,r){if(!e.state.errored){if(e.state.errored=!0,r)return r(t);e.emit("error",t)}}a(zS,"__handleError");function QM(e,t,r){return{_id:JM.BSON.ObjectId(),files_id:e,n:t,data:r}}a(QM,"createChunkDoc");function FS(e,t){e.chunks.listIndexes().toArray(function(r,n){if(r){if(r.code===YM.NamespaceNotFound){var i={files_id:1,n:1};e.chunks.createIndex(i,{background:!1,unique:!0},function(c){if(c)return t(c);t()});return}return t(r)}var s=!1;if(n.forEach(function(c){if(c.key){var l=Object.keys(c.key);l.length===2&&c.key.files_id===1&&c.key.n===1&&(s=!0)}}),s)t();else{i={files_id:1,n:1};var o=Ra(e);o.background=!1,o.unique=!0,e.chunks.createIndex(i,o,function(c){if(c)return t(c);t()})}})}a(FS,"checkChunksIndex");function WS(e,t){if(e.done)return!0;if(e.state.streamEnd&&e.state.outstandingRequests===0&&!e.state.errored){e.done=!0;var r=dZ(e.id,e.length,e.chunkSizeBytes,e.md5&&e.md5.digest("hex"),e.filename,e.options.contentType,e.options.aliases,e.options.metadata);return Aa(e,t)?!1:(e.files.insertOne(r,Ra(e),function(n){if(n)return zS(e,n,t);e.emit("finish",r),e.emit("close")}),!0)}return!1}a(WS,"checkDone");function fZ(e,t){e.files.findOne({},{_id:1},function(r,n){if(r)return t(r);if(n)return t();e.files.listIndexes().toArray(function(i,s){if(i){if(i.code===YM.NamespaceNotFound){var o={filename:1,uploadDate:1};e.files.createIndex(o,{background:!1},function(u){if(u)return t(u);FS(e,t)});return}return t(i)}var c=!1;if(s.forEach(function(u){var p=Object.keys(u.key);p.length===2&&u.key.filename===1&&u.key.uploadDate===1&&(c=!0)}),c)FS(e,t);else{o={filename:1,uploadDate:1};var l=Ra(e);l.background=!1,e.files.createIndex(o,l,function(u){if(u)return t(u);FS(e,t)})}})})}a(fZ,"checkIndexes");function dZ(e,t,r,n,i,s,o,c){var l={_id:e,length:t,chunkSize:r,uploadDate:new Date,filename:i};return n&&(l.md5=n),s&&(l.contentType=s),o&&(l.aliases=o),c&&(l.metadata=c),l}a(dZ,"createFilesDoc");function hZ(e,t,r,n){if(Aa(e,n))return!1;var i=_a.isBuffer(t)?t:_a.from(t,r);if(e.length+=i.length,e.pos+i.length<e.chunkSizeBytes)return i.copy(e.bufToStore,e.pos),e.pos+=i.length,n&&n(),!0;for(var s=i.length,o=e.chunkSizeBytes-e.pos,c=Math.min(o,i.length),l=0;s>0;){var u=i.length-s;if(i.copy(e.bufToStore,e.pos,u,u+c),e.pos+=c,o-=c,o===0){e.md5&&e.md5.update(e.bufToStore);var p=QM(e.id,e.n,_a.from(e.bufToStore));if(++e.state.outstandingRequests,++l,Aa(e,n))return!1;e.chunks.insertOne(p,Ra(e),function(d){if(d)return zS(e,d);--e.state.outstandingRequests,--l,l||(e.emit("drain",p),n&&n(),WS(e))}),o=e.chunkSizeBytes,e.pos=0,++e.n}s-=c,c=Math.min(o,s)}return!1}a(hZ,"doWrite");function Ra(e){var t={};return e.options.writeConcern&&(t.w=e.options.writeConcern.w,t.wtimeout=e.options.writeConcern.wtimeout,t.j=e.options.writeConcern.j),t}a(Ra,"getWriteOptions");function ZM(e,t){return e.bucket.s.checkedIndexes?t(!1):(e.bucket.once("index",function(){t(!0)}),!0)}a(ZM,"waitForIndexes");function GM(e,t){if(e.pos===0)return WS(e,t);++e.state.outstandingRequests;var r=_a.alloc(e.pos);e.bufToStore.copy(r,0,0,e.pos),e.md5&&e.md5.update(r);var n=QM(e.id,e.n,r);if(Aa(e,t))return!1;e.chunks.insertOne(n,Ra(e),function(i){if(i)return zS(e,i);--e.state.outstandingRequests,WS(e)})}a(GM,"writeRemnant");function Aa(e,t){return e.state.aborted?(typeof t=="function"&&t(new Error("this stream has been aborted")),!0):!1}a(Aa,"checkAborted");e1.exports=Na});var a1=y((yce,o1)=>{"use strict";var r1=require("events").EventEmitter,n1=KM(),i1=t1(),HS=b().shallowClone,mZ=b().toError,yZ=require("util"),VS=b().executeLegacyOperation,s1=b().deprecateOptions,$S={bucketName:"fs",chunkSizeBytes:255*1024};o1.exports=ar;function ar(e,t){if(r1.apply(this),this.setMaxListeners(0),t&&typeof t=="object"){t=HS(t);for(var r=Object.keys($S),n=0;n<r.length;++n)t[r[n]]||(t[r[n]]=$S[r[n]])}else t=$S;this.s={db:e,options:t,_chunksCollection:e.collection(t.bucketName+".chunks"),_filesCollection:e.collection(t.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1,promiseLibrary:e.s.promiseLibrary||Promise}}a(ar,"GridFSBucket");yZ.inherits(ar,r1);ar.prototype.openUploadStream=s1({name:"GridFSBucket.openUploadStream",deprecatedOptions:["disableMD5"],optionsIndex:1},function(e,t){return t?t=HS(t):t={},t.chunkSizeBytes||(t.chunkSizeBytes=this.s.options.chunkSizeBytes),new i1(this,e,t)});ar.prototype.openUploadStreamWithId=s1({name:"GridFSBucket.openUploadStreamWithId",deprecatedOptions:["disableMD5"],optionsIndex:2},function(e,t,r){return r?r=HS(r):r={},r.chunkSizeBytes||(r.chunkSizeBytes=this.s.options.chunkSizeBytes),r.id=e,new i1(this,t,r)});ar.prototype.openDownloadStream=function(e,t){var r={_id:e};return t={start:t&&t.start,end:t&&t.end},new n1(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,r,t)};ar.prototype.delete=function(e,t){return VS(this.s.db.s.topology,gZ,[this,e,t],{skipSessions:!0})};function gZ(e,t,r){e.s._filesCollection.deleteOne({_id:t},function(n,i){if(n)return r(n);e.s._chunksCollection.deleteMany({files_id:t},function(s){if(s)return r(s);if(!i.result.n){var o="FileNotFound: no file with id "+t+" found";return r(new Error(o))}r()})})}a(gZ,"_delete");ar.prototype.find=function(e,t){e=e||{},t=t||{};var r=this.s._filesCollection.find(e);return t.batchSize!=null&&r.batchSize(t.batchSize),t.limit!=null&&r.limit(t.limit),t.maxTimeMS!=null&&r.maxTimeMS(t.maxTimeMS),t.noCursorTimeout!=null&&r.addCursorFlag("noCursorTimeout",t.noCursorTimeout),t.skip!=null&&r.skip(t.skip),t.sort!=null&&r.sort(t.sort),r};ar.prototype.openDownloadStreamByName=function(e,t){var r={uploadDate:-1},n=null;t&&t.revision!=null&&(t.revision>=0?(r={uploadDate:1},n=t.revision):n=-t.revision-1);var i={filename:e};return t={sort:r,skip:n,start:t&&t.start,end:t&&t.end},new n1(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,i,t)};ar.prototype.rename=function(e,t,r){return VS(this.s.db.s.topology,vZ,[this,e,t,r],{skipSessions:!0})};function vZ(e,t,r,n){var i={_id:t},s={$set:{filename:r}};e.s._filesCollection.updateOne(i,s,function(o,c){if(o)return n(o);if(!c.result.n)return n(mZ("File with id "+t+" not found"));n()})}a(vZ,"_rename");ar.prototype.drop=function(e){return VS(this.s.db.s.topology,xZ,[this,e],{skipSessions:!0})};ar.prototype.getLogger=function(){return this.s.db.s.logger};function xZ(e,t){e.s._filesCollection.drop(function(r){if(r)return t(r);e.s._chunksCollection.drop(function(n){return n?t(n):t()})})}a(xZ,"_drop")});var ES=y((vce,c1)=>{"use strict";var fe=I(),SZ=KN(),V=Fs().connect;V.MongoError=fe.MongoError;V.MongoNetworkError=fe.MongoNetworkError;V.MongoTimeoutError=fe.MongoTimeoutError;V.MongoServerSelectionError=fe.MongoServerSelectionError;V.MongoParseError=fe.MongoParseError;V.MongoWriteConcernError=fe.MongoWriteConcernError;V.MongoBulkWriteError=Sl().BulkWriteError;V.BulkWriteError=V.MongoBulkWriteError;V.ServerApiVersion=fe.ServerApiVersion;V.Admin=zx();V.MongoClient=Fs();V.Db=Sa();V.Collection=Bs();V.Server=Oa();V.ReplSet=xS();V.Mongos=gS();V.ReadPreference=fe.ReadPreference;V.GridStore=zM();V.Chunk=BS();V.Logger=fe.Logger;V.AggregationCursor=wl();V.CommandCursor=Ol();V.Cursor=Sr();V.GridFSBucket=a1();V.CoreServer=fe.Server;V.CoreConnection=fe.Connection;V.Binary=fe.BSON.Binary;V.Code=fe.BSON.Code;V.Map=fe.BSON.Map;V.DBRef=fe.BSON.DBRef;V.Double=fe.BSON.Double;V.Int32=fe.BSON.Int32;V.Long=fe.BSON.Long;V.MinKey=fe.BSON.MinKey;V.MaxKey=fe.BSON.MaxKey;V.ObjectID=fe.BSON.ObjectID;V.ObjectId=fe.BSON.ObjectID;V.Symbol=fe.BSON.Symbol;V.Timestamp=fe.BSON.Timestamp;V.BSONRegExp=fe.BSON.BSONRegExp;V.Decimal128=fe.BSON.Decimal128;V.connect=V;V.instrument=function(e,t){typeof e=="function"&&(t=e,e={});let r=new SZ;return r.instrument(V.MongoClient,t),r};c1.exports=V});var l1=y((xce,u1)=>{"use strict";var bZ=ES().MongoClient;function wZ(e){return{url:`mongodb://${e.userName}:${e.password}@${e.host}:${e.port}?ssl=true`,options:{sslValidate:!1,useNewUrlParser:!0,useUnifiedTopology:!0}}}a(wZ,"generateConnectionParams");function EZ(e){let t=wZ(e);return bZ.connect(t.url,t.options)}a(EZ,"connect");u1.exports={connect:EZ}});var OZ=ME(),ct=Cc(),TZ=l1(),CZ=1,_Z=2,KS=3,p1=4,AZ=5,NZ=6,f1=7;module.exports={connect:function(e,t,r){t.clear(),t.log("info",e,"Reverse-Engineering connection settings",e.hiddenKeys),TZ.connect(e).then(n=>r(null,n)).catch(n=>(t.log("error",cr(CZ,n),"Connection error"),r({message:n.code===18?"Authentication failed. Please, check connection settings and try again":n.message,stack:n.stack})))},disconnect:function(e,t,r){r()},testConnection:function(e,t,r){this.connect(e,t,(n,i)=>{n?r(n):(r(!1),i.close())})},getDatabases:function(e,t,r){this.connect(e,t,(n,i)=>{if(n)return t.log("error",n),r(n);i.db().admin().listDatabases((o,c)=>o?(t.log("error",o),i.close(),r(cr(_Z,o))):(c=c.databases.map(l=>l.name),t.log("info",c,"All databases list",e.hiddenKeys),i.close(),r(null,c)))})},getDocumentKinds:function(e,t,r,n){let i=n.require("async");this.connect(e,t,(s,o)=>{if(s)t.log("error",s),console.log(s);else{let c=o.db(e.database);if(!c)return o.close(),r(cr(KS,`Failed connection to database ${e.database}`));c.listCollections().toArray((l,u)=>{l?(t.log("error",l),o.close(),r(cr(p1,l))):(u=e.includeSystemCollection?u:h1(u),t.log("info",u,"Mapped collection list"),i.map(u,(p,d)=>{let f=c.collection(p.name);GS(f,e.recordSamplingSettings,function(h,m){if(h)return t.log("error",h),d(h,null);{t.log("info",{collectionItem:p.name},"Getting documents for current collectionItem",e.hiddenKeys),m=m;let v=PZ(m,{sampleSize:20}),x=BZ({bucketName:p.name,inference:v,isCustomInfer:!0,excludeDocKind:e.excludeDocKind},90);return d(h,x)}})},(p,d)=>(p&&t.log("error",p),o.close(),r(cr(AZ,p),d))))})}})},getDbCollectionsNames:function(e,t,r,n){let i=n.require("lodash"),s=n.require("async");this.connect(e,t,(o,c)=>{if(o)return t.log("error",o),r(o);{let l=c.db(e.database);if(!l)return c.close(),r(cr(KS,`Failed connection to database ${e.database}`));t.log("info",{Database:e.database},"Getting collections list for current database",e.hiddenKeys),l.listCollections().toArray((u,p)=>{if(u)return t.log("error",u),c.close(),r(cr(p1,u));{let d=(e.includeSystemCollection?p:h1(p)).map(f=>f.name);t.log("info",d,"Collection list for current database",e.hiddenKeys),qZ(i,s,e,d,l,function(f,h){c.close(),f?r(f):r(null,h)})}})}})},getDbCollectionsData:function(e,t,r,n){let i=n.require("async"),s=e.includeEmptyCollection,{recordSamplingSettings:o,fieldInference:c}=e;t.progress=t.progress||(()=>{}),t.log("info",IZ(o,c),"Reverse-Engineering sampling params",e.hiddenKeys);let l=e.collectionData.dataBaseNames;t.log("info",{CollectionList:l},"Selected collection list",e.hiddenKeys);let u=new OZ(e.database,e.host,e.password,e.isLocal);this.connect(e,t,async(p,d)=>{if(p)return t.progress({message:`Error of connecting to the instance.
 `+p.message,containerName:e.database,entityName:""}),t.log("error",p),r(p);try{let f=d.db(e.database);if(!f){d.close();let m=`Failed connection to database ${e.database}`;return t.log("error",m),t.progress({message:`Error of connecting to the database .
 `+e.database,containerName:e.database,entityName:""}),r(cr(KS,m))}let h={accountID:e.password,version:"4.0.0"};await Promise.all([RZ(f).catch(m=>{t.progress({message:"Error while getting version: "+m.message,containerName:e.database,entityName:""}),t.log("error",m)}),e.includeAccountInformation?u.getAdditionalAccountInfo(e).catch(m=>(t.progress({message:"Error while getting control pane data: "+m.message,containerName:e.database,entityName:""}),t.log("error",m,"Error while getting control pane data"),{})):Promise.resolve({})]).then(([m,v])=>{h={...h,...v,apiExperience:"Mongo API",version:m.version}}),i.map(l,(m,v)=>{let x=f.collection(m);t.progress({message:"Collection data loading ...",containerName:e.database,entityName:m}),kZ(f,m,w=>{t.progress({message:`Error of getting collection data .
 `+w.message,containerName:e.database,entityName:m}),t.log("error",w)},(w,C={})=>{w&&(t.progress({message:`Error of getting collection data .
 `+w.message,containerName:e.database,entityName:m}),t.log("error",w)),C={...C,dbId:e.database},t.progress({message:"Collection data has loaded",containerName:e.database,entityName:m}),t.progress({message:"Loading documents...",containerName:e.database,entityName:m}),GS(x,o,(g,T)=>{if(g)return t.progress({message:`Error of loading documents.
 `+g.message,containerName:e.database,entityName:m}),t.log("error",g),v(g,null);{t.progress({message:"Documents have loaded",containerName:e.database,entityName:m}),T=T;let N=e.documentKinds[m].documentKindName||"*",_=e.collectionData.collections[m],D=[];if(N!=="*"){if(_)_.forEach(k=>{let A=T.filter(z=>z[N]===k),F={dbName:m,collectionName:String(k),documents:xp(A||[]),indexes:[],bucketIndexes:[],views:[],validation:{jsonSchema:Sp(A[0])},id:"_id",docType:N,bucketInfo:C};c.active==="field"&&(F.documentTemplate=A[0]||null),(F.documents.length>0||s)&&D.push(F)});else if(s){let k={dbName:m,emptyBucket:!0,indexes:[],bucketIndexes:[],views:[],validation:!1,bucketInfo:C};D.push(k)}}else{let k={dbName:m,collectionName:m,documents:xp(T||[]),indexes:[],bucketIndexes:[],views:[],validation:{jsonSchema:Sp(T[0])},docType:m,bucketInfo:C};c.active==="field"&&(k.documentTemplate=T[0]||null),(k.documents.length>0||s)&&D.push(k)}return v(g,D)}})})},(m,v)=>(m&&t.log("error",m),d.close(),r(cr(f1,m),v,h)))}catch(f){return f&&t.log("error",f),d.close(),r(cr(f1,f))}})}};var d1=a(e=>{if(e instanceof ct.BSONRegExp||e instanceof RegExp)return e.toString();if(e instanceof Date)return e.toISOString();if(e instanceof ct.ObjectID)return`ObjectId("${e.toString()}")`;if(e instanceof ct.MinKey)return"";if(e instanceof ct.MaxKey)return"";if(e instanceof ct.Code)return e.code;if(e instanceof ct.Decimal128)return 1;if(e instanceof ct.Long)return 1;if(e instanceof ct.Binary)return e.buffer.toString("base64");if(typeof e=="number"&&Math.abs(e)>2**32)return Math.abs(e)%2**32},"getValue");function xp(e){return Array.isArray(e)?e.map(xp):d1(e)!==void 0?d1(e):e&&typeof e=="object"?Object.keys(e).reduce((t,r)=>({...t,[r]:xp(e[r])}),{}):e}a(xp,"adjustDocuments");function Sp(e){if(Array.isArray(e)){let t=Sp(e[0]);if(t)return{items:t}}else{if(e instanceof ct.BSONRegExp||e instanceof RegExp)return{type:"regex"};if(e instanceof ct.ObjectID)return{type:"objectId"};if(e instanceof ct.MinKey)return{type:"minKey"};if(e instanceof ct.MaxKey)return{type:"maxKey"};if(e instanceof ct.Code)return{type:"JavaScript"};if(e instanceof ct.Long)return{type:"numeric",mode:"integer64"};if(typeof e=="number"&&Math.abs(e)>2**32)return{type:"numeric",mode:"integer64"};if(e instanceof ct.Decimal128)return{type:"numeric",mode:"decimal128"};if(e instanceof ct.Binary)return{type:"binary"};if(e instanceof Date)return{type:"date"};if(e&&typeof e=="object"){let t=Object.keys(e).reduce((r,n)=>{let i=Sp(e[n]);return i?{...r,[n]:i}:r},{});return Object.keys(t).length===0?void 0:{properties:t}}}}a(Sp,"getJsonSchema");function RZ(e){return new Promise((t,r)=>{e.admin().buildInfo((n,i)=>{n?r(n):t(i)})})}a(RZ,"getBuildInfo");function IZ(e,t){let r={},n=e[e.active].value,i=e.active==="relative"?"%":" records max";return r.recordSampling=`${e.active} ${n}${i}`,r.fieldInference=t.active==="field"?"keep field order":"alphabetical order",r}a(IZ,"getSamplingInfo");function qZ(e,t,r,n,i,s){t.map(n,(o,c)=>{let l=i.collection(o);if(!l)return c(`Failed got collection ${o}`);GS(l,r.recordSamplingSettings,(u,p)=>{if(u)return c(u);{p=p;let d=r.documentKinds[o].documentKindName||"*",f=[];d!=="*"&&(f=p.map(function(m){return m[d]}),f=f.filter(m=>!!m),f=e.uniq(f));let h=MZ(e,f,o,i,p.length===0);return c(u,h)}})},(o,c)=>s(cr(NZ,o),c))}a(qZ,"handleBucket");function MZ(e,t,r,n,i){let s=e.uniq(t);return{dbName:r,dbCollections:s,isEmpty:i}}a(MZ,"prepareConnectionDataItem");function PZ(e,t){function r(s){return{}.toString.call(s).split(" ")[1].slice(0,-1).toLowerCase()}a(r,"typeOf");let n=t.sampleSize||30,i={"#docs":0,$schema:"http://json-schema.org/schema#",properties:{}};e.forEach(s=>{i["#docs"]++;for(let o in s)i.properties.hasOwnProperty(o)?(i.properties[o]["#docs"]++,i.properties[o].samples.indexOf(s[o])===-1&&i.properties[o].samples.length<n&&i.properties[o].samples.push(s[o]),i.properties[o].type=r(s[o])):i.properties[o]={"#docs":1,"%docs":100,samples:[s[o]],type:r(s[o])}});for(let s in i.properties)i.properties[s]["%docs"]=Math.round(i.properties[s]["#docs"]/i["#docs"]*100,2);return i}a(PZ,"generateCustomInferSchema");function BZ(e,t){let r=[],n=[],i={key:"",probability:0};if(e.isCustomInfer){let o=1/0,c=e.inference.properties;for(let l in c)if(typeof c[l].samples[0]!="object")if(c[l]["%docs"]>=t&&c[l].samples.length){if(r.push(l),e.excludeDocKind.indexOf(l)===-1){if(c[l]["%docs"]===i.probability&&i.key==="type")continue;c[l]["%docs"]>=i.probability&&c[l].samples.length<o&&(o=c[l].samples.length,i.probability=c[l]["%docs"],i.key=l)}}else n.push(l)}else{let o=e.flavorValue?e.flavorValue.split(","):e.inference[0].Flavor.split(",");if(o.length===1){r=Object.keys(e.inference[0].properties);let c=o[0].match(/([\s\S]*?) \= "?([\s\S]*?)"?$/);i.key=c.length?c[1]:""}}return{bucketName:e.bucketName,documentList:r,documentKind:i.key,preSelectedDocumentKind:e.preSelectedDocumentKind,otherDocKinds:n}}a(BZ,"getDocumentKindDataFromInfer");function h1(e){let t=["system.indexes"];return e.filter(r=>r.name.length<8||r.name.substring(0,7)!=="system.")}a(h1,"filterSystemCollections");var DZ=a((e,t)=>{if(t.active==="absolute")return Number(t.absolute.value);let r=Math.ceil(e*t.relative.value/100);return Math.min(r,t.maxValue)},"getSampleDocSize");function GS(e,t,r){e.countDocuments((n,i)=>{let s=!n&&i>0?i:1e3,o=DZ(s,t),c=o>1e3?Math.ceil(o/1e3):1;LZ(c,function(l,u){let p=l<c-1||o%1e3===0?1e3:o%1e3;e.find().limit(p).toArray(u)},r)})}a(GS,"getData");function LZ(e,t,r){let n=[],i=0,s=a(function(o,c){o?r(o):(n=n.concat(c),++i<e?t(i,s):r(o,n))},"handler");try{t(i,s)}catch(o){r(o)}}a(LZ,"asyncLoop");function cr(e,t){return t?(t.code&&(e=t.code),t=t.message||t.msg||t.errmsg||t,{code:e,message:t}):null}a(cr,"createError");var jZ=a((e,t)=>new Promise((r,n)=>{e.command({customAction:"GetCollection",collection:t},(i,s)=>{if(i)return n(i);if(!s.shardKeyDefinition)return r("");let o=Object.keys(s.shardKeyDefinition)[0]||"";return r(o)})}),"getShardingKey"),UZ=a((e,t,r)=>new Promise((n,i)=>{e.command({listIndexes:t},(s,o)=>{var d;if(s)return i(s);let c=((d=o==null?void 0:o.cursor)==null?void 0:d.firstBatch)||[],l=c.filter(f=>f.unique).map(f=>({attributePath:Object.keys(f.key).filter(h=>h!==r)})),u=c.filter(f=>f.expireAfterSeconds!==void 0).map(f=>({expireAfterSeconds:f.expireAfterSeconds,name:f.name,key:Object.keys(f.key)[0]}))[0],p=c.filter(f=>!(f.unique||f.expireAfterSeconds!==void 0||Object.keys(f.key).some(h=>h==="DocumentDBDefaultIndex"))).map(f=>{let h=a(v=>{let x=Object.values(v.key).length>1,w=Object.keys(v.key).some(C=>C.endsWith("$**"));return x?"Compound":w?"Wildcard":"Single Field"},"getIndexType"),m=a(v=>v===-1?"descending":v==="2dsphere"?"2dsphere":"ascending","type");return{name:f.name,indexType:h(f),indexKey:Object.keys(f.key).map(v=>({type:m(f.key[v]),name:v.replace(/\.\$\*\*$/,"")}))}});n({uniqueKeys:l,ttlIndex:u,indexes:p})})}),"getAllTypesIndexes");function kZ(e,t,r,n){let i={};jZ(e,t).then(s=>(i.shardKey=s,UZ(e,t,s)),r).then(s=>{i.uniqueKey=s.uniqueKeys,i.indexes=s.indexes,i={...i,...FZ(s.ttlIndex)}},r).then(()=>{n(null,i)},s=>{n(s,i)})}a(kZ,"getBucketInfo");function FZ(e){let t="Off";if(!e)return{TTL:t};e.expireAfterSeconds===-1?t="On (no default)":t="On";let r=e.expireAfterSeconds;return{TTL:t,TTLseconds:r}}a(FZ,"convertTtlIndex");
/*! Bundled license information:

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
